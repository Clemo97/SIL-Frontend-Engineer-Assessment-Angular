"use strict";(self.webpackChunkangular_api_userblog=self.webpackChunkangular_api_userblog||[]).push([[179],{58:(vo,xr,st)=>{st.d(xr,{BH:()=>Jt,DV:()=>fi,Dv:()=>En,G6:()=>qs,GJ:()=>Jn,L:()=>wt,LL:()=>te,Pz:()=>Bt,Sg:()=>hi,UG:()=>ee,UI:()=>Fl,US:()=>cn,Wj:()=>ts,Wl:()=>re,Yr:()=>Zo,ZB:()=>Pe,ZR:()=>Q,aH:()=>un,b$:()=>qn,cI:()=>Sn,dS:()=>Wa,eu:()=>q,g5:()=>W,gK:()=>Xr,gQ:()=>pi,h$:()=>cr,hl:()=>H,hu:()=>ke,jU:()=>vn,lb:()=>Vi,m9:()=>lu,ne:()=>Ws,p$:()=>fe,pd:()=>ou,r3:()=>Lr,ru:()=>dn,tV:()=>he,uI:()=>ur,ug:()=>ta,vZ:()=>bo,w1:()=>zs,w9:()=>Tr,xO:()=>su,xb:()=>Li,z$:()=>ut,zd:()=>ws});const I={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},ke=function(R,T){if(!R)throw W(T)},W=function(R){return new Error("Firebase Database ("+I.SDK_VERSION+") INTERNAL ASSERT FAILED: "+R)},We=function(R){const T=[];let N=0;for(let j=0;j<R.length;j++){let V=R.charCodeAt(j);V<128?T[N++]=V:V<2048?(T[N++]=V>>6|192,T[N++]=63&V|128):55296==(64512&V)&&j+1<R.length&&56320==(64512&R.charCodeAt(j+1))?(V=65536+((1023&V)<<10)+(1023&R.charCodeAt(++j)),T[N++]=V>>18|240,T[N++]=V>>12&63|128,T[N++]=V>>6&63|128,T[N++]=63&V|128):(T[N++]=V>>12|224,T[N++]=V>>6&63|128,T[N++]=63&V|128)}return T},cn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(R,T){if(!Array.isArray(R))throw Error("encodeByteArray takes an array as a parameter");this.init_();const N=T?this.byteToCharMapWebSafe_:this.byteToCharMap_,j=[];for(let V=0;V<R.length;V+=3){const K=R[V],$e=V+1<R.length,ht=$e?R[V+1]:0,Dt=V+2<R.length,on=Dt?R[V+2]:0;let Sr=(15&ht)<<2|on>>6,Qt=63&on;Dt||(Qt=64,$e||(Sr=64)),j.push(N[K>>2],N[(3&K)<<4|ht>>4],N[Sr],N[Qt])}return j.join("")},encodeString(R,T){return this.HAS_NATIVE_SUPPORT&&!T?btoa(R):this.encodeByteArray(We(R),T)},decodeString(R,T){return this.HAS_NATIVE_SUPPORT&&!T?atob(R):function(R){const T=[];let N=0,j=0;for(;N<R.length;){const V=R[N++];if(V<128)T[j++]=String.fromCharCode(V);else if(V>191&&V<224){const K=R[N++];T[j++]=String.fromCharCode((31&V)<<6|63&K)}else if(V>239&&V<365){const Dt=((7&V)<<18|(63&R[N++])<<12|(63&R[N++])<<6|63&R[N++])-65536;T[j++]=String.fromCharCode(55296+(Dt>>10)),T[j++]=String.fromCharCode(56320+(1023&Dt))}else{const K=R[N++],$e=R[N++];T[j++]=String.fromCharCode((15&V)<<12|(63&K)<<6|63&$e)}}return T.join("")}(this.decodeStringToByteArray(R,T))},decodeStringToByteArray(R,T){this.init_();const N=T?this.charToByteMapWebSafe_:this.charToByteMap_,j=[];for(let V=0;V<R.length;){const K=N[R.charAt(V++)],ht=V<R.length?N[R.charAt(V)]:0;++V;const on=V<R.length?N[R.charAt(V)]:64;++V;const Re=V<R.length?N[R.charAt(V)]:64;if(++V,null==K||null==ht||null==on||null==Re)throw new Dn;j.push(K<<2|ht>>4),64!==on&&(j.push(ht<<4&240|on>>2),64!==Re&&j.push(on<<6&192|Re))}return j},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let R=0;R<this.ENCODED_VALS.length;R++)this.byteToCharMap_[R]=this.ENCODED_VALS.charAt(R),this.charToByteMap_[this.byteToCharMap_[R]]=R,this.byteToCharMapWebSafe_[R]=this.ENCODED_VALS_WEBSAFE.charAt(R),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[R]]=R,R>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(R)]=R,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(R)]=R)}}};class Dn extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cr=function(R){const T=We(R);return cn.encodeByteArray(T,!0)},wt=function(R){return cr(R).replace(/\./g,"")},he=function(R){try{return cn.decodeString(R,!0)}catch(T){console.error("base64Decode failed: ",T)}return null};function fe(R){return Pe(void 0,R)}function Pe(R,T){if(!(T instanceof Object))return T;switch(T.constructor){case Date:return new Date(T.getTime());case Object:void 0===R&&(R={});break;case Array:R=[];break;default:return T}for(const N in T)!T.hasOwnProperty(N)||!yt(N)||(R[N]=Pe(R[N],T[N]));return R}function yt(R){return"__proto__"!==R}const ct=()=>{try{return function Ot(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const R=process.env.__FIREBASE_DEFAULTS__;return R?JSON.parse(R):void 0})()||(()=>{if(typeof document>"u")return;let R;try{R=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const T=R&&he(R[1]);return T&&JSON.parse(T)})()}catch(R){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${R}`)}},un=()=>{var R;return null===(R=ct())||void 0===R?void 0:R.config},Bt=R=>{var T;return null===(T=ct())||void 0===T?void 0:T[`_${R}`]};class Jt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((T,N)=>{this.resolve=T,this.reject=N})}wrapCallback(T){return(N,j)=>{N?this.reject(N):this.resolve(j),"function"==typeof T&&(this.promise.catch(()=>{}),1===T.length?T(N):T(N,j))}}}function hi(R,T){if(R.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const j=T||"demo-project",V=R.iat||0,K=R.sub||R.user_id;if(!K)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const $e=Object.assign({iss:`https://securetoken.google.com/${j}`,aud:j,iat:V,exp:V+3600,auth_time:V,sub:K,user_id:K,firebase:{sign_in_provider:"custom",identities:{}}},R);return[wt(JSON.stringify({alg:"none",type:"JWT"})),wt(JSON.stringify($e)),""].join(".")}function ut(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ur(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ut())}function ee(){var R;const T=null===(R=ct())||void 0===R?void 0:R.forceEnvironment;if("node"===T)return!0;if("browser"===T)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function vn(){return"object"==typeof self&&self.self===self}function dn(){const R="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof R&&void 0!==R.id}function qn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function zs(){const R=ut();return R.indexOf("MSIE ")>=0||R.indexOf("Trident/")>=0}function Zo(){return!0===I.NODE_CLIENT||!0===I.NODE_ADMIN}function qs(){return!ee()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function H(){try{return"object"==typeof indexedDB}catch{return!1}}function q(){return new Promise((R,T)=>{try{let N=!0;const j="validate-browser-context-for-indexeddb-analytics-module",V=self.indexedDB.open(j);V.onsuccess=()=>{V.result.close(),N||self.indexedDB.deleteDatabase(j),R(!0)},V.onupgradeneeded=()=>{N=!1},V.onerror=()=>{var K;T((null===(K=V.error)||void 0===K?void 0:K.message)||"")}}catch(N){T(N)}})}class Q extends Error{constructor(T,N,j){super(N),this.code=T,this.customData=j,this.name="FirebaseError",Object.setPrototypeOf(this,Q.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,te.prototype.create)}}class te{constructor(T,N,j){this.service=T,this.serviceName=N,this.errors=j}create(T,...N){const j=N[0]||{},V=`${this.service}/${T}`,K=this.errors[T],$e=K?function be(R,T){return R.replace(Fe,(N,j)=>{const V=T[j];return null!=V?String(V):`<${j}?>`})}(K,j):"Error";return new Q(V,`${this.serviceName}: ${$e} (${V}).`,j)}}const Fe=/\{\$([^}]+)}/g;function Sn(R){return JSON.parse(R)}function re(R){return JSON.stringify(R)}const xt=function(R){let T={},N={},j={},V="";try{const K=R.split(".");T=Sn(he(K[0])||""),N=Sn(he(K[1])||""),V=K[2],j=N.d||{},delete N.d}catch{}return{header:T,claims:N,data:j,signature:V}},Tr=function(R){const N=xt(R).claims;return!!N&&"object"==typeof N&&N.hasOwnProperty("iat")},Jn=function(R){const T=xt(R).claims;return"object"==typeof T&&!0===T.admin};function Lr(R,T){return Object.prototype.hasOwnProperty.call(R,T)}function fi(R,T){if(Object.prototype.hasOwnProperty.call(R,T))return R[T]}function Li(R){for(const T in R)if(Object.prototype.hasOwnProperty.call(R,T))return!1;return!0}function Fl(R,T,N){const j={};for(const V in R)Object.prototype.hasOwnProperty.call(R,V)&&(j[V]=T.call(N,R[V],V,R));return j}function bo(R,T){if(R===T)return!0;const N=Object.keys(R),j=Object.keys(T);for(const V of N){if(!j.includes(V))return!1;const K=R[V],$e=T[V];if(Yo(K)&&Yo($e)){if(!bo(K,$e))return!1}else if(K!==$e)return!1}for(const V of j)if(!N.includes(V))return!1;return!0}function Yo(R){return null!==R&&"object"==typeof R}function su(R){const T=[];for(const[N,j]of Object.entries(R))Array.isArray(j)?j.forEach(V=>{T.push(encodeURIComponent(N)+"="+encodeURIComponent(V))}):T.push(encodeURIComponent(N)+"="+encodeURIComponent(j));return T.length?"&"+T.join("&"):""}function ws(R){const T={};return R.replace(/^\?/,"").split("&").forEach(j=>{if(j){const[V,K]=j.split("=");T[decodeURIComponent(V)]=decodeURIComponent(K)}}),T}function ou(R){const T=R.indexOf("?");if(!T)return"";const N=R.indexOf("#",T);return R.substring(T,N>0?N:void 0)}class pi{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let T=1;T<this.blockSize;++T)this.pad_[T]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(T,N){N||(N=0);const j=this.W_;if("string"==typeof T)for(let Re=0;Re<16;Re++)j[Re]=T.charCodeAt(N)<<24|T.charCodeAt(N+1)<<16|T.charCodeAt(N+2)<<8|T.charCodeAt(N+3),N+=4;else for(let Re=0;Re<16;Re++)j[Re]=T[N]<<24|T[N+1]<<16|T[N+2]<<8|T[N+3],N+=4;for(let Re=16;Re<80;Re++){const Sr=j[Re-3]^j[Re-8]^j[Re-14]^j[Re-16];j[Re]=4294967295&(Sr<<1|Sr>>>31)}let on,dr,V=this.chain_[0],K=this.chain_[1],$e=this.chain_[2],ht=this.chain_[3],Dt=this.chain_[4];for(let Re=0;Re<80;Re++){Re<40?Re<20?(on=ht^K&($e^ht),dr=1518500249):(on=K^$e^ht,dr=1859775393):Re<60?(on=K&$e|ht&(K|$e),dr=2400959708):(on=K^$e^ht,dr=3395469782);const Sr=(V<<5|V>>>27)+on+Dt+dr+j[Re]&4294967295;Dt=ht,ht=$e,$e=4294967295&(K<<30|K>>>2),K=V,V=Sr}this.chain_[0]=this.chain_[0]+V&4294967295,this.chain_[1]=this.chain_[1]+K&4294967295,this.chain_[2]=this.chain_[2]+$e&4294967295,this.chain_[3]=this.chain_[3]+ht&4294967295,this.chain_[4]=this.chain_[4]+Dt&4294967295}update(T,N){if(null==T)return;void 0===N&&(N=T.length);const j=N-this.blockSize;let V=0;const K=this.buf_;let $e=this.inbuf_;for(;V<N;){if(0===$e)for(;V<=j;)this.compress_(T,V),V+=this.blockSize;if("string"==typeof T){for(;V<N;)if(K[$e]=T.charCodeAt(V),++$e,++V,$e===this.blockSize){this.compress_(K),$e=0;break}}else for(;V<N;)if(K[$e]=T[V],++$e,++V,$e===this.blockSize){this.compress_(K),$e=0;break}}this.inbuf_=$e,this.total_+=N}digest(){const T=[];let N=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let V=this.blockSize-1;V>=56;V--)this.buf_[V]=255&N,N/=256;this.compress_(this.buf_);let j=0;for(let V=0;V<5;V++)for(let K=24;K>=0;K-=8)T[j]=this.chain_[V]>>K&255,++j;return T}}function Ws(R,T){const N=new Xo(R,T);return N.subscribe.bind(N)}class Xo{constructor(T,N){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=N,this.task.then(()=>{T(this)}).catch(j=>{this.error(j)})}next(T){this.forEachObserver(N=>{N.next(T)})}error(T){this.forEachObserver(N=>{N.error(T)}),this.close(T)}complete(){this.forEachObserver(T=>{T.complete()}),this.close()}subscribe(T,N,j){let V;if(void 0===T&&void 0===N&&void 0===j)throw new Error("Missing Observer.");V=function Yr(R,T){if("object"!=typeof R||null===R)return!1;for(const N of T)if(N in R&&"function"==typeof R[N])return!0;return!1}(T,["next","error","complete"])?T:{next:T,error:N,complete:j},void 0===V.next&&(V.next=ea),void 0===V.error&&(V.error=ea),void 0===V.complete&&(V.complete=ea);const K=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?V.error(this.finalError):V.complete()}catch{}}),this.observers.push(V),K}unsubscribeOne(T){void 0===this.observers||void 0===this.observers[T]||(delete this.observers[T],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(T){if(!this.finalized)for(let N=0;N<this.observers.length;N++)this.sendOne(N,T)}sendOne(T,N){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[T])try{N(this.observers[T])}catch(j){typeof console<"u"&&console.error&&console.error(j)}})}close(T){this.finalized||(this.finalized=!0,void 0!==T&&(this.finalError=T),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ea(){}const En=function(R,T,N,j){let V;if(j<T?V="at least "+T:j>N&&(V=0===N?"none":"no more than "+N),V)throw new Error(R+" failed: Was called with "+j+(1===j?" argument.":" arguments.")+" Expects "+V+".")};function Xr(R,T){return`${R} failed: ${T} argument `}function ts(R,T,N,j){if((!j||N)&&"function"!=typeof N)throw new Error(Xr(R,T)+"must be a valid function.")}function Vi(R,T,N,j){if((!j||N)&&("object"!=typeof N||null===N))throw new Error(Xr(R,T)+"must be a valid context object.")}const Wa=function(R){const T=[];let N=0;for(let j=0;j<R.length;j++){let V=R.charCodeAt(j);if(V>=55296&&V<=56319){const K=V-55296;j++,ke(j<R.length,"Surrogate pair missing trail surrogate."),V=65536+(K<<10)+(R.charCodeAt(j)-56320)}V<128?T[N++]=V:V<2048?(T[N++]=V>>6|192,T[N++]=63&V|128):V<65536?(T[N++]=V>>12|224,T[N++]=V>>6&63|128,T[N++]=63&V|128):(T[N++]=V>>18|240,T[N++]=V>>12&63|128,T[N++]=V>>6&63|128,T[N++]=63&V|128)}return T},ta=function(R){let T=0;for(let N=0;N<R.length;N++){const j=R.charCodeAt(N);j<128?T++:j<2048?T+=2:j>=55296&&j<=56319?(T+=4,N++):T+=3}return T};function lu(R){return R&&R._delegate?R._delegate:R}},653:(vo,xr,st)=>{function I(n){return"function"==typeof n}function ke(n){const t=n(r=>{Error.call(r),r.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const W=ke(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((r,i)=>`${i+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function We(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class kt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const s of t)s.remove(this);else t.remove(this);const{initialTeardown:r}=this;if(I(r))try{r()}catch(s){e=s instanceof W?s.errors:[s]}const{_finalizers:i}=this;if(i){this._finalizers=null;for(const s of i)try{cr(s)}catch(o){e=e??[],o instanceof W?e=[...e,...o.errors]:e.push(o)}}if(e)throw new W(e)}}add(e){var t;if(e&&e!==this)if(this.closed)cr(e);else{if(e instanceof kt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&We(t,e)}remove(e){const{_finalizers:t}=this;t&&We(t,e),e instanceof kt&&e._removeParent(this)}}kt.EMPTY=(()=>{const n=new kt;return n.closed=!0,n})();const cn=kt.EMPTY;function Dn(n){return n instanceof kt||n&&"closed"in n&&I(n.remove)&&I(n.add)&&I(n.unsubscribe)}function cr(n){I(n)?n():n.unsubscribe()}const wt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},he={setTimeout(n,e,...t){const{delegate:r}=he;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=he;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function fe(n){he.setTimeout(()=>{const{onUnhandledError:e}=wt;if(!e)throw n;e(n)})}function Pe(){}const yt=Vt("C",void 0,void 0);function Vt(n,e,t){return{kind:n,value:e,error:t}}let Ze=null;function ct(n){if(wt.useDeprecatedSynchronousErrorHandling){const e=!Ze;if(e&&(Ze={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:r}=Ze;if(Ze=null,t)throw r}}else n()}class Ar extends kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Dn(e)&&e.add(this)):this.destination=vn}static create(e,t,r){return new hi(e,t,r)}next(e){this.isStopped?ee(function Ir(n){return Vt("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?ee(function Ot(n){return Vt("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?ee(yt,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const un=Function.prototype.bind;function Bt(n,e){return un.call(n,e)}class Jt{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){ut(r)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){ut(r)}else ut(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){ut(t)}}}class hi extends Ar{constructor(e,t,r){let i;if(super(),I(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let s;this&&wt.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Bt(e.next,s),error:e.error&&Bt(e.error,s),complete:e.complete&&Bt(e.complete,s)}):i=e}this.destination=new Jt(i)}}function ut(n){wt.useDeprecatedSynchronousErrorHandling?function Cr(n){wt.useDeprecatedSynchronousErrorHandling&&Ze&&(Ze.errorThrown=!0,Ze.error=n)}(n):fe(n)}function ee(n,e){const{onStoppedNotification:t}=wt;t&&he.setTimeout(()=>t(n,e))}const vn={closed:!0,next:Pe,error:function ur(n){throw n},complete:Pe},dn="function"==typeof Symbol&&Symbol.observable||"@@observable";function qn(n){return n}function zs(n){return 0===n.length?qn:1===n.length?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}let dt=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){const s=function H(n){return n&&n instanceof Ar||function qs(n){return n&&I(n.next)&&I(n.error)&&I(n.complete)}(n)&&Dn(n)}(t)?t:new hi(t,r,i);return ct(()=>{const{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return new(r=Zo(r))((i,s)=>{const o=new hi({next:a=>{try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(t){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(t)}[dn](){return this}pipe(...t){return zs(t)(this)}toPromise(t){return new(t=Zo(t))((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return n.create=e=>new n(e),n})();function Zo(n){var e;return null!==(e=n??wt.Promise)&&void 0!==e?e:Promise}const q=ke(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let z=(()=>{class n extends dt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const r=new J(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new q}next(t){ct(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(t)}})}error(t){ct(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){ct(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:r,isStopped:i,observers:s}=this;return r||i?cn:(this.currentObservers=null,s.push(t),new kt(()=>{this.currentObservers=null,We(s,t)}))}_checkFinalizedStatuses(t){const{hasError:r,thrownError:i,isStopped:s}=this;r?t.error(i):s&&t.complete()}asObservable(){const t=new dt;return t.source=this,t}}return n.create=(e,t)=>new J(e,t),n})();class J extends z{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===r||r.call(t,e)}error(e){var t,r;null===(r=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===r||r.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,r;return null!==(r=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==r?r:cn}}class Q extends z{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function te(n){return I(n?.lift)}function be(n){return e=>{if(te(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Fe(n,e,t,r,i){return new Sn(n,e,t,r,i)}class Sn extends Ar{constructor(e,t,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(l){e.error(l)}}:super._next,this._error=i?function(a){try{i(a)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function re(n,e){return be((t,r)=>{let i=0;t.subscribe(Fe(r,s=>{r.next(n.call(e,s,i++))}))})}var xt=st(582);const bn=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function sn(n){return I(n?.then)}function Tr(n){return I(n[dn])}function Jn(n){return Symbol.asyncIterator&&I(n?.[Symbol.asyncIterator])}function Lr(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const Li=function fi(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function Fl(n){return I(n?.[Li])}function bo(n){return(0,xt.FC)(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:r,done:i}=yield(0,xt.qq)(t.read());if(i)return yield(0,xt.qq)(void 0);yield yield(0,xt.qq)(r)}}finally{t.releaseLock()}})}function Yo(n){return I(n?.getReader)}function er(n){if(n instanceof dt)return n;if(null!=n){if(Tr(n))return function su(n){return new dt(e=>{const t=n[dn]();if(I(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(bn(n))return function ws(n){return new dt(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(sn(n))return function ou(n){return new dt(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,fe)})}(n);if(Jn(n))return Ws(n);if(Fl(n))return function pi(n){return new dt(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(Yo(n))return function Xo(n){return Ws(bo(n))}(n)}throw Lr(n)}function Ws(n){return new dt(e=>{(function Jo(n,e){var t,r,i,s;return(0,xt.mG)(this,void 0,void 0,function*(){try{for(t=(0,xt.KL)(n);!(r=yield t.next()).done;)if(e.next(r.value),e.closed)return}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=t.return)&&(yield s.call(t))}finally{if(i)throw i.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function Yr(n,e,t,r=0,i=!1){const s=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(s),!i)return s}function En(n,e,t=1/0){return I(e)?En((r,i)=>re((s,o)=>e(r,s,i,o))(er(n(r,i))),t):("number"==typeof e&&(t=e),be((r,i)=>function ea(n,e,t,r,i,s,o,a){const l=[];let c=0,h=0,p=!1;const g=()=>{p&&!l.length&&!c&&e.complete()},_=E=>c<r?v(E):l.push(E),v=E=>{s&&e.next(E),c++;let x=!1;er(t(E,h++)).subscribe(Fe(e,M=>{i?.(M),s?_(M):e.next(M)},()=>{x=!0},void 0,()=>{if(x)try{for(c--;l.length&&c<r;){const M=l.shift();o?Yr(e,o,()=>v(M)):v(M)}g()}catch(M){e.error(M)}}))};return n.subscribe(Fe(e,_,()=>{p=!0,g()})),()=>{a?.()}}(r,i,n,t)))}function Xr(n=1/0){return En(qn,n)}const Dr=new dt(n=>n.complete());function ta(n){return n[n.length-1]}function Ll(n){return I(ta(n))?n.pop():void 0}function Ks(n){return function Wa(n){return n&&I(n.schedule)}(ta(n))?n.pop():void 0}function Vr(n,e=0){return be((t,r)=>{t.subscribe(Fe(r,i=>Yr(r,n,()=>r.next(i),e),()=>Yr(r,n,()=>r.complete(),e),i=>Yr(r,n,()=>r.error(i),e)))})}function Bi(n,e=0){return be((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function R(n,e){if(!n)throw new Error("Iterable cannot be null");return new dt(t=>{Yr(t,e,()=>{const r=n[Symbol.asyncIterator]();Yr(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function j(n,e){return e?function N(n,e){if(null!=n){if(Tr(n))return function Vl(n,e){return er(n).pipe(Bi(e),Vr(e))}(n,e);if(bn(n))return function au(n,e){return new dt(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}(n,e);if(sn(n))return function Kd(n,e){return er(n).pipe(Bi(e),Vr(e))}(n,e);if(Jn(n))return R(n,e);if(Fl(n))return function lu(n,e){return new dt(t=>{let r;return Yr(t,e,()=>{r=n[Li](),Yr(t,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){return void t.error(o)}s?t.complete():t.next(i)},0,!0)}),()=>I(r?.return)&&r.return()})}(n,e);if(Yo(n))return function T(n,e){return R(bo(n),e)}(n,e)}throw Lr(n)}(n,e):er(n)}function V(...n){const e=Ks(n),t=function Eo(n,e){return"number"==typeof ta(n)?n.pop():e}(n,1/0),r=n;return r.length?1===r.length?er(r[0]):Xr(t)(j(r,e)):Dr}function K(...n){return j(n,Ks(n))}function $e(n={}){const{connector:e=(()=>new z),resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return s=>{let o,a,l,c=0,h=!1,p=!1;const g=()=>{a?.unsubscribe(),a=void 0},_=()=>{g(),o=l=void 0,h=p=!1},v=()=>{const E=o;_(),E?.unsubscribe()};return be((E,x)=>{c++,!p&&!h&&g();const M=l=l??e();x.add(()=>{c--,0===c&&!p&&!h&&(a=ht(v,i))}),M.subscribe(x),!o&&c>0&&(o=new hi({next:D=>M.next(D),error:D=>{p=!0,g(),a=ht(_,t,D),M.error(D)},complete:()=>{h=!0,g(),a=ht(_,r),M.complete()}}),er(E).subscribe(o))})(s)}}function ht(n,e,...t){if(!0===e)return void n();if(!1===e)return;const r=new hi({next:()=>{r.unsubscribe(),n()}});return er(e(...t)).subscribe(r)}function Dt(n,e){return be((t,r)=>{let i=null,s=0,o=!1;const a=()=>o&&!i&&r.complete();t.subscribe(Fe(r,l=>{i?.unsubscribe();let c=0;const h=s++;er(n(l,h)).subscribe(i=Fe(r,p=>r.next(e?e(l,p,h,c++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function on(n,e=qn){return n=n??dr,be((t,r)=>{let i,s=!0;t.subscribe(Fe(r,o=>{const a=e(o);(s||!n(i,a))&&(s=!1,i=a,r.next(o))}))})}function dr(n,e){return n===e}function Re(n){for(let e in n)if(n[e]===Re)return e;throw Error("Could not find renamed property on target object.")}function Sr(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Qt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Qt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function Qs(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const Qd=Re({__forward_ref__:Re});function U(n){return n.__forward_ref__=U,n.toString=function(){return Qt(this())},n}function P(n){return ae(n)?n():n}function ae(n){return"function"==typeof n&&n.hasOwnProperty(Qd)&&n.__forward_ref__===U}function Te(n){return n&&!!n.\u0275providers}const It="https://g.co/ng/security#xss";class L extends Error{constructor(e,t){super(function Rn(n,e){return`NG0${Math.abs(n)}${e?": "+e:""}`}(e,t)),this.code=e}}function Me(n){return"string"==typeof n?n:null==n?"":String(n)}function Ul(n,e){throw new L(-201,!1)}function ns(n,e){null==n&&function Ut(n,e,t,r){throw new Error(`ASSERTION ERROR: ${n}`+(null==r?"":` [Expected=> ${t} ${r} ${e} <=Actual]`))}(e,n,null,"!=")}function se(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function gt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Xd(n){return Yp(n,cu)||Yp(n,Ka)}function Yp(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ov(n){return n&&(n.hasOwnProperty(Xp)||n.hasOwnProperty(Fv))?n[Xp]:null}const cu=Re({\u0275prov:Re}),Xp=Re({\u0275inj:Re}),Ka=Re({ngInjectableDef:Re}),Fv=Re({ngInjectorDef:Re});var Ue=(()=>((Ue=Ue||{})[Ue.Default=0]="Default",Ue[Ue.Host=1]="Host",Ue[Ue.Self=2]="Self",Ue[Ue.SkipSelf=4]="SkipSelf",Ue[Ue.Optional=8]="Optional",Ue))();let Jp;function mi(n){const e=Jp;return Jp=n,e}function eh(n,e,t){const r=Xd(n);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:t&Ue.Optional?null:void 0!==e?e:void Ul(Qt(n))}const qt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qa={},tm="__NG_DI_FLAG__",jl="ngTempTokenPath",nm=/\n/gm,th="__source";let Hl;function na(n){const e=Hl;return Hl=n,e}function im(n,e=Ue.Default){if(void 0===Hl)throw new L(-203,!1);return null===Hl?eh(n,void 0,e):Hl.get(n,e&Ue.Optional?null:void 0,e)}function O(n,e=Ue.Default){return(function Jd(){return Jp}()||im)(P(n),e)}function me(n,e=Ue.Default){return O(n,rs(e))}function rs(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function uu(n){const e=[];for(let t=0;t<n.length;t++){const r=P(n[t]);if(Array.isArray(r)){if(0===r.length)throw new L(900,!1);let i,s=Ue.Default;for(let o=0;o<r.length;o++){const a=r[o],l=Zs(a);"number"==typeof l?-1===l?i=a.token:s|=l:i=a}e.push(O(i,s))}else e.push(O(r))}return e}function du(n,e){return n[tm]=e,n.prototype[tm]=e,n}function Zs(n){return n[tm]}function xo(n){return{toString:n}.toString()}var is=(()=>((is=is||{})[is.OnPush=0]="OnPush",is[is.Default=1]="Default",is))(),gi=(()=>{return(n=gi||(gi={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",gi;var n})();const ss={},Ft=[],rh=Re({\u0275cmp:Re}),hu=Re({\u0275dir:Re}),Io=Re({\u0275pipe:Re}),Vv=Re({\u0275mod:Re}),Co=Re({\u0275fac:Re}),Ao=Re({__NG_ELEMENT_ID__:Re}),II=Re({__NG_ENV_ID__:Re});function ih(n,e,t){let r=n.length;for(;;){const i=n.indexOf(e,t);if(-1===i)return i;if(0===i||n.charCodeAt(i-1)<=32){const s=e.length;if(i+s===r||n.charCodeAt(i+s)<=32)return i}t=i+1}}function xs(n,e,t){let r=0;for(;r<t.length;){const i=t[r];if("number"==typeof i){if(0!==i)break;r++;const s=t[r++],o=t[r++],a=t[r++];n.setAttribute(e,o,a,s)}else{const s=i,o=t[++r];Ya(s)?n.setProperty(e,s,o):n.setAttribute(e,s,o),r++}}return r}function Za(n){return 3===n||4===n||6===n}function Ya(n){return 64===n.charCodeAt(0)}function $l(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?t=i:0===t||om(n,t,i,null,-1===t||2===t?e[++r]:null)}}return n}function om(n,e,t,r,i){let s=0,o=n.length;if(-1===e)o=-1;else for(;s<n.length;){const a=n[s++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=s-1;break}}}for(;s<n.length;){const a=n[s];if("number"==typeof a)break;if(a===t){if(null===r)return void(null!==i&&(n[s+1]=i));if(r===n[s+1])return void(n[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(n.splice(o,0,e),s=o+1),n.splice(s++,0,t),null!==r&&n.splice(s++,0,r),null!==i&&n.splice(s++,0,i)}const am="ng-template";function CI(n,e,t){let r=0,i=!0;for(;r<n.length;){let s=n[r++];if("string"==typeof s&&i){const o=n[r++];if(t&&"class"===s&&-1!==ih(o.toLowerCase(),e,0))return!0}else{if(1===s){for(;r<n.length&&"string"==typeof(s=n[r++]);)if(s.toLowerCase()===e)return!0;return!1}"number"==typeof s&&(i=!1)}}return!1}function Xa(n){return 4===n.type&&n.value!==am}function AI(n,e,t){return e===(4!==n.type||t?n.value:am)}function sh(n,e,t){let r=4;const i=n.attrs||[],s=function Uv(n){for(let e=0;e<n.length;e++)if(Za(n[e]))return e;return n.length}(i);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&r){if(r=2|1&r,""!==l&&!AI(n,l,t)||""===l&&1===e.length){if(os(r))return!1;o=!0}}else{const c=8&r?l:e[++a];if(8&r&&null!==n.attrs){if(!CI(n.attrs,c,t)){if(os(r))return!1;o=!0}continue}const p=Bv(8&r?"class":l,i,Xa(n),t);if(-1===p){if(os(r))return!1;o=!0;continue}if(""!==c){let g;g=p>s?"":i[p+1].toLowerCase();const _=8&r?g:null;if(_&&-1!==ih(_,c,0)||2&r&&c!==g){if(os(r))return!1;o=!0}}}}else{if(!o&&!os(r)&&!os(l))return!1;if(o&&os(l))continue;o=!1,r=l|1&r}}return os(r)||o}function os(n){return 0==(1&n)}function Bv(n,e,t,r){if(null===e)return-1;let i=0;if(r||!t){let s=!1;for(;i<e.length;){const o=e[i];if(o===n)return i;if(3===o||6===o)s=!0;else{if(1===o||2===o){let a=e[++i];for(;"string"==typeof a;)a=e[++i];continue}if(4===o)break;if(0===o){i+=4;continue}}i+=s?1:2}return-1}return function TI(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const r=n[t];if("number"==typeof r)return-1;if(r===e)return t;t++}return-1}(e,n)}function oh(n,e,t=!1){for(let r=0;r<e.length;r++)if(sh(n,e[r],t))return!0;return!1}function lm(n,e){e:for(let t=0;t<e.length;t++){const r=e[t];if(n.length===r.length){for(let i=0;i<n.length;i++)if(n[i]!==r[i])continue e;return!0}}return!1}function fu(n,e){return n?":not("+e.trim()+")":e}function jv(n){let e=n[0],t=1,r=2,i="",s=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&r){const a=n[++t];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!os(o)&&(e+=fu(s,i),i=""),r=o,s=s||!os(r);t++}return""!==i&&(e+=fu(s,i)),e}function Mn(n){return xo(()=>{const e=ch(n),t={...e,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===is.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||gi.Emulated,styles:n.styles||Ft,_:null,schemas:n.schemas||null,tView:null,id:""};Gv(t);const r=n.dependencies;return t.directiveDefs=Gl(r,!1),t.pipeDefs=Gl(r,!0),t.id=function dm(n){let e=0;const t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}(t),t})}function um(n){return Mt(n)||hr(n)}function ah(n){return null!==n}function bt(n){return xo(()=>({type:n.type,bootstrap:n.bootstrap||Ft,declarations:n.declarations||Ft,imports:n.imports||Ft,exports:n.exports||Ft,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function lh(n,e){if(null==n)return ss;const t={};for(const r in n)if(n.hasOwnProperty(r)){let i=n[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),t[i]=r,e&&(e[i]=s)}return t}function ne(n){return xo(()=>{const e=ch(n);return Gv(e),e})}function Mt(n){return n[rh]||null}function hr(n){return n[hu]||null}function Jr(n){return n[Io]||null}function _i(n,e){const t=n[Vv]||null;if(!t&&!0===e)throw new Error(`Type ${Qt(n)} does not have '\u0275mod' property.`);return t}function ch(n){const e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||ss,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||Ft,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:lh(n.inputs,e),outputs:lh(n.outputs)}}function Gv(n){n.features?.forEach(e=>e(n))}function Gl(n,e){if(!n)return null;const t=e?Jr:um;return()=>("function"==typeof n?n():n).map(r=>t(r)).filter(ah)}const wn=0,xe=1,Ye=2,en=3,ji=4,Ja=5,Ur=6,ia=7,Wn=8,sa=9,el=10,Xe=11,zl=12,uh=13,ql=14,Pn=15,pu=16,oa=17,Ys=18,mu=19,dh=20,aa=21,To=22,Wl=23,hh=24,Et=25,gu=1,zv=2,ls=7,la=9,fr=11;function ei(n){return Array.isArray(n)&&"object"==typeof n[gu]}function yi(n){return Array.isArray(n)&&!0===n[gu]}function hm(n){return 0!=(4&n.flags)}function ca(n){return n.componentOffset>-1}function Kl(n){return 1==(1&n.flags)}function Is(n){return!!n.template}function ua(n){return 0!=(512&n[Ye])}function tl(n,e){return n.hasOwnProperty(Co)?n[Co]:null}let mm=qt.WeakRef??class pm{constructor(e){this.ref=e}deref(){return this.ref}},Yv=0,Xs=null,mh=!1;function pr(n){const e=Xs;return Xs=n,e}class OI{constructor(){this.id=Yv++,this.ref=function kI(n){return new mm(n)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[e,t]of this.producers){const r=t.producerNode.deref();if(void 0!==r&&t.atTrackingVersion===this.trackingVersion){if(r.producerPollStatus(t.seenValueVersion))return!0}else this.producers.delete(e),r?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const e=mh;mh=!0;try{for(const[t,r]of this.consumers){const i=r.consumerNode.deref();void 0!==i&&i.trackingVersion===r.atTrackingVersion?i.onConsumerDependencyMayHaveChanged():(this.consumers.delete(t),i?.producers.delete(this.id))}}finally{mh=e}}producerAccessed(){if(mh)throw new Error("");if(null===Xs)return;let e=Xs.producers.get(this.id);void 0===e?(e={consumerNode:Xs.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Xs.trackingVersion},Xs.producers.set(this.id,e),this.consumers.set(Xs.id,e)):(e.seenValueVersion=this.valueVersion,e.atTrackingVersion=Xs.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Xs?.consumerAllowSignalWrites}producerPollStatus(e){return this.valueVersion!==e||(this.onProducerUpdateValueVersion(),this.valueVersion!==e)}}let Jv=null;const ym=()=>{};class BI extends OI{constructor(e,t,r){super(),this.watch=e,this.schedule=t,this.dirty=!1,this.cleanupFn=ym,this.registerOnCleanup=i=>{this.cleanupFn=i},this.consumerAllowSignalWrites=r}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const e=pr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=ym,this.watch(this.registerOnCleanup)}finally{pr(e)}}cleanup(){this.cleanupFn()}}class yh{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}}function Rr(){return Yl}function Yl(n){return n.type.prototype.ngOnChanges&&(n.setInput=UI),vh}function vh(){const n=vm(this),e=n?.current;if(e){const t=n.previous;if(t===ss)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function UI(n,e,t,r){const i=this.declaredInputs[t],s=vm(n)||function bm(n,e){return n[bh]=e}(n,{previous:ss,current:null}),o=s.current||(s.current={}),a=s.previous,l=a[i];o[i]=new yh(l&&l.currentValue,e,a===ss),n[r]=e}Rr.ngInherit=!0;const bh="__ngSimpleChanges__";function vm(n){return n[bh]||null}const Cs=function(n,e,t){};function fn(n){for(;Array.isArray(n);)n=n[wn];return n}function Eh(n,e){return fn(e[n])}function vi(n,e){return fn(e[n.index])}function ib(n,e){return n.data[e]}function jr(n,e){const t=e[n];return ei(t)?t:t[wn]}function eo(n,e){return null==e?null:n[e]}function sb(n){n[oa]=0}function zI(n){1024&n[Ye]||(n[Ye]|=1024,ab(n,1))}function ob(n){1024&n[Ye]&&(n[Ye]&=-1025,ab(n,-1))}function ab(n,e){let t=n[en];if(null===t)return;t[Ja]+=e;let r=t;for(t=t[en];null!==t&&(1===e&&1===r[Ja]||-1===e&&0===r[Ja]);)t[Ja]+=e,r=t,t=t[en]}const qe={lFrame:pb(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wh(){return qe.bindingsEnabled}function ec(){return null!==qe.skipHydrationRootTNode}function ie(){return qe.lFrame.lView}function ft(){return qe.lFrame.tView}function Do(n){return qe.lFrame.contextLView=n,n[Wn]}function nl(n){return qe.lFrame.contextLView=null,n}function Mr(){let n=ub();for(;null!==n&&64===n.type;)n=n.parent;return n}function ub(){return qe.lFrame.currentTNode}function As(n,e){const t=qe.lFrame;t.currentTNode=n,t.isParent=e}function Dm(){return qe.lFrame.isParent}function Sm(){qe.lFrame.isParent=!1}function ti(){const n=qe.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function tc(){return qe.lFrame.bindingIndex++}function Hi(n){const e=qe.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function Mm(n,e){const t=qe.lFrame;t.bindingIndex=t.bindingRootIndex=n,yu(e)}function yu(n){qe.lFrame.currentDirectiveIndex=n}function Ah(){return qe.lFrame.currentQueryIndex}function Th(n){qe.lFrame.currentQueryIndex=n}function hb(n){const e=n[xe];return 2===e.type?e.declTNode:1===e.type?n[Ur]:null}function fb(n,e,t){if(t&Ue.SkipSelf){let i=e,s=n;for(;!(i=i.parent,null!==i||t&Ue.Host||(i=hb(s),null===i||(s=s[ql],10&i.type))););if(null===i)return!1;e=i,n=s}const r=qe.lFrame=Dh();return r.currentTNode=e,r.lView=n,!0}function km(n){const e=Dh(),t=n[xe];qe.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Dh(){const n=qe.lFrame,e=null===n?null:n.child;return null===e?pb(n):e}function pb(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function mb(){const n=qe.lFrame;return qe.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Sh=mb;function Om(){const n=mb();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ni(){return qe.lFrame.selectedIndex}function So(n){qe.lFrame.selectedIndex=n}function tn(){const n=qe.lFrame;return ib(n.tView,n.selectedIndex)}let Um=!0;function vu(){return Um}function da(n){Um=n}function nc(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){const s=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:l,ngAfterViewChecked:c,ngOnDestroy:h}=s;o&&(n.contentHooks??=[]).push(-t,o),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),l&&(n.viewHooks??=[]).push(-t,l),c&&((n.viewHooks??=[]).push(t,c),(n.viewCheckHooks??=[]).push(t,c)),null!=h&&(n.destroyHooks??=[]).push(t,h)}}function Rh(n,e,t){Ph(n,e,3,t)}function Mh(n,e,t,r){(3&n[Ye])===t&&Ph(n,e,t,r)}function jm(n,e){let t=n[Ye];(3&t)===e&&(t&=8191,t+=1,n[Ye]=t)}function Ph(n,e,t,r){const s=r??-1,o=e.length-1;let a=0;for(let l=void 0!==r?65535&n[oa]:0;l<o;l++)if("number"==typeof e[l+1]){if(a=e[l],null!=r&&a>=r)break}else e[l]<0&&(n[oa]+=65536),(a<s||-1==s)&&(JI(n,t,e,l),n[oa]=(4294901760&n[oa])+l+2),l++}function yb(n,e){Cs(4,n,e);const t=pr(null);try{e.call(n)}finally{pr(t),Cs(5,n,e)}}function JI(n,e,t,r){const i=t[r]<0,s=t[r+1],a=n[i?-t[r]:t[r]];i?n[Ye]>>13<n[oa]>>16&&(3&n[Ye])===e&&(n[Ye]+=8192,yb(a,s)):yb(a,s)}const il=-1;class bu{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}}function vb(n){return n!==il}function rc(n){return 32767&n}function kh(n,e){let t=function nC(n){return n>>16}(n),r=e;for(;t>0;)r=r[ql],t--;return r}let $m=!0;function Oh(n){const e=$m;return $m=n,e}const Gm=255,bb=5;let rC=0;const to={};function Fh(n,e){const t=Lh(n,e);if(-1!==t)return t;const r=e[xe];r.firstCreatePass&&(n.injectorIndex=e.length,Eu(r.data,n),Eu(e,null),Eu(r.blueprint,null));const i=zm(n,e),s=n.injectorIndex;if(vb(i)){const o=rc(i),a=kh(i,e),l=a[xe].data;for(let c=0;c<8;c++)e[s+c]=a[o+c]|l[o+c]}return e[s+8]=i,s}function Eu(n,e){n.push(0,0,0,0,0,0,0,0,e)}function Lh(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function zm(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;null!==i;){if(r=Zm(i),null===r)return il;if(t++,i=i[ql],-1!==r.injectorIndex)return r.injectorIndex|t<<16}return il}function wu(n,e,t){!function iC(n,e,t){let r;"string"==typeof t?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ao)&&(r=t[Ao]),null==r&&(r=t[Ao]=rC++);const i=r&Gm;e.data[n+(i>>bb)]|=1<<i}(n,e,t)}function qm(n,e,t){if(t&Ue.Optional||void 0!==n)return n;Ul()}function Eb(n,e,t,r){if(t&Ue.Optional&&void 0===r&&(r=null),!(t&(Ue.Self|Ue.Host))){const i=n[sa],s=mi(void 0);try{return i?i.get(e,r,t&Ue.Optional):eh(e,r,t&Ue.Optional)}finally{mi(s)}}return qm(r,0,t)}function Vh(n,e,t,r=Ue.Default,i){if(null!==n){if(2048&e[Ye]&&!(r&Ue.Self)){const o=function aC(n,e,t,r,i){let s=n,o=e;for(;null!==s&&null!==o&&2048&o[Ye]&&!(512&o[Ye]);){const a=wb(s,o,t,r|Ue.Self,to);if(a!==to)return a;let l=s.parent;if(!l){const c=o[dh];if(c){const h=c.get(t,to,r);if(h!==to)return h}l=Zm(o),o=o[ql]}s=l}return i}(n,e,t,r,to);if(o!==to)return o}const s=wb(n,e,t,r,to);if(s!==to)return s}return Eb(e,t,r,i)}function wb(n,e,t,r,i){const s=function Bh(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Ao)?n[Ao]:void 0;return"number"==typeof e?e>=0?e&Gm:oC:e}(t);if("function"==typeof s){if(!fb(e,n,r))return r&Ue.Host?qm(i,0,r):Eb(e,t,r,i);try{const o=s(r);if(null!=o||r&Ue.Optional)return o;Ul()}finally{Sh()}}else if("number"==typeof s){let o=null,a=Lh(n,e),l=il,c=r&Ue.Host?e[Pn][Ur]:null;for((-1===a||r&Ue.SkipSelf)&&(l=-1===a?zm(n,e):e[a+8],l!==il&&Km(r,!1)?(o=e[xe],a=rc(l),e=kh(l,e)):a=-1);-1!==a;){const h=e[xe];if(Wm(s,a,h.data)){const p=Gk(a,e,t,o,r,c);if(p!==to)return p}l=e[a+8],l!==il&&Km(r,e[xe].data[a+8]===c)&&Wm(s,a,e)?(o=h,a=rc(l),e=kh(l,e)):a=-1}}return i}function Gk(n,e,t,r,i,s){const o=e[xe],a=o.data[n+8],h=ic(a,o,t,null==r?ca(a)&&$m:r!=o&&0!=(3&a.type),i&Ue.Host&&s===a);return null!==h?ha(e,o,h,a):to}function ic(n,e,t,r,i){const s=n.providerIndexes,o=e.data,a=1048575&s,l=n.directiveStart,h=s>>20,g=i?a+h:n.directiveEnd;for(let _=r?a:a+h;_<g;_++){const v=o[_];if(_<l&&t===v||_>=l&&v.type===t)return _}if(i){const _=o[l];if(_&&Is(_)&&_.type===t)return l}return null}function ha(n,e,t,r){let i=n[t];const s=e.data;if(function Nh(n){return n instanceof bu}(i)){const o=i;o.resolving&&function Bl(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new L(-200,`Circular dependency in DI detected for ${n}${t}`)}(function vt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Me(n)}(s[t]));const a=Oh(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?mi(o.injectImpl):null;fb(n,r,Ue.Default);try{i=n[t]=o.factory(void 0,s,n,r),e.firstCreatePass&&t>=r.directiveStart&&function _b(n,e,t){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){const o=Yl(e);(t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o)}i&&(t.preOrderHooks??=[]).push(0-n,i),s&&((t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s))}(t,s[t],e)}finally{null!==l&&mi(l),Oh(a),o.resolving=!1,Sh()}}return i}function Wm(n,e,t){return!!(t[e+(n>>bb)]&1<<n)}function Km(n,e){return!(n&Ue.Self||n&Ue.Host&&e)}class sc{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Vh(this._tNode,this._lView,e,rs(r),t)}}function oC(){return new sc(Mr(),ie())}function Ve(n){return xo(()=>{const e=n.prototype.constructor,t=e[Co]||Qm(e),r=Object.prototype;let i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){const s=i[Co]||Qm(i);if(s&&s!==t)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Qm(n){return ae(n)?()=>{const e=Qm(P(n));return e&&e()}:tl(n)}function Zm(n){const e=n[xe],t=e.type;return 2===t?e.declTNode:1===t?n[Ur]:null}function xu(n){return function sC(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const r=t.length;let i=0;for(;i<r;){const s=t[i];if(Za(s))break;if(0===s)i+=2;else if("number"==typeof s)for(i++;i<r&&"string"==typeof t[i];)i++;else{if(s===e)return t[i+1];i+=2}}}return null}(Mr(),n)}const oc="__parameters__";function fa(n,e,t){return xo(()=>{const r=function Ym(n){return function(...t){if(n){const r=n(...t);for(const i in r)this[i]=r[i]}}}(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;const o=new i(...s);return a.annotation=o,a;function a(l,c,h){const p=l.hasOwnProperty(oc)?l[oc]:Object.defineProperty(l,oc,{value:[]})[oc];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),l}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}function Au(n,e){n.forEach(t=>Array.isArray(t)?Au(t,e):e(t))}function Uh(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function lc(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Tu(n,e){const t=[];for(let r=0;r<n;r++)t.push(e);return t}function $i(n,e,t){let r=cc(n,e);return r>=0?n[1|r]=t:(r=~r,function uC(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(1===i)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;)n[i]=n[i-2],i--;n[e]=t,n[e+1]=r}}(n,r,e,t)),r}function jh(n,e){const t=cc(n,e);if(t>=0)return n[1|t]}function cc(n,e){return function Ab(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){const s=r+(i-r>>1),o=n[s<<t];if(e===o)return s<<t;o>e?i=s:r=s+1}return~(i<<t)}(n,e,1)}const no=du(fa("Optional"),8),uc=du(fa("SkipSelf"),4);function nn(n){return 128==(128&n.flags)}var Pr=(()=>((Pr=Pr||{})[Pr.Important=1]="Important",Pr[Pr.DashCase=2]="DashCase",Pr))();const Ru=new Map;let Fb=0;const CC="__ngContext__";function wi(n,e){ei(e)?(n[CC]=e[mu],function cg(n){Ru.set(n[mu],n)}(e)):n[CC]=e}let AC;function TC(n,e){return AC(n,e)}function fg(n){const e=n[en];return yi(e)?e[en]:e}function d1(n){return f1(n[zl])}function h1(n){return f1(n[ji])}function f1(n){for(;null!==n&&!yi(n);)n=n[ji];return n}function qh(n,e,t,r,i){if(null!=r){let s,o=!1;yi(r)?s=r:ei(r)&&(o=!0,r=r[wn]);const a=fn(r);0===n&&null!==t?null==i?y1(e,t,a):Mu(e,t,a,i||null,!0):1===n&&null!==t?Mu(e,t,a,i||null,!0):2===n?function Hb(n,e,t){const r=Ub(n,e);r&&function T6(n,e,t,r){n.removeChild(e,t,r)}(n,r,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=s&&function R6(n,e,t,r,i){const s=t[ls];s!==fn(t)&&qh(e,n,r,s,i);for(let a=fr;a<t.length;a++){const l=t[a];mg(l[xe],l,n,e,r,s)}}(e,n,s,t,i)}}function Bb(n,e,t){return n.createElement(e,t)}function m1(n,e){const t=n[la],r=t.indexOf(e);ob(e),t.splice(r,1)}function SC(n,e){if(n.length<=fr)return;const t=fr+e,r=n[t];if(r){const i=r[pu];null!==i&&i!==n&&m1(i,r),e>0&&(n[t-1][ji]=r[ji]);const s=lc(n,fr+e);!function v6(n,e){mg(n,e,e[Xe],2,null,null),e[wn]=null,e[Ur]=null}(r[xe],r);const o=s[Ys];null!==o&&o.detachView(s[xe]),r[en]=null,r[ji]=null,r[Ye]&=-129}return r}function g1(n,e){if(!(256&e[Ye])){const t=e[Xe];e[Wl]?.destroy(),e[hh]?.destroy(),t.destroyNode&&mg(n,e,t,3,null,null),function w6(n){let e=n[zl];if(!e)return RC(n[xe],n);for(;e;){let t=null;if(ei(e))t=e[zl];else{const r=e[fr];r&&(t=r)}if(!t){for(;e&&!e[ji]&&e!==n;)ei(e)&&RC(e[xe],e),e=e[en];null===e&&(e=n),ei(e)&&RC(e[xe],e),t=e&&e[ji]}e=t}}(e)}}function RC(n,e){if(!(256&e[Ye])){e[Ye]&=-129,e[Ye]|=256,function A6(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let r=0;r<t.length;r+=2){const i=e[t[r]];if(!(i instanceof bu)){const s=t[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){const a=i[s[o]],l=s[o+1];Cs(4,a,l);try{l.call(a)}finally{Cs(5,a,l)}}else{Cs(4,i,s);try{s.call(i)}finally{Cs(5,i,s)}}}}}(n,e),function C6(n,e){const t=n.cleanup,r=e[ia];if(null!==t)for(let s=0;s<t.length-1;s+=2)if("string"==typeof t[s]){const o=t[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else t[s].call(r[t[s+1]]);null!==r&&(e[ia]=null);const i=e[aa];if(null!==i){e[aa]=null;for(let s=0;s<i.length;s++)(0,i[s])()}}(n,e),1===e[xe].type&&e[Xe].destroy();const t=e[pu];if(null!==t&&yi(e[en])){t!==e[en]&&m1(t,e);const r=e[Ys];null!==r&&r.detachView(n)}!function xC(n){Ru.delete(n[mu])}(e)}}function MC(n,e,t){return function _1(n,e,t){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return t[wn];{const{componentOffset:i}=r;if(i>-1){const{encapsulation:s}=n.data[r.directiveStart+i];if(s===gi.None||s===gi.Emulated)return null}return vi(r,t)}}(n,e.parent,t)}function Mu(n,e,t,r,i){n.insertBefore(e,t,r,i)}function y1(n,e,t){n.appendChild(e,t)}function v1(n,e,t,r,i){null!==r?Mu(n,e,t,r,i):y1(n,e,t)}function Ub(n,e){return n.parentNode(e)}function b1(n,e,t){return w1(n,e,t)}let PC,FC,Gb,w1=function E1(n,e,t){return 40&n.type?vi(n,t):null};function jb(n,e,t,r){const i=MC(n,r,e),s=e[Xe],a=b1(r.parent||e[Ur],r,e);if(null!=i)if(Array.isArray(t))for(let l=0;l<t.length;l++)v1(s,i,t[l],a,!1);else v1(s,i,t,a,!1);void 0!==PC&&PC(s,r,e,t,i)}function pg(n,e){if(null!==e){const t=e.type;if(3&t)return vi(e,n);if(4&t)return NC(-1,n[e.index]);if(8&t){const r=e.child;if(null!==r)return pg(n,r);{const i=n[e.index];return yi(i)?NC(-1,i):fn(i)}}if(32&t)return TC(e,n)()||fn(n[e.index]);{const r=I1(n,e);return null!==r?Array.isArray(r)?r[0]:pg(fg(n[Pn]),r):pg(n,e.next)}}return null}function I1(n,e){return null!==e?n[Pn][Ur].projection[e.projection]:null}function NC(n,e){const t=fr+n+1;if(t<e.length){const r=e[t],i=r[xe].firstChild;if(null!==i)return pg(r,i)}return e[ls]}function kC(n,e,t,r,i,s,o){for(;null!=t;){const a=r[t.index],l=t.type;if(o&&0===e&&(a&&wi(fn(a),r),t.flags|=2),32!=(32&t.flags))if(8&l)kC(n,e,t.child,r,i,s,!1),qh(e,n,i,a,s);else if(32&l){const c=TC(t,r);let h;for(;h=c();)qh(e,n,i,h,s);qh(e,n,i,a,s)}else 16&l?A1(n,e,r,t,i,s):qh(e,n,i,a,s);t=o?t.projectionNext:t.next}}function mg(n,e,t,r,i,s){kC(t,r,n.firstChild,e,i,s,!1)}function A1(n,e,t,r,i,s){const o=t[Pn],l=o[Ur].projection[r.projection];if(Array.isArray(l))for(let c=0;c<l.length;c++)qh(e,n,i,l[c],s);else{let c=l;const h=o[en];nn(r)&&(c.flags|=128),kC(n,e,c,h,i,s,!0)}}function T1(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function D1(n,e,t){const{mergedAttrs:r,classes:i,styles:s}=t;null!==r&&xs(n,e,r),null!==i&&T1(n,e,i),null!==s&&function P6(n,e,t){n.setAttribute(e,"style",t)}(n,e,s)}function M1(n){return function LC(){if(void 0===Gb&&(Gb=null,qt.trustedTypes))try{Gb=qt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Gb}()?.createScriptURL(n)||n}class Pu{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${It})`}}function Ds(n){return n instanceof Pu?n.changingThisBreaksApplicationSecurity:n}function ga(n,e){const t=function H6(n){return n instanceof Pu&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${It})`)}return t===e}const Y6=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;var Ht=(()=>((Ht=Ht||{})[Ht.NONE=0]="NONE",Ht[Ht.HTML=1]="HTML",Ht[Ht.STYLE=2]="STYLE",Ht[Ht.SCRIPT=3]="SCRIPT",Ht[Ht.URL=4]="URL",Ht[Ht.RESOURCE_URL=5]="RESOURCE_URL",Ht))();function yg(n){const e=vg();return e?e.sanitize(Ht.URL,n)||"":ga(n,"URL")?Ds(n):function zb(n){return(n=String(n)).match(Y6)?n:"unsafe:"+n}(Me(n))}function B1(n){const e=vg();if(e)return M1(e.sanitize(Ht.RESOURCE_URL,n)||"");if(ga(n,"ResourceURL"))return M1(Ds(n));throw new L(904,!1)}function vg(){const n=ie();return n&&n[el].sanitizer}class oe{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=se({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const bg=new oe("ENVIRONMENT_INITIALIZER"),j1=new oe("INJECTOR",-1),H1=new oe("INJECTOR_DEF_TYPES");class $1{get(e,t=Qa){if(t===Qa){const r=new Error(`NullInjectorError: No provider for ${Qt(e)}!`);throw r.name="NullInjectorError",r}return t}}function c8(...n){return{\u0275providers:G1(0,n),\u0275fromNgModule:!0}}function G1(n,...e){const t=[],r=new Set;let i;return Au(e,s=>{const o=s;HC(o,t,[],r)&&(i||=[],i.push(o))}),void 0!==i&&z1(i,t),t}function z1(n,e){for(let t=0;t<n.length;t++){const{providers:i}=n[t];$C(i,s=>{e.push(s)})}}function HC(n,e,t,r){if(!(n=P(n)))return!1;let i=null,s=Ov(n);const o=!s&&Mt(n);if(s||o){if(o&&!o.standalone)return!1;i=n}else{const l=n.ngModule;if(s=Ov(l),!s)return!1;i=l}const a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){const l="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const c of l)HC(c,e,t,r)}}else{if(!s)return!1;{if(null!=s.imports&&!a){let c;r.add(i);try{Au(s.imports,h=>{HC(h,e,t,r)&&(c||=[],c.push(h))})}finally{}void 0!==c&&z1(c,e)}if(!a){const c=tl(i)||(()=>new i);e.push({provide:i,useFactory:c,deps:Ft},{provide:H1,useValue:i,multi:!0},{provide:bg,useValue:()=>O(i),multi:!0})}const l=s.providers;null==l||a||$C(l,h=>{e.push(h)})}}return i!==n&&void 0!==n.providers}function $C(n,e){for(let t of n)Te(t)&&(t=t.\u0275providers),Array.isArray(t)?$C(t,e):e(t)}const u8=Re({provide:String,useValue:Re});function GC(n){return null!==n&&"object"==typeof n&&u8 in n}function Nu(n){return"function"==typeof n}const zC=new oe("Set Injector scope."),Wb={},h8={};let qC;function Kb(){return void 0===qC&&(qC=new $1),qC}class _a{}class WC extends _a{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,QC(e,o=>this.processProvider(o)),this.records.set(j1,Kh(void 0,this)),i.has("environment")&&this.records.set(_a,Kh(void 0,this));const s=this.records.get(zC);null!=s&&"string"==typeof s.value&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(H1.multi,Ft,Ue.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const t of this._ngOnDestroyHooks)t.ngOnDestroy();const e=this._onDestroyHooks;this._onDestroyHooks=[];for(const t of e)t()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();const t=na(this),r=mi(void 0);try{return e()}finally{na(t),mi(r)}}get(e,t=Qa,r=Ue.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(II))return e[II](this);r=rs(r);const i=na(this),s=mi(void 0);try{if(!(r&Ue.SkipSelf)){let a=this.records.get(e);if(void 0===a){const l=function _8(n){return"function"==typeof n||"object"==typeof n&&n instanceof oe}(e)&&Xd(e);a=l&&this.injectableDefInScope(l)?Kh(KC(e),Wb):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&Ue.Self?Kb():this.parent).get(e,t=r&Ue.Optional&&t===Qa?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[jl]=o[jl]||[]).unshift(Qt(e)),i)throw o;return function xI(n,e,t,r){const i=n[jl];throw e[th]&&i.unshift(e[th]),n.message=function sm(n,e,t,r=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let i=Qt(e);if(Array.isArray(e))i=e.map(Qt).join(" -> ");else if("object"==typeof e){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+("string"==typeof a?JSON.stringify(a):Qt(a)))}i=`{${s.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(nm,"\n  ")}`}("\n"+n.message,i,t,r),n.ngTokenPath=i,n[jl]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{mi(s),na(i)}}resolveInjectorInitializers(){const e=na(this),t=mi(void 0);try{const r=this.get(bg.multi,Ft,Ue.Self);for(const i of r)i()}finally{na(e),mi(t)}}toString(){const e=[],t=this.records;for(const r of t.keys())e.push(Qt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new L(205,!1)}processProvider(e){let t=Nu(e=P(e))?e:P(e&&e.provide);const r=function p8(n){return GC(n)?Kh(void 0,n.useValue):Kh(K1(n),Wb)}(e);if(Nu(e)||!0!==e.multi)this.records.get(t);else{let i=this.records.get(t);i||(i=Kh(void 0,Wb,!0),i.factory=()=>uu(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){return t.value===Wb&&(t.value=h8,t.value=t.factory()),"object"==typeof t.value&&t.value&&function g8(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=P(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){const t=this._onDestroyHooks.indexOf(e);-1!==t&&this._onDestroyHooks.splice(t,1)}}function KC(n){const e=Xd(n),t=null!==e?e.factory:tl(n);if(null!==t)return t;if(n instanceof oe)throw new L(204,!1);if(n instanceof Function)return function f8(n){const e=n.length;if(e>0)throw Tu(e,"?"),new L(204,!1);const t=function kv(n){return n&&(n[cu]||n[Ka])||null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new L(204,!1)}function K1(n,e,t){let r;if(Nu(n)){const i=P(n);return tl(i)||KC(i)}if(GC(n))r=()=>P(n.useValue);else if(function W1(n){return!(!n||!n.useFactory)}(n))r=()=>n.useFactory(...uu(n.deps||[]));else if(function q1(n){return!(!n||!n.useExisting)}(n))r=()=>O(P(n.useExisting));else{const i=P(n&&(n.useClass||n.provide));if(!function m8(n){return!!n.deps}(n))return tl(i)||KC(i);r=()=>new i(...uu(n.deps))}return r}function Kh(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function QC(n,e){for(const t of n)Array.isArray(t)?QC(t,e):t&&Te(t)?QC(t.\u0275providers,e):e(t)}const Qb=new oe("AppId",{providedIn:"root",factory:()=>y8}),y8="ng",Q1=new oe("Platform Initializer"),nr=new oe("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Qh=new oe("AnimationModuleType"),ZC=new oe("CSP nonce",{providedIn:"root",factory:()=>function gg(){if(void 0!==FC)return FC;if(typeof document<"u")return document;throw new L(210,!1)}().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let Y1=(n,e)=>null;function X1(n,e){return Y1(n,e)}class T8{}class tO{}class S8{resolveComponentFactory(e){throw function D8(n){const e=Error(`No component factory found for ${Qt(n)}.`);return e.ngComponent=n,e}(e)}}let eE=(()=>{class n{}return n.NULL=new S8,n})();function R8(){return Zh(Mr(),ie())}function Zh(n,e){return new et(vi(n,e))}let et=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=R8,n})();function M8(n){return n instanceof et?n.nativeElement:n}class Ig{}let Ro=(()=>{class n{constructor(){this.destroyNode=null}}return n.__NG_ELEMENT_ID__=()=>function P8(){const n=ie(),t=jr(Mr().index,n);return(ei(t)?t:n)[Xe]}(),n})(),N8=(()=>{class n{}return n.\u0275prov=se({token:n,providedIn:"root",factory:()=>null}),n})();class al{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const rO=new al("16.1.3"),aA={};function Cg(n){for(;n;){n[Ye]|=64;const e=fg(n);if(ua(n)&&!e)return n;n=e}return null}function lA(n){return n.ngOriginalError}class ll{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&lA(e);for(;t&&lA(t);)t=lA(t);return t||null}}const oO=new oe("",{providedIn:"root",factory:()=>!1});function cl(n){return n instanceof Function?n():n}class dO extends OI{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(e){this._lView=e}onConsumerDependencyMayHaveChanged(){Cg(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(e,t,r){const i=pr(this);this.trackingVersion++;try{e(t,r)}finally{pr(i)}}destroy(){this.trackingVersion++}}let nE=null;function hO(){return nE??=new dO,nE}function fO(n,e){return n[e]??hO()}function pO(n,e){const t=hO();t.hasReadASignal&&(n[e]=nE,t.lView=n,nE=new dO)}const at={};function Ne(n){mO(ft(),ie(),ni()+n,!1)}function mO(n,e,t,r){if(!r)if(3==(3&e[Ye])){const s=n.preOrderCheckHooks;null!==s&&Rh(e,s,t)}else{const s=n.preOrderHooks;null!==s&&Mh(e,s,0,t)}So(t)}function vO(n,e=null,t=null,r){const i=bO(n,e,t,r);return i.resolveInjectorInitializers(),i}function bO(n,e=null,t=null,r,i=new Set){const s=[t||Ft,c8(n)];return r=r||("object"==typeof n?void 0:Qt(n)),new WC(s,e||Kb(),r||null,i)}let Mo=(()=>{class n{static create(t,r){if(Array.isArray(t))return vO({name:""},r,t,"");{const i=t.name??"";return vO({name:i},t.parent,t.providers,i)}}}return n.THROW_IF_NOT_FOUND=Qa,n.NULL=new $1,n.\u0275prov=se({token:n,providedIn:"any",factory:()=>O(j1)}),n.__NG_ELEMENT_ID__=-1,n})();function C(n,e=Ue.Default){const t=ie();return null===t?O(n,e):Vh(Mr(),t,P(n),e)}function cA(){throw new Error("invalid")}function rE(n,e,t,r,i,s,o,a,l,c,h){const p=e.blueprint.slice();return p[wn]=i,p[Ye]=140|r,(null!==c||n&&2048&n[Ye])&&(p[Ye]|=2048),sb(p),p[en]=p[ql]=n,p[Wn]=t,p[el]=o||n&&n[el],p[Xe]=a||n&&n[Xe],p[sa]=l||n&&n[sa]||null,p[Ur]=s,p[mu]=function Lb(){return Fb++}(),p[To]=h,p[dh]=c,p[Pn]=2==e.type?n[Pn]:p,p}function Xh(n,e,t,r,i){let s=n.data[e];if(null===s)s=function uA(n,e,t,r,i){const s=ub(),o=Dm(),l=n.data[e]=function eK(n,e,t,r,i,s){let o=e?e.injectorIndex:-1,a=0;return ec()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,t,e,r,i);return null===n.firstChild&&(n.firstChild=l),null!==s&&(o?null==s.child&&null!==l.parent&&(s.child=l):null===s.next&&(s.next=l,l.prev=s)),l}(n,e,t,r,i),function ZI(){return qe.lFrame.inI18n}()&&(s.flags|=32);else if(64&s.type){s.type=t,s.value=r,s.attrs=i;const o=function rl(){const n=qe.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();s.injectorIndex=null===o?-1:o.injectorIndex}return As(s,!0),s}function Ag(n,e,t,r){if(0===t)return-1;const i=e.length;for(let s=0;s<t;s++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function EO(n,e,t,r,i){const s=fO(e,Wl),o=ni(),a=2&r;try{if(So(-1),a&&e.length>Et&&mO(n,e,Et,!1),Cs(a?2:0,i),a)s.runInContext(t,r,i);else{const c=pr(null);try{t(r,i)}finally{pr(c)}}}finally{a&&null===e[Wl]&&pO(e,Wl),So(o),Cs(a?3:1,i)}}function dA(n,e,t){if(hm(e)){const r=pr(null);try{const s=e.directiveEnd;for(let o=e.directiveStart;o<s;o++){const a=n.data[o];a.contentQueries&&a.contentQueries(1,t[o],o)}}finally{pr(r)}}}function hA(n,e,t){wh()&&(function aK(n,e,t,r){const i=t.directiveStart,s=t.directiveEnd;ca(t)&&function pK(n,e,t){const r=vi(e,n),i=wO(t);let o=16;t.signals?o=4096:t.onPush&&(o=64);const a=iE(n,rE(n,i,null,o,r,e,null,n[el].rendererFactory.createRenderer(r,t),null,null,null));n[e.index]=a}(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||Fh(t,e),wi(r,e);const o=t.initialInputs;for(let a=i;a<s;a++){const l=n.data[a],c=ha(e,n,a,t);wi(c,e),null!==o&&mK(0,a-i,c,l,0,o),Is(l)&&(jr(t.index,e)[Wn]=ha(e,n,a,t))}}(n,e,t,vi(t,e)),64==(64&t.flags)&&TO(n,e,t))}function fA(n,e,t=vi){const r=e.localNames;if(null!==r){let i=e.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?t(e,n):n[o];n[i++]=a}}}function wO(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=pA(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function pA(n,e,t,r,i,s,o,a,l,c,h){const p=Et+r,g=p+i,_=function K8(n,e){const t=[];for(let r=0;r<e;r++)t.push(r<n?null:at);return t}(p,g),v="function"==typeof c?c():c;return _[xe]={type:n,blueprint:_,template:t,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:g,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:v,incompleteFirstPass:!1,ssrId:h}}let xO=n=>null;function IO(n,e,t,r){for(let i in n)if(n.hasOwnProperty(i)){t=null===t?{}:t;const s=n[i];null===r?CO(t,e,i,s):r.hasOwnProperty(i)&&CO(t,e,r[i],s)}return t}function CO(n,e,t,r){n.hasOwnProperty(t)?n[t].push(e,r):n[t]=[e,r]}function Ss(n,e,t,r,i,s,o,a){const l=vi(e,t);let h,c=e.inputs;!a&&null!=c&&(h=c[r])?(vA(n,t,h,r,i),ca(e)&&function rK(n,e){const t=jr(e,n);16&t[Ye]||(t[Ye]|=64)}(t,e.index)):3&e.type&&(r=function nK(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(r),i=null!=o?o(i,e.value||"",r):i,s.setProperty(l,r,i))}function mA(n,e,t,r){if(wh()){const i=null===r?null:{"":-1},s=function cK(n,e){const t=n.directiveRegistry;let r=null,i=null;if(t)for(let s=0;s<t.length;s++){const o=t[s];if(oh(e,o.selectors,!1))if(r||(r=[]),Is(o))if(null!==o.findHostDirectiveDefs){const a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o),gA(n,e,a.length)}else r.unshift(o),gA(n,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return null===r?null:[r,i]}(n,t);let o,a;null===s?o=a=null:[o,a]=s,null!==o&&AO(n,e,t,o,i,a),i&&function uK(n,e,t){if(e){const r=n.localNames=[];for(let i=0;i<e.length;i+=2){const s=t[e[i+1]];if(null==s)throw new L(-301,!1);r.push(e[i],s)}}}(t,r,i)}t.mergedAttrs=$l(t.mergedAttrs,t.attrs)}function AO(n,e,t,r,i,s){for(let c=0;c<r.length;c++)wu(Fh(t,e),n,r[c].type);!function hK(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,r.length);for(let c=0;c<r.length;c++){const h=r[c];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,l=Ag(n,e,r.length,null);for(let c=0;c<r.length;c++){const h=r[c];t.mergedAttrs=$l(t.mergedAttrs,h.hostAttrs),fK(n,t,e,l,h),dK(l,h,i),null!==h.contentQueries&&(t.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(t.flags|=64);const p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),l++}!function tK(n,e,t){const i=e.directiveEnd,s=n.data,o=e.attrs,a=[];let l=null,c=null;for(let h=e.directiveStart;h<i;h++){const p=s[h],g=t?t.get(p):null,v=g?g.outputs:null;l=IO(p.inputs,h,l,g?g.inputs:null),c=IO(p.outputs,h,c,v);const E=null===l||null===o||Xa(e)?null:gK(l,h,o);a.push(E)}null!==l&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=l,e.outputs=c}(n,t,s)}function TO(n,e,t){const r=t.directiveStart,i=t.directiveEnd,s=t.index,o=function Pm(){return qe.lFrame.currentDirectiveIndex}();try{So(s);for(let a=r;a<i;a++){const l=n.data[a],c=e[a];yu(a),(null!==l.hostBindings||0!==l.hostVars||null!==l.hostAttrs)&&lK(l,c)}}finally{So(-1),yu(o)}}function lK(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function gA(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function dK(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Is(e)&&(t[""]=n)}}function fK(n,e,t,r,i){n.data[r]=i;const s=i.factory||(i.factory=tl(i.type)),o=new bu(s,Is(i),C);n.blueprint[r]=o,t[r]=o,function sK(n,e,t,r,i){const s=i.hostBindings;if(s){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function oK(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,r,s)}}(n,e,r,Ag(n,t,i.hostVars,at),i)}function ya(n,e,t,r,i,s){const o=vi(n,e);!function _A(n,e,t,r,i,s,o){if(null==s)n.removeAttribute(e,i,t);else{const a=null==o?Me(s):o(s,r||"",i);n.setAttribute(e,i,a,t)}}(e[Xe],o,s,n.value,t,r,i)}function mK(n,e,t,r,i,s){const o=s[e];if(null!==o)for(let a=0;a<o.length;)DO(r,t,o[a++],o[a++],o[a++])}function DO(n,e,t,r,i){const s=pr(null);try{const o=n.inputTransforms;null!==o&&o.hasOwnProperty(r)&&(i=o[r].call(e,i)),null!==n.setInput?n.setInput(e,i,t,r):e[r]=i}finally{pr(s)}}function gK(n,e,t){let r=null,i=0;for(;i<t.length;){const s=t[i];if(0!==s)if(5!==s){if("number"==typeof s)break;if(n.hasOwnProperty(s)){null===r&&(r=[]);const o=n[s];for(let a=0;a<o.length;a+=2)if(o[a]===e){r.push(s,o[a+1],t[i+1]);break}}i+=2}else i+=2;else i+=4}return r}function SO(n,e,t,r){return[n,!0,!1,e,null,0,r,t,null,null,null]}function RO(n,e){const t=n.contentQueries;if(null!==t)for(let r=0;r<t.length;r+=2){const s=t[r+1];if(-1!==s){const o=n.data[s];Th(t[r]),o.contentQueries(2,e[s],s)}}}function iE(n,e){return n[zl]?n[uh][ji]=e:n[zl]=e,n[uh]=e,e}function yA(n,e,t){Th(0);const r=pr(null);try{e(n,t)}finally{pr(r)}}function MO(n){return n[ia]||(n[ia]=[])}function PO(n){return n.cleanup||(n.cleanup=[])}function kO(n,e){const t=n[sa],r=t?t.get(ll,null):null;r&&r.handleError(e)}function vA(n,e,t,r,i){for(let s=0;s<t.length;){const o=t[s++],a=t[s++];DO(n.data[o],e[o],r,a,i)}}function ul(n,e,t){const r=Eh(e,n);!function p1(n,e,t){n.setValue(e,t)}(n[Xe],r,t)}function _K(n,e){const t=jr(e,n),r=t[xe];!function yK(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}(r,t);const i=t[wn];null!==i&&null===t[To]&&(t[To]=X1(i,t[sa])),bA(r,t,t[Wn])}function bA(n,e,t){km(e);try{const r=n.viewQuery;null!==r&&yA(1,r,t);const i=n.template;null!==i&&EO(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&RO(n,e),n.staticViewQueries&&yA(2,n.viewQuery,t);const s=n.components;null!==s&&function vK(n,e){for(let t=0;t<e.length;t++)_K(n,e[t])}(e,s)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[Ye]&=-5,Om()}}let OO=(()=>{class n{constructor(){this.all=new Set,this.queue=new Map}create(t,r,i){const s=typeof Zone>"u"?null:Zone.current,o=new BI(t,c=>{this.all.has(c)&&this.queue.set(c,s)},i);let a;this.all.add(o),o.notify();const l=()=>{o.cleanup(),a?.(),this.all.delete(o),this.queue.delete(o)};return a=r?.onDestroy(l),{destroy:l}}flush(){if(0!==this.queue.size)for(const[t,r]of this.queue)this.queue.delete(t),r?r.run(()=>t.run()):t.run()}get isQueueEmpty(){return 0===this.queue.size}}return n.\u0275prov=se({token:n,providedIn:"root",factory:()=>new n}),n})();function sE(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?s=a:1==s?i=Qs(i,a):2==s&&(r=Qs(r,a+": "+e[++o]+";"))}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}function Tg(n,e,t,r,i=!1){for(;null!==t;){const s=e[t.index];if(null!==s&&r.push(fn(s)),yi(s)){for(let a=fr;a<s.length;a++){const l=s[a],c=l[xe].firstChild;null!==c&&Tg(l[xe],l,c,r)}s[ls]!==s[wn]&&r.push(s[ls])}const o=t.type;if(8&o)Tg(n,e,t.child,r);else if(32&o){const a=TC(t,e);let l;for(;l=a();)r.push(l)}else if(16&o){const a=I1(e,t);if(Array.isArray(a))r.push(...a);else{const l=fg(e[Pn]);Tg(l[xe],l,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function oE(n,e,t,r=!0){const i=e[el].rendererFactory;i.begin&&i.begin();try{FO(n,e,n.template,t)}catch(o){throw r&&kO(e,o),o}finally{i.end&&i.end(),e[el].effectManager?.flush()}}function FO(n,e,t,r){const i=e[Ye];if(256!=(256&i)){e[el].effectManager?.flush(),km(e);try{sb(e),function Ch(n){return qe.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&EO(n,e,t,2,r);const o=3==(3&i);if(o){const c=n.preOrderCheckHooks;null!==c&&Rh(e,c,null)}else{const c=n.preOrderHooks;null!==c&&Mh(e,c,0,null),jm(e,0)}if(function IK(n){for(let e=d1(n);null!==e;e=h1(e)){if(!e[zv])continue;const t=e[la];for(let r=0;r<t.length;r++){zI(t[r])}}}(e),LO(e,2),null!==n.contentQueries&&RO(n,e),o){const c=n.contentCheckHooks;null!==c&&Rh(e,c)}else{const c=n.contentHooks;null!==c&&Mh(e,c,1),jm(e,1)}!function W8(n,e){const t=n.hostBindingOpCodes;if(null===t)return;const r=fO(e,hh);try{for(let i=0;i<t.length;i++){const s=t[i];if(s<0)So(~s);else{const o=s,a=t[++i],l=t[++i];Mm(a,o),r.runInContext(l,2,e[o])}}}finally{null===e[hh]&&pO(e,hh),So(-1)}}(n,e);const a=n.components;null!==a&&BO(e,a,0);const l=n.viewQuery;if(null!==l&&yA(2,l,r),o){const c=n.viewCheckHooks;null!==c&&Rh(e,c)}else{const c=n.viewHooks;null!==c&&Mh(e,c,2),jm(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[Ye]&=-73,ob(e)}finally{Om()}}}function LO(n,e){for(let t=d1(n);null!==t;t=h1(t))for(let r=fr;r<t.length;r++)VO(t[r],e)}function CK(n,e,t){VO(jr(e,n),t)}function VO(n,e){if(!function $I(n){return 128==(128&n[Ye])}(n))return;const t=n[xe];if(80&n[Ye]&&0===e||1024&n[Ye]||2===e)FO(t,n,t.template,n[Wn]);else if(n[Ja]>0){LO(n,1);const i=n[xe].components;null!==i&&BO(n,i,1)}}function BO(n,e,t){for(let r=0;r<e.length;r++)CK(n,e[r],t)}class Dg{get rootNodes(){const e=this._lView,t=e[xe];return Tg(t,e,t.firstChild,[])}constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Wn]}set context(e){this._lView[Wn]=e}get destroyed(){return 256==(256&this._lView[Ye])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[en];if(yi(e)){const t=e[8],r=t?t.indexOf(this):-1;r>-1&&(SC(e,r),lc(t,r))}this._attachedToViewContainer=!1}g1(this._lView[xe],this._lView)}onDestroy(e){!function xm(n,e){if(256==(256&n[Ye]))throw new L(911,!1);null===n[aa]&&(n[aa]=[]),n[aa].push(e)}(this._lView,e)}markForCheck(){Cg(this._cdRefInjectingView||this._lView)}detach(){this._lView[Ye]&=-129}reattach(){this._lView[Ye]|=128}detectChanges(){oE(this._lView[xe],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new L(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function E6(n,e){mg(n,e,e[Xe],2,null,null)}(this._lView[xe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new L(902,!1);this._appRef=e}}class AK extends Dg{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;oE(e[xe],e,e[Wn],!1)}checkNoChanges(){}get context(){return null}}class UO extends eE{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Mt(e);return new Sg(t,this.ngModule)}}function jO(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class DK{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=rs(r);const i=this.injector.get(e,aA,r);return i!==aA||t===aA?i:this.parentInjector.get(e,t,r)}}class Sg extends tO{get inputs(){const e=this.componentDef,t=e.inputTransforms,r=jO(e.inputs);if(null!==t)for(const i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return jO(this.componentDef.outputs)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function Hv(n){return n.map(jv).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let s=(i=i||this.ngModule)instanceof _a?i:i?.injector;s&&null!==this.componentDef.getStandaloneInjector&&(s=this.componentDef.getStandaloneInjector(s)||s);const o=s?new DK(e,s):e,a=o.get(Ig,null);if(null===a)throw new L(407,!1);const h={rendererFactory:a,sanitizer:o.get(N8,null),effectManager:o.get(OO,null)},p=a.createRenderer(null,this.componentDef),g=this.componentDef.selectors[0][0]||"div",_=r?function Q8(n,e,t,r){const s=r.get(oO,!1)||t===gi.ShadowDom,o=n.selectRootElement(e,s);return function Z8(n){xO(n)}(o),o}(p,r,this.componentDef.encapsulation,o):Bb(p,g,function TK(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(g)),x=this.componentDef.signals?4608:this.componentDef.onPush?576:528,M=pA(0,null,null,1,0,null,null,null,null,null,null),D=rE(null,M,null,x,null,null,h,p,o,null,null);let k,G;km(D);try{const de=this.componentDef;let Se,it=null;de.findHostDirectiveDefs?(Se=[],it=new Map,de.findHostDirectiveDefs(de,Se,it),Se.push(de)):Se=[de];const Kt=function RK(n,e){const t=n[xe],r=Et;return n[r]=e,Xh(t,r,2,"#host",null)}(D,_),di=function MK(n,e,t,r,i,s,o){const a=i[xe];!function PK(n,e,t,r){for(const i of n)e.mergedAttrs=$l(e.mergedAttrs,i.hostAttrs);null!==e.mergedAttrs&&(sE(e,e.mergedAttrs,!0),null!==t&&D1(r,t,e))}(r,n,e,o);let l=null;null!==e&&(l=X1(e,i[sa]));const c=s.rendererFactory.createRenderer(e,t);let h=16;t.signals?h=4096:t.onPush&&(h=64);const p=rE(i,wO(t),null,h,i[n.index],n,s,c,null,null,l);return a.firstCreatePass&&gA(a,n,r.length-1),iE(i,p),i[n.index]=p}(Kt,_,de,Se,D,h,p);G=ib(M,Et),_&&function kK(n,e,t,r){if(r)xs(n,t,["ng-version",rO.full]);else{const{attrs:i,classes:s}=function DI(n){const e=[],t=[];let r=1,i=2;for(;r<n.length;){let s=n[r];if("string"==typeof s)2===i?""!==s&&e.push(s,n[++r]):8===i&&t.push(s);else{if(!os(i))break;i=s}r++}return{attrs:e,classes:t}}(e.selectors[0]);i&&xs(n,t,i),s&&s.length>0&&T1(n,t,s.join(" "))}}(p,de,_,r),void 0!==t&&function OK(n,e,t){const r=n.projection=[];for(let i=0;i<e.length;i++){const s=t[i];r.push(null!=s?Array.from(s):null)}}(G,this.ngContentSelectors,t),k=function NK(n,e,t,r,i,s){const o=Mr(),a=i[xe],l=vi(o,i);AO(a,i,o,t,null,r);for(let h=0;h<t.length;h++)wi(ha(i,a,o.directiveStart+h,o),i);TO(a,i,o),l&&wi(l,i);const c=ha(i,a,o.directiveStart+o.componentOffset,o);if(n[Wn]=i[Wn]=c,null!==s)for(const h of s)h(c,e);return dA(a,o,n),c}(di,de,Se,it,D,[FK]),bA(M,D,null)}finally{Om()}return new SK(this.componentType,k,Zh(G,D),D,G)}}class SK extends T8{constructor(e,t,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new AK(i),this.componentType=e}setInput(e,t){const r=this._tNode.inputs;let i;if(null!==r&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;const s=this._rootLView;vA(s[xe],s,i,e,t),this.previousInputValues.set(e,t),Cg(jr(this._tNode.index,s))}}get injector(){return new sc(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function FK(){const n=Mr();nc(ie()[xe],n)}function ve(n){let e=function HO(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const r=[n];for(;e;){let i;if(Is(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new L(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);const o=n;o.inputs=aE(n.inputs),o.inputTransforms=aE(n.inputTransforms),o.declaredInputs=aE(n.declaredInputs),o.outputs=aE(n.outputs);const a=i.hostBindings;a&&UK(n,a);const l=i.viewQuery,c=i.contentQueries;if(l&&VK(n,l),c&&BK(n,c),Sr(n.inputs,i.inputs),Sr(n.declaredInputs,i.declaredInputs),Sr(n.outputs,i.outputs),null!==i.inputTransforms&&(null===o.inputTransforms&&(o.inputTransforms={}),Sr(o.inputTransforms,i.inputTransforms)),Is(i)&&i.data.animation){const h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}const s=i.features;if(s)for(let o=0;o<s.length;o++){const a=s[o];a&&a.ngInherit&&a(n),a===ve&&(t=!1)}}e=Object.getPrototypeOf(e)}!function LK(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){const i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=$l(i.hostAttrs,t=$l(t,i.hostAttrs))}}(r)}function aE(n){return n===ss?{}:n===Ft?[]:n}function VK(n,e){const t=n.viewQuery;n.viewQuery=t?(r,i)=>{e(r,i),t(r,i)}:e}function BK(n,e){const t=n.contentQueries;n.contentQueries=t?(r,i,s)=>{e(r,i,s),t(r,i,s)}:e}function UK(n,e){const t=n.hostBindings;n.hostBindings=t?(r,i)=>{e(r,i),t(r,i)}:e}function qO(n){const e=n.inputConfig,t={};for(const r in e)if(e.hasOwnProperty(r)){const i=e[r];Array.isArray(i)&&i[2]&&(t[r]=i[2])}n.inputTransforms=t}function lE(n){return!!function EA(n){return null!==n&&("function"==typeof n||"object"==typeof n)}(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function va(n,e,t){return n[e]=t}function xi(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function ku(n,e,t,r){const i=xi(n,e,t);return xi(n,e+1,r)||i}function ds(n,e,t,r){const i=ie();return xi(i,tc(),e)&&(ft(),ya(tn(),i,n,e,t,r)),ds}function ef(n,e,t,r){return xi(n,tc(),t)?e+Me(t)+r:at}function rf(n,e,t,r,i,s,o,a,l,c){const p=function io(n,e,t,r,i,s){const o=ku(n,e,t,r);return ku(n,e+2,i,s)||o}(n,function Ts(){return qe.lFrame.bindingIndex}(),t,i,o,l);return Hi(4),p?e+Me(t)+r+Me(i)+s+Me(o)+a+Me(l)+c:at}function $t(n,e,t,r,i,s,o,a){const l=ie(),c=ft(),h=n+Et,p=c.firstCreatePass?function d7(n,e,t,r,i,s,o,a,l){const c=e.consts,h=Xh(e,n,4,o||null,eo(c,a));mA(e,t,h,eo(c,l)),nc(e,h);const p=h.tView=pA(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c,null);return null!==e.queries&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,t,r,i,s,o):c.data[h];As(p,!1);const g=sF(c,l,p,n);vu()&&jb(c,l,g,p),wi(g,l),iE(l,l[h]=SO(g,l,g,p)),Kl(p)&&hA(c,l,p),null!=o&&fA(l,p,a)}let sF=function oF(n,e,t,r){return da(!0),e[Xe].createComment("")};function Rs(n){return function Jl(n,e){return n[e]}(function Rm(){return qe.lFrame.contextLView}(),Et+n)}function tt(n,e,t){const r=ie();return xi(r,tc(),e)&&Ss(ft(),tn(),r,n,e,r[Xe],t,!1),tt}function TA(n,e,t,r,i){const o=i?"class":"style";vA(n,t,e.inputs[o],o,r)}function pe(n,e,t,r){const i=ie(),s=ft(),o=Et+n,a=i[Xe],l=s.firstCreatePass?function m7(n,e,t,r,i,s){const o=e.consts,l=Xh(e,n,2,r,eo(o,i));return mA(e,t,l,eo(o,s)),null!==l.attrs&&sE(l,l.attrs,!1),null!==l.mergedAttrs&&sE(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,i,e,t,r):s.data[o],c=aF(s,i,l,a,e,n);i[o]=c;const h=Kl(l);return As(l,!0),D1(a,c,l),32!=(32&l.flags)&&vu()&&jb(s,i,c,l),0===function WI(){return qe.lFrame.elementDepthCount}()&&wi(c,i),function Im(){qe.lFrame.elementDepthCount++}(),h&&(hA(s,i,l),dA(s,l,i)),null!==r&&fA(i,l),pe}function ce(){let n=Mr();Dm()?Sm():(n=n.parent,As(n,!1));const e=n;(function Cm(n){return qe.skipHydrationRootTNode===n})(e)&&function Tm(){qe.skipHydrationRootTNode=null}(),function KI(){qe.lFrame.elementDepthCount--}();const t=ft();return t.firstCreatePass&&(nc(t,n),hm(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function eC(n){return 0!=(8&n.flags)}(e)&&TA(t,e,ie(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function tC(n){return 0!=(16&n.flags)}(e)&&TA(t,e,ie(),e.stylesWithoutHost,!1),ce}function mr(n,e,t,r){return pe(n,e,t,r),ce(),mr}let aF=(n,e,t,r,i,s)=>(da(!0),Bb(r,i,function Bm(){return qe.lFrame.currentNamespace}()));function uf(){return ie()}function kg(n){return!!n&&"function"==typeof n.then}function uF(n){return!!n&&"function"==typeof n.subscribe}function Bn(n,e,t,r){const i=ie(),s=ft(),o=Mr();return function hF(n,e,t,r,i,s,o){const a=Kl(r),c=n.firstCreatePass&&PO(n),h=e[Wn],p=MO(e);let g=!0;if(3&r.type||o){const E=vi(r,e),x=o?o(E):E,M=p.length,D=o?G=>o(fn(G[r.index])):r.index;let k=null;if(!o&&a&&(k=function E7(n,e,t,r){const i=n.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const o=i[s];if(o===t&&i[s+1]===r){const a=e[ia],l=i[s+2];return a.length>l?a[l]:null}"string"==typeof o&&(s+=2)}return null}(n,e,i,r.index)),null!==k)(k.__ngLastListenerFn__||k).__ngNextListenerFn__=s,k.__ngLastListenerFn__=s,g=!1;else{s=pF(r,e,h,s,!1);const G=t.listen(x,i,s);p.push(s,G),c&&c.push(i,D,M,M+1)}}else s=pF(r,e,h,s,!1);const _=r.outputs;let v;if(g&&null!==_&&(v=_[i])){const E=v.length;if(E)for(let x=0;x<E;x+=2){const de=e[v[x]][v[x+1]].subscribe(s),Se=p.length;p.push(s,de),c&&c.push(i,r.index,Se,-(Se+1))}}}(s,i,i[Xe],o,n,e,r),Bn}function fF(n,e,t,r){try{return Cs(6,e,t),!1!==t(r)}catch(i){return kO(n,i),!1}finally{Cs(7,e,t)}}function pF(n,e,t,r,i){return function s(o){if(o===Function)return r;Cg(n.componentOffset>-1?jr(n.index,e):e);let l=fF(e,t,r,o),c=s.__ngNextListenerFn__;for(;c;)l=fF(e,t,c,o)&&l,c=c.__ngNextListenerFn__;return i&&!1===l&&o.preventDefault(),l}}function Ii(n=1){return function YI(n){return(qe.lFrame.contextLView=function Fm(n,e){for(;n>0;)e=e[ql],n--;return e}(n,qe.lFrame.contextLView))[Wn]}(n)}function w7(n,e){let t=null;const r=function as(n){const e=n.attrs;if(null!=e){const t=e.indexOf(5);if(!(1&t))return e[t+1]}return null}(n);for(let i=0;i<e.length;i++){const s=e[i];if("*"!==s){if(null===r?oh(n,s,!0):lm(r,s))return i}else t=i}return t}function Ou(n){const e=ie()[Pn][Ur];if(!e.projection){const r=e.projection=Tu(n?n.length:1,null),i=r.slice();let s=e.child;for(;null!==s;){const o=n?w7(s,n):0;null!==o&&(i[o]?i[o].projectionNext=s:r[o]=s,i[o]=s),s=s.next}}}function rr(n,e=0,t){const r=ie(),i=ft(),s=Xh(i,Et+n,16,null,t||null);null===s.projection&&(s.projection=e),Sm(),(!r[To]||ec())&&32!=(32&s.flags)&&function S6(n,e,t){A1(e[Xe],0,e,t,MC(n,t,e),b1(t.parent||e[Ur],t,e))}(i,r,s)}function RA(n,e,t){return df(n,"",e,"",t),RA}function df(n,e,t,r,i){const s=ie(),o=ef(s,e,t,r);return o!==at&&Ss(ft(),tn(),s,n,o,s[Xe],i,!1),df}function fE(n,e){return n<<17|e<<2}function hc(n){return n>>17&32767}function MA(n){return 2|n}function Fu(n){return(131068&n)>>2}function PA(n,e){return-131069&n|e<<2}function NA(n){return 1|n}function xF(n,e,t,r,i){const s=n[t+1],o=null===e;let a=r?hc(s):Fu(s),l=!1;for(;0!==a&&(!1===l||o);){const h=n[a+1];D7(n[a],e)&&(l=!0,n[a+1]=r?NA(h):MA(h)),a=r?hc(h):Fu(h)}l&&(n[t+1]=r?MA(s):NA(s))}function D7(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&cc(n,e)>=0}function Ci(n,e){return function Po(n,e,t,r){const i=ie(),s=ft(),o=Hi(2);s.firstUpdatePass&&function PF(n,e,t,r){const i=n.data;if(null===i[t+1]){const s=i[ni()],o=function MF(n,e){return e>=n.expandoStartIndex}(n,t);(function FF(n,e){return 0!=(n.flags&(e?8:16))})(s,r)&&null===e&&!o&&(e=!1),e=function L7(n,e,t,r){const i=function Nm(n){const e=qe.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let s=r?e.residualClasses:e.residualStyles;if(null===i)0===(r?e.classBindings:e.styleBindings)&&(t=Og(t=kA(null,n,e,t,r),e.attrs,r),s=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==i)if(t=kA(i,n,e,t,r),null===s){let l=function V7(n,e,t){const r=t?e.classBindings:e.styleBindings;if(0!==Fu(r))return n[hc(r)]}(n,e,r);void 0!==l&&Array.isArray(l)&&(l=kA(null,n,e,l[1],r),l=Og(l,e.attrs,r),function B7(n,e,t,r){n[hc(t?e.classBindings:e.styleBindings)]=r}(n,e,r,l))}else s=function U7(n,e,t){let r;const i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++)r=Og(r,n[s].hostAttrs,t);return Og(r,e.attrs,t)}(n,e,r)}return void 0!==s&&(r?e.residualClasses=s:e.residualStyles=s),t}(i,s,e,r),function A7(n,e,t,r,i,s){let o=s?e.classBindings:e.styleBindings,a=hc(o),l=Fu(o);n[r]=t;let h,c=!1;if(Array.isArray(t)?(h=t[1],(null===h||cc(t,h)>0)&&(c=!0)):h=t,i)if(0!==l){const g=hc(n[a+1]);n[r+1]=fE(g,a),0!==g&&(n[g+1]=PA(n[g+1],r)),n[a+1]=function I7(n,e){return 131071&n|e<<17}(n[a+1],r)}else n[r+1]=fE(a,0),0!==a&&(n[a+1]=PA(n[a+1],r)),a=r;else n[r+1]=fE(l,0),0===a?a=r:n[l+1]=PA(n[l+1],r),l=r;c&&(n[r+1]=MA(n[r+1])),xF(n,h,r,!0),xF(n,h,r,!1),function T7(n,e,t,r,i){const s=i?n.residualClasses:n.residualStyles;null!=s&&"string"==typeof e&&cc(s,e)>=0&&(t[r+1]=NA(t[r+1]))}(e,h,n,r,s),o=fE(a,l),s?e.classBindings=o:e.styleBindings=o}(i,s,e,t,o,r)}}(s,n,o,r),e!==at&&xi(i,o,e)&&function kF(n,e,t,r,i,s,o,a){if(!(3&e.type))return;const l=n.data,c=l[a+1],h=function C7(n){return 1==(1&n)}(c)?OF(l,e,t,i,Fu(c),o):void 0;pE(h)||(pE(s)||function x7(n){return 2==(2&n)}(c)&&(s=OF(l,null,t,i,a,o)),function M6(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let s=-1===r.indexOf("-")?void 0:Pr.DashCase;null==i?n.removeStyle(t,r,s):("string"==typeof i&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=Pr.Important),n.setStyle(t,r,i,s))}}(r,o,Eh(ni(),t),i,s))}(s,s.data[ni()],i,i[Xe],n,i[o+1]=function G7(n,e){return null==n||""===n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Qt(Ds(n)))),n}(e,t),r,o)}(n,e,null,!0),Ci}function kA(n,e,t,r,i){let s=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(s=e[a],r=Og(r,s.hostAttrs,i),s!==n);)a++;return null!==n&&(t.directiveStylingLast=a),r}function Og(n,e,t){const r=t?1:2;let i=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?i=o:i===r&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),$i(n,o,!!t||e[++s]))}return void 0===n?null:n}function OF(n,e,t,r,i,s){const o=null===e;let a;for(;i>0;){const l=n[i],c=Array.isArray(l),h=c?l[1]:l,p=null===h;let g=t[i+1];g===at&&(g=p?Ft:void 0);let _=p?jh(g,r):h===r?g:void 0;if(c&&!pE(_)&&(_=jh(l,r)),pE(_)&&(a=_,o))return a;const v=n[i+1];i=o?hc(v):Fu(v)}if(null!==e){let l=s?e.residualClasses:e.residualStyles;null!=l&&(a=jh(l,r))}return a}function pE(n){return void 0!==n}function Ee(n,e=""){const t=ie(),r=ft(),i=n+Et,s=r.firstCreatePass?Xh(r,i,1,e,null):r.data[i],o=LF(r,t,s,e,n);t[i]=o,vu()&&jb(r,t,o,s),As(s,!1)}let LF=(n,e,t,r,i)=>(da(!0),function Vb(n,e){return n.createText(e)}(e[Xe],r));function ko(n){return gr("",n,""),ko}function gr(n,e,t){const r=ie(),i=ef(r,n,e,t);return i!==at&&ul(r,ni(),i),gr}function OA(n,e,t,r,i,s,o,a,l){const c=ie(),h=rf(c,n,e,t,r,i,s,o,a,l);return h!==at&&ul(c,ni(),h),OA}function Fg(n,e,t){const r=ie();return xi(r,tc(),e)&&Ss(ft(),tn(),r,n,e,r[Xe],t,!0),Fg}const pf="en-US";let rL=pf;function VA(n,e,t,r,i){if(n=P(n),Array.isArray(n))for(let s=0;s<n.length;s++)VA(n[s],e,t,r,i);else{const s=ft(),o=ie();let a=Nu(n)?n:P(n.provide),l=K1(n);const c=Mr(),h=1048575&c.providerIndexes,p=c.directiveStart,g=c.providerIndexes>>20;if(Nu(n)||!n.multi){const _=new bu(l,i,C),v=UA(a,e,i?h:h+g,p);-1===v?(wu(Fh(c,o),s,a),BA(s,n,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(_),o.push(_)):(t[v]=_,o[v]=_)}else{const _=UA(a,e,h+g,p),v=UA(a,e,h,h+g),x=v>=0&&t[v];if(i&&!x||!i&&!(_>=0&&t[_])){wu(Fh(c,o),s,a);const M=function uZ(n,e,t,r,i){const s=new bu(n,t,C);return s.multi=[],s.index=e,s.componentProviders=0,DL(s,i,r&&!t),s}(i?cZ:lZ,t.length,i,r,l);!i&&x&&(t[v].providerFactory=M),BA(s,n,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),t.push(M),o.push(M)}else BA(s,n,_>-1?_:v,DL(t[i?v:_],l,!i&&r));!i&&r&&x&&t[v].componentProviders++}}}function BA(n,e,t,r){const i=Nu(e),s=function d8(n){return!!n.useClass}(e);if(i||s){const l=(s?P(e.useClass):e).prototype.ngOnDestroy;if(l){const c=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){const h=c.indexOf(t);-1===h?c.push(t,[r,l]):c[h+1].push(r,l)}else c.push(t,l)}}}function DL(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function UA(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function lZ(n,e,t,r){return jA(this.multi,[])}function cZ(n,e,t,r){const i=this.multi;let s;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=ha(t,t[xe],this.providerFactory.index,r);s=a.slice(0,o),jA(i,s);for(let l=o;l<a.length;l++)s.push(a[l])}else s=[],jA(i,s);return s}function jA(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function an(n,e=[]){return t=>{t.providersResolver=(r,i)=>function aZ(n,e,t){const r=ft();if(r.firstCreatePass){const i=Is(n);VA(t,r.data,r.blueprint,i,!0),VA(e,r.data,r.blueprint,i,!1)}}(r,i?i(n):n,e)}}class mf{}class SL{}class HA extends mf{constructor(e,t,r){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new UO(this);const i=_i(e);this._bootstrapComponents=cl(i.bootstrap),this._r3Injector=bO(e,t,[{provide:mf,useValue:this},{provide:eE,useValue:this.componentFactoryResolver},...r],Qt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class $A extends SL{constructor(e){super(),this.moduleType=e}create(e){return new HA(this.moduleType,e,[])}}class RL extends mf{constructor(e){super(),this.componentFactoryResolver=new UO(this),this.instance=null;const t=new WC([...e.providers,{provide:mf,useValue:this},{provide:eE,useValue:this.componentFactoryResolver}],e.parent||Kb(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function GA(n,e,t=null){return new RL({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}let fZ=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const r=G1(0,t.type),i=r.length>0?GA([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,i)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=se({token:n,providedIn:"environment",factory:()=>new n(O(_a))}),n})();function ML(n){n.getStandaloneInjector=e=>e.get(fZ).getOrCreateStandaloneInjector(n)}function qA(n,e,t){const r=ti()+n,i=ie();return i[r]===at?va(i,r,t?e.call(t):e()):function Rg(n,e){return n[e]}(i,r)}function WA(n,e,t,r){return function BL(n,e,t,r,i,s){const o=e+t;return xi(n,o,i)?va(n,o+1,s?r.call(s,i):r(i)):Hg(n,o+1)}(ie(),ti(),n,e,t,r)}function VL(n,e,t,r,i){return function UL(n,e,t,r,i,s,o){const a=e+t;return ku(n,a,i,s)?va(n,a+2,o?r.call(o,i,s):r(i,s)):Hg(n,a+2)}(ie(),ti(),n,e,t,r,i)}function Hg(n,e){const t=n[e];return t===at?void 0:t}function KA(n){return e=>{setTimeout(n,void 0,e)}}const Un=class FZ extends z{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,r){let i=e,s=t||(()=>null),o=r;if(e&&"object"==typeof e){const l=e;i=l.next?.bind(l),s=l.error?.bind(l),o=l.complete?.bind(l)}this.__isAsync&&(s=KA(s),i&&(i=KA(i)),o&&(o=KA(o)));const a=super.subscribe({next:i,error:s,complete:o});return e instanceof kt&&e.add(a),a}};function LZ(){return this._results[Symbol.iterator]()}class QA{get changes(){return this._changes||(this._changes=new Un)}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=QA.prototype;t[Symbol.iterator]||(t[Symbol.iterator]=LZ)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const r=this;r.dirty=!1;const i=function us(n){return n.flat(Number.POSITIVE_INFINITY)}(e);(this._changesDetected=!function Jm(n,e,t){if(n.length!==e.length)return!1;for(let r=0;r<n.length;r++){let i=n[r],s=e[r];if(t&&(i=t(i),s=t(s)),s!==i)return!1}return!0}(r._results,i,t))&&(r._results=i,r.length=i.length,r.last=i[this.length-1],r.first=i[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let dl=(()=>{class n{}return n.__NG_ELEMENT_ID__=UZ,n})();const VZ=dl,BZ=class extends VZ{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t,null)}createEmbeddedViewImpl(e,t,r){const o=this._declarationTContainer.tView,a=rE(this._declarationLView,o,e,4096&this._declarationLView[Ye]?4096:16,null,o.declTNode,null,null,null,t||null,r||null);a[pu]=this._declarationLView[this._declarationTContainer.index];const c=this._declarationLView[Ys];return null!==c&&(a[Ys]=c.createEmbeddedView(o)),bA(o,a,e),new Dg(a)}};function UZ(){return vE(Mr(),ie())}function vE(n,e){return 4&n.type?new BZ(e,n,Zh(n,e)):null}let Oo=(()=>{class n{}return n.__NG_ELEMENT_ID__=WZ,n})();function WZ(){return QL(Mr(),ie())}const KZ=Oo,WL=class extends KZ{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Zh(this._hostTNode,this._hostLView)}get injector(){return new sc(this._hostTNode,this._hostLView)}get parentInjector(){const e=zm(this._hostTNode,this._hostLView);if(vb(e)){const t=kh(e,this._hostLView),r=rc(e);return new sc(t[xe].data[r+8],t)}return new sc(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=KL(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-fr}createEmbeddedView(e,t,r){let i,s;"number"==typeof r?i=r:null!=r&&(i=r.index,s=r.injector);const a=e.createEmbeddedViewImpl(t||{},s,null);return this.insertImpl(a,i,false),a}createComponent(e,t,r,i,s){const o=e&&!function ac(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const E=t||{};a=E.index,r=E.injector,i=E.projectableNodes,s=E.environmentInjector||E.ngModuleRef}const l=o?e:new Sg(Mt(e)),c=r||this.parentInjector;if(!s&&null==l.ngModule){const x=(o?c:this.parentInjector).get(_a,null);x&&(s=x)}Mt(l.componentType??{});const _=l.create(c,i,null,s);return this.insertImpl(_.hostView,a,false),_}insert(e,t){return this.insertImpl(e,t,!1)}insertImpl(e,t,r){const i=e._lView,s=i[xe];if(function GI(n){return yi(n[en])}(i)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const c=i[en],h=new WL(c,c[Ur],c[en]);h.detach(h.indexOf(e))}}const o=this._adjustIndex(t),a=this._lContainer;if(function x6(n,e,t,r){const i=fr+r,s=t.length;r>0&&(t[i-1][ji]=e),r<s-fr?(e[ji]=t[i],Uh(t,fr+r,e)):(t.push(e),e[ji]=null),e[en]=t;const o=e[pu];null!==o&&t!==o&&function I6(n,e){const t=n[la];e[Pn]!==e[en][en][Pn]&&(n[zv]=!0),null===t?n[la]=[e]:t.push(e)}(o,e);const a=e[Ys];null!==a&&a.insertView(n),e[Ye]|=128}(s,i,a,o),!r){const l=NC(o,a),c=i[Xe],h=Ub(c,a[ls]);null!==h&&function b6(n,e,t,r,i,s){r[wn]=i,r[Ur]=e,mg(n,r,t,1,i,s)}(s,a[Ur],c,i,h,l)}return e.attachToViewContainerRef(),Uh(YA(a),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=KL(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),r=SC(this._lContainer,t);r&&(lc(YA(this._lContainer),t),g1(r[xe],r))}detach(e){const t=this._adjustIndex(e,-1),r=SC(this._lContainer,t);return r&&null!=lc(YA(this._lContainer),t)?new Dg(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function KL(n){return n[8]}function YA(n){return n[8]||(n[8]=[])}function QL(n,e){let t;const r=e[n.index];return yi(r)?t=r:(t=SO(r,e,null,n),e[n.index]=t,iE(e,t)),ZL(t,e,n,r),new WL(t,n,e)}let ZL=function YL(n,e,t,r){if(n[ls])return;let i;i=8&t.type?fn(r):function QZ(n,e){const t=n[Xe],r=t.createComment(""),i=vi(e,n);return Mu(t,Ub(t,i),r,function D6(n,e){return n.nextSibling(e)}(t,i),!1),r}(e,t),n[ls]=i};class XA{constructor(e){this.queryList=e,this.matches=null}clone(){return new XA(this.queryList)}setDirty(){this.queryList.setDirty()}}class JA{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const r=null!==e.contentQueries?e.contentQueries[0]:t.length,i=[];for(let s=0;s<r;s++){const o=t.getByIndex(s);i.push(this.queries[o.indexInDeclarationView].clone())}return new JA(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==nV(e,t).matches&&this.queries[t].setDirty()}}class XL{constructor(e,t,r=null){this.predicate=e,this.flags=t,this.read=r}}class eT{constructor(e=[]){this.queries=e}elementStart(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let r=0;r<this.length;r++){const i=null!==t?t.length:0,s=this.getByIndex(r).embeddedTView(e,i);s&&(s.indexInDeclarationView=r,null!==t?t.push(s):t=[s])}return null!==t?new eT(t):null}template(e,t){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class tT{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new tT(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==t;)r=r.parent;return t===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const r=this.metadata.predicate;if(Array.isArray(r))for(let i=0;i<r.length;i++){const s=r[i];this.matchTNodeWithReadOption(e,t,XZ(t,s)),this.matchTNodeWithReadOption(e,t,ic(t,e,s,!1,!1))}else r===dl?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,ic(t,e,r,!1,!1))}matchTNodeWithReadOption(e,t,r){if(null!==r){const i=this.metadata.read;if(null!==i)if(i===et||i===Oo||i===dl&&4&t.type)this.addMatch(t.index,-2);else{const s=ic(t,e,i,!1,!1);null!==s&&this.addMatch(t.index,s)}else this.addMatch(t.index,r)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function XZ(n,e){const t=n.localNames;if(null!==t)for(let r=0;r<t.length;r+=2)if(t[r]===e)return t[r+1];return null}function eY(n,e,t,r){return-1===t?function JZ(n,e){return 11&n.type?Zh(n,e):4&n.type?vE(n,e):null}(e,n):-2===t?function tY(n,e,t){return t===et?Zh(e,n):t===dl?vE(e,n):t===Oo?QL(e,n):void 0}(n,e,r):ha(n,n[xe],t,e)}function JL(n,e,t,r){const i=e[Ys].queries[r];if(null===i.matches){const s=n.data,o=t.matches,a=[];for(let l=0;l<o.length;l+=2){const c=o[l];a.push(c<0?null:eY(e,s[c],o[l+1],t.metadata.read))}i.matches=a}return i.matches}function nT(n,e,t,r){const i=n.queries.getByIndex(t),s=i.matches;if(null!==s){const o=JL(n,e,i,t);for(let a=0;a<s.length;a+=2){const l=s[a];if(l>0)r.push(o[a/2]);else{const c=s[a+1],h=e[-l];for(let p=fr;p<h.length;p++){const g=h[p];g[pu]===g[en]&&nT(g[xe],g,c,r)}if(null!==h[la]){const p=h[la];for(let g=0;g<p.length;g++){const _=p[g];nT(_[xe],_,c,r)}}}}}return r}function Ai(n){const e=ie(),t=ft(),r=Ah();Th(r+1);const i=nV(t,r);if(n.dirty&&function HI(n){return 4==(4&n[Ye])}(e)===(2==(2&i.metadata.flags))){if(null===i.matches)n.reset([]);else{const s=i.crossesNgTemplate?nT(t,e,r,[]):JL(t,e,i,r);n.reset(s,M8),n.notifyOnChanges()}return!0}return!1}function fc(n,e,t){const r=ft();r.firstCreatePass&&(tV(r,new XL(n,e,t),-1),2==(2&e)&&(r.staticViewQueries=!0)),eV(r,ie(),e)}function hl(n,e,t,r){const i=ft();if(i.firstCreatePass){const s=Mr();tV(i,new XL(e,t,r),s.index),function rY(n,e){const t=n.contentQueries||(n.contentQueries=[]);e!==(t.length?t[t.length-1]:-1)&&t.push(n.queries.length-1,e)}(i,n),2==(2&t)&&(i.staticContentQueries=!0)}eV(i,ie(),t)}function Ti(){return function nY(n,e){return n[Ys].queries[e].queryList}(ie(),Ah())}function eV(n,e,t){const r=new QA(4==(4&t));(function J8(n,e,t,r){const i=MO(e);i.push(t),n.firstCreatePass&&PO(n).push(r,i.length-1)})(n,e,r,r.destroy),null===e[Ys]&&(e[Ys]=new JA),e[Ys].queries.push(new XA(r))}function tV(n,e,t){null===n.queries&&(n.queries=new eT),n.queries.track(new tT(e,t))}function nV(n,e){return n.queries.getByIndex(e)}function rV(n,e){return vE(n,e)}const lT=new oe("Application Initializer");let cT=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=me(lT,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const t=[];for(const i of this.appInits){const s=i();if(kg(s))t.push(s);else if(uF(s)){const o=new Promise((a,l)=>{s.subscribe({complete:a,error:l})});t.push(o)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),0===t.length&&r(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bV=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const wa=new oe("LocaleId",{providedIn:"root",factory:()=>me(wa,Ue.Optional|Ue.SkipSelf)||function IY(){return typeof $localize<"u"&&$localize.locale||pf}()});let EE=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Q(!1)}add(){this.hasPendingTasks.next(!0);const t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class AY{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let EV=(()=>{class n{compileModuleSync(t){return new $A(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const r=this.compileModuleSync(t),s=cl(_i(t).declarations).reduce((o,a)=>{const l=Mt(a);return l&&o.push(new Sg(l)),o},[]);return new AY(r,s)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function IV(...n){}class Je{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Un(!1),this.onMicrotaskEmpty=new Un(!1),this.onStable=new Un(!1),this.onError=new Un(!1),typeof Zone>"u")throw new L(908,!1);Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&t,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function SY(){let n=qt.requestAnimationFrame,e=qt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function PY(n){const e=()=>{!function MY(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(qt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,dT(n),n.isCheckStableRunning=!0,uT(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),dT(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,r,i,s,o,a)=>{try{return CV(n),t.invokeTask(i,s,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||n.shouldCoalesceRunChangeDetection)&&e(),AV(n)}},onInvoke:(t,r,i,s,o,a,l)=>{try{return CV(n),t.invoke(i,s,o,a,l)}finally{n.shouldCoalesceRunChangeDetection&&e(),AV(n)}},onHasTask:(t,r,i,s)=>{t.hasTask(i,s),r===i&&("microTask"==s.change?(n._hasPendingMicrotasks=s.microTask,dT(n),uT(n)):"macroTask"==s.change&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(t,r,i,s)=>(t.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}(i)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Je.isInAngularZone())throw new L(909,!1)}static assertNotInAngularZone(){if(Je.isInAngularZone())throw new L(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){const s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,RY,IV,IV);try{return s.runTask(o,t,r)}finally{s.cancelTask(o)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}}const RY={};function uT(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function dT(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function CV(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function AV(n){n._nesting--,uT(n)}class NY{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Un,this.onMicrotaskEmpty=new Un,this.onStable=new Un,this.onError=new Un}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}}const TV=new oe("",{providedIn:"root",factory:DV});function DV(){const n=me(Je);let e=!0;return V(new dt(i=>{e=n.isStable&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks,n.runOutsideAngular(()=>{i.next(e),i.complete()})}),new dt(i=>{let s;n.runOutsideAngular(()=>{s=n.onStable.subscribe(()=>{Je.assertNotInAngularZone(),queueMicrotask(()=>{!e&&!n.hasPendingMacrotasks&&!n.hasPendingMicrotasks&&(e=!0,i.next(!0))})})});const o=n.onUnstable.subscribe(()=>{Je.assertInAngularZone(),e&&(e=!1,n.runOutsideAngular(()=>{i.next(!1)}))});return()=>{s.unsubscribe(),o.unsubscribe()}}).pipe($e()))}const SV=new oe(""),wE=new oe("");let pT,hT=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,pT||(function kY(n){pT=n}(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Je.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(t)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let s=-1;r&&r>0&&(s=setTimeout(()=>{this._callbacks=this._callbacks.filter(o=>o.timeoutId!==s),t(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:t,timeoutId:s,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}}return n.\u0275fac=function(t){return new(t||n)(O(Je),O(fT),O(wE))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),fT=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return pT?.findTestabilityInTree(this,t,r)??null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),pc=null;const RV=new oe("AllowMultipleToken"),mT=new oe("PlatformDestroyListeners"),xE=new oe("appBootstrapListener");class PV{constructor(e,t){this.name=e,this.token=t}}function kV(n,e,t=[]){const r=`Platform: ${e}`,i=new oe(r);return(s=[])=>{let o=gT();if(!o||o.injector.get(RV,!1)){const a=[...t,...s,{provide:i,useValue:!0}];n?n(a):function LY(n){if(pc&&!pc.get(RV,!1))throw new L(400,!1);(function MV(){!function LI(n){Jv=n}(()=>{throw new L(600,!1)})})(),pc=n;const e=n.get(FV);(function NV(n){n.get(Q1,null)?.forEach(t=>t())})(n)}(function OV(n=[],e){return Mo.create({name:e,providers:[{provide:zC,useValue:"platform"},{provide:mT,useValue:new Set([()=>pc=null])},...n]})}(a,r))}return function BY(n){const e=gT();if(!e)throw new L(401,!1);return e}()}}function gT(){return pc?.get(FV)??null}let FV=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){const i=function UY(n="zone.js",e){return"noop"===n?new NY:"zone.js"===n?new Je(e):n}(r?.ngZone,function LV(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing}));return i.run(()=>{const s=function hZ(n,e,t){return new HA(n,e,t)}(t.moduleType,this.injector,function HV(n){return[{provide:Je,useFactory:n},{provide:bg,multi:!0,useFactory:()=>{const e=me(HY,{optional:!0});return()=>e.initialize()}},{provide:jV,useFactory:jY},{provide:TV,useFactory:DV}]}(()=>i)),o=s.injector.get(ll,null);return i.runOutsideAngular(()=>{const a=i.onError.subscribe({next:l=>{o.handleError(l)}});s.onDestroy(()=>{IE(this._modules,s),a.unsubscribe()})}),function VV(n,e,t){try{const r=t();return kg(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}(o,i,()=>{const a=s.injector.get(cT);return a.runInitializers(),a.donePromise.then(()=>(function iL(n){ns(n,"Expected localeId to be defined"),"string"==typeof n&&(rL=n.toLowerCase().replace(/_/g,"-"))}(s.injector.get(wa,pf)||pf),this._moduleDoBootstrap(s),s))})})}bootstrapModule(t,r=[]){const i=BV({},r);return function OY(n,e,t){const r=new $A(t);return Promise.resolve(r)}(0,0,t).then(s=>this.bootstrapModuleFactory(s,i))}_moduleDoBootstrap(t){const r=t.injector.get(Vu);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(i=>r.bootstrap(i));else{if(!t.instance.ngDoBootstrap)throw new L(-403,!1);t.instance.ngDoBootstrap(r)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new L(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());const t=this._injector.get(mT,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(t){return new(t||n)(O(Mo))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function BV(n,e){return Array.isArray(e)?e.reduce(BV,n):{...n,...e}}let Vu=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=me(jV),this.zoneIsStable=me(TV),this.componentTypes=[],this.components=[],this.isStable=me(EE).hasPendingTasks.pipe(Dt(t=>t?K(!1):this.zoneIsStable),on(),$e()),this._injector=me(_a)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,r){const i=t instanceof tO;if(!this._injector.get(cT).done)throw!i&&function ra(n){const e=Mt(n)||hr(n)||Jr(n);return null!==e&&e.standalone}(t),new L(405,!1);let o;o=i?t:this._injector.get(eE).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function FY(n){return n.isBoundToModule}(o)?void 0:this._injector.get(mf),c=o.create(Mo.NULL,[],r||o.selector,a),h=c.location.nativeElement,p=c.injector.get(SV,null);return p?.registerApplication(h),c.onDestroy(()=>{this.detachView(c.hostView),IE(this.components,c),p?.unregisterApplication(h)}),this._loadComponent(c),c}tick(){if(this._runningTick)throw new L(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this.internalErrorHandler(t)}finally{this._runningTick=!1}}attachView(t){const r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){const r=t;IE(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);const r=this._injector.get(xE,[]);r.push(...this._bootstrapListeners),r.forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>IE(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new L(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function IE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const jV=new oe("",{providedIn:"root",factory:()=>me(ll).handleError.bind(void 0)});function jY(){const n=me(Je),e=me(ll);return t=>n.runOutsideAngular(()=>e.handleError(t))}let HY=(()=>{class n{constructor(){this.zone=me(Je),this.applicationRef=me(Vu)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();let zg=(()=>{class n{}return n.__NG_ELEMENT_ID__=GY,n})();function GY(n){return function zY(n,e,t){if(ca(n)&&!t){const r=jr(n.index,e);return new Dg(r,r)}return 47&n.type?new Dg(e[Pn],e):null}(Mr(),ie(),16==(16&n))}class WV{constructor(){}supports(e){return lE(e)}create(e){return new YY(e)}}const ZY=(n,e)=>e;class YY{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||ZY}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,s=null;for(;t||r;){const o=!r||t&&t.currentIndex<QV(r,i,s)?t:r,a=QV(o,i,s),l=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(t=t._next,null==o.previousIndex)i++;else{s||(s=[]);const c=a-i,h=l-i;if(c!=h){for(let g=0;g<c;g++){const _=g<s.length?s[g]:s[g]=0,v=_+g;h<=v&&v<c&&(s[g]=_+1)}s[o.previousIndex]=h-c}}a!==l&&e(o,a,l)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!lE(e))throw new L(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let i,s,o,t=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,s,o,a)),Object.is(t.item,s)||this._addIdentityChange(t,s)):(t=this._mismatch(t,s,o,a),r=!0),t=t._next}else i=0,function WK(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Symbol.iterator]();let r;for(;!(r=t.next()).done;)e(r.value)}}(e,a=>{o=this._trackByFn(i,a),null!==t&&Object.is(t.trackById,o)?(r&&(t=this._verifyReinsertion(t,a,o,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,i),r=!0),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let s;return null===e?s=this._itTail:(s=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,s,i)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,i))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,s,i)):e=this._addAfter(new XY(t,r),s,i),e}_verifyReinsertion(e,t,r,i){let s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==s?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const i=e._prevRemoved,s=e._nextRemoved;return null===i?this._removalsHead=s:i._nextRemoved=s,null===s?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){const i=null===t?this._itHead:t._next;return e._next=i,e._prev=t,null===i?this._itTail=e:i._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new KV),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,r=e._next;return null===t?this._itHead=r:t._next=r,null===r?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new KV),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class XY{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class JY{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===t||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const t=e._prevDup,r=e._nextDup;return null===t?this._head=r:t._nextDup=r,null===r?this._tail=t:r._prevDup=t,null===this._head}}class KV{constructor(){this.map=new Map}put(e){const t=e.trackById;let r=this.map.get(t);r||(r=new JY,this.map.set(t,r)),r.add(e)}get(e,t){const i=this.map.get(e);return i?i.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function QV(n,e,t){const r=n.previousIndex;if(null===r)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function YV(){return new qg([new WV])}let qg=(()=>{class n{constructor(t){this.factories=t}static create(t,r){if(null!=r){const i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||YV()),deps:[[n,new uc,new no]]}}find(t){const r=this.factories.find(i=>i.supports(t));if(null!=r)return r;throw new L(901,!1)}}return n.\u0275prov=se({token:n,providedIn:"root",factory:YV}),n})();const iX=kV(null,"core",[]);let sX=(()=>{class n{constructor(t){}}return n.\u0275fac=function(t){return new(t||n)(O(Vu))},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({}),n})();function yf(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let xT=null;function mc(){return xT}class _X{}const zt=new oe("DocumentToken");let IT=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:function(){return me(vX)},providedIn:"platform"}),n})();const yX=new oe("Location Initialized");let vX=(()=>{class n extends IT{constructor(){super(),this._doc=me(zt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return mc().getBaseHref(this._doc)}onPopState(t){const r=mc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=mc().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:function(){return new n},providedIn:"platform"}),n})();function CT(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function s2(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function fl(n){return n&&"?"!==n[0]?"?"+n:n}let ju=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:function(){return me(a2)},providedIn:"root"}),n})();const o2=new oe("appBaseHref");let a2=(()=>{class n extends ju{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??me(zt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return CT(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+fl(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const o=this.prepareExternalUrl(i+fl(s));this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){const o=this.prepareExternalUrl(i+fl(s));this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(O(IT),O(o2,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),bX=(()=>{class n extends ju{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=CT(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let o=this.prepareExternalUrl(i+fl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,r,o)}replaceState(t,r,i,s){let o=this.prepareExternalUrl(i+fl(s));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(O(IT),O(o2,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),AT=(()=>{class n{constructor(t){this._subject=new Un,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function xX(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(s2(l2(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+fl(r))}normalize(t){return n.stripTrailingSlash(function wX(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,l2(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fl(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+fl(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=fl,n.joinWithSlash=CT,n.stripTrailingSlash=s2,n.\u0275fac=function(t){return new(t||n)(O(ju))},n.\u0275prov=se({token:n,factory:function(){return function EX(){return new AT(O(ju))}()},providedIn:"root"}),n})();function l2(n){return n.replace(/\/index.html$/,"")}function _2(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}class aJ{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Qg=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,o)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new aJ(i.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)r.remove(null===s?void 0:s);else if(null!==s){const a=r.get(s);r.move(a,o),b2(a,i)}});for(let i=0,s=r.length;i<s;i++){const a=r.get(i).context;a.index=i,a.count=s,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{b2(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(C(Oo),C(dl),C(qg))},n.\u0275dir=ne({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function b2(n,e){n.context.$implicit=e.item}let Hu=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new lJ,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){E2("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){E2("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(C(Oo),C(dl))},n.\u0275dir=ne({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class lJ{constructor(){this.$implicit=null,this.ngIf=null}}function E2(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Qt(e)}'.`)}class VT{constructor(e,t){this._viewContainerRef=e,this._templateRef=t,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(e){e&&!this._created?this.create():!e&&this._created&&this.destroy()}}let LE=(()=>{class n{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews.push(t)}_matchCase(t){const r=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||r,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),r}_updateDefaultCases(t){if(this._defaultViews.length>0&&t!==this._defaultUsed){this._defaultUsed=t;for(const r of this._defaultViews)r.enforceState(t)}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ne({type:n,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),n})(),w2=(()=>{class n{constructor(t,r,i){this.ngSwitch=i,i._addCase(),this._view=new VT(t,r)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return n.\u0275fac=function(t){return new(t||n)(C(Oo),C(dl),C(LE,9))},n.\u0275dir=ne({type:n,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),n})(),I2=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:o}=this;this._viewRef=r.createEmbeddedView(i,s,o?{injector:o}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(C(Oo))},n.\u0275dir=ne({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[Rr]}),n})(),VE=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({}),n})();const A2="browser";function $u(n){return n===A2}function xa(n){return"server"===n}let FJ=(()=>{class n{}return n.\u0275prov=se({token:n,providedIn:"root",factory:()=>new LJ(O(zt),window)}),n})();class LJ{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function VJ(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&"function"==typeof n.body.attachShadow){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=T2(this.window.history)||T2(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function T2(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class D2{}class aee extends _X{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class GT extends aee{static makeCurrent(){!function gX(n){xT||(xT=n)}(new GT)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function lee(){return Yg=Yg||document.querySelector("base"),Yg?Yg.getAttribute("href"):null}();return null==t?null:function cee(n){jE=jE||document.createElement("a"),jE.setAttribute("href",n);const e=jE.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Yg=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return _2(document.cookie,e)}}let jE,Yg=null,dee=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const zT=new oe("EventManagerPlugins");let N2=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new L(5101,!1);return this._eventNameToPlugin.set(t,r),r}}return n.\u0275fac=function(t){return new(t||n)(O(zT),O(Je))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();class k2{constructor(e){this._doc=e}}const qT="ng-app-id";let O2=(()=>{class n{constructor(t,r,i,s={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xa(s),this.resetHostNodes()}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){const t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(const r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){const t=this.doc.head?.querySelectorAll(`style[${qT}="${this.appId}"]`);if(t?.length){const r=new Map;return t.forEach(i=>{null!=i.textContent&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){const i=this.styleRef;if(i.has(t)){const s=i.get(t);return s.usage+=r,s.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){const i=this.styleNodesInDOM,s=i?.get(r);if(s?.parentNode===t)return i.delete(r),s.removeAttribute(qT),s;{const o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=r,this.platformIsServer&&o.setAttribute(qT,this.appId),o}}addStyleToHost(t,r){const i=this.getStyleElement(t,r);t.appendChild(i);const s=this.styleRef,o=s.get(r)?.elements;o?o.push(i):s.set(r,{elements:[i],usage:1})}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(O(zt),O(Qb),O(ZC,8),O(nr))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const WT={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},KT=/%COMP%/g,mee=new oe("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function L2(n,e){return e.map(t=>t.replace(KT,n))}let QT=(()=>{class n{constructor(t,r,i,s,o,a,l,c=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=xa(a),this.defaultRenderer=new ZT(t,o,l,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===gi.ShadowDom&&(r={...r,encapsulation:gi.Emulated});const i=this.getOrCreateRenderer(t,r);return i instanceof B2?i.applyToHost(t):i instanceof YT&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case gi.Emulated:s=new B2(l,c,r,this.appId,h,o,a,p);break;case gi.ShadowDom:return new vee(l,c,t,r,o,a,this.nonce,p);default:s=new YT(l,c,r,h,o,a,p)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}}return n.\u0275fac=function(t){return new(t||n)(O(N2),O(O2),O(Qb),O(mee),O(zt),O(nr),O(Je),O(ZC))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();class ZT{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(WT[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(V2(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(V2(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new L(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=WT[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=WT[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(Pr.DashCase|Pr.Important)?e.style.setProperty(t,r,i&Pr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Pr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){if("string"==typeof e&&!(e=mc().getGlobalEventTarget(this.doc,e)))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if("__ngUnwrap__"===t)return e;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))&&t.preventDefault()}}}function V2(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class vee extends ZT{constructor(e,t,r,i,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=L2(i.id,i.styles);for(const h of c){const p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class YT extends ZT{constructor(e,t,r,i,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.rendererUsageCount=0,this.styles=l?L2(l,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestroy&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class B2 extends YT{constructor(e,t,r,i,s,o,a,l){const c=i+"-"+r.id;super(e,t,r,s,o,a,l,c),this.contentAttr=function gee(n){return"_ngcontent-%COMP%".replace(KT,n)}(c),this.hostAttr=function _ee(n){return"_nghost-%COMP%".replace(KT,n)}(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let bee=(()=>{class n extends k2{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(O(zt))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const U2=["alt","control","meta","shift"],Eee={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wee={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let xee=(()=>{class n extends k2{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),o=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>mc().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let o="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),o="code."),U2.forEach(c=>{const h=r.indexOf(c);h>-1&&(r.splice(h,1),o+=c+".")}),o+=s,0!=r.length||0===s.length)return null;const l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(t,r){let i=Eee[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),U2.forEach(o=>{o!==i&&(0,wee[o])(t)&&(s+=o+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(O(zt))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const H2=[{provide:nr,useValue:A2},{provide:Q1,useValue:function Iee(){GT.makeCurrent()},multi:!0},{provide:zt,useFactory:function Aee(){return function F6(n){FC=n}(document),document},deps:[]}],Tee=kV(iX,"browser",H2),Dee=new oe(""),$2=[{provide:wE,useClass:class uee{addToWindow(e){qt.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new L(5103,!1);return s},qt.getAllAngularTestabilities=()=>e.getAllTestabilities(),qt.getAllAngularRootElements=()=>e.getAllRootElements(),qt.frameworkStabilizers||(qt.frameworkStabilizers=[]),qt.frameworkStabilizers.push(r=>{const i=qt.getAllAngularTestabilities();let s=i.length,o=!1;const a=function(l){o=o||l,s--,0==s&&r(o)};i.forEach(l=>{l.whenStable(a)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?mc().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:SV,useClass:hT,deps:[Je,fT,wE]},{provide:hT,useClass:hT,deps:[Je,fT,wE]}],G2=[{provide:zC,useValue:"root"},{provide:ll,useFactory:function Cee(){return new ll},deps:[]},{provide:zT,useClass:bee,multi:!0,deps:[zt,Je,nr]},{provide:zT,useClass:xee,multi:!0,deps:[zt]},QT,O2,N2,{provide:Ig,useExisting:QT},{provide:D2,useClass:dee,deps:[]},[]];let z2=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Qb,useValue:t.appId}]}}}return n.\u0275fac=function(t){return new(t||n)(O(Dee,12))},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({providers:[...G2,...$2],imports:[VE,sX]}),n})(),q2=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(O(zt))},n.\u0275prov=se({token:n,factory:function(t){let r=null;return r=t?new t:function Ree(){return new q2(O(zt))}(),r},providedIn:"root"}),n})();function vf(n,e){return I(e)?En(n,e,1):En(n,1)}function ii(n,e){return be((t,r)=>{let i=0;t.subscribe(Fe(r,s=>n.call(e,s,i++)&&r.next(s)))})}function bf(n){return be((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}typeof window<"u"&&window;class $E{}class GE{}class Ia{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),s=i.toLowerCase(),o=t.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ia?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ia;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ia?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const s=e.value;if(s){let o=this.headers.get(t);if(!o)return;o=o.filter(a=>-1===s.indexOf(a)),0===o.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Oee{encodeKey(e){return Y2(e)}encodeValue(e){return Y2(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Lee=/%(\d[a-f0-9])/gi,Vee={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Y2(n){return encodeURIComponent(n).replace(Lee,(e,t)=>Vee[t]??e)}function zE(n){return`${n}`}class _c{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Oee,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Fee(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const s=i.indexOf("="),[o,a]=-1==s?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],l=t.get(o)||[];l.push(a),t.set(o,l)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(zE):[zE(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(s=>{t.push({param:r,value:s,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new _c({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(zE(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(zE(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class Bee{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function X2(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function J2(n){return typeof Blob<"u"&&n instanceof Blob}function eB(n){return typeof FormData<"u"&&n instanceof FormData}class Xg{constructor(e,t,r,i){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Uee(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new Ia),this.context||(this.context=new Bee),this.params){const o=this.params.toString();if(0===o.length)this.urlWithParams=t;else{const a=t.indexOf("?");this.urlWithParams=t+(-1===a?"?":a<t.length-1?"&":"")+o}}else this.params=new _c,this.urlWithParams=t}serializeBody(){return null===this.body?null:X2(this.body)||J2(this.body)||eB(this.body)||function jee(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof _c?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||eB(this.body)?null:J2(this.body)?this.body.type||null:X2(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof _c?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,o=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,a=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let l=e.headers||this.headers,c=e.params||this.params;const h=e.context??this.context;return void 0!==e.setHeaders&&(l=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),l)),e.setParams&&(c=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),c)),new Xg(t,r,s,{params:c,headers:l,context:h,reportProgress:a,responseType:i,withCredentials:o})}}var vr=(()=>((vr=vr||{})[vr.Sent=0]="Sent",vr[vr.UploadProgress=1]="UploadProgress",vr[vr.ResponseHeader=2]="ResponseHeader",vr[vr.DownloadProgress=3]="DownloadProgress",vr[vr.Response=4]="Response",vr[vr.User=5]="User",vr))();class JT{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ia,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class eD extends JT{constructor(e={}){super(e),this.type=vr.ResponseHeader}clone(e={}){return new eD({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Ef extends JT{constructor(e={}){super(e),this.type=vr.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Ef({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class tB extends JT{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function tD(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let qE=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let s;if(t instanceof Xg)s=t;else{let l,c;l=i.headers instanceof Ia?i.headers:new Ia(i.headers),i.params&&(c=i.params instanceof _c?i.params:new _c({fromObject:i.params})),s=new Xg(t,r,void 0!==i.body?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const o=K(s).pipe(vf(l=>this.handler.handle(l)));if(t instanceof Xg||"events"===i.observe)return o;const a=o.pipe(ii(l=>l instanceof Ef));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(re(l=>{if(null!==l.body&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(re(l=>{if(null!==l.body&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(re(l=>{if(null!==l.body&&"string"!=typeof l.body)throw new Error("Response is not a string.");return l.body}));default:return a.pipe(re(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new _c).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,tD(i,r))}post(t,r,i={}){return this.request("POST",t,tD(i,r))}put(t,r,i={}){return this.request("PUT",t,tD(i,r))}}return n.\u0275fac=function(t){return new(t||n)(O($E))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();function iB(n,e){return e(n)}function $ee(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const zee=new oe(""),Jg=new oe(""),sB=new oe("");function qee(){let n=null;return(e,t)=>{null===n&&(n=(me(zee,{optional:!0})??[]).reduceRight($ee,iB));const r=me(EE),i=r.add();return n(e,t).pipe(bf(()=>r.remove(i)))}}let oB=(()=>{class n extends $E{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=me(EE)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(Jg),...this.injector.get(sB,[])]));this.chain=i.reduceRight((s,o)=>function Gee(n,e,t){return(r,i)=>t.runInContext(()=>e(r,s=>n(s,i)))}(s,o,this.injector),iB)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe(bf(()=>this.pendingTasks.remove(r)))}}return n.\u0275fac=function(t){return new(t||n)(O(GE),O(_a))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const Zee=/^\)\]\}',?\n/;let lB=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new L(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?j(r.\u0275loadImpl()):K(null)).pipe(Dt(()=>new dt(s=>{const o=r.build();if(o.open(t.method,t.urlWithParams),t.withCredentials&&(o.withCredentials=!0),t.headers.forEach((E,x)=>o.setRequestHeader(E,x.join(","))),t.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const E=t.detectContentTypeHeader();null!==E&&o.setRequestHeader("Content-Type",E)}if(t.responseType){const E=t.responseType.toLowerCase();o.responseType="json"!==E?E:"text"}const a=t.serializeBody();let l=null;const c=()=>{if(null!==l)return l;const E=o.statusText||"OK",x=new Ia(o.getAllResponseHeaders()),M=function Yee(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(o)||t.url;return l=new eD({headers:x,status:o.status,statusText:E,url:M}),l},h=()=>{let{headers:E,status:x,statusText:M,url:D}=c(),k=null;204!==x&&(k=typeof o.response>"u"?o.responseText:o.response),0===x&&(x=k?200:0);let G=x>=200&&x<300;if("json"===t.responseType&&"string"==typeof k){const de=k;k=k.replace(Zee,"");try{k=""!==k?JSON.parse(k):null}catch(Se){k=de,G&&(G=!1,k={error:Se,text:k})}}G?(s.next(new Ef({body:k,headers:E,status:x,statusText:M,url:D||void 0})),s.complete()):s.error(new tB({error:k,headers:E,status:x,statusText:M,url:D||void 0}))},p=E=>{const{url:x}=c(),M=new tB({error:E,status:o.status||0,statusText:o.statusText||"Unknown Error",url:x||void 0});s.error(M)};let g=!1;const _=E=>{g||(s.next(c()),g=!0);let x={type:vr.DownloadProgress,loaded:E.loaded};E.lengthComputable&&(x.total=E.total),"text"===t.responseType&&o.responseText&&(x.partialText=o.responseText),s.next(x)},v=E=>{let x={type:vr.UploadProgress,loaded:E.loaded};E.lengthComputable&&(x.total=E.total),s.next(x)};return o.addEventListener("load",h),o.addEventListener("error",p),o.addEventListener("timeout",p),o.addEventListener("abort",p),t.reportProgress&&(o.addEventListener("progress",_),null!==a&&o.upload&&o.upload.addEventListener("progress",v)),o.send(a),s.next({type:vr.Sent}),()=>{o.removeEventListener("error",p),o.removeEventListener("abort",p),o.removeEventListener("load",h),o.removeEventListener("timeout",p),t.reportProgress&&(o.removeEventListener("progress",_),null!==a&&o.upload&&o.upload.removeEventListener("progress",v)),o.readyState!==o.DONE&&o.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(O(D2))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const nD=new oe("XSRF_ENABLED"),cB=new oe("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),uB=new oe("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class dB{}let ete=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=_2(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(O(zt),O(nr),O(cB))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();function tte(n,e){const t=n.url.toLowerCase();if(!me(nD)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=me(dB).getToken(),i=me(uB);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var kn=(()=>((kn=kn||{})[kn.Interceptors=0]="Interceptors",kn[kn.LegacyInterceptors=1]="LegacyInterceptors",kn[kn.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",kn[kn.NoXsrfProtection=3]="NoXsrfProtection",kn[kn.JsonpSupport=4]="JsonpSupport",kn[kn.RequestsMadeViaParent=5]="RequestsMadeViaParent",kn[kn.Fetch=6]="Fetch",kn))();function Gu(n,e){return{\u0275kind:n,\u0275providers:e}}function nte(...n){const e=[qE,lB,oB,{provide:$E,useExisting:oB},{provide:GE,useExisting:lB},{provide:Jg,useValue:tte,multi:!0},{provide:nD,useValue:!0},{provide:dB,useClass:ete}];for(const t of n)e.push(...t.\u0275providers);return function jC(n){return{\u0275providers:n}}(e)}const hB=new oe("LEGACY_INTERCEPTOR_FN");let ite=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({providers:[nte(Gu(kn.LegacyInterceptors,[{provide:hB,useFactory:qee},{provide:Jg,useExisting:hB,multi:!0}]))]}),n})();const{isArray:ute}=Array,{getPrototypeOf:dte,prototype:hte,keys:fte}=Object;function fB(n){if(1===n.length){const e=n[0];if(ute(e))return{args:e,keys:null};if(function pte(n){return n&&"object"==typeof n&&dte(n)===hte}(e)){const t=fte(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:mte}=Array;function pB(n){return re(e=>function gte(n,e){return mte(e)?n(...e):n(e)}(n,e))}function mB(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let _B=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(C(Ro),C(et))},n.\u0275dir=ne({type:n}),n})(),zu=(()=>{class n extends _B{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ve(n)))(r||n)}}(),n.\u0275dir=ne({type:n,features:[ve]}),n})();const Ca=new oe("NgValueAccessor"),yte={provide:Ca,useExisting:U(()=>e_),multi:!0},bte=new oe("CompositionEventMode");let e_=(()=>{class n extends _B{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function vte(){const n=mc()?mc().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(C(Ro),C(et),C(bte,8))},n.\u0275dir=ne({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&Bn("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[an([yte]),ve]}),n})();function yc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function vB(n){return null!=n&&"number"==typeof n.length}const Di=new oe("NgValidators"),vc=new oe("NgAsyncValidators"),Ete=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class bB{static min(e){return function EB(n){return e=>{if(yc(e.value)||yc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function wB(n){return e=>{if(yc(e.value)||yc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return xB(e)}static requiredTrue(e){return function IB(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return CB(e)}static minLength(e){return AB(e)}static maxLength(e){return function TB(n){return e=>vB(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function DB(n){if(!n)return KE;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(yc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return kB(e)}static composeAsync(e){return OB(e)}}function xB(n){return yc(n.value)?{required:!0}:null}function CB(n){return yc(n.value)||Ete.test(n.value)?null:{email:!0}}function AB(n){return e=>yc(e.value)||!vB(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}function KE(n){return null}function SB(n){return null!=n}function RB(n){return kg(n)?j(n):n}function MB(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function PB(n,e){return e.map(t=>t(n))}function NB(n){return n.map(e=>function wte(n){return!n.validate}(e)?e:t=>e.validate(t))}function kB(n){if(!n)return null;const e=n.filter(SB);return 0==e.length?null:function(t){return MB(PB(t,e))}}function rD(n){return null!=n?kB(NB(n)):null}function OB(n){if(!n)return null;const e=n.filter(SB);return 0==e.length?null:function(t){return function gB(...n){const e=Ll(n),{args:t,keys:r}=fB(n),i=new dt(s=>{const{length:o}=t;if(!o)return void s.complete();const a=new Array(o);let l=o,c=o;for(let h=0;h<o;h++){let p=!1;er(t[h]).subscribe(Fe(s,g=>{p||(p=!0,c--),a[h]=g},()=>l--,void 0,()=>{(!l||!p)&&(c||s.next(r?mB(r,a):a),s.complete())}))}});return e?i.pipe(pB(e)):i}(PB(t,e).map(RB)).pipe(re(MB))}}function iD(n){return null!=n?OB(NB(n)):null}function FB(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function LB(n){return n._rawValidators}function VB(n){return n._rawAsyncValidators}function sD(n){return n?Array.isArray(n)?n:[n]:[]}function QE(n,e){return Array.isArray(n)?n.includes(e):n===e}function BB(n,e){const t=sD(e);return sD(n).forEach(i=>{QE(t,i)||t.push(i)}),t}function UB(n,e){return sD(e).filter(t=>!QE(n,t))}class jB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=rD(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=iD(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class qi extends jB{get formDirective(){return null}get path(){return null}}class ml extends jB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class HB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let oD=(()=>{class n extends HB{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(C(ml,2))},n.\u0275dir=ne({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&Ci("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[ve]}),n})(),aD=(()=>{class n extends HB{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(C(qi,10))},n.\u0275dir=ne({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&Ci("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[ve]}),n})();const t_="VALID",YE="INVALID",wf="PENDING",n_="DISABLED";function uD(n){return(XE(n)?n.validators:n)||null}function dD(n,e){return(XE(e)?e.asyncValidators:n)||null}function XE(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function GB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new L(1e3,"");if(!r[t])throw new L(1001,"")}function zB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new L(1002,"")})}class JE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===t_}get invalid(){return this.status===YE}get pending(){return this.status==wf}get disabled(){return this.status===n_}get enabled(){return this.status!==n_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(BB(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(BB(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(UB(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(UB(e,this._rawAsyncValidators))}hasValidator(e){return QE(this._rawValidators,e)}hasAsyncValidator(e){return QE(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=wf,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=n_,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=t_,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===t_||this.status===wf)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?n_:t_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=wf,this._hasOwnPendingAsyncValidator=!0;const t=RB(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Un,this.statusChanges=new Un}_calculateStatus(){return this._allControlsDisabled()?n_:this.errors?YE:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(wf)?wf:this._anyControlsHaveStatus(YE)?YE:t_}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){XE(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Ate(n){return Array.isArray(n)?rD(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Tte(n){return Array.isArray(n)?iD(n):n||null}(this._rawAsyncValidators)}}class r_ extends JE{constructor(e,t,r){super(uD(t),dD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){zB(this,0,e),Object.keys(e).forEach(r=>{GB(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class qB extends r_{}const qu=new oe("CallSetDisabledState",{providedIn:"root",factory:()=>i_}),i_="always";function s_(n,e,t=i_){hD(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Ste(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&WB(n,e)})}(n,e),function Mte(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Rte(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&WB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Dte(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function tw(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),rw(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function nw(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function hD(n,e){const t=LB(n);null!==e.validator?n.setValidators(FB(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=VB(n);null!==e.asyncValidator?n.setAsyncValidators(FB(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();nw(e._rawValidators,i),nw(e._rawAsyncValidators,i)}function rw(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=LB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=VB(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return nw(e._rawValidators,r),nw(e._rawAsyncValidators,r),t}function WB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function KB(n,e){hD(n,e)}function QB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}const Fte={provide:qi,useExisting:U(()=>xf)},o_=(()=>Promise.resolve())();let xf=(()=>{class n extends qi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Un,this.form=new r_({},rD(t),iD(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){o_.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),s_(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){o_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){o_.then(()=>{const r=this._findContainer(t.path),i=new r_({});KB(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){o_.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){o_.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,QB(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(C(Di,10),C(vc,10),C(qu,8))},n.\u0275dir=ne({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&Bn("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[an([Fte]),ve]}),n})();function ZB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function YB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const a_=class extends JE{constructor(e=null,t,r){super(uD(t),dD(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),XE(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=YB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){YB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Bte={provide:ml,useExisting:U(()=>iw)},eU=(()=>Promise.resolve())();let iw=(()=>{class n extends ml{constructor(t,r,i,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new a_,this._registered=!1,this.name="",this.update=new Un,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function mD(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===e_?t=s:function kte(n){return Object.getPrototypeOf(n.constructor)===zu}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function pD(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){s_(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){eU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&yf(r);eU.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function ew(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(C(qi,9),C(Di,10),C(vc,10),C(Ca,10),C(zg,8),C(qu,8))},n.\u0275dir=ne({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[an([Bte]),ve,Rr]}),n})(),gD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ne({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),nU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({}),n})();const _D=new oe("NgModelWithFormControlWarning"),zte={provide:qi,useExisting:U(()=>sw)};let sw=(()=>{class n extends qi{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Un,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(rw(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return s_(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){tw(t.control||null,t,!1),function Ote(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,QB(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(tw(r||null,t),(n=>n instanceof a_)(i)&&(s_(i,t,this.callSetDisabledState),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);KB(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function Pte(n,e){return rw(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){hD(this.form,this),this._oldForm&&rw(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(C(Di,10),C(vc,10),C(qu,8))},n.\u0275dir=ne({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&Bn("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[an([zte]),ve,Rr]}),n})();let Wu=(()=>{class n{constructor(){this._validator=KE}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):KE,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ne({type:n,features:[Rr]}),n})();const rne={provide:Di,useExisting:U(()=>ow),multi:!0};let ow=(()=>{class n extends Wu{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=yf,this.createValidator=t=>xB}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ve(n)))(r||n)}}(),n.\u0275dir=ne({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&ds("required",r._enabled?"":null)},inputs:{required:"required"},features:[an([rne]),ve]}),n})();const sne={provide:Di,useExisting:U(()=>wD),multi:!0};let wD=(()=>{class n extends Wu{constructor(){super(...arguments),this.inputName="email",this.normalizeInput=yf,this.createValidator=t=>CB}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ve(n)))(r||n)}}(),n.\u0275dir=ne({type:n,selectors:[["","email","","formControlName",""],["","email","","formControl",""],["","email","","ngModel",""]],inputs:{email:"email"},features:[an([sne]),ve]}),n})();const one={provide:Di,useExisting:U(()=>xD),multi:!0};let xD=(()=>{class n extends Wu{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=t=>function uU(n){return"number"==typeof n?n:parseInt(n,10)}(t),this.createValidator=t=>AB(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ve(n)))(r||n)}}(),n.\u0275dir=ne({type:n,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&ds("minlength",r._enabled?r.minlength:null)},inputs:{minlength:"minlength"},features:[an([one]),ve]}),n})(),_U=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[nU]}),n})();class yU extends JE{constructor(e,t,r){super(uD(t),dD(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){zB(this,0,e),e.forEach((r,i)=>{GB(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function vU(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let ID,cne=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return vU(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new r_(i,s)}record(t,r=null){const i=this._reduceControls(t);return new qB(i,r)}control(t,r,i){let s={};return this.useNonNullable?(vU(r)?s=r:(s.validators=r,s.asyncValidators=i),new a_(t,{...s,nonNullable:!0})):new a_(t,r,i)}array(t,r,i){const s=t.map(o=>this._createControl(o));return new yU(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof a_||t instanceof JE?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),une=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qu,useValue:t.callSetDisabledState??i_}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[_U]}),n})(),dne=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_D,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:qu,useValue:t.callSetDisabledState??i_}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[_U]}),n})();try{ID=typeof Intl<"u"&&Intl.v8BreakIterator}catch{ID=!1}let If,Aa=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?$u(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ID)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(O(nr))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const bU=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function EU(){if(If)return If;if("object"!=typeof document||!document)return If=new Set(bU),If;let n=document.createElement("input");return If=new Set(bU.filter(e=>(n.setAttribute("type",e),n.type===e))),If}let l_,CD;function c_(n){return function hne(){if(null==l_&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>l_=!0}))}finally{l_=l_||!1}return l_}()?n:!!n.capture}function Cf(n){return n.composedPath?n.composedPath()[0]:n.target}function wU(n){return ii((e,t)=>n<=t)}function ao(n){return be((e,t)=>{er(n).subscribe(Fe(t,()=>t.complete(),Pe)),!t.closed&&e.subscribe(t)})}function fs(n){return null!=n&&"false"!=`${n}`}function xU(n){return Array.isArray(n)?n:[n]}function Qu(n){return n instanceof et?n.nativeElement:n}function lw(...n){const e=Ks(n),t=Ll(n),{args:r,keys:i}=fB(n);if(0===r.length)return j([],e);const s=new dt(function wne(n,e,t=qn){return r=>{IU(e,()=>{const{length:i}=n,s=new Array(i);let o=i,a=i;for(let l=0;l<i;l++)IU(e,()=>{const c=j(n[l],e);let h=!1;c.subscribe(Fe(r,p=>{s[l]=p,h||(h=!0,a--),a||r.next(t(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}(r,e,i?o=>mB(i,o):qn));return t?s.pipe(pB(t)):s}function IU(n,e,t){n?Yr(t,n,e):e()}function cw(...n){return function xne(){return Xr(1)}()(j(n,Ks(n)))}function Zu(n){return n<=0?()=>Dr:be((e,t)=>{let r=0;e.subscribe(Fe(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}class Ine extends kt{constructor(e,t){super()}schedule(e,t=0){return this}}const uw={setInterval(n,e,...t){const{delegate:r}=uw;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=uw;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};class CU extends Ine{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return uw.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&uw.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,We(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const AD={now:()=>(AD.delegate||Date).now(),delegate:void 0};class u_{constructor(e,t=u_.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}u_.now=AD.now;class AU extends u_{constructor(e,t=u_.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const dw=new AU(CU);function TU(n,e=dw){return be((t,r)=>{let i=null,s=null,o=null;const a=()=>{if(i){i.unsubscribe(),i=null;const c=s;s=null,r.next(c)}};function l(){const c=o+n,h=e.now();if(h<c)return i=this.schedule(void 0,c-h),void r.add(i);a()}t.subscribe(Fe(r,c=>{s=c,o=e.now(),i||(i=e.schedule(l,n),r.add(i))},()=>{a(),r.complete()},void 0,()=>{s=i=null}))})}function d_(...n){const e=Ks(n);return be((t,r)=>{(e?cw(n,t,e):cw(n,t)).subscribe(r)})}const DU=new Set;let Yu,Cne=(()=>{class n{constructor(t,r){this._platform=t,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Tne}matchMedia(t){return(this._platform.WEBKIT||this._platform.BLINK)&&function Ane(n,e){if(!DU.has(n))try{Yu||(Yu=document.createElement("style"),e&&(Yu.nonce=e),Yu.setAttribute("type","text/css"),document.head.appendChild(Yu)),Yu.sheet&&(Yu.sheet.insertRule(`@media ${n} {body{ }}`,0),DU.add(n))}catch(t){console.error(t)}}(t,this._nonce),this._matchMedia(t)}}return n.\u0275fac=function(t){return new(t||n)(O(Aa),O(ZC,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Tne(n){return{matches:"all"===n||""===n,media:n,addListener:()=>{},removeListener:()=>{}}}let Dne=(()=>{class n{constructor(t,r){this._mediaMatcher=t,this._zone=r,this._queries=new Map,this._destroySubject=new z}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(t){return SU(xU(t)).some(i=>this._registerQuery(i).mql.matches)}observe(t){let s=lw(SU(xU(t)).map(o=>this._registerQuery(o).observable));return s=cw(s.pipe(Zu(1)),s.pipe(wU(1),TU(0))),s.pipe(re(o=>{const a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(t){if(this._queries.has(t))return this._queries.get(t);const r=this._mediaMatcher.matchMedia(t),s={observable:new dt(o=>{const a=l=>this._zone.run(()=>o.next(l));return r.addListener(a),()=>{r.removeListener(a)}}).pipe(d_(r),re(({matches:o})=>({query:t,matches:o})),ao(this._destroySubject)),mql:r};return this._queries.set(t,s),s}}return n.\u0275fac=function(t){return new(t||n)(O(Cne),O(Je))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function SU(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function NU(n){return 0===n.buttons||0===n.detail}function kU(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}const Fne=new oe("cdk-input-modality-detector-options"),Lne={ignoreKeys:[18,17,224,91,16]},Af=c_({passive:!0,capture:!0});let Vne=(()=>{class n{get mostRecentModality(){return this._modality.value}constructor(t,r,i,s){this._platform=t,this._mostRecentTarget=null,this._modality=new Q(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Cf(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<650||(this._modality.next(NU(o)?"keyboard":"mouse"),this._mostRecentTarget=Cf(o))},this._onTouchstart=o=>{kU(o)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Cf(o))},this._options={...Lne,...s},this.modalityDetected=this._modality.pipe(wU(1)),this.modalityChanged=this.modalityDetected.pipe(on()),t.isBrowser&&r.runOutsideAngular(()=>{i.addEventListener("keydown",this._onKeydown,Af),i.addEventListener("mousedown",this._onMousedown,Af),i.addEventListener("touchstart",this._onTouchstart,Af)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Af),document.removeEventListener("mousedown",this._onMousedown,Af),document.removeEventListener("touchstart",this._onTouchstart,Af))}}return n.\u0275fac=function(t){return new(t||n)(O(Aa),O(Je),O(zt),O(Fne,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Une=new oe("cdk-focus-monitor-default-options"),hw=c_({passive:!0,capture:!0});let jne=(()=>{class n{constructor(t,r,i,s,o){this._ngZone=t,this._platform=r,this._inputModalityDetector=i,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new z,this._rootNodeFocusAndBlurListener=a=>{for(let c=Cf(a);c;c=c.parentElement)"focus"===a.type?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||0}monitor(t,r=!1){const i=Qu(t);if(!this._platform.isBrowser||1!==i.nodeType)return K();const s=function pne(n){if(function fne(){if(null==CD){const n=typeof document<"u"?document.head:null;CD=!(!n||!n.createShadowRoot&&!n.attachShadow)}return CD}()){const e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(i)||this._getDocument(),o=this._elementInfo.get(i);if(o)return r&&(o.checkChildren=!0),o.subject;const a={checkChildren:r,subject:new z,rootNode:s};return this._elementInfo.set(i,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(t){const r=Qu(t),i=this._elementInfo.get(r);i&&(i.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(i))}focusVia(t,r,i){const s=Qu(t);s===this._getDocument().activeElement?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,r,l)):(this._setOrigin(r),"function"==typeof s.focus&&s.focus(i))}ngOnDestroy(){this._elementInfo.forEach((t,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,r){t.classList.toggle("cdk-focused",!!r),t.classList.toggle("cdk-touch-focused","touch"===r),t.classList.toggle("cdk-keyboard-focused","keyboard"===r),t.classList.toggle("cdk-mouse-focused","mouse"===r),t.classList.toggle("cdk-program-focused","program"===r)}_setOrigin(t,r=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&r,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,r){const i=this._elementInfo.get(r),s=Cf(t);!i||!i.checkChildren&&r!==s||this._originChanged(r,this._getFocusOrigin(s),i)}_onBlur(t,r){const i=this._elementInfo.get(r);!i||i.checkChildren&&t.relatedTarget instanceof Node&&r.contains(t.relatedTarget)||(this._setClasses(r),this._emitOrigin(i,null))}_emitOrigin(t,r){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(r))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const r=t.rootNode,i=this._rootNodeFocusListenerCount.get(r)||0;i||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,hw),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,hw)}),this._rootNodeFocusListenerCount.set(r,i+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(ao(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(t){const r=t.rootNode;if(this._rootNodeFocusListenerCount.has(r)){const i=this._rootNodeFocusListenerCount.get(r);i>1?this._rootNodeFocusListenerCount.set(r,i-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,hw),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,hw),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,r,i){this._setClasses(t,r),this._emitOrigin(i,r),this._lastFocusOrigin=r}_getClosestElementsInfo(t){const r=[];return this._elementInfo.forEach((i,s)=>{(s===t||i.checkChildren&&s.contains(t))&&r.push([s,i])}),r}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:r,mostRecentModality:i}=this._inputModalityDetector;if("mouse"!==i||!r||r===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const s=t.labels;if(s)for(let o=0;o<s.length;o++)if(s[o].contains(r))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(O(Je),O(Aa),O(Vne),O(zt,8),O(Une,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const FU="cdk-high-contrast-black-on-white",LU="cdk-high-contrast-white-on-black",TD="cdk-high-contrast-active";let Hne=(()=>{class n{constructor(t,r){this._platform=t,this._document=r,this._breakpointSubscription=me(Dne).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const r=this._document.defaultView||window,i=r&&r.getComputedStyle?r.getComputedStyle(t):null,s=(i&&i.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(TD,FU,LU),this._hasCheckedHighContrastMode=!0;const r=this.getHighContrastMode();1===r?t.add(TD,FU):2===r&&t.add(TD,LU)}}}return n.\u0275fac=function(t){return new(t||n)(O(Aa),O(zt))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $ne=new oe("cdk-dir-doc",{providedIn:"root",factory:function Gne(){return me(zt)}}),zne=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;let DD=(()=>{class n{constructor(t){this.value="ltr",this.change=new Un,t&&(this.value=function qne(n){const e=n?.toLowerCase()||"";return"auto"===e&&typeof navigator<"u"&&navigator?.language?zne.test(navigator.language)?"rtl":"ltr":"rtl"===e?"rtl":"ltr"}((t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr"))}ngOnDestroy(){this.change.complete()}}return n.\u0275fac=function(t){return new(t||n)(O($ne,8))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({}),n})();const Kne=new oe("mat-sanity-checks",{providedIn:"root",factory:function Wne(){return!0}});let ps=(()=>{class n{constructor(t,r,i){this._sanityChecks=r,this._document=i,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function mne(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(O(Hne),O(Kne,8),O(zt))},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[SD,SD]}),n})();function Qne(n){return class extends n{get disabled(){return this._disabled}set disabled(e){this._disabled=fs(e)}constructor(...e){super(...e),this._disabled=!1}}}function Zne(n,e){return class extends n{get color(){return this._color}set color(t){const r=t||this.defaultColor;r!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),r&&this._elementRef.nativeElement.classList.add(`mat-${r}`),this._color=r)}constructor(...t){super(...t),this.defaultColor=e,this.color=e}}}function Yne(n){return class extends n{get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=fs(e)}constructor(...e){super(...e),this._disableRipple=!1}}}function Xne(n){return class extends n{updateErrorState(){const e=this.errorState,s=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);s!==e&&(this.errorState=s,this.stateChanges.next())}constructor(...e){super(...e),this.errorState=!1}}}let ere=(()=>{class n{isErrorState(t,r){return!!(t&&t.invalid&&(t.touched||r&&r.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class tre{constructor(e,t,r,i=!1){this._renderer=e,this.element=t,this.config=r,this._animationForciblyDisabledThroughCss=i,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const UU=c_({passive:!0,capture:!0});class nre{constructor(){this._events=new Map,this._delegateEventHandler=e=>{const t=Cf(e);t&&this._events.get(e.type)?.forEach((r,i)=>{(i===t||i.contains(t))&&r.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,r,i){const s=this._events.get(t);if(s){const o=s.get(r);o?o.add(i):s.set(r,new Set([i]))}else this._events.set(t,new Map([[r,new Set([i])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,UU)})}removeHandler(e,t,r){const i=this._events.get(e);if(!i)return;const s=i.get(t);s&&(s.delete(r),0===s.size&&i.delete(t),0===i.size&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,UU)))}}const jU={enterDuration:225,exitDuration:150},HU=c_({passive:!0,capture:!0}),$U=["mousedown","touchstart"],GU=["mouseup","mouseleave","touchend","touchcancel"];class Tf{constructor(e,t,r,i){this._target=e,this._ngZone=t,this._platform=i,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Qu(r))}fadeInRipple(e,t,r={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s={...jU,...r.animation};r.centered&&(e=i.left+i.width/2,t=i.top+i.height/2);const o=r.radius||function ire(n,e,t){const r=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),i=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(r*r+i*i)}(e,t,i),a=e-i.left,l=t-i.top,c=s.enterDuration,h=document.createElement("div");h.classList.add("mat-ripple-element"),h.style.left=a-o+"px",h.style.top=l-o+"px",h.style.height=2*o+"px",h.style.width=2*o+"px",null!=r.color&&(h.style.backgroundColor=r.color),h.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(h);const p=window.getComputedStyle(h),_=p.transitionDuration,v="none"===p.transitionProperty||"0s"===_||"0s, 0s"===_||0===i.width&&0===i.height,E=new tre(this,h,r,v);h.style.transform="scale3d(1, 1, 1)",E.state=0,r.persistent||(this._mostRecentTransientRipple=E);let x=null;return!v&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{const M=()=>this._finishRippleTransition(E),D=()=>this._destroyRipple(E);h.addEventListener("transitionend",M),h.addEventListener("transitioncancel",D),x={onTransitionEnd:M,onTransitionCancel:D}}),this._activeRipples.set(E,x),(v||!c)&&this._finishRippleTransition(E),E}fadeOutRipple(e){if(2===e.state||3===e.state)return;const t=e.element,r={...jU,...e.config.animation};t.style.transitionDuration=`${r.exitDuration}ms`,t.style.opacity="0",e.state=2,(e._animationForciblyDisabledThroughCss||!r.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){const t=Qu(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,$U.forEach(r=>{Tf._eventManager.addHandler(this._ngZone,r,t,this)}))}handleEvent(e){"mousedown"===e.type?this._onMousedown(e):"touchstart"===e.type?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{GU.forEach(t=>{this._triggerElement.addEventListener(t,this,HU)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){0===e.state?this._startFadeOutTransition(e):2===e.state&&this._destroyRipple(e)}_startFadeOutTransition(e){const t=e===this._mostRecentTransientRipple,{persistent:r}=e.config;e.state=1,!r&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){const t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=3,null!==t&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){const t=NU(e),r=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!t&&!r&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!kU(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const t=e.changedTouches;if(t)for(let r=0;r<t.length;r++)this.fadeInRipple(t[r].clientX,t[r].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{!e.config.persistent&&(1===e.state||e.config.terminateOnPointerUp&&0===e.state)&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){const e=this._triggerElement;e&&($U.forEach(t=>Tf._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&GU.forEach(t=>e.removeEventListener(t,this,HU)))}}Tf._eventManager=new nre;const zU=new oe("mat-ripple-global-options");let sre=(()=>{class n{get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}constructor(t,r,i,s,o){this._elementRef=t,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new Tf(this,r,t,i)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:{...this._globalOptions.animation,..."NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{},...this.animation},terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,r=0,i){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,r,{...this.rippleConfig,...i}):this._rippleRenderer.fadeInRipple(0,0,{...this.rippleConfig,...t})}}return n.\u0275fac=function(t){return new(t||n)(C(et),C(Je),C(Aa),C(zU,8),C(Qh,8))},n.\u0275dir=ne({type:n,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,r){2&t&&Ci("mat-ripple-unbounded",r.unbounded)},inputs:{color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],radius:["matRippleRadius","radius"],animation:["matRippleAnimation","animation"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"]},exportAs:["matRipple"]}),n})(),ore=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[ps,ps]}),n})();const are=["mat-button",""],lre=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],cre=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"],qU={capture:!0},WU=["focus","click","mouseenter","touchstart"],f_="mat-button-ripple-uninitialized";let ure=(()=>{class n{constructor(){this._document=me(zt,{optional:!0}),this._animationMode=me(Qh,{optional:!0}),this._globalRippleOptions=me(zU,{optional:!0}),this._platform=me(Aa),this._ngZone=me(Je),this._onInteraction=t=>{if(t.target===this._document)return;const i=t.target.closest(`[${f_}]`);i&&(i.removeAttribute(f_),this._appendRipple(i))},this._ngZone.runOutsideAngular(()=>{for(const t of WU)this._document?.addEventListener(t,this._onInteraction,qU)})}ngOnDestroy(){for(const t of WU)this._document?.removeEventListener(t,this._onInteraction,qU)}_appendRipple(t){if(!this._document)return;const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const i=new dre(t,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);i.rippleConfig.centered=t.hasAttribute("mat-icon-button"),new Tf(i,this._ngZone,r,this._platform).setupTriggerEvents(t),t.append(r)}_createMatRipple(t){if(!this._document)return;t.querySelector(".mat-mdc-button-ripple")?.remove(),t.removeAttribute(f_);const r=this._document.createElement("span");r.classList.add("mat-mdc-button-ripple");const i=new sre(new et(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return i._isInitialized=!0,i.trigger=t,t.append(r),i}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class dre{constructor(e,t,r){this._button=e,this._globalRippleOptions=t,this._setRippleConfig(t,r)}_setRippleConfig(e,t){this.rippleConfig=e||{},"NoopAnimations"===t&&(this.rippleConfig.animation={enterDuration:0,exitDuration:0})}get rippleDisabled(){return this._button.hasAttribute("disabled")||!!this._globalRippleOptions?.disabled}}const hre=[{selector:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{selector:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{selector:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{selector:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{selector:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{selector:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{selector:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],fre=Zne(Qne(Yne(class{constructor(n){this._elementRef=n}})));let pre=(()=>{class n extends fre{get ripple(){return!this._ripple&&this._rippleLoader&&(this._ripple=this._rippleLoader._createMatRipple(this._elementRef.nativeElement)),this._ripple}set ripple(t){this._ripple=t}constructor(t,r,i,s){super(t),this._platform=r,this._ngZone=i,this._animationMode=s,this._focusMonitor=me(jne),this._rippleLoader=me(ure),this._isFab=!1;const o=t.nativeElement.classList;for(const a of hre)this._hasHostAttributes(a.selector)&&a.mdcClasses.forEach(l=>{o.add(l)})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnChanges(){this._ripple&&(this._ripple.disabled=this.disableRipple||this.disabled)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t="program",r){t?this._focusMonitor.focusVia(this._elementRef.nativeElement,t,r):this._elementRef.nativeElement.focus(r)}_hasHostAttributes(...t){return t.some(r=>this._elementRef.nativeElement.hasAttribute(r))}}return n.\u0275fac=function(t){cA()},n.\u0275dir=ne({type:n,features:[ve,Rr]}),n})(),RD=(()=>{class n extends pre{constructor(t,r,i,s){super(t,r,i,s)}}return n.\u0275fac=function(t){return new(t||n)(C(et),C(Aa),C(Je),C(Qh,8))},n.\u0275cmp=Mn({type:n,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostAttrs:["mat-button-ripple-uninitialized",""],hostVars:7,hostBindings:function(t,r){2&t&&(ds("disabled",r.disabled||null),Ci("_mat-animation-noopable","NoopAnimations"===r._animationMode)("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[ve],attrs:are,ngContentSelectors:cre,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,r){1&t&&(Ou(lre),mr(0,"span",0),rr(1),pe(2,"span",1),rr(3,1),ce(),rr(4,2),mr(5,"span",2)(6,"span",3)),2&t&&Ci("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(\n      100% + 4px\n    );width:calc(\n      100% + 4px\n    );display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{height:var(--mdc-text-button-container-height, 36px);border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color, inherit)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button{height:var(--mdc-filled-button-container-height, 36px);border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color, transparent)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color, inherit)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button{height:var(--mdc-protected-button-container-height, 36px);border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px));box-shadow:var(--mdc-protected-button-container-elevation, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color, transparent)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color, rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color, inherit)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-raised-button.mdc-ripple-upgraded--background-focused,.mat-mdc-raised-button:not(.mdc-ripple-upgraded):focus{box-shadow:var(--mdc-protected-button-focus-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation, 0px 2px 4px -1px rgba(0, 0, 0, 0.2), 0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:not(:disabled):active{box-shadow:var(--mdc-protected-button-pressed-container-elevation, 0px 5px 5px -3px rgba(0, 0, 0, 0.2), 0px 8px 10px 1px rgba(0, 0, 0, 0.14), 0px 3px 14px 2px rgba(0, 0, 0, 0.12))}.mat-mdc-raised-button:disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation, 0px 0px 0px 0px rgba(0, 0, 0, 0.2), 0px 0px 0px 0px rgba(0, 0, 0, 0.14), 0px 0px 0px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button{height:var(--mdc-outlined-button-container-height, 36px);border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px));padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color, inherit)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color, rgba(0, 0, 0, 0.38))}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape, var(--mdc-shape-small, 4px))}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color, rgba(0, 0, 0, 0.12))}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width, 1px)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width, 1px));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width, 1px))}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0;background-color:var(--mat-mdc-button-persistent-ripple-color)}.mat-mdc-button .mat-ripple-element,.mat-mdc-unelevated-button .mat-ripple-element,.mat-mdc-raised-button .mat-ripple-element,.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-mdc-button-ripple-color)}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button[disabled],.mat-mdc-unelevated-button[disabled],.mat-mdc-raised-button[disabled],.mat-mdc-outlined-button[disabled]{cursor:default;pointer-events:none}.mat-mdc-button .mat-mdc-button-touch-target,.mat-mdc-unelevated-button .mat-mdc-button-touch-target,.mat-mdc-raised-button .mat-mdc-button-touch-target,.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}[dir=rtl] .mat-mdc-button>.mat-icon,.mat-mdc-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}.mat-mdc-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon,.mat-mdc-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem;margin-left:-4px;margin-right:8px}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:0}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon,[dir=rtl] .mat-mdc-raised-button>.mat-icon,[dir=rtl] .mat-mdc-outlined-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon[dir=rtl],.mat-mdc-raised-button>.mat-icon[dir=rtl],.mat-mdc-outlined-button>.mat-icon[dir=rtl]{margin-left:8px;margin-right:-4px}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon,.mat-mdc-raised-button .mdc-button__label+.mat-icon,.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-left:8px;margin-right:-4px}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon,.mat-mdc-unelevated-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-raised-button .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-outlined-button .mdc-button__label+.mat-icon[dir=rtl]{margin-left:-4px;margin-right:8px}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px) * -1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px) * -1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0}),n})(),KU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[ps,ore,ps]}),n})();const QU=c_({passive:!0});let _re=(()=>{class n{constructor(t,r){this._platform=t,this._ngZone=r,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Dr;const r=Qu(t),i=this._monitoredElements.get(r);if(i)return i.subject;const s=new z,o="cdk-text-field-autofilled",a=l=>{"cdk-text-field-autofill-start"!==l.animationName||r.classList.contains(o)?"cdk-text-field-autofill-end"===l.animationName&&r.classList.contains(o)&&(r.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1}))):(r.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{r.addEventListener("animationstart",a,QU),r.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(r,{subject:s,unlisten:()=>{r.removeEventListener("animationstart",a,QU)}}),s}stopMonitoring(t){const r=Qu(t),i=this._monitoredElements.get(r);i&&(i.unlisten(),i.subject.complete(),r.classList.remove("cdk-text-field-autofill-monitored"),r.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(r))}ngOnDestroy(){this._monitoredElements.forEach((t,r)=>this.stopMonitoring(r))}}return n.\u0275fac=function(t){return new(t||n)(O(Aa),O(Je))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),yre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({}),n})();class vre extends z{constructor(e=1/0,t=1/0,r=AD){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:o}=this;t||(r.push(e),!i&&r.push(s.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let o=0;o<s.length&&!e.closed;o+=r?1:2)e.next(s[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const o=t.now();let a=0;for(let l=1;l<r.length&&r[l]<=o;l+=2)a=l;a&&r.splice(0,a+1)}}}function MD(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,$e({connector:()=>new vre(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}class bre{constructor(e){this._box=e,this._destroyed=new z,this._resizeSubject=new z,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(t=>this._resizeSubject.next(t)))}observe(e){return this._elementObservables.has(e)||this._elementObservables.set(e,new dt(t=>{const r=this._resizeSubject.subscribe(t);return this._resizeObserver?.observe(e,{box:this._box}),()=>{this._resizeObserver?.unobserve(e),r.unsubscribe(),this._elementObservables.delete(e)}}).pipe(ii(t=>t.some(r=>r.target===e)),MD({bufferSize:1,refCount:!0}),ao(this._destroyed))),this._elementObservables.get(e)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}}let Ere=(()=>{class n{constructor(){this._observers=new Map,this._ngZone=me(Je)}ngOnDestroy(){for(const[,t]of this._observers)t.destroy();this._observers.clear()}observe(t,r){const i=r?.box||"content-box";return this._observers.has(i)||this._observers.set(i,new bre(i)),this._observers.get(i).observe(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class ZU{}class wre{}const gl="*";function fw(n,e){return{type:7,name:n,definitions:e,options:{}}}function Xu(n,e=null){return{type:4,styles:e,timings:n}}function YU(n,e=null){return{type:2,steps:n,options:e}}function Ms(n){return{type:6,styles:n,offset:null}}function xre(n,e,t){return{type:0,name:n,styles:e,options:t}}function pw(n,e,t=null){return{type:1,expr:n,animation:e,options:t}}function Df(n,e,t=null){return{type:11,selector:n,animation:e,options:t}}function PD(n,e){return{type:12,timings:n,animation:e}}class p_{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class XU{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?queueMicrotask(()=>this._onFinish()):this.players.forEach(o=>{o.onDone(()=>{++t==s&&this._onFinish()}),o.onDestroy(()=>{++r==s&&this._onDestroy()}),o.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((o,a)=>Math.max(o,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}let Ire=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Cre=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({providers:[Ire]}),n})();const Are=["notch"],Tre=["matFormFieldNotchedOutline",""],Dre=["*"],Sre=["textField"],Rre=["iconPrefixContainer"],Mre=["textPrefixContainer"];function Pre(n,e){1&n&&mr(0,"span",19)}function Nre(n,e){if(1&n&&(pe(0,"label",17),rr(1,1),$t(2,Pre,1,0,"span",18),ce()),2&n){const t=Ii(2);tt("floating",t._shouldLabelFloat())("monitorResize",t._hasOutline())("id",t._labelId),ds("for",t._control.id)("aria-owns",t._control.id),Ne(2),tt("ngIf",!t.hideRequiredMarker&&t._control.required)}}function kre(n,e){1&n&&$t(0,Nre,3,6,"label",16),2&n&&tt("ngIf",Ii()._hasFloatingLabel())}function Ore(n,e){1&n&&mr(0,"div",20)}function Fre(n,e){}function Lre(n,e){1&n&&$t(0,Fre,0,0,"ng-template",22),2&n&&(Ii(2),tt("ngTemplateOutlet",Rs(1)))}function Vre(n,e){if(1&n&&(pe(0,"div",21),$t(1,Lre,1,1,"ng-template",9),ce()),2&n){const t=Ii();tt("matFormFieldNotchedOutlineOpen",t._shouldLabelFloat()),Ne(1),tt("ngIf",!t._forceDisplayInfixLabel())}}function Bre(n,e){1&n&&(pe(0,"div",23,24),rr(2,2),ce())}function Ure(n,e){1&n&&(pe(0,"div",25,26),rr(2,3),ce())}function jre(n,e){}function Hre(n,e){1&n&&$t(0,jre,0,0,"ng-template",22),2&n&&(Ii(),tt("ngTemplateOutlet",Rs(1)))}function $re(n,e){1&n&&(pe(0,"div",27),rr(1,4),ce())}function Gre(n,e){1&n&&(pe(0,"div",28),rr(1,5),ce())}function zre(n,e){1&n&&mr(0,"div",29)}function qre(n,e){1&n&&(pe(0,"div",30),rr(1,6),ce()),2&n&&tt("@transitionMessages",Ii()._subscriptAnimationState)}function Wre(n,e){if(1&n&&(pe(0,"mat-hint",34),Ee(1),ce()),2&n){const t=Ii(2);tt("id",t._hintLabelId),Ne(1),ko(t.hintLabel)}}function Kre(n,e){if(1&n&&(pe(0,"div",31),$t(1,Wre,2,2,"mat-hint",32),rr(2,7),mr(3,"div",33),rr(4,8),ce()),2&n){const t=Ii();tt("@transitionMessages",t._subscriptAnimationState),Ne(1),tt("ngIf",t.hintLabel)}}const Qre=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Zre=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];let kD=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ne({type:n,selectors:[["mat-label"]]}),n})(),Yre=0;const JU=new oe("MatError");let Xre=(()=>{class n{constructor(t,r){this.id="mat-mdc-error-"+Yre++,t||r.nativeElement.setAttribute("aria-live","polite")}}return n.\u0275fac=function(t){return new(t||n)(xu("aria-live"),C(et))},n.\u0275dir=ne({type:n,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(t,r){2&t&&Fg("id",r.id)},inputs:{id:"id"},features:[an([{provide:JU,useExisting:n}])]}),n})(),Jre=0,ej=(()=>{class n{constructor(){this.align="start",this.id="mat-mdc-hint-"+Jre++}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ne({type:n,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(t,r){2&t&&(Fg("id",r.id),ds("align",null),Ci("mat-mdc-form-field-hint-end","end"===r.align))},inputs:{align:"align",id:"id"}}),n})();const eie=new oe("MatPrefix"),tie=new oe("MatSuffix"),tj=new oe("FloatingLabelParent");let nj=(()=>{class n{get floating(){return this._floating}set floating(t){this._floating=t,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(t){this._monitorResize=t,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(t){this._elementRef=t,this._floating=!1,this._monitorResize=!1,this._resizeObserver=me(Ere),this._ngZone=me(Je),this._parent=me(tj),this._resizeSubscription=new kt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return function nie(n){if(null!==n.offsetParent)return n.scrollWidth;const t=n.cloneNode(!0);t.style.setProperty("position","absolute"),t.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(t);const r=t.scrollWidth;return t.remove(),r}(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}}return n.\u0275fac=function(t){return new(t||n)(C(et))},n.\u0275dir=ne({type:n,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(t,r){2&t&&Ci("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"}}),n})();const rj="mdc-line-ripple--active",mw="mdc-line-ripple--deactivating";let ij=(()=>{class n{constructor(t,r){this._elementRef=t,this._handleTransitionEnd=i=>{const s=this._elementRef.nativeElement.classList,o=s.contains(mw);"opacity"===i.propertyName&&o&&s.remove(rj,mw)},r.runOutsideAngular(()=>{t.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){const t=this._elementRef.nativeElement.classList;t.remove(mw),t.add(rj)}deactivate(){this._elementRef.nativeElement.classList.add(mw)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}}return n.\u0275fac=function(t){return new(t||n)(C(et),C(Je))},n.\u0275dir=ne({type:n,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"]}),n})(),sj=(()=>{class n{constructor(t,r){this._elementRef=t,this._ngZone=r,this.open=!1}ngAfterViewInit(){const t=this._elementRef.nativeElement.querySelector(".mdc-floating-label");t?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),"function"==typeof requestAnimationFrame&&(t.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>t.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(t){this._notch.nativeElement.style.width=this.open&&t?`calc(${t}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`:""}}return n.\u0275fac=function(t){return new(t||n)(C(et),C(Je))},n.\u0275cmp=Mn({type:n,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(t,r){if(1&t&&fc(Are,5),2&t){let i;Ai(i=Ti())&&(r._notch=i.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(t,r){2&t&&Ci("mdc-notched-outline--notched",r.open)},inputs:{open:["matFormFieldNotchedOutlineOpen","open"]},attrs:Tre,ngContentSelectors:Dre,decls:5,vars:0,consts:[[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],["notch",""],[1,"mdc-notched-outline__trailing"]],template:function(t,r){1&t&&(Ou(),mr(0,"div",0),pe(1,"div",1,2),rr(3),ce(),mr(4,"div",3))},encapsulation:2,changeDetection:0}),n})();const rie={transitionMessages:fw("transitionMessages",[xre("enter",Ms({opacity:1,transform:"translateY(0%)"})),pw("void => enter",[Ms({opacity:0,transform:"translateY(-5px)"}),Xu("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let oj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ne({type:n}),n})();const aj=new oe("MatFormField"),iie=new oe("MAT_FORM_FIELD_DEFAULT_OPTIONS");let lj=0,dj=(()=>{class n{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=fs(t)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||"auto"}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(t){const r=this._appearance;this._appearance=t||this._defaults?.appearance||"fill","outline"===this._appearance&&this._appearance!==r&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||"fixed"}set subscriptSizing(t){this._subscriptSizing=t||this._defaults?.subscriptSizing||"fixed"}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(t){this._explicitFormFieldControl=t}constructor(t,r,i,s,o,a,l,c){this._elementRef=t,this._changeDetectorRef=r,this._ngZone=i,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance="fill",this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId="mat-mdc-form-field-label-"+lj++,this._hintLabelId="mat-mdc-hint-"+lj++,this._subscriptAnimationState="",this._destroyed=new z,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${t.controlType}`),t.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(ao(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(t=>!t._isText),this._hasTextPrefix=!!this._prefixChildren.find(t=>t._isText),this._hasIconSuffix=!!this._suffixChildren.find(t=>!t._isText),this._hasTextSuffix=!!this._suffixChildren.find(t=>t._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),V(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||null===this._isFocused)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(ao(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(ao(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return"always"===this.floatLabel}_hasOutline(){return"outline"===this.appearance}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(t){const r=this._control?this._control.ngControl:null;return r&&r[t]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){this._hasOutline()&&this._floatingLabel&&this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth()):this._notchedOutline?._setNotchWidth(0)}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const r=this._hintChildren?this._hintChildren.find(s=>"start"===s.align):null,i=this._hintChildren?this._hintChildren.find(s=>"end"===s.align):null;r?t.push(r.id):this._hintLabel&&t.push(this._hintLabelId),i&&t.push(i.id)}else this._errorChildren&&t.push(...this._errorChildren.map(r=>r.id));this._control.setDescribedByIds(t)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;const t=this._floatingLabel.element;if(!this._iconPrefixContainer&&!this._textPrefixContainer)return void(t.style.transform="");if(!this._isAttachedToDom())return void(this._needsOutlineLabelOffsetUpdateOnStable=!0);const r=this._iconPrefixContainer?.nativeElement,i=this._textPrefixContainer?.nativeElement,s=r?.getBoundingClientRect().width??0,o=i?.getBoundingClientRect().width??0;t.style.transform=`var(\n        --mat-mdc-form-field-label-transform,\n        translateY(-50%) translateX(calc(${"rtl"===this._dir.value?"-1":"1"} * (${s+o}px + var(--mat-mdc-form-field-label-offset-x, 0px))))\n    )`}_isAttachedToDom(){const t=this._elementRef.nativeElement;if(t.getRootNode){const r=t.getRootNode();return r&&r!==t}return document.documentElement.contains(t)}}return n.\u0275fac=function(t){return new(t||n)(C(et),C(zg),C(Je),C(DD),C(Aa),C(iie,8),C(Qh,8),C(zt))},n.\u0275cmp=Mn({type:n,selectors:[["mat-form-field"]],contentQueries:function(t,r,i){if(1&t&&(hl(i,kD,5),hl(i,kD,7),hl(i,oj,5),hl(i,eie,5),hl(i,tie,5),hl(i,JU,5),hl(i,ej,5)),2&t){let s;Ai(s=Ti())&&(r._labelChildNonStatic=s.first),Ai(s=Ti())&&(r._labelChildStatic=s.first),Ai(s=Ti())&&(r._formFieldControl=s.first),Ai(s=Ti())&&(r._prefixChildren=s),Ai(s=Ti())&&(r._suffixChildren=s),Ai(s=Ti())&&(r._errorChildren=s),Ai(s=Ti())&&(r._hintChildren=s)}},viewQuery:function(t,r){if(1&t&&(fc(Sre,5),fc(Rre,5),fc(Mre,5),fc(nj,5),fc(sj,5),fc(ij,5)),2&t){let i;Ai(i=Ti())&&(r._textField=i.first),Ai(i=Ti())&&(r._iconPrefixContainer=i.first),Ai(i=Ti())&&(r._textPrefixContainer=i.first),Ai(i=Ti())&&(r._floatingLabel=i.first),Ai(i=Ti())&&(r._notchedOutline=i.first),Ai(i=Ti())&&(r._lineRipple=i.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(t,r){2&t&&Ci("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations","NoopAnimations"===r._animationMode)("mat-form-field-appearance-fill","fill"==r.appearance)("mat-form-field-appearance-outline","outline"==r.appearance)("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary","accent"!==r.color&&"warn"!==r.color)("mat-accent","accent"===r.color)("mat-warn","warn"===r.color)("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[an([{provide:aj,useExisting:n},{provide:tj,useExisting:n}])],ngContentSelectors:Zre,decls:18,vars:23,consts:[["labelTemplate",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],["textField",""],["class","mat-mdc-form-field-focus-overlay",4,"ngIf"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen",4,"ngIf"],["class","mat-mdc-form-field-icon-prefix",4,"ngIf"],["class","mat-mdc-form-field-text-prefix",4,"ngIf"],[1,"mat-mdc-form-field-infix"],[3,"ngIf"],["class","mat-mdc-form-field-text-suffix",4,"ngIf"],["class","mat-mdc-form-field-icon-suffix",4,"ngIf"],["matFormFieldLineRipple","",4,"ngIf"],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align",3,"ngSwitch"],["class","mat-mdc-form-field-error-wrapper",4,"ngSwitchCase"],["class","mat-mdc-form-field-hint-wrapper",4,"ngSwitchCase"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id",4,"ngIf"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true","class","mat-mdc-form-field-required-marker mdc-floating-label--required",4,"ngIf"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-focus-overlay"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-icon-prefix"],["iconPrefixContainer",""],[1,"mat-mdc-form-field-text-prefix"],["textPrefixContainer",""],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id",4,"ngIf"],[1,"mat-mdc-form-field-hint-spacer"],[3,"id"]],template:function(t,r){1&t&&(Ou(Qre),$t(0,kre,1,1,"ng-template",null,0,rV),pe(2,"div",1,2),Bn("click",function(s){return r._control.onContainerClick(s)}),$t(4,Ore,1,0,"div",3),pe(5,"div",4),$t(6,Vre,2,2,"div",5),$t(7,Bre,3,0,"div",6),$t(8,Ure,3,0,"div",7),pe(9,"div",8),$t(10,Hre,1,1,"ng-template",9),rr(11),ce(),$t(12,$re,2,0,"div",10),$t(13,Gre,2,0,"div",11),ce(),$t(14,zre,1,0,"div",12),ce(),pe(15,"div",13),$t(16,qre,2,1,"div",14),$t(17,Kre,5,2,"div",15),ce()),2&t&&(Ne(2),Ci("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),Ne(2),tt("ngIf",!r._hasOutline()&&!r._control.disabled),Ne(2),tt("ngIf",r._hasOutline()),Ne(1),tt("ngIf",r._hasIconPrefix),Ne(1),tt("ngIf",r._hasTextPrefix),Ne(2),tt("ngIf",!r._hasOutline()||r._forceDisplayInfixLabel()),Ne(2),tt("ngIf",r._hasTextSuffix),Ne(1),tt("ngIf",r._hasIconSuffix),Ne(1),tt("ngIf",!r._hasOutline()),Ne(1),Ci("mat-mdc-form-field-subscript-dynamic-size","dynamic"===r.subscriptSizing),tt("ngSwitch",r._getDisplayedMessages()),Ne(1),tt("ngSwitchCase","error"),Ne(1),tt("ngSwitchCase","hint"))},dependencies:[Hu,I2,LE,w2,ej,nj,sj,ij],styles:['.mdc-text-field{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px, var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px, var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px, var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px, var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px, calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 64px / 0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100% / 0.75 - 96px / 0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px * 2)}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{line-height:normal;pointer-events:all}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:12px;box-sizing:content-box}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[rie.transitionMessages]},changeDetection:0}),n})(),gw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[ps,VE,Cre,ps]}),n})();const aie=new oe("MAT_INPUT_VALUE_ACCESSOR"),lie=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let cie=0;const uie=Xne(class{constructor(n,e,t,r){this._defaultErrorStateMatcher=n,this._parentForm=e,this._parentFormGroup=t,this.ngControl=r,this.stateChanges=new z}});let hj=(()=>{class n extends uie{get disabled(){return this._disabled}set disabled(t){this._disabled=fs(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(bB.required)??!1}set required(t){this._required=fs(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&EU().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=fs(t)}constructor(t,r,i,s,o,a,l,c,h,p){super(a,s,o,i),this._elementRef=t,this._platform=r,this._autofillMonitor=c,this._formField=p,this._uid="mat-input-"+cie++,this.focused=!1,this.stateChanges=new z,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(v=>EU().has(v)),this._iOSKeyupListener=v=>{const E=v.target;!E.value&&0===E.selectionStart&&0===E.selectionEnd&&(E.setSelectionRange(1,1),E.setSelectionRange(0,0))};const g=this._elementRef.nativeElement,_=g.nodeName.toLowerCase();this._inputValueAccessor=l||g,this._previousNativeValue=this.value,this.id=this.id,r.IOS&&h.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===_,this._isTextarea="textarea"===_,this._isInFormField=!!p,this._isNativeSelect&&(this.controlType=g.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),null!==this.ngControl.disabled&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_dirtyCheckPlaceholder(){const t=this._getPlaceholder();if(t!==this._previousPlaceholder){const r=this._elementRef.nativeElement;this._previousPlaceholder=t,t?r.setAttribute("placeholder",t):r.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){lie.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,r=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&r&&r.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){const t=this._elementRef.nativeElement;return this._isNativeSelect&&(t.multiple||t.size>1)}}return n.\u0275fac=function(t){return new(t||n)(C(et),C(Aa),C(ml,10),C(xf,8),C(sw,8),C(ere),C(aie,10),C(_re),C(Je),C(aj,8))},n.\u0275dir=ne({type:n,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(t,r){1&t&&Bn("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),2&t&&(Fg("id",r.id)("disabled",r.disabled)("required",r.required),ds("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),Ci("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],features:[an([{provide:oj,useExisting:n}]),ve,Rr]}),n})(),fj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[ps,gw,gw,yre,ps]}),n})();function Sf(n,e){const t=I(n)?n:()=>n,r=i=>i.error(t());return new dt(e?i=>e.schedule(r,0,i):r)}function br(n,e,t){const r=I(n)||e||t?{next:n,error:e,complete:t}:n;return r?be((i,s)=>{var o;null===(o=r.subscribe)||void 0===o||o.call(r);let a=!0;i.subscribe(Fe(s,l=>{var c;null===(c=r.next)||void 0===c||c.call(r,l),s.next(l)},()=>{var l;a=!1,null===(l=r.complete)||void 0===l||l.call(r),s.complete()},l=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,l),s.error(l)},()=>{var l,c;a&&(null===(l=r.unsubscribe)||void 0===l||l.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):qn}function bc(n){return be((e,t)=>{let s,r=null,i=!1;r=e.subscribe(Fe(t,void 0,void 0,o=>{s=er(n(o,bc(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}let yj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[ps,ps]}),n})(),vj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[ps,ps]}),n})(),wie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[ps,VE,ps]}),n})(),xie=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[VE,KU,fj,wie,gw,yj,vj,KU,fj,gw,yj,vj]}),n})();const vw=ke(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function bj(n){return new dt(e=>{er(n()).subscribe(e)})}function FD(){return be((n,e)=>{let t=null;n._refCount++;const r=Fe(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Ej extends dt{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,te(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new kt;const t=this.getSubject();e.add(this.source.subscribe(Fe(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=kt.EMPTY)}return e}refCount(){return FD()(this)}}function bw(n){return be((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function wj(n=Cie){return be((e,t)=>{let r=!1;e.subscribe(Fe(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Cie(){return new vw}function Ec(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,s)=>n(i,s,r)):qn,Zu(1),t?bw(e):wj(()=>new vw))}function Rf(n,e){return be(function Aie(n,e,t,r,i){return(s,o)=>{let a=t,l=e,c=0;s.subscribe(Fe(o,h=>{const p=c++;l=a?n(l,h,p):(a=!0,h),r&&o.next(l)},i&&(()=>{a&&o.next(l),o.complete()})))}}(n,e,arguments.length>=2,!0))}function LD(n){return n<=0?()=>Dr:be((e,t)=>{let r=[];e.subscribe(Fe(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}const pt="primary",g_=Symbol("RouteTitle");class Sie{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Mf(n){return new Sie(n)}function Rie(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const o=r[s],a=n[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ta(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!xj(n[i],e[i]))return!1;return!0}function xj(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Ij(n){return n.length>0?n[n.length-1]:null}function wc(n){return function Iie(n){return!!n&&(n instanceof dt||I(n.lift)&&I(n.subscribe))}(n)?n:kg(n)?j(Promise.resolve(n)):K(n)}const Pie={exact:function Tj(n,e,t){if(!ed(n.segments,e.segments)||!Ew(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Tj(n.children[r],e.children[r],t))return!1;return!0},subset:Dj},Cj={exact:function Nie(n,e){return Ta(n,e)},subset:function kie(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>xj(n[t],e[t]))},ignored:()=>!0};function Aj(n,e,t){return Pie[t.paths](n.root,e.root,t.matrixParams)&&Cj[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Dj(n,e,t){return Sj(n,e,e.segments,t)}function Sj(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!ed(i,t)||e.hasChildren()||!Ew(i,t,r))}if(n.segments.length===t.length){if(!ed(n.segments,t)||!Ew(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Dj(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(ed(n.segments,i)&&Ew(n.segments,i,r)&&n.children[pt])&&Sj(n.children[pt],e,s,r)}}function Ew(n,e,t){return e.every((r,i)=>Cj[t](n[i].parameters,r.parameters))}class Pf{constructor(e=new Zt([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mf(this.queryParams)),this._queryParamMap}toString(){return Lie.serialize(this)}}class Zt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ww(this)}}class __{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Mf(this.parameters)),this._parameterMap}toString(){return Pj(this)}}function ed(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let y_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:function(){return new VD},providedIn:"root"}),n})();class VD{parse(e){const t=new Kie(e);return new Pf(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${v_(e.root,!0)}`,r=function Uie(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${xw(t)}=${xw(i)}`).join("&"):`${xw(t)}=${xw(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Vie(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Lie=new VD;function ww(n){return n.segments.map(e=>Pj(e)).join("/")}function v_(n,e){if(!n.hasChildren())return ww(n);if(e){const t=n.children[pt]?v_(n.children[pt],!1):"",r=[];return Object.entries(n.children).forEach(([i,s])=>{i!==pt&&r.push(`${i}:${v_(s,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Fie(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===pt&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==pt&&(t=t.concat(e(i,r)))}),t}(n,(r,i)=>i===pt?[v_(n.children[pt],!1)]:[`${i}:${v_(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[pt]?`${ww(n)}/${t[0]}`:`${ww(n)}/(${t.join("//")})`}}function Rj(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xw(n){return Rj(n).replace(/%3B/gi,";")}function BD(n){return Rj(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Iw(n){return decodeURIComponent(n)}function Mj(n){return Iw(n.replace(/\+/g,"%20"))}function Pj(n){return`${BD(n.path)}${function Bie(n){return Object.keys(n).map(e=>`;${BD(e)}=${BD(n[e])}`).join("")}(n.parameters)}`}const jie=/^[^\/()?;#]+/;function UD(n){const e=n.match(jie);return e?e[0]:""}const Hie=/^[^\/()?;=#]+/,Gie=/^[^=?&#]+/,qie=/^[^&#]+/;class Kie{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zt([],{}):new Zt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[pt]=new Zt(e,t)),r}parseSegment(){const e=UD(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new L(4009,!1);return this.capture(e),new __(Iw(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=function $ie(n){const e=n.match(Hie);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=UD(this.remaining);i&&(r=i,this.capture(r))}e[Iw(t)]=Iw(r)}parseQueryParam(e){const t=function zie(n){const e=n.match(Gie);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=function Wie(n){const e=n.match(qie);return e?e[0]:""}(this.remaining);o&&(r=o,this.capture(r))}const i=Mj(t),s=Mj(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=UD(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new L(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=pt);const o=this.parseChildren();t[s]=1===Object.keys(o).length?o[pt]:new Zt([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new L(4011,!1)}}function Nj(n){return n.segments.length>0?new Zt([],{[pt]:n}):n}function kj(n){const e={};for(const r of Object.keys(n.children)){const s=kj(n.children[r]);if(r===pt&&0===s.segments.length&&s.hasChildren())for(const[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Qie(n){if(1===n.numberOfChildren&&n.children[pt]){const e=n.children[pt];return new Zt(n.segments.concat(e.segments),e.children)}return n}(new Zt(n.segments,e))}function td(n){return n instanceof Pf}function Oj(n){let e;const i=Nj(function t(s){const o={};for(const l of s.children){const c=t(l);o[l.outlet]=c}const a=new Zt(s.url,o);return s===n&&(e=a),a}(n.root));return e??i}function Fj(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(0===e.length)return jD(i,i,i,t,r);const s=function Yie(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Vj(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,o)=>{if("object"==typeof s&&null!=s){if(s.outlets){const a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]="string"==typeof c?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===o?(s.split("/").forEach((a,l)=>{0==l&&"."===a||(0==l&&""===a?t=!0:".."===a?e++:""!=a&&i.push(a))}),i):[...i,s]},[]);return new Vj(t,e,r)}(e);if(s.toRoot())return jD(i,i,new Zt([],{}),t,r);const o=function Xie(n,e,t){if(n.isAbsolute)return new Aw(e,!0,0);if(!t)return new Aw(e,!1,NaN);if(null===t.parent)return new Aw(t,!0,0);const r=Cw(n.commands[0])?0:1;return function Jie(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new L(4005,!1);i=r.segments.length}return new Aw(r,!1,i-s)}(t,t.segments.length-1+r,n.numberOfDoubleDots)}(s,i,n),a=o.processChildren?E_(o.segmentGroup,o.index,s.commands):Bj(o.segmentGroup,o.index,s.commands);return jD(i,o.segmentGroup,a,t,r)}function Cw(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function b_(n){return"object"==typeof n&&null!=n&&n.outlets}function jD(n,e,t,r,i){let o,s={};r&&Object.entries(r).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`}),o=n===e?t:Lj(n,e,t);const a=Nj(kj(o));return new Pf(a,s,i)}function Lj(n,e,t){const r={};return Object.entries(n.children).forEach(([i,s])=>{r[i]=s===e?t:Lj(s,e,t)}),new Zt(n.segments,r)}class Vj{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Cw(r[0]))throw new L(4003,!1);const i=r.find(b_);if(i&&i!==Ij(r))throw new L(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Aw{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Bj(n,e,t){if(n||(n=new Zt([],{})),0===n.segments.length&&n.hasChildren())return E_(n,e,t);const r=function tse(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const o=n.segments[i],a=t[r];if(b_(a))break;const l=`${a}`,c=r<t.length-1?t[r+1]:null;if(i>0&&void 0===l)break;if(l&&c&&"object"==typeof c&&void 0===c.outlets){if(!jj(l,c,o))return s;r+=2}else{if(!jj(l,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Zt(n.segments.slice(0,r.pathIndex),{});return s.children[pt]=new Zt(n.segments.slice(r.pathIndex),n.children),E_(s,0,i)}return r.match&&0===i.length?new Zt(n.segments,{}):r.match&&!n.hasChildren()?HD(n,e,t):r.match?E_(n,0,i):HD(n,e,t)}function E_(n,e,t){if(0===t.length)return new Zt(n.segments,{});{const r=function ese(n){return b_(n[0])?n[0].outlets:{[pt]:n}}(t),i={};if(!r[pt]&&n.children[pt]&&1===n.numberOfChildren&&0===n.children[pt].segments.length){const s=E_(n.children[pt],e,t);return new Zt(n.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{"string"==typeof o&&(o=[o]),null!==o&&(i[s]=Bj(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{void 0===r[s]&&(i[s]=o)}),new Zt(n.segments,i)}}function HD(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(b_(s)){const l=nse(s.outlets);return new Zt(r,l)}if(0===i&&Cw(t[0])){r.push(new __(n.segments[e].path,Uj(t[0]))),i++;continue}const o=b_(s)?s.outlets[pt]:`${s}`,a=i<t.length-1?t[i+1]:null;o&&a&&Cw(a)?(r.push(new __(o,Uj(a))),i+=2):(r.push(new __(o,{})),i++)}return new Zt(r,{})}function nse(n){const e={};return Object.entries(n).forEach(([t,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[t]=HD(new Zt([],{}),0,r))}),e}function Uj(n){const e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function jj(n,e,t){return n==t.path&&Ta(e,t.parameters)}const w_="imperative";class Da{constructor(e,t){this.id=e,this.url=t}}class $D extends Da{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class nd extends Da{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Tw extends Da{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class x_ extends Da{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class GD extends Da{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class rse extends Da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ise extends Da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sse extends Da{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ose extends Da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ase extends Da{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lse{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class cse{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class use{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dse{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class hse{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fse{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hj{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class pse{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new I_,this.attachRef=null}}let I_=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new pse,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class $j{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=zD(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=zD(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=qD(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return qD(e,this._root).map(t=>t.value)}}function zD(n,e){if(n===e.value)return e;for(const t of e.children){const r=zD(n,t);if(r)return r}return null}function qD(n,e){if(n===e.value)return[e];for(const t of e.children){const r=qD(n,t);if(r.length)return r.unshift(e),r}return[]}class _l{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Nf(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Gj extends $j{constructor(e,t){super(e),this.snapshot=t,WD(this,e)}toString(){return this.snapshot.toString()}}function zj(n,e){const t=function mse(n,e){const o=new Dw([],{},{},"",{},pt,e,null,{});return new Wj("",new _l(o,[]))}(0,e),r=new Q([new __("",{})]),i=new Q({}),s=new Q({}),o=new Q({}),a=new Q(""),l=new Sa(r,i,o,a,s,pt,e,t.root);return l.snapshot=t.root,new Gj(new _l(l,[]),t)}class Sa{constructor(e,t,r,i,s,o,a,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(re(c=>c[g_]))??K(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(re(e=>Mf(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(re(e=>Mf(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function qj(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function gse(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Dw{get title(){return this.data?.[g_]}constructor(e,t,r,i,s,o,a,l,c){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Mf(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Mf(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Wj extends $j{constructor(e,t){super(t),this.url=e,WD(this,t)}toString(){return Kj(this._root)}}function WD(n,e){e.value._routerState=n,e.children.forEach(t=>WD(n,t))}function Kj(n){const e=n.children.length>0?` { ${n.children.map(Kj).join(", ")} } `:"";return`${n.value}${e}`}function KD(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ta(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ta(e.params,t.params)||n.paramsSubject.next(t.params),function Mie(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ta(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.urlSubject.next(t.url),Ta(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function QD(n,e){const t=Ta(n.params,e.params)&&function Oie(n,e){return ed(n,e)&&n.every((t,r)=>Ta(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||QD(n.parent,e.parent))}let ZD=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=pt,this.activateEvents=new Un,this.deactivateEvents=new Un,this.attachEvents=new Un,this.detachEvents=new Un,this.parentContexts=me(I_),this.location=me(Oo),this.changeDetector=me(zg),this.environmentInjector=me(_a),this.inputBinder=me(Sw,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new L(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new L(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new L(4012,!1);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new L(4013,!1);this._activatedRoute=t;const i=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new _se(t,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ne({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Rr]}),n})();class _se{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Sa?this.route:e===I_?this.childContexts:this.parent.get(e,t)}}const Sw=new oe("");let Qj=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){const{activatedRoute:r}=t,i=lw([r.queryParams,r.params,r.data]).pipe(Dt(([s,o,a],l)=>(a={...s,...o,...a},0===l?K(a):Promise.resolve(a)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(t);const o=function mX(n){const e=Mt(n);if(!e)return null;const t=new Sg(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(o)for(const{templateName:a}of o.inputs)t.activatedComponentRef.setInput(a,s[a]);else this.unsubscribeFromRouteData(t)});this.outletDataSubscriptions.set(t,i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();function C_(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function vse(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return C_(n,r,i);return C_(n,r)})}(n,e,t);return new _l(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>C_(n,a)),o}}const r=function bse(n){return new Sa(new Q(n.url),new Q(n.params),new Q(n.queryParams),new Q(n.fragment),new Q(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>C_(n,s));return new _l(r,i)}}const YD="ngNavigationCancelingError";function Zj(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=td(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Yj(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Yj(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[YD]=!0,r.cancellationCode=e,t&&(r.url=t),r}function Xj(n){return Jj(n)&&td(n.url)}function Jj(n){return n&&n[YD]}let eH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Mn({type:n,selectors:[["ng-component"]],standalone:!0,features:[ML],decls:1,vars:0,template:function(t,r){1&t&&mr(0,"router-outlet")},dependencies:[ZD],encapsulation:2}),n})();function XD(n){const e=n.children&&n.children.map(XD),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==pt&&(t.component=eH),t}function Bo(n){return n.outlet||pt}function A_(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Tse{constructor(e,t,r,i,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),KD(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Nf(t);e.children.forEach(s=>{const o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Nf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);if(r&&r.outlet){const o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Nf(e);for(const o of Object.keys(s))this.deactivateRouteAndItsChildren(s[o],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){const i=Nf(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new fse(s.value.snapshot))}),e.children.length&&this.forwardEvent(new dse(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(KD(i),i===s)if(i.component){const o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),KD(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=A_(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}}class tH{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Rw{constructor(e,t){this.component=e,this.route=t}}function Dse(n,e,t){const r=n._root;return T_(r,e?e._root:null,t,[r.value])}function kf(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||function bI(n){return null!==Xd(n)}(n)?e.get(n):n:r}function T_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Nf(e);return n.children.forEach(o=>{(function Rse(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function Mse(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!ed(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ed(n.url,e.url)||!Ta(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!QD(n,e)||!Ta(n.queryParams,e.queryParams);default:return!QD(n,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new tH(r)):(s.data=o.data,s._resolvedData=o._resolvedData),T_(n,e,s.component?a?a.children:null:t,r,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Rw(a.outlet.component,o))}else o&&D_(e,a,i),i.canActivateChecks.push(new tH(r)),T_(n,null,s.component?a?a.children:null:t,r,i)})(o,s[o.value.outlet],t,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>D_(a,t.getContext(o),i)),i}function D_(n,e,t){const r=Nf(n),i=n.value;Object.entries(r).forEach(([s,o])=>{D_(o,i.component?e?e.children.getContext(s):null:e,t)}),t.canDeactivateChecks.push(new Rw(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function S_(n){return"function"==typeof n}function nH(n){return n instanceof vw||"EmptyError"===n?.name}const Mw=Symbol("INITIAL_VALUE");function Of(){return Dt(n=>lw(n.map(e=>e.pipe(Zu(1),d_(Mw)))).pipe(re(e=>{for(const t of e)if(!0!==t){if(t===Mw)return Mw;if(!1===t||t instanceof Pf)return t}return!0}),ii(e=>e!==Mw),Zu(1)))}function rH(n){return function Gs(...n){return zs(n)}(br(e=>{if(td(e))throw Zj(0,e)}),re(e=>!0===e))}class Pw{constructor(e){this.segmentGroup=e||null}}class iH{constructor(e){this.urlTree=e}}function Ff(n){return Sf(new Pw(n))}function sH(n){return Sf(new iH(n))}class Yse{constructor(e,t){this.urlSerializer=e,this.urlTree=t}noMatchError(e){return new L(4002,!1)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return K(r);if(i.numberOfChildren>1||!i.children[pt])return Sf(new L(4e3,!1));i=i.children[pt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Pf(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Object.entries(e).forEach(([i,s])=>{if("string"==typeof s&&s.startsWith(":")){const a=s.substring(1);r[i]=t[a]}else r[i]=s}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let o={};return Object.entries(t.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,r,i)}),new Zt(s,o)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new L(4001,!1);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}const JD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Xse(n,e,t,r,i){const s=eS(n,e,t);return s.matched?(r=function Ese(n,e){return n.providers&&!n._injector&&(n._injector=GA(n.providers,e,`Route: ${n.path}`)),n._injector??e}(e,r),function Kse(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?K(i.map(o=>{const a=kf(o,n);return wc(function Lse(n){return n&&S_(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(Of(),rH()):K(!0)}(r,e,t).pipe(re(o=>!0===o?s:{...JD}))):K(s)}function eS(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...JD}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Rie)(t,n,e);if(!i)return{...JD};const s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});const o=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function oH(n,e,t,r){return t.length>0&&function toe(n,e,t){return t.some(r=>Nw(n,e,r)&&Bo(r)!==pt)}(n,t,r)?{segmentGroup:new Zt(e,eoe(r,new Zt(t,n.children))),slicedSegments:[]}:0===t.length&&function noe(n,e,t){return t.some(r=>Nw(n,e,r))}(n,t,r)?{segmentGroup:new Zt(n.segments,Jse(n,0,t,r,n.children)),slicedSegments:t}:{segmentGroup:new Zt(n.segments,n.children),slicedSegments:t}}function Jse(n,e,t,r,i){const s={};for(const o of r)if(Nw(n,t,o)&&!i[Bo(o)]){const a=new Zt([],{});s[Bo(o)]=a}return{...i,...s}}function eoe(n,e){const t={};t[pt]=e;for(const r of n)if(""===r.path&&Bo(r)!==pt){const i=new Zt([],{});t[Bo(r)]=i}return t}function Nw(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}class ooe{constructor(e,t,r,i,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.allowRedirects=!0,this.applyRedirects=new Yse(this.urlSerializer,this.urlTree)}noMatchError(e){return new L(4002,!1)}recognize(){const e=oH(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,pt).pipe(bc(t=>{if(t instanceof iH)return this.allowRedirects=!1,this.urlTree=t.urlTree,this.match(t.urlTree);throw t instanceof Pw?this.noMatchError(t):t}),re(t=>{const r=new Dw([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},pt,this.rootComponentType,null,{}),i=new _l(r,t),s=new Wj("",i),o=function Zie(n,e,t=null,r=null){return Fj(Oj(n),e,t,r)}(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e.root,pt).pipe(bc(r=>{throw r instanceof Pw?this.noMatchError(r):r}))}inheritParamsAndData(e){const t=e.value,r=qj(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i,!0)}processChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return j(i).pipe(vf(s=>{const o=r.children[s],a=function Cse(n,e){const t=n.filter(r=>Bo(r)===e);return t.push(...n.filter(r=>Bo(r)!==e)),t}(t,s);return this.processSegmentGroup(e,a,o,s)}),Rf((s,o)=>(s.push(...o),s)),bw(null),function Tie(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ii((i,s)=>n(i,s,r)):qn,LD(1),t?bw(e):wj(()=>new vw))}(),En(s=>{if(null===s)return Ff(r);const o=aH(s);return function aoe(n){n.sort((e,t)=>e.value.outlet===pt?-1:t.value.outlet===pt?1:e.value.outlet.localeCompare(t.value.outlet))}(o),K(o)}))}processSegment(e,t,r,i,s,o){return j(t).pipe(vf(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,r,i,s,o).pipe(bc(l=>{if(l instanceof Pw)return K(null);throw l}))),Ec(a=>!!a),bc(a=>{if(nH(a))return function ioe(n,e,t){return 0===e.length&&!n.children[t]}(r,i,s)?K([]):Ff(r);throw a}))}processSegmentAgainstRoute(e,t,r,i,s,o,a){return function roe(n,e,t,r){return!!(Bo(n)===r||r!==pt&&Nw(e,t,n))&&("**"===n.path||eS(e,n,t).matched)}(r,i,s,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,i,r,s,o,a):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,s,o):Ff(i):Ff(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirects.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?sH(s):this.applyRedirects.lineralizeSegments(r,s).pipe(En(o=>{const a=new Zt(o,{});return this.processSegment(e,t,a,o,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,o){const{matched:a,consumedSegments:l,remainingSegments:c,positionalParamSegments:h}=eS(t,i,s);if(!a)return Ff(t);const p=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,h);return i.redirectTo.startsWith("/")?sH(p):this.applyRedirects.lineralizeSegments(i,p).pipe(En(g=>this.processSegment(e,r,t,g.concat(c),o,!1)))}matchSegmentAgainstRoute(e,t,r,i,s,o){let a;if("**"===r.path){const l=i.length>0?Ij(i).parameters:{};a=K({snapshot:new Dw(i,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,lH(r),Bo(r),r.component??r._loadedComponent??null,r,cH(r)),consumedSegments:[],remainingSegments:[]}),t.children={}}else a=Xse(t,r,i,e).pipe(re(({matched:l,consumedSegments:c,remainingSegments:h,parameters:p})=>l?{snapshot:new Dw(c,p,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,lH(r),Bo(r),r.component??r._loadedComponent??null,r,cH(r)),consumedSegments:c,remainingSegments:h}:null));return a.pipe(Dt(l=>null===l?Ff(t):this.getChildConfig(e=r._injector??e,r,i).pipe(Dt(({routes:c})=>{const h=r._loadedInjector??e,{snapshot:p,consumedSegments:g,remainingSegments:_}=l,{segmentGroup:v,slicedSegments:E}=oH(t,g,_,c);if(0===E.length&&v.hasChildren())return this.processChildren(h,c,v).pipe(re(M=>null===M?null:[new _l(p,M)]));if(0===c.length&&0===E.length)return K([new _l(p,[])]);const x=Bo(r)===s;return this.processSegment(h,c,v,E,x?pt:s,!0).pipe(re(M=>[new _l(p,M)]))}))))}getChildConfig(e,t,r){return t.children?K({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?K({routes:t._loadedRoutes,injector:t._loadedInjector}):function Wse(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?K(!0):K(i.map(o=>{const a=kf(o,n);return wc(function Nse(n){return n&&S_(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(Of(),rH())}(e,t,r).pipe(En(i=>i?this.configLoader.loadChildren(e,t).pipe(br(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function Zse(n){return Sf(Yj(!1,3))}())):K({routes:[],injector:e})}}function loe(n){const e=n.value.routeConfig;return e&&""===e.path}function aH(n){const e=[],t=new Set;for(const r of n){if(!loe(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=aH(r.children);e.push(new _l(r.value,i))}return e.filter(r=>!t.has(r))}function lH(n){return n.data||{}}function cH(n){return n.resolve||{}}function uH(n){return"string"==typeof n.title||null===n.title}function tS(n){return Dt(e=>{const t=n(e);return t?j(t).pipe(re(()=>e)):K(e)})}const Lf=new oe("ROUTES");let nS=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=me(EV)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return K(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=wc(t.loadComponent()).pipe(re(dH),br(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),bf(()=>{this.componentLoaders.delete(t)})),i=new Ej(r,()=>new z).pipe(FD());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return K({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe(re(a=>{this.onLoadEndListener&&this.onLoadEndListener(r);let l,c;return Array.isArray(a)?c=a:(l=a.create(t).injector,c=l.get(Lf,[],Ue.Self|Ue.Optional).flat()),{routes:c.map(XD),injector:l}}),bf(()=>{this.childrenLoaders.delete(r)})),o=new Ej(s,()=>new z).pipe(FD());return this.childrenLoaders.set(r,o),o}loadModuleFactoryOrRoutes(t){return wc(t()).pipe(re(dH),En(r=>r instanceof SL||Array.isArray(r)?K(r):j(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dH(n){return function moe(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let kw=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new z,this.configLoader=me(nS),this.environmentInjector=me(_a),this.urlSerializer=me(y_),this.rootContexts=me(I_),this.inputBindingEnabled=null!==me(Sw,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>K(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new cse(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new lse(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new Q({id:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:w_,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(ii(r=>0!==r.id),re(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Dt(r=>{let i=!1,s=!1;return K(r).pipe(br(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Dt(o=>{const a=t.browserUrlTree.toString(),l=!t.navigated||o.extractedUrl.toString()!==a||a!==t.currentUrlTree.toString();if(!l&&"reload"!==(o.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const h="";return this.events.next(new x_(o.id,t.serializeUrl(r.rawUrl),h,0)),t.rawUrlTree=o.rawUrl,o.resolve(null),Dr}if(t.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return hH(o.source)&&(t.browserUrlTree=o.extractedUrl),K(o).pipe(Dt(h=>{const p=this.transitions?.getValue();return this.events.next(new $D(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),p!==this.transitions?.getValue()?Dr:Promise.resolve(h)}),function coe(n,e,t,r,i,s){return En(o=>function soe(n,e,t,r,i,s,o="emptyOnly"){return new ooe(n,e,t,r,i,o,s).recognize()}(n,e,t,r,o.extractedUrl,i,s).pipe(re(({state:a,tree:l})=>({...o,targetSnapshot:a,urlAfterRedirects:l}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),br(h=>{if(r.targetSnapshot=h.targetSnapshot,r.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:h.urlAfterRedirects},"eager"===t.urlUpdateStrategy){if(!h.extras.skipLocationChange){const g=t.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl);t.setBrowserUrl(g,h)}t.browserUrlTree=h.urlAfterRedirects}const p=new rse(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}));if(l&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:h,extractedUrl:p,source:g,restoredState:_,extras:v}=o,E=new $D(h,this.urlSerializer.serialize(p),g,_);this.events.next(E);const x=zj(0,this.rootComponentType).snapshot;return K(r={...o,targetSnapshot:x,urlAfterRedirects:p,extras:{...v,skipLocationChange:!1,replaceUrl:!1}})}{const h="";return this.events.next(new x_(o.id,t.serializeUrl(r.extractedUrl),h,1)),t.rawUrlTree=o.rawUrl,o.resolve(null),Dr}}),br(o=>{const a=new ise(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),re(o=>r={...o,guards:Dse(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),function Bse(n,e){return En(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return 0===o.length&&0===s.length?K({...t,guardsResult:!0}):function Use(n,e,t,r){return j(n).pipe(En(i=>function qse(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?K(s.map(a=>{const l=A_(e)??i,c=kf(a,l);return wc(function Fse(n){return n&&S_(n.canDeactivate)}(c)?c.canDeactivate(n,e,t,r):l.runInContext(()=>c(n,e,t,r))).pipe(Ec())})).pipe(Of()):K(!0)}(i.component,i.route,t,e,r)),Ec(i=>!0!==i,!0))}(o,r,i,n).pipe(En(a=>a&&function Pse(n){return"boolean"==typeof n}(a)?function jse(n,e,t,r){return j(e).pipe(vf(i=>cw(function $se(n,e){return null!==n&&e&&e(new use(n)),K(!0)}(i.route.parent,r),function Hse(n,e){return null!==n&&e&&e(new hse(n)),K(!0)}(i.route,r),function zse(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>function Sse(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>bj(()=>K(o.guards.map(l=>{const c=A_(o.node)??t,h=kf(l,c);return wc(function Ose(n){return n&&S_(n.canActivateChild)}(h)?h.canActivateChild(r,n):c.runInContext(()=>h(r,n))).pipe(Ec())})).pipe(Of())));return K(s).pipe(Of())}(n,i.path,t),function Gse(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return K(!0);const i=r.map(s=>bj(()=>{const o=A_(e)??t,a=kf(s,o);return wc(function kse(n){return n&&S_(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(Ec())}));return K(i).pipe(Of())}(n,i.route,t))),Ec(i=>!0!==i,!0))}(r,s,n,e):K(a)),re(a=>({...t,guardsResult:a})))})}(this.environmentInjector,o=>this.events.next(o)),br(o=>{if(r.guardsResult=o.guardsResult,td(o.guardsResult))throw Zj(0,o.guardsResult);const a=new sse(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),ii(o=>!!o.guardsResult||(t.restoreHistory(o),this.cancelNavigationTransition(o,"",3),!1)),tS(o=>{if(o.guards.canActivateChecks.length)return K(o).pipe(br(a=>{const l=new ose(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}),Dt(a=>{let l=!1;return K(a).pipe(function uoe(n,e){return En(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return K(t);let s=0;return j(i).pipe(vf(o=>function doe(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!uH(i)&&(s[g_]=i.title),function hoe(n,e,t,r){const i=function foe(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return K({});const s={};return j(i).pipe(En(o=>function poe(n,e,t,r){const i=A_(e)??r,s=kf(n,i);return wc(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[o],e,t,r).pipe(Ec(),br(a=>{s[o]=a}))),LD(1),function Die(n){return re(()=>n)}(s),bc(o=>nH(o)?Dr:Sf(o)))}(s,n,e,r).pipe(re(o=>(n._resolvedData=o,n.data=qj(n,t).resolve,i&&uH(i)&&(n.data[g_]=i.title),null)))}(o.route,r,n,e)),br(()=>s++),LD(1),En(o=>s===i.length?K(t):Dr))})}(t.paramsInheritanceStrategy,this.environmentInjector),br({next:()=>l=!0,complete:()=>{l||(t.restoreHistory(a),this.cancelNavigationTransition(a,"",2))}}))}),br(a=>{const l=new ase(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(l)}))}),tS(o=>{const a=l=>{const c=[];l.routeConfig?.loadComponent&&!l.routeConfig._loadedComponent&&c.push(this.configLoader.loadComponent(l.routeConfig).pipe(br(h=>{l.component=h}),re(()=>{})));for(const h of l.children)c.push(...a(h));return c};return lw(a(o.targetSnapshot.root)).pipe(bw(),Zu(1))}),tS(()=>this.afterPreactivation()),re(o=>{const a=function yse(n,e,t){const r=C_(n,e._root,t?t._root:void 0);return new Gj(r,e)}(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return r={...o,targetRouterState:a}}),br(o=>{t.currentUrlTree=o.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),t.routerState=o.targetRouterState,"deferred"===t.urlUpdateStrategy&&(o.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,o),t.browserUrlTree=o.urlAfterRedirects)}),((n,e,t,r)=>re(i=>(new Tse(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)))(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),Zu(1),br({next:o=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new nd(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),bf(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),bc(o=>{if(s=!0,Jj(o)){Xj(o)||(t.navigated=!0,t.restoreHistory(r,!0));const a=new Tw(r.id,this.urlSerializer.serialize(r.extractedUrl),o.message,o.cancellationCode);if(this.events.next(a),Xj(o)){const l=t.urlHandlingStrategy.merge(o.url,t.rawUrlTree),c={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||hH(r.source)};t.scheduleNavigation(l,w_,null,c,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const a=new GD(r.id,this.urlSerializer.serialize(r.extractedUrl),o,r.targetSnapshot??void 0);this.events.next(a);try{r.resolve(t.errorHandler(o))}catch(l){r.reject(l)}}return Dr}))}))}cancelNavigationTransition(t,r,i){const s=new Tw(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function hH(n){return n!==w_}let fH=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===pt);return r}getResolvedTitleForRoute(t){return t.data[g_]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:function(){return me(goe)},providedIn:"root"}),n})(),goe=(()=>{class n extends fH{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(O(q2))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),_oe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:function(){return me(voe)},providedIn:"root"}),n})();class yoe{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let voe=(()=>{class n extends yoe{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ve(n)))(r||n)}}(),n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ow=new oe("",{providedIn:"root",factory:()=>({})});let boe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:function(){return me(Eoe)},providedIn:"root"}),n})(),Eoe=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ps=(()=>((Ps=Ps||{})[Ps.COMPLETE=0]="COMPLETE",Ps[Ps.FAILED=1]="FAILED",Ps[Ps.REDIRECTING=2]="REDIRECTING",Ps))();function pH(n,e){n.events.pipe(ii(t=>t instanceof nd||t instanceof Tw||t instanceof GD||t instanceof x_),re(t=>t instanceof nd||t instanceof x_?Ps.COMPLETE:t instanceof Tw&&(0===t.code||1===t.code)?Ps.REDIRECTING:Ps.FAILED),ii(t=>t!==Ps.REDIRECTING),Zu(1)).subscribe(()=>{e()})}function woe(n){throw n}function xoe(n,e,t){return e.parse("/")}const Ioe={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Coe={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Wi=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=me(bV),this.isNgZoneEnabled=!1,this.options=me(Ow,{optional:!0})||{},this.pendingTasks=me(EE),this.errorHandler=this.options.errorHandler||woe,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||xoe,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=me(boe),this.routeReuseStrategy=me(_oe),this.titleStrategy=me(fH),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=me(Lf,{optional:!0})?.flat()??[],this.navigationTransitions=me(kw),this.urlSerializer=me(y_),this.location=me(AT),this.componentInputBindingEnabled=!!me(Sw,{optional:!0}),this.isNgZoneEnabled=me(Je)instanceof Je&&Je.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new Pf,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=zj(0,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),w_,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){const l={...i};delete l.navigationId,delete l.\u0275routerPageId,0!==Object.keys(l).length&&(s.state=l)}const a=this.parseUrl(t);this.scheduleNavigation(a,r,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(XD),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=r,c=l?this.currentUrlTree.fragment:o;let p,h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...s};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}null!==h&&(h=this.removeEmptyProps(h));try{p=Oj(i?i.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof t[0]||!t[0].startsWith("/"))&&(t=[]),p=this.currentUrlTree.root}return Fj(p,t,h,c??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=td(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,w_,null,r)}navigate(t,r={skipLocationChange:!1}){return function Aoe(n){for(let e=0;e<n.length;e++)if(null==n[e])throw new L(4008,!1)}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...Ioe}:!1===r?{...Coe}:r,td(t))return Aj(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Aj(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((p,g)=>{a=p,l=g});const h=this.pendingTasks.add();return pH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(p=>Promise.reject(p))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const o={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",o)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,(this.browserPageId??0)+1)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Uo=(()=>{class n{constructor(t,r,i,s,o,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new z,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===l||"area"===l,this.isAnchorElement?this.subscription=t.events.subscribe(c=>{c instanceof nd&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function U1(n,e,t){return function l8(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?B1:yg}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(C(Wi),C(Sa),xu("tabindex"),C(Ro),C(et),C(ju))},n.\u0275dir=ne({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&Bn("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&ds("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",yf],skipLocationChange:["skipLocationChange","skipLocationChange",yf],replaceUrl:["replaceUrl","replaceUrl",yf],routerLink:"routerLink"},standalone:!0,features:[qO,Rr]}),n})(),Fw=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,o){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=o,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new Un,this.routerEventsSubscription=t.events.subscribe(a=>{a instanceof nd&&this.update()})}ngAfterContentInit(){K(this.links.changes,K(null)).pipe(Xr()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=j(t).pipe(Xr()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function Toe(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(C(Wi),C(et),C(Ro),C(zg),C(Uo,8))},n.\u0275dir=ne({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&hl(i,Uo,5),2&t){let s;Ai(s=Ti())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Rr]}),n})();class mH{}let Doe=(()=>{class n{constructor(t,r,i,s,o){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ii(t=>t instanceof nd),vf(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=GA(s.providers,t,`Route: ${s.path}`));const o=s._injector??t,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return j(i).pipe(Xr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):K(null);const s=i.pipe(En(o=>null===o?K(void 0):(r._loadedRoutes=o.routes,r._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return r.loadComponent&&!r._loadedComponent?j([s,this.loader.loadComponent(r)]).pipe(Xr()):s})}}return n.\u0275fac=function(t){return new(t||n)(O(Wi),O(EV),O(_a),O(mH),O(nS))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const rS=new oe("");let gH=(()=>{class n{constructor(t,r,i,s,o={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof $D?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof nd?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof x_&&0===t.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Hj&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Hj(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){cA()},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();function yl(n,e){return{\u0275kind:n,\u0275providers:e}}function yH(){const n=me(Mo);return e=>{const t=n.get(Vu);if(e!==t.components[0])return;const r=n.get(Wi),i=n.get(vH);1===n.get(iS)&&r.initialNavigation(),n.get(bH,null,Ue.Optional)?.setUpPreloading(),n.get(rS,null,Ue.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const vH=new oe("",{factory:()=>new z}),iS=new oe("",{providedIn:"root",factory:()=>1}),bH=new oe("");function Poe(n){return yl(0,[{provide:bH,useExisting:Doe},{provide:mH,useExisting:n}])}const EH=new oe("ROUTER_FORROOT_GUARD"),koe=[AT,{provide:y_,useClass:VD},Wi,I_,{provide:Sa,useFactory:function _H(n){return n.routerState.root},deps:[Wi]},nS,[]];function Ooe(){return new PV("Router",Wi)}let wH=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[koe,[],{provide:Lf,multi:!0,useValue:t},{provide:EH,useFactory:Boe,deps:[[Wi,new no,new uc]]},{provide:Ow,useValue:r||{}},r?.useHash?{provide:ju,useClass:bX}:{provide:ju,useClass:a2},{provide:rS,useFactory:()=>{const n=me(FJ),e=me(Je),t=me(Ow),r=me(kw),i=me(y_);return t.scrollOffset&&n.setOffset(t.scrollOffset),new gH(i,r,n,e,t)}},r?.preloadingStrategy?Poe(r.preloadingStrategy).\u0275providers:[],{provide:PV,multi:!0,useFactory:Ooe},r?.initialNavigation?Uoe(r):[],r?.bindToComponentInputs?yl(8,[Qj,{provide:Sw,useExisting:Qj}]).\u0275providers:[],[{provide:xH,useFactory:yH},{provide:xE,multi:!0,useExisting:xH}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Lf,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(O(EH,8))},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({}),n})();function Boe(n){return"guarded"}function Uoe(n){return["disabled"===n.initialNavigation?yl(3,[{provide:lT,multi:!0,useFactory:()=>{const e=me(Wi);return()=>{e.setUpLocationChangeListener()}}},{provide:iS,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?yl(2,[{provide:iS,useValue:0},{provide:lT,multi:!0,deps:[Mo],useFactory:e=>{const t=e.get(yX,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(Wi),s=e.get(vH);pH(i,()=>{r(!0)}),e.get(kw).afterPreactivation=()=>(r(!0),s.closed?K(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const xH=new oe("");let Vf=(()=>{class n{constructor(t){this.http=t}getUsers(){return this.http.get("https://jsonplaceholder.typicode.com/users")}getUser(t){return this.http.get("https://jsonplaceholder.typicode.com/users/"+t)}getAlbums(){return this.http.get("https://jsonplaceholder.typicode.com/albums")}getUserAlbum(t){return this.http.get("https://jsonplaceholder.typicode.com/albums?userId="+t)}getPhotos(t){return this.http.get("https://jsonplaceholder.typicode.com/photos?albumId="+t)}getIndividualPhoto(t){return this.http.get("https://jsonplaceholder.typicode.com/photos/"+t)}updatePhotoTitle(t,r){return console.log("Photo Id: ",t),console.log("Title: ",r),this.http.patch("https://jsonplaceholder.typicode.com/photos/"+t,{title:r})}}return n.\u0275fac=function(t){return new(t||n)(O(qE))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Hoe=function(){return{exact:!0}};function $oe(n,e){if(1&n&&(pe(0,"li")(1,"a",1),Ee(2),ce(),pe(3,"ul")(4,"li"),Ee(5),ce(),pe(6,"li")(7,"a",2),Ee(8),ce()()()()),2&n){const t=e.$implicit;Ne(1),df("routerLink","/albums/",t.id,""),tt("routerLinkActiveOptions",qA(6,Hoe)),Ne(1),ko(t.name),Ne(3),gr("User Id: ",t.id,""),Ne(2),df("href","http://",t.website,"",yg),Ne(1),ko(t.website)}}let Goe=(()=>{class n{constructor(t){this.data=t}ngOnInit(){this.data.getUsers().subscribe(t=>this.users$=t)}}return n.\u0275fac=function(t){return new(t||n)(C(Vf))},n.\u0275cmp=Mn({type:n,selectors:[["app-users"]],decls:4,vars:2,consts:[[4,"ngFor","ngForOf"],["routerLinkActive","activated",3,"routerLink","routerLinkActiveOptions"],[3,"href"]],template:function(t,r){1&t&&(pe(0,"h1"),Ee(1,"Users"),ce(),pe(2,"ul"),$t(3,$oe,9,7,"li",0),ce()),2&t&&(Ne(2),tt("@listStagger",r.users$),Ne(1),tt("ngForOf",r.users$))},dependencies:[Qg,Uo,Fw],data:{animation:[fw("listStagger",[pw("* <=> *",[Df(":enter",[Ms({opacity:0,transform:"translateY(-15px)"}),PD("200ms",Xu("550ms ease-out",Ms({opacity:1,transform:"translateY(0px)"})))],{optional:!0}),Df(":leave",Xu("100ms",Ms({opacity:0})),{optional:!0})])])]}}),n})();function R_(n){return(R_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function je(n,e,t){return(e=function qoe(n){var e=function zoe(n,e){if("object"!==R_(n)||null===n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var r=t.call(n,e||"default");if("object"!==R_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(n)}(n,"string");return"symbol"===R_(e)?e:String(e)}(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}var ms=st(534);(0,ms.registerVersion)("firebase","10.8.0","app");const Yoe=new class Zoe extends AU{}(class Qoe extends CU{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Bf=new al("ANGULARFIRE2_VERSION");class Lw{constructor(){return((n,e)=>{const t=(0,ms.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r})(Joe)}}const Joe="app-check";function Uf(){}class IH{constructor(e,t=Yoe){je(this,"zone",void 0),je(this,"delegate",void 0),this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(o){i.runGuarded(()=>{e.apply(this,[o])})},t,r)}}class eae{constructor(e){je(this,"zone",void 0),je(this,"task",null),this.zone=e}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Uf,{},Uf,Uf)),t.pipe(br({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vw=(()=>{class n{constructor(t){je(this,"ngZone",void 0),je(this,"outsideAngular",void 0),je(this,"insideAngular",void 0),this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new IH(Zone.current)),this.insideAngular=t.run(()=>new IH(Zone.current,dw)),globalThis.\u0275AngularFireScheduler||=this}}return je(n,"\u0275fac",function(t){return new(t||n)(O(Je))}),je(n,"\u0275prov",se({token:n,factory:n.\u0275fac,providedIn:"root"})),n})();function jf(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function CH(n){return n.pipe(Vr(jf().outsideAngular))}function or(n){return function nae(n){return function(t){return(t=t.lift(new eae(n.ngZone))).pipe(Bi(n.outsideAngular),Vr(n.insideAngular))}}(jf())(n)}var Ns=st(106);Ns.Z.registerVersion("firebase","10.8.0","app-compat");const oae=["ngOnDestroy"];class AH{constructor(e){return e}}const Hf=new oe("angularfire2.app.options"),$f=new oe("angularfire2.app.name");function M_(n,e,t){const i="object"==typeof t&&t||{};i.name=i.name||"string"==typeof t&&t||"[DEFAULT]";const o=Ns.Z.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>Ns.Z.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(o.options)){const a=!!module.hot;cae("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new AH(o)}const cae=(n,...e)=>{},uae={provide:AH,useFactory:M_,deps:[Hf,Je,[new no,$f]]};let dae=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:Hf,useValue:t},{provide:$f,useValue:r}]}}constructor(t){Ns.Z.registerVersion("angularfire",Bf.full,"core"),Ns.Z.registerVersion("angularfire",Bf.full,"app-compat"),Ns.Z.registerVersion("angular",rO.full,t.toString())}}return je(n,"\u0275fac",function(t){return new(t||n)(O(nr))}),je(n,"\u0275mod",bt({type:n})),je(n,"\u0275inj",gt({providers:[uae]})),n})();function Bw(n,e,t,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(s)return function hae(n,e){try{return n.toString()===e.toString()}catch{return n===e}}(i,o)||(TH("error",`${e} was already initialized on the ${t} Firebase App with different settings.${fae?" You may need to reload as Firebase is not HMR aware.":""}`),TH("warn",{is:i,was:o})),s;{const a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}const fae=typeof module<"u"&&!!module.hot,TH=(n,...e)=>{};function DH(n,e){return I(e)?Dt(()=>n,e):Dt(()=>n)}globalThis.\u0275AngularfireInstanceCache||=[],st(999);const sS=new oe("angularfire2.auth.use-emulator"),oS=new oe("angularfire2.auth.settings"),aS=new oe("angularfire2.auth.tenant-id"),lS=new oe("angularfire2.auth.langugage-code"),cS=new oe("angularfire2.auth.use-device-language"),uS=new oe("angularfire.auth.persistence"),dS=(n,e,t,r,i,s,o,a)=>Bw(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const l=e.runOutsideAngular(()=>n.auth());if(t&&l.useEmulator(...t),r&&(l.tenantId=r),l.languageCode=i,s&&l.useDeviceLanguage(),o)for(const[c,h]of Object.entries(o))l.settings[c]=h;return a&&l.setPersistence(a),l},[t,r,i,s,o,a]);let P_=(()=>{class n{constructor(t,r,i,s,o,a,l,c,h,p,g,_){je(this,"authState",void 0),je(this,"idToken",void 0),je(this,"user",void 0),je(this,"idTokenResult",void 0),je(this,"credential",void 0);const v=new z,E=K(void 0).pipe(Vr(o.outsideAngular),Dt(()=>s.runOutsideAngular(()=>Promise.resolve().then(st.bind(st,999)))),re(()=>M_(t,s,r)),re(x=>dS(x,s,a,c,h,p,l,g)),MD({bufferSize:1,refCount:!1}));if(xa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=K(null);else{E.pipe(Ec()).subscribe();const x=E.pipe(Dt(k=>k.getRedirectResult().then(G=>G,()=>null)),or,MD({bufferSize:1,refCount:!1})),M=E.pipe(Dt(k=>new dt(G=>({unsubscribe:s.runOutsideAngular(()=>k.onAuthStateChanged(de=>G.next(de),de=>G.error(de),()=>G.complete()))})))),D=E.pipe(Dt(k=>new dt(G=>({unsubscribe:s.runOutsideAngular(()=>k.onIdTokenChanged(de=>G.next(de),de=>G.error(de),()=>G.complete()))}))));this.authState=x.pipe(DH(M),Bi(o.outsideAngular),Vr(o.insideAngular)),this.user=x.pipe(DH(D),Bi(o.outsideAngular),Vr(o.insideAngular)),this.idToken=this.user.pipe(Dt(k=>k?j(k.getIdToken()):K(null))),this.idTokenResult=this.user.pipe(Dt(k=>k?j(k.getIdTokenResult()):K(null))),this.credential=V(x,v,this.authState.pipe(ii(k=>!k))).pipe(re(k=>k?.user?k:null),Bi(o.outsideAngular),Vr(o.insideAngular))}return((n,e,t,r={})=>new Proxy(n,{get:(i,s)=>t.runOutsideAngular(()=>{if(n[s])return r?.spy?.get&&r.spy.get(s,n[s]),n[s];if(oae.indexOf(s)>-1)return()=>{};const o=e.toPromise().then(a=>{const l=a?.[s];return"function"==typeof l?l.bind(a):l?.then?l.then(c=>t.run(()=>c)):t.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(h=>{const p=h?.(...c);return r?.spy?.apply&&r.spy.apply(s,c,p),p})})})}))(this,E,s,{spy:{apply:(x,M,D)=>{(x.startsWith("signIn")||x.startsWith("createUser"))&&D.then(k=>v.next(k))}}})}}return je(n,"\u0275fac",function(t){return new(t||n)(O(Hf),O($f,8),O(nr),O(Je),O(Vw),O(sS,8),O(oS,8),O(aS,8),O(lS,8),O(cS,8),O(uS,8),O(Lw,8))}),je(n,"\u0275prov",se({token:n,factory:n.\u0275fac,providedIn:"any"})),n})(),mae=(()=>{class n{constructor(){Ns.Z.registerVersion("angularfire",Bf.full,"auth-compat")}}return je(n,"\u0275fac",function(t){return new(t||n)}),je(n,"\u0275mod",bt({type:n})),je(n,"\u0275inj",gt({providers:[P_]})),n})();function hS(){return be((n,e)=>{let t,r=!1;n.subscribe(Fe(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var we,X=st(861),jo=st(537),ks=st(879),w=st(58),gae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ho={},fS=fS||{},ot=gae||self;function Uw(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function N_(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var pS="closure_uid_"+(1e9*Math.random()>>>0),yae=0;function vae(n,e,t){return n.call.apply(n.bind,arguments)}function bae(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Si(n,e,t){return(Si=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?vae:bae).apply(null,arguments)}function jw(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function $r(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[i].apply(r,o)}}function xc(){this.s=this.s,this.o=this.o}xc.prototype.s=!1,xc.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function _ae(n){Object.prototype.hasOwnProperty.call(n,pS)&&n[pS]||(n[pS]=++yae)}(this)},xc.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const SH=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function mS(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function RH(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Uw(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let o=0;o<s;o++)n[i+o]=r[o]}else n.push(r)}}function Ri(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Ri.prototype.h=function(){this.defaultPrevented=!0};var wae=function(){if(!ot.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{const t=()=>{};ot.addEventListener("test",t,e),ot.removeEventListener("test",t,e)}catch{}return n}();function k_(n){return/^[\s\xa0]*$/.test(n)}function Hw(){var n=ot.navigator;return n&&(n=n.userAgent)?n:""}function Ra(n){return-1!=Hw().indexOf(n)}function gS(n){return gS[" "](n),n}gS[" "]=function(){};var yS,n,Iae=Ra("Opera"),Gf=Ra("Trident")||Ra("MSIE"),MH=Ra("Edge"),_S=MH||Gf,PH=Ra("Gecko")&&!(-1!=Hw().toLowerCase().indexOf("webkit")&&!Ra("Edge"))&&!(Ra("Trident")||Ra("MSIE"))&&!Ra("Edge"),Cae=-1!=Hw().toLowerCase().indexOf("webkit")&&!Ra("Edge");function NH(){var n=ot.document;return n?n.documentMode:void 0}e:{var vS="",bS=(n=Hw(),PH?/rv:([^\);]+)(\)|;)/.exec(n):MH?/Edge\/([\d\.]+)/.exec(n):Gf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Cae?/WebKit\/(\S+)/.exec(n):Iae?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(bS&&(vS=bS?bS[1]:""),Gf){var ES=NH();if(null!=ES&&ES>parseFloat(vS)){yS=String(ES);break e}}yS=vS}var Aae=ot.document&&Gf&&(NH()||parseInt(yS,10))||void 0;function O_(n,e){if(Ri.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(PH){e:{try{gS(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Tae[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&O_.$.h.call(this)}}$r(O_,Ri);var Tae={2:"touch",3:"pen",4:"mouse"};O_.prototype.h=function(){O_.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var F_="closure_listenable_"+(1e6*Math.random()|0),Dae=0;function Sae(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++Dae,this.fa=this.ia=!1}function $w(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function xS(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function OH(n){const e={};for(const t in n)e[t]=n[t];return e}const FH="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function LH(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<FH.length;s++)t=FH[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Gw(n){this.src=n,this.g={},this.h=0}function IS(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=SH(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&($w(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function CS(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}Gw.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var o=CS(n,e,r,i);return-1<o?(e=n[o],t||(e.ia=!1)):((e=new Sae(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var AS="closure_lm_"+(1e6*Math.random()|0),TS={};function VH(n,e,t,r,i){if(r&&r.once)return UH(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)VH(n,e[s],t,r,i);return null}return t=MS(t),n&&n[F_]?n.O(e,t,N_(r)?!!r.capture:!!r,i):BH(n,e,t,!1,r,i)}function BH(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var o=N_(i)?!!i.capture:!!i,a=SS(n);if(a||(n[AS]=a=new Gw(n)),(t=a.add(e,t,r,o,s)).proxy)return t;if(r=function Mae(){const e=Pae;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)wae||(i=o),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(HH(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function UH(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)UH(n,e[s],t,r,i);return null}return t=MS(t),n&&n[F_]?n.P(e,t,N_(r)?!!r.capture:!!r,i):BH(n,e,t,!0,r,i)}function jH(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)jH(n,e[s],t,r,i);else r=N_(r)?!!r.capture:!!r,t=MS(t),n&&n[F_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=CS(s=n.g[e],t,r,i))&&($w(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=SS(n))&&(e=n.g[e.toString()],n=-1,e&&(n=CS(e,t,r,i)),(t=-1<n?e[n]:null)&&DS(t))}function DS(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[F_])IS(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(HH(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=SS(e))?(IS(t,n),0==t.h&&(t.src=null,e[AS]=null)):$w(n)}}}function HH(n){return n in TS?TS[n]:TS[n]="on"+n}function Pae(n,e){if(n.fa)n=!0;else{e=new O_(e,this);var t=n.listener,r=n.la||n.src;n.ia&&DS(n),n=t.call(r,e)}return n}function SS(n){return(n=n[AS])instanceof Gw?n:null}var RS="__closure_events_fn_"+(1e9*Math.random()>>>0);function MS(n){return"function"==typeof n?n:(n[RS]||(n[RS]=function(e){return n.handleEvent(e)}),n[RS])}function Gr(){xc.call(this),this.i=new Gw(this),this.S=this,this.J=null}function si(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new Ri(e,n);else if(e instanceof Ri)e.target=e.target||n;else{var i=e;LH(e=new Ri(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var o=e.g=t[s];i=zw(o,r,!0,e)&&i}if(i=zw(o=e.g=n,r,!0,e)&&i,i=zw(o,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=zw(o=e.g=t[s],r,!1,e)&&i}function zw(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==t){var a=o.listener,l=o.la||o.src;o.ia&&IS(n.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}$r(Gr,xc),Gr.prototype[F_]=!0,Gr.prototype.removeEventListener=function(n,e,t,r){jH(this,n,e,t,r)},Gr.prototype.N=function(){if(Gr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)$w(t[r]);delete n.g[e],n.h--}}this.J=null},Gr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Gr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var PS=ot.JSON.stringify;function kae(){var n=NS;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var $H=new class Nae{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Fae,n=>n.reset());class Fae{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Lae(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function Vae(n){ot.setTimeout(()=>{throw n},0)}let L_,V_=!1,NS=new class Oae{constructor(){this.h=this.g=null}add(e,t){const r=$H.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},GH=()=>{const n=ot.Promise.resolve(void 0);L_=()=>{n.then(Bae)}};var Bae=()=>{for(var n;n=kae();){try{n.h.call(n.g)}catch(t){Vae(t)}var e=$H;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}V_=!1};function qw(n,e){Gr.call(this),this.h=n||1,this.g=e||ot,this.j=Si(this.qb,this),this.l=Date.now()}function kS(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function OS(n,e,t){if("function"==typeof n)t&&(n=Si(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Si(n.handleEvent,n)}return 2147483647<Number(e)?-1:ot.setTimeout(n,e||0)}function zH(n){n.g=OS(()=>{n.g=null,n.i&&(n.i=!1,zH(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}$r(qw,Gr),(we=qw.prototype).ga=!1,we.T=null,we.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),si(this,"tick"),this.ga&&(kS(this),this.start()))}},we.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},we.N=function(){qw.$.N.call(this),kS(this),delete this.g};class Uae extends xc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zH(this)}N(){super.N(),this.g&&(ot.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function B_(n){xc.call(this),this.h=n,this.g={}}$r(B_,xc);var qH=[];function WH(n,e,t,r){Array.isArray(t)||(t&&(qH[0]=t.toString()),t=qH);for(var i=0;i<t.length;i++){var s=VH(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function KH(n){xS(n.g,function(e,t){this.g.hasOwnProperty(t)&&DS(e)},n),n.g={}}function Ww(){this.g=!0}function zf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Gae(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return PS(t)}catch{return e}}(n,t)+(r?" "+r:"")})}B_.prototype.N=function(){B_.$.N.call(this),KH(this)},B_.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ww.prototype.Ea=function(){this.g=!1},Ww.prototype.info=function(){};var id={},QH=null;function Kw(){return QH=QH||new Gr}function ZH(n){Ri.call(this,id.Ta,n)}function U_(n){const e=Kw();si(e,new ZH(e))}function YH(n,e){Ri.call(this,id.STAT_EVENT,n),this.stat=e}function Ki(n){const e=Kw();si(e,new YH(e,n))}function XH(n,e){Ri.call(this,id.Ua,n),this.size=e}function j_(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return ot.setTimeout(function(){n()},e)}id.Ta="serverreachability",$r(ZH,Ri),id.STAT_EVENT="statevent",$r(YH,Ri),id.Ua="timingevent",$r(XH,Ri);var Qw={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},JH={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function FS(){}function t$(){}FS.prototype.h=null;var BS,H_={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function LS(){Ri.call(this,"d")}function VS(){Ri.call(this,"c")}function Zw(){}function $_(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new B_(this),this.P=zae,this.V=new qw(n=_S?125:void 0),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new n$}function n$(){this.i=null,this.g="",this.h=!1}$r(LS,Ri),$r(VS,Ri),$r(Zw,FS),Zw.prototype.g=function(){return new XMLHttpRequest},Zw.prototype.i=function(){return{}},BS=new Zw;var zae=45e3,r$={},US={};function jS(n,e,t){n.L=1,n.A=e0(vl(e)),n.u=t,n.S=!0,i$(n,null)}function i$(n,e){n.G=Date.now(),G_(n),n.B=vl(n.A);var t=n.B,r=n.W;Array.isArray(r)||(r=[String(r)]),p$(t.i,"t",r),n.o=0,t=n.l.J,n.h=new n$,n.g=V$(n.l,t?e:null,!n.u),0<n.O&&(n.M=new Uae(Si(n.Pa,n,n.g),n.O)),WH(n.U,n.g,"readystatechange",n.nb),e=n.I?OH(n.I):{},n.u?(n.v||(n.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.B,n.v,n.u,e)):(n.v="GET",n.g.ha(n.B,n.v,null,e)),U_(),function jae(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var h=c[0];c=c[1];var p=h.split("_");o=2<=p.length&&"type"==p[1]?o+(h+"=")+c+"&":o+(h+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+o})}(n.j,n.v,n.B,n.m,n.W,n.u)}function s$(n){return!!n.g&&"GET"==n.v&&2!=n.L&&n.l.Ha}function o$(n,e,t){let i,r=!0;for(;!n.J&&n.o<t.length;){if(i=qae(n,t),i==US){4==e&&(n.s=4,Ki(14),r=!1),zf(n.j,n.m,null,"[Incomplete Response]");break}if(i==r$){n.s=4,Ki(15),zf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}zf(n.j,n.m,i,null),HS(n,i)}s$(n)&&0!=n.o&&(n.h.g=n.h.g.slice(n.o),n.o=0),4!=e||0!=t.length||n.h.h||(n.s=1,Ki(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),QS(e),e.M=!0,Ki(11))):(zf(n.j,n.m,t,"[Invalid Chunked Response]"),sd(n),z_(n))}function qae(n,e){var t=n.o,r=e.indexOf("\n",t);return-1==r?US:(t=Number(e.substring(t,r)),isNaN(t)?r$:(r+=1)+t>e.length?US:(e=e.slice(r,r+t),n.o=r+t,e))}function G_(n){n.Y=Date.now()+n.P,a$(n,n.P)}function a$(n,e){if(null!=n.C)throw Error("WatchDog timer not null");n.C=j_(Si(n.lb,n),e)}function Yw(n){n.C&&(ot.clearTimeout(n.C),n.C=null)}function z_(n){0==n.l.H||n.J||k$(n.l,n)}function sd(n){Yw(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,kS(n.V),KH(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function HS(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||$S(t.i,n)))if(!n.K&&$S(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;a0(t),s0(t)}KS(t),Ki(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=j_(Si(t.ib,t),6e3));if(1>=_$(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else ad(t,11)}else if((n.K||t.g==n)&&a0(t),!k_(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(t.V=c[0],c=c[1],2==t.H)if("c"==c[0]){t.K=c[1],t.pa=c[2];const h=c[3];null!=h&&(t.ra=h,t.l.info("VER="+t.ra));const p=c[4];null!=p&&(t.Ga=p,t.l.info("SVER="+t.Ga));const g=c[5];null!=g&&"number"==typeof g&&0<g&&(t.L=r=1.5*g,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const _=n.g;if(_){const v=_.g?_.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(v){var s=r.i;s.g||-1==v.indexOf("spdy")&&-1==v.indexOf("quic")&&-1==v.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(GS(s,s.h),s.h=null))}if(r.F){const E=_.g?_.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,xn(r.I,r.F,E))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var o=n;if((r=t).wa=L$(r,r.J?r.pa:null,r.Y),o.K){y$(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(Yw(a),G_(a)),r.g=o}else P$(r);0<t.j.length&&o0(t)}else"stop"!=c[0]&&"close"!=c[0]||ad(t,7);else 3==t.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?ad(t,7):WS(t):"noop"!=c[0]&&t.h&&t.h.Aa(c),t.A=0)}U_()}catch{}}function l$(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Uw(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Kae(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Uw(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function Wae(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Uw(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(we=$_.prototype).setTimeout=function(n){this.P=n},we.nb=function(n){n=n.target;const e=this.M;e&&3==Ma(n)?e.l():this.Pa(n)},we.Pa=function(n){try{if(n==this.g)e:{const h=Ma(this.g);var e=this.g.Ia();if(this.g.da(),!(3>h)&&(3!=h||_S||this.g&&(this.h.h||this.g.ja()||A$(this.g)))){this.J||4!=h||7==e||U_(),Yw(this);var t=this.g.da();this.ca=t;t:if(s$(this)){var r=A$(this.g);n="";var i=r.length,s=4==Ma(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){sd(this),z_(this);var o="";break t}this.h.i=new ot.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.length=0,this.h.g+=n,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==t,function Hae(n,e,t,r,i,s,o){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+o})}(this.j,this.v,this.B,this.m,this.W,h,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k_(a)){var c=a;break t}}c=null}if(!(t=c)){this.i=!1,this.s=3,Ki(12),sd(this),z_(this);break e}zf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,HS(this,t)}this.S?(o$(this,h,o),_S&&this.i&&3==h&&(WH(this.U,this.V,"tick",this.mb),this.V.start())):(zf(this.j,this.m,o,null),HS(this,o)),4==h&&sd(this),this.i&&!this.J&&(4==h?k$(this.l,this):(this.i=!1,G_(this)))}else(function hle(n){const e={};n=(n.g&&2<=Ma(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(k_(n[r]))continue;var t=Lae(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function Rae(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<o.indexOf("Unknown SID")?(this.s=3,Ki(12)):(this.s=0,Ki(13)),sd(this),z_(this)}}}catch{}},we.mb=function(){if(this.g){var n=Ma(this.g),e=this.g.ja();this.o<e.length&&(Yw(this),o$(this,n,e),this.i&&4!=n&&G_(this))}},we.cancel=function(){this.J=!0,sd(this)},we.lb=function(){this.C=null;const n=Date.now();0<=n-this.Y?(function $ae(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.B),2!=this.L&&(U_(),Ki(17)),sd(this),this.s=2,z_(this)):a$(this,this.Y-n)};var c$=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function od(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof od){this.h=n.h,Xw(this,n.j),this.s=n.s,this.g=n.g,Jw(this,n.m),this.l=n.l;var e=n.i,t=new K_;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),u$(this,t),this.o=n.o}else n&&(e=String(n).match(c$))?(this.h=!1,Xw(this,e[1]||"",!0),this.s=q_(e[2]||""),this.g=q_(e[3]||"",!0),Jw(this,e[4]),this.l=q_(e[5]||"",!0),u$(this,e[6]||"",!0),this.o=q_(e[7]||"")):(this.h=!1,this.i=new K_(null,this.h))}function vl(n){return new od(n)}function Xw(n,e,t){n.j=t?q_(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Jw(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function u$(n,e,t){e instanceof K_?(n.i=e,function tle(n,e){e&&!n.j&&(Ic(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(h$(this,r),p$(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=W_(e,Jae)),n.i=new K_(e,n.h))}function xn(n,e,t){n.i.set(e,t)}function e0(n){return xn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function q_(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function W_(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Zae),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Zae(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}od.prototype.toString=function(){var n=[],e=this.j;e&&n.push(W_(e,d$,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(W_(e,d$,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(W_(t,"/"==t.charAt(0)?Xae:Yae,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",W_(t,ele)),n.join("")};var d$=/[#\/\?@]/g,Yae=/[#\?:]/g,Xae=/[#\?]/g,Jae=/[#\?@]/g,ele=/#/g;function K_(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ic(n){n.g||(n.g=new Map,n.h=0,n.i&&function Qae(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function h$(n,e){Ic(n),e=qf(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function f$(n,e){return Ic(n),e=qf(n,e),n.g.has(e)}function p$(n,e,t){h$(n,e),0<t.length&&(n.i=null,n.g.set(qf(n,e),mS(t)),n.h+=t.length)}function qf(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function m$(n){this.l=n||rle,n=ot.PerformanceNavigationTiming?0<(n=ot.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(ot.g&&ot.g.Ka&&ot.g.Ka()&&ot.g.Ka().dc),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(we=K_.prototype).add=function(n,e){Ic(this),this.i=null,n=qf(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},we.forEach=function(n,e){Ic(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},we.ta=function(){Ic(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},we.Z=function(n){Ic(this);let e=[];if("string"==typeof n)f$(this,n)&&(e=e.concat(this.g.get(qf(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},we.set=function(n,e){return Ic(this),this.i=null,f$(this,n=qf(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},we.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},we.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),n.push(i)}}return this.i=n.join("&")};var rle=10;function g$(n){return!!n.h||!!n.g&&n.g.size>=n.j}function _$(n){return n.h?1:n.g?n.g.size:0}function $S(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function GS(n,e){n.g?n.g.add(e):n.h=e}function y$(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function v$(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return mS(n.i)}m$.prototype.cancel=function(){if(this.i=v$(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var ile=class{stringify(n){return ot.JSON.stringify(n,void 0)}parse(n){return ot.JSON.parse(n,void 0)}};function sle(){this.g=new ile}function ole(n,e,t){const r=t||"";try{l$(n,function(i,s){let o=i;N_(i)&&(o=PS(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function t0(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Q_(n){this.l=n.ec||null,this.j=n.ob||!1}function n0(n,e){Gr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=zS,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}$r(Q_,FS),Q_.prototype.g=function(){return new n0(this.l,this.j)},Q_.prototype.i=function(n){return function(){return n}}({}),$r(n0,Gr);var zS=0;function b$(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Z_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Y_(n)}function Y_(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(we=n0.prototype).open=function(n,e){if(this.readyState!=zS)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Y_(this)},we.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||ot).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},we.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Z_(this)),this.readyState=zS},we.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Y_(this)),this.g&&(this.readyState=3,Y_(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ot.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;b$(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},we.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Z_(this):Y_(this),3==this.readyState&&b$(this)}},we.Za=function(n){this.g&&(this.response=this.responseText=n,Z_(this))},we.Ya=function(n){this.g&&(this.response=n,Z_(this))},we.ka=function(){this.g&&Z_(this)},we.setRequestHeader=function(n,e){this.v.append(n,e)},we.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},we.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(n0.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var lle=ot.JSON.parse;function Qn(n){Gr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=E$,this.L=this.M=!1}$r(Qn,Gr);var E$="",cle=/^https?$/i,ule=["POST","PUT"];function w$(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,x$(n),r0(n)}function x$(n){n.F||(n.F=!0,si(n,"complete"),si(n,"error"))}function I$(n){if(n.h&&typeof fS<"u"&&(!n.C[1]||4!=Ma(n)||2!=n.da()))if(n.v&&4==Ma(n))OS(n.La,0,n);else if(si(n,"readystatechange"),4==Ma(n)){n.h=!1;try{const o=n.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===o){var i=String(n.I).match(c$)[1]||null;!i&&ot.self&&ot.self.location&&(i=ot.self.location.protocol.slice(0,-1)),r=!cle.test(i?i.toLowerCase():"")}t=r}if(t)si(n,"complete"),si(n,"success");else{n.m=6;try{var s=2<Ma(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",x$(n)}}finally{r0(n)}}}function r0(n,e){if(n.g){C$(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||si(n,"ready");try{t.onreadystatechange=r}catch{}}}function C$(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(ot.clearTimeout(n.A),n.A=null)}function Ma(n){return n.g?n.g.readyState:0}function A$(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case E$:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function T$(n){let e="";return xS(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function qS(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=T$(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):xn(n,e,t))}function X_(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function D$(n){this.Ga=0,this.j=[],this.l=new Ww,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=X_("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=X_("baseRetryDelayMs",5e3,n),this.hb=X_("retryDelaySeedMs",1e4,n),this.eb=X_("forwardChannelMaxRetries",2,n),this.xa=X_("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.useFetchStreams||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new m$(n&&n.concurrentRequestLimit),this.Ja=new sle,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function WS(n){if(S$(n),3==n.H){var e=n.W++,t=vl(n.I);if(xn(t,"SID",n.K),xn(t,"RID",e),xn(t,"TYPE","terminate"),J_(n,t),(e=new $_(n,n.l,e)).L=2,e.A=e0(vl(t)),t=!1,ot.navigator&&ot.navigator.sendBeacon)try{t=ot.navigator.sendBeacon(e.A.toString(),"")}catch{}!t&&ot.Image&&((new Image).src=e.A,t=!0),t||(e.g=V$(e.l,null),e.g.ha(e.A)),e.G=Date.now(),G_(e)}F$(n)}function s0(n){n.g&&(QS(n),n.g.cancel(),n.g=null)}function S$(n){s0(n),n.u&&(ot.clearTimeout(n.u),n.u=null),a0(n),n.i.cancel(),n.m&&("number"==typeof n.m&&ot.clearTimeout(n.m),n.m=null)}function o0(n){if(!g$(n.i)&&!n.m){n.m=!0;var e=n.Na;L_||GH(),V_||(L_(),V_=!0),NS.add(e,n),n.C=0}}function R$(n,e){var t;t=e?e.m:n.W++;const r=vl(n.I);xn(r,"SID",n.K),xn(r,"RID",t),xn(r,"AID",n.V),J_(n,r),n.o&&n.s&&qS(r,n.o,n.s),t=new $_(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=M$(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),GS(n.i,t),jS(t,r,e)}function J_(n,e){n.na&&xS(n.na,function(t,r){xn(e,r,t)}),n.h&&l$({},function(t,r){xn(e,r,t)})}function M$(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Si(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const o=["count="+t];-1==s?0<t?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let a=!0;for(let l=0;l<t;l++){let c=i[l].g;const h=i[l].map;if(c-=s,0>c)s=Math.max(0,i[l].g-100),a=!1;else try{ole(h,o,"req"+c+"_")}catch{r&&r(h)}}if(a){r=o.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function P$(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;L_||GH(),V_||(L_(),V_=!0),NS.add(e,n),n.A=0}}function KS(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=j_(Si(n.Ma,n),O$(n,n.A)),n.A++,0))}function QS(n){null!=n.B&&(ot.clearTimeout(n.B),n.B=null)}function N$(n){n.g=new $_(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=vl(n.wa);xn(e,"RID","rpc"),xn(e,"SID",n.K),xn(e,"AID",n.V),xn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&xn(e,"TO",n.qa),xn(e,"TYPE","xmlhttp"),J_(n,e),n.o&&n.s&&qS(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.A=e0(vl(e)),t.u=null,t.S=!0,i$(t,n)}function a0(n){null!=n.v&&(ot.clearTimeout(n.v),n.v=null)}function k$(n,e){var t=null;if(n.g==e){a0(n),QS(n),n.g=null;var r=2}else{if(!$S(n.i,e))return;t=e.F,y$(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.u?e.u.length:0,e=Date.now()-e.G;var i=n.C;si(r=Kw(),new XH(r,t)),o0(n)}else P$(n);else if(3==(i=e.s)||0==i&&0<e.ca||!(1==r&&function fle(n,e){return!(_$(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=j_(Si(n.Na,n,e),O$(n,n.C)),n.C++,0)))}(n,e)||2==r&&KS(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:ad(n,5);break;case 4:ad(n,10);break;case 3:ad(n,6);break;default:ad(n,2)}}function O$(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function ad(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Si(n.pb,n);t||(t=new od("//www.google.com/images/cleardot.gif"),ot.location&&"http"==ot.location.protocol||Xw(t,"https"),e0(t)),function ale(n,e){const t=new Ww;if(ot.Image){const r=new Image;r.onload=jw(t0,t,r,"TestLoadImage: loaded",!0,e),r.onerror=jw(t0,t,r,"TestLoadImage: error",!1,e),r.onabort=jw(t0,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=jw(t0,t,r,"TestLoadImage: timeout",!1,e),ot.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ki(2);n.H=0,n.h&&n.h.za(e),F$(n),S$(n)}function F$(n){if(n.H=0,n.ma=[],n.h){const e=v$(n.i);(0!=e.length||0!=n.j.length)&&(RH(n.ma,e),RH(n.ma,n.j),n.i.i.length=0,mS(n.j),n.j.length=0),n.h.ya()}}function L$(n,e,t){var r=t instanceof od?vl(t):new od(t);if(""!=r.g)e&&(r.g=e+"."+r.g),Jw(r,r.m);else{var i=ot.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new od(null);r&&Xw(s,r),e&&(s.g=e),i&&Jw(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&xn(r,t,e),xn(r,"VER",n.ra),J_(n,r),r}function V$(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qn(n.Ha&&!n.va?new Q_({ob:t}):n.va)).Oa(n.J),e}function B$(){}function l0(){if(Gf&&!(10<=Number(Aae)))throw Error("Environmental error: no available transport.")}function Os(n,e){Gr.call(this),this.g=new D$(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!k_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!k_(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Wf(this)}function U$(n){LS.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function j$(){VS.call(this),this.status=1}function Wf(n){this.g=n}function $o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function ZS(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],o=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;o=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(o<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(e=t+((o=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function Yt(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(we=Qn.prototype).Oa=function(n){this.M=n},we.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():BS.g(),this.C=function e$(n){return n.h||(n.h=n.i())}(this.u?this.u:BS),this.g.onreadystatechange=Si(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void w$(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=ot.FormData&&n instanceof ot.FormData,!(0<=SH(ule,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of t)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{C$(this),0<this.B&&((this.L=function dle(n){return Gf&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Si(this.ua,this)):this.A=OS(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){w$(this,s)}},we.ua=function(){typeof fS<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,si(this,"timeout"),this.abort(8))},we.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,si(this,"complete"),si(this,"abort"),r0(this))},we.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),r0(this,!0)),Qn.$.N.call(this)},we.La=function(){this.s||(this.G||this.v||this.l?I$(this):this.kb())},we.kb=function(){I$(this)},we.isActive=function(){return!!this.g},we.da=function(){try{return 2<Ma(this)?this.g.status:-1}catch{return-1}},we.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},we.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),lle(e)}},we.Ia=function(){return this.m},we.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(we=D$.prototype).ra=8,we.H=1,we.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new $_(this,this.l,n);let s=this.s;if(this.U&&(s?(s=OH(s),LH(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=M$(this,i,e),xn(t=vl(this.I),"RID",n),xn(t,"CVER",22),this.F&&xn(t,"X-HTTP-Session-Id",this.F),J_(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(T$(s)))+"&"+e:this.o&&qS(t,this.o,s)),GS(this.i,i),this.bb&&xn(t,"TYPE","init"),this.P?(xn(t,"$req",e),xn(t,"SID","null"),i.aa=!0,jS(i,t,null)):jS(i,t,e),this.H=2}}else 3==this.H&&(n?R$(this,n):0==this.j.length||g$(this.i)||R$(this))},we.Ma=function(){if(this.u=null,N$(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=j_(Si(this.jb,this),n)}},we.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ki(10),s0(this),N$(this))},we.ib=function(){null!=this.v&&(this.v=null,s0(this),KS(this),Ki(19))},we.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Ki(2)):(this.l.info("Failed to ping google.com"),Ki(1))},we.isActive=function(){return!!this.h&&this.h.isActive(this)},(we=B$.prototype).Ba=function(){},we.Aa=function(){},we.za=function(){},we.ya=function(){},we.isActive=function(){return!0},we.Va=function(){},l0.prototype.g=function(n,e){return new Os(n,e)},$r(Os,Gr),Os.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Ki(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=L$(n,null,n.Y),o0(n)},Os.prototype.close=function(){WS(this.g)},Os.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=PS(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&o0(e)},Os.prototype.N=function(){this.g.h=null,delete this.j,WS(this.g),delete this.g,Os.$.N.call(this)},$r(U$,LS),$r(j$,VS),$r(Wf,B$),Wf.prototype.Ba=function(){si(this.g,"a")},Wf.prototype.Aa=function(n){si(this.g,new U$(n))},Wf.prototype.za=function(n){si(this.g,new j$)},Wf.prototype.ya=function(){si(this.g,"b")},$r($o,function ple(){this.blockSize=-1}),$o.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},$o.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)ZS(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){ZS(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){ZS(this,r),i=0;break}}this.h=i,this.i+=e},$o.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var mle={};function YS(n){return-128<=n&&128>n?function xae(n,e){var t=mle;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new Yt([0|e],0>e?-1:0)}):new Yt([0|n],0>n?-1:0)}function Pa(n){if(isNaN(n)||!isFinite(n))return Kf;if(0>n)return oi(Pa(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=XS;return new Yt(e,0)}var XS=4294967296,Kf=YS(0),JS=YS(1),$$=YS(16777216);function bl(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function lo(n){return-1==n.h}function oi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new Yt(t,~n.h).add(JS)}function c0(n,e){return n.add(oi(e))}function u0(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function ey(n,e){this.g=n,this.h=e}function d0(n,e){if(bl(e))throw Error("division by zero");if(bl(n))return new ey(Kf,Kf);if(lo(n))return e=d0(oi(n),e),new ey(oi(e.g),oi(e.h));if(lo(e))return e=d0(n,oi(e)),new ey(oi(e.g),e.h);if(30<n.g.length){if(lo(n)||lo(e))throw Error("slowDivide_ only works with positive integers.");for(var t=JS,r=e;0>=r.X(n);)t=G$(t),r=G$(r);var i=Qf(t,1),s=Qf(r,1);for(r=Qf(r,2),t=Qf(t,2);!bl(r);){var o=s.add(r);0>=o.X(n)&&(i=i.add(t),s=o),r=Qf(r,1),t=Qf(t,1)}return e=c0(n,i.R(e)),new ey(i,e)}for(i=Kf;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Pa(t)).R(e);lo(o)||0<o.X(n);)o=(s=Pa(t-=r)).R(e);bl(s)&&(s=JS),i=i.add(s),n=c0(n,o)}return new ey(i,n)}function G$(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new Yt(t,n.h)}function Qf(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new Yt(i,n.h)}(we=Yt.prototype).ea=function(){if(lo(this))return-oi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:XS+r)*e,e*=XS}return n},we.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(bl(this))return"0";if(lo(this))return"-"+oi(this).toString(n);for(var e=Pa(Math.pow(n,6)),t=this,r="";;){var i=d0(t,e).g,s=((0<(t=c0(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(bl(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},we.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},we.X=function(n){return lo(n=c0(this,n))?-1:bl(n)?0:1},we.abs=function(){return lo(this)?oi(this):this},we.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=o>>>16,t[i]=(o&=65535)<<16|(s&=65535)}return new Yt(t,-2147483648&t[t.length-1]?-1:0)},we.R=function(n){if(bl(this)||bl(n))return Kf;if(lo(this))return lo(n)?oi(this).R(oi(n)):oi(oi(this).R(n));if(lo(n))return oi(this.R(oi(n)));if(0>this.X($$)&&0>n.X($$))return Pa(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=n.D(i)>>>16,l=65535&n.D(i);t[2*r+2*i]+=o*l,u0(t,2*r+2*i),t[2*r+2*i+1]+=s*l,u0(t,2*r+2*i+1),t[2*r+2*i+1]+=o*a,u0(t,2*r+2*i+1),t[2*r+2*i+2]+=s*a,u0(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new Yt(t,0)},we.gb=function(n){return d0(this,n).h},we.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new Yt(t,this.h&n.h)},we.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new Yt(t,this.h|n.h)},we.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new Yt(t,this.h^n.h)},l0.prototype.createWebChannel=l0.prototype.g,Os.prototype.send=Os.prototype.u,Os.prototype.open=Os.prototype.m,Os.prototype.close=Os.prototype.close,Qw.NO_ERROR=0,Qw.TIMEOUT=8,Qw.HTTP_ERROR=6,JH.COMPLETE="complete",t$.EventType=H_,H_.OPEN="a",H_.CLOSE="b",H_.ERROR="c",H_.MESSAGE="d",Gr.prototype.listen=Gr.prototype.O,Qn.prototype.listenOnce=Qn.prototype.P,Qn.prototype.getLastError=Qn.prototype.Sa,Qn.prototype.getLastErrorCode=Qn.prototype.Ia,Qn.prototype.getStatus=Qn.prototype.da,Qn.prototype.getResponseJson=Qn.prototype.Wa,Qn.prototype.getResponseText=Qn.prototype.ja,Qn.prototype.send=Qn.prototype.ha,Qn.prototype.setWithCredentials=Qn.prototype.Oa,$o.prototype.digest=$o.prototype.l,$o.prototype.reset=$o.prototype.reset,$o.prototype.update=$o.prototype.j,Yt.prototype.add=Yt.prototype.add,Yt.prototype.multiply=Yt.prototype.R,Yt.prototype.modulo=Yt.prototype.gb,Yt.prototype.compare=Yt.prototype.X,Yt.prototype.toNumber=Yt.prototype.ea,Yt.prototype.toString=Yt.prototype.toString,Yt.prototype.getBits=Yt.prototype.D,Yt.fromNumber=Pa,Yt.fromString=function H$(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return oi(H$(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Pa(Math.pow(e,8)),r=Kf,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),o=parseInt(n.substring(i,i+s),e);8>s?(s=Pa(Math.pow(e,s)),r=r.R(s).add(Pa(o))):r=(r=r.R(t)).add(Pa(o))}return r};var gle=Ho.createWebChannelTransport=function(){return new l0},_le=Ho.getStatEventTarget=function(){return Kw()},eR=Ho.ErrorCode=Qw,yle=Ho.EventType=JH,vle=Ho.Event=id,z$=Ho.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},h0=(Ho.FetchXmlHttpFactory=Q_,Ho.WebChannel=t$),ble=Ho.XhrIo=Qn,Ele=Ho.Md5=$o,Zf=Ho.Integer=Yt;const q$="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let Yf="10.8.0";const Cc=new ks.Yd("@firebase/firestore");function Xf(){return Cc.logLevel}function ue(n,...e){if(Cc.logLevel<=ks.in.DEBUG){const t=e.map(tR);Cc.debug(`Firestore (${Yf}): ${n}`,...t)}}function ar(n,...e){if(Cc.logLevel<=ks.in.ERROR){const t=e.map(tR);Cc.error(`Firestore (${Yf}): ${n}`,...t)}}function gs(n,...e){if(Cc.logLevel<=ks.in.WARN){const t=e.map(tR);Cc.warn(`Firestore (${Yf}): ${n}`,...t)}}function tR(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function De(n="Unexpected state"){const e=`FIRESTORE (${Yf}) INTERNAL ASSERTION FAILED: `+n;throw ar(e),new Error(e)}function Le(n,e){n||De()}function _e(n,e){return n}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class le extends w.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class W${constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ile{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class Cle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ale{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve();let o=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Or,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable((0,X.Z)(function*(){yield c.promise,yield s(r.currentUser)}))},l=c=>{ue("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),a()};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(ue("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Or)}},0),a()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ue("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Le("string"==typeof r.accessToken),new W$(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Le(null===e||"string"==typeof e),new zr(e)}}class Tle{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=zr.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Dle{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Tle(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K${constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sle{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const r=s=>{null!=s.error&&ue("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,ue("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ue("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):ue("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Le("string"==typeof t.token),this.R=t.token,new K$(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Rle(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class Q${static newId(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=Rle(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[s]%62))}return r}}function rt(n,e){return n<e?-1:n>e?1:0}function Jf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function Z$(n){return n+"\0"}class On{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new le($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new le($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new le($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new le($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return On.fromMillis(Date.now())}static fromDate(e){return On.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new On(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?rt(this.nanoseconds,e.nanoseconds):rt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Be(e)}static min(){return new Be(new On(0,0))}static max(){return new Be(new On(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ty{constructor(e,t,r){void 0===t?t=0:t>e.length&&De(),void 0===r?r=e.length-t:r>e.length-t&&De(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ty.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ty?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),o=t.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Pt extends ty{construct(e,t,r){return new Pt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new le($.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Pt(t)}static emptyPath(){return new Pt([])}}const Mle=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class In extends ty{construct(e,t,r){return new In(e,t,r)}static isValidIdentifier(e){return Mle.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),In.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new In(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new le($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if("\\"===a){if(i+1===e.length)throw new le($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new le($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else"`"===a?(o=!o,i++):"."!==a||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new le($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new In(t)}static emptyPath(){return new In([])}}class ye{constructor(e){this.path=e}static fromPath(e){return new ye(Pt.fromString(e))}static fromName(e){return new ye(Pt.fromString(e).popFirst(5))}static empty(){return new ye(Pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Pt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Pt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new Pt(e.slice()))}}class ep{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function nR(n){return n.fields.find(e=>2===e.kind)}function ld(n){return n.fields.filter(e=>2!==e.kind)}ep.UNKNOWN_ID=-1;class cd{constructor(e,t){this.fieldPath=e,this.kind=t}}class tp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tp(0,Fs.min())}}function Y$(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Be.fromTimestamp(1e9===r?new On(t+1,0):new On(t,r));return new Fs(i,ye.empty(),e)}function X$(n){return new Fs(n.readTime,n.key,-1)}class Fs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Fs(Be.min(),ye.empty(),-1)}static max(){return new Fs(Be.max(),ye.empty(),-1)}}function rR(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=ye.comparator(n.documentKey,e.documentKey),0!==t?t:rt(n.largestBatchId,e.largestBatchId))}const J$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class eG{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ac(n){return iR.apply(this,arguments)}function iR(){return iR=(0,X.Z)(function*(n){if(n.code!==$.FAILED_PRECONDITION||n.message!==J$)throw n;ue("LocalStore","Unexpectedly lost primary lease")}),iR.apply(this,arguments)}class B{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&De(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new B((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof B?t:B.resolve(t)}catch(t){return B.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):B.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):B.reject(t)}static resolve(e){return new B((t,r)=>{t(e)})}static reject(e){return new B((t,r)=>{r(e)})}static waitFor(e){return new B((t,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&t()},l=>r(l))}),o=!0,s===i&&t()})}static or(e){let t=B.resolve(!1);for(const r of e)t=t.next(i=>i?B.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new B((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(h=>{o[c]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,t){return new B((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class f0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Or,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new ny(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=sR(r.target.error);this.V.reject(new ny(e,i))}}static open(e,t,r,i){try{return new f0(t,e.transaction(i,r))}catch(s){throw new ny(t,s)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(ue("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ole(t)}}class co{constructor(e,t,r){this.name=e,this.version=t,this.p=r,12.2===co.S((0,w.z$)())&&ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ue("SimpleDb","Removing database:",e),ud(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,w.hl)())return!1;if(co.C())return!0;const e=(0,w.z$)(),t=co.S(e),r=0<t&&t<10,i=co.v(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}O(e){var t=this;return(0,X.Z)(function*(){return t.db||(ue("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=o=>{r(o.target.result)},s.onblocked=()=>{i(new ny(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=o=>{const a=o.target.error;i("VersionError"===a.name?new le($.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===a.name?new le($.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+a):new ny(e,a))},s.onupgradeneeded=o=>{ue("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',o.oldVersion),t.p.N(o.target.result,s.transaction,o.oldVersion,t.version).next(()=>{ue("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,X.Z)(function*(){const o="readonly"===t;let a=0;for(;;){++a;try{s.db=yield s.O(e);const l=f0.open(s.db,e,o?"readonly":"readwrite",r),c=i(l).next(h=>(l.g(),h)).catch(h=>(l.abort(h),B.reject(h))).toPromise();return c.catch(()=>{}),yield l.m,c}catch(l){const c=l,h="FirebaseError"!==c.name&&a<3;if(ue("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),s.close(),!h)return Promise.reject(c)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class kle{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ud(this.k.delete())}}class ny extends le{constructor(e,t){super($.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Tc(n){return"IndexedDbTransactionError"===n.name}class Ole{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ue("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ue("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ud(r)}add(e){return ue("SimpleDb","ADD",this.store.name,e,e),ud(this.store.add(e))}get(e){return ud(this.store.get(e)).next(t=>(void 0===t&&(t=null),ue("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ue("SimpleDb","DELETE",this.store.name,e),ud(this.store.delete(e))}count(){return ue("SimpleDb","COUNT",this.store.name),ud(this.store.count())}W(e,t){const r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if("function"==typeof i.getAll){const s=i.getAll(r.range);return new B((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}{const s=this.cursor(r),o=[];return this.G(s,(a,l)=>{o.push(l)}).next(()=>o)}}j(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new B((i,s)=>{r.onerror=o=>{s(o.target.error)},r.onsuccess=o=>{i(o.target.result)}})}H(e,t){ue("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.J=!1;const i=this.cursor(r);return this.G(i,(s,o,a)=>a.delete())}Y(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.G(i,t)}Z(e){const t=this.cursor({});return new B((r,i)=>{t.onerror=s=>{const o=sR(s.target.error);i(o)},t.onsuccess=s=>{const o=s.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}G(e,t){const r=[];return new B((i,s)=>{e.onerror=o=>{s(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void i();const l=new kle(a),c=t(a.primaryKey,a.value,l);if(c instanceof B){const h=c.catch(p=>(l.done(),B.reject(p)));r.push(h)}l.isDone?i():null===l.$?a.continue():a.continue(l.$)}}).next(()=>B.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ud(n){return new B((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=sR(r.target.error);t(i)}})}let tG=!1;function sR(n){const e=co.S((0,w.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new le("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return tG||(tG=!0,setTimeout(()=>{throw r},0)),r}}return n}class Fle{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){var t=this;ue("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,X.Z)(function*(){t.task=null;try{ue("IndexBackfiller",`Documents written: ${yield t.X.te()}`)}catch(r){Tc(r)?ue("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",r):yield Ac(r)}yield t.ee(6e4)}))}}class Lle{constructor(e,t){this.localStore=e,this.persistence=t}te(e=50){var t=this;return(0,X.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.ne(r,e))})()}ne(e,t){const r=new Set;let i=t,s=!0;return B.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(null!==o&&!r.has(o))return ue("IndexBackfiller",`Processing collection: ${o}`),this.re(e,o,i).next(a=>{i-=a,r.add(o)});s=!1})).next(()=>t-i)}re(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const o=s.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ie(i,s)).next(a=>(ue("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>o.size)}))}ie(e,t){let r=e;return t.changes.forEach((i,s)=>{const o=X$(s);rR(o,r)>0&&(r=o)}),new Fs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ls=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.se(i),this.oe=i=>r.writeSequenceNumber(i))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}return n._e=-1,n})();function ry(n){return null==n}function iy(n){return 0===n&&1/n==-1/0}function nG(n){return"number"==typeof n&&Number.isInteger(n)&&!iy(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Mi(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=rG(e)),e=Vle(n.get(t),e);return rG(e)}function Vle(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function rG(n){return n+"\x01\x01"}function Na(n){const e=n.length;if(Le(e>=2),2===e)return Le("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Pt.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const o=n.indexOf("\x01",s);switch((o<0||o>t)&&De(),n.charAt(o+1)){case"\x01":const a=n.substring(s,o);let l;0===i.length?l=a:(i+=a,l=i,i=""),r.push(l);break;case"\x10":i+=n.substring(s,o),i+="\0";break;case"\x11":i+=n.substring(s,o+1);break;default:De()}s=o+2}return new Pt(r)}const iG=["userId","batchId"];function p0(n,e){return[n,Mi(e)]}function sG(n,e,t){return[n,Mi(e),t]}const Ble={},Ule=["prefixPath","collectionGroup","readTime","documentId"],jle=["prefixPath","collectionGroup","documentId"],Hle=["collectionGroup","readTime","prefixPath","documentId"],$le=["canonicalId","targetId"],Gle=["targetId","path"],zle=["path","targetId"],qle=["collectionId","parent"],Wle=["indexId","uid"],Kle=["uid","sequenceNumber"],Qle=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Zle=["indexId","uid","orderedDocumentKey"],Yle=["userId","collectionPath","documentId"],Xle=["userId","collectionPath","largestBatchId"],Jle=["userId","collectionGroup","largestBatchId"],oG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ece=[...oG,"documentOverlays"],aG=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],lG=aG,tce=[...lG,"indexConfiguration","indexState","indexEntries"];class oR extends eG{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function qr(n,e){const t=_e(n);return co.M(t.ae,e)}function cG(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Dc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function uG(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class mn{constructor(e,t){this.comparator=e,this.root=t||ai.EMPTY}insert(e,t){return new mn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ai.BLACK,null,null))}remove(e){return new mn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ai.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new m0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new m0(this.root,e,this.comparator,!1)}getReverseIterator(){return new m0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new m0(this.root,e,this.comparator,!0)}}class m0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ai{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??ai.RED,this.left=i??ai.EMPTY,this.right=s??ai.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new ai(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ai.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ai.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ai.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ai.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw De();const e=this.left.check();if(e!==this.right.check())throw De();return e+(this.isRed()?0:1)}}ai.EMPTY=null,ai.RED=!0,ai.BLACK=!1,ai.EMPTY=new class{constructor(){this.size=0}get key(){throw De()}get value(){throw De()}get color(){throw De()}get left(){throw De()}get right(){throw De()}copy(e,t,r,i,s){return this}insert(e,t,r){return new ai(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class rn{constructor(e){this.comparator=e,this.data=new mn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dG(this.data.getIterator())}getIteratorFrom(e){return new dG(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof rn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rn(this.comparator);return t.data=e,t}}class dG{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function np(n){return n.hasNext()?n.getNext():void 0}class _s{constructor(e){this.fields=e,e.sort(In.comparator)}static empty(){return new _s([])}unionWith(e){let t=new rn(In.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new _s(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class hG extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Fr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new hG("Invalid base64 string: "+s):s}}(e);return new Fr(t)}static fromUint8Array(e){const t=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new Fr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return rt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Fr.EMPTY_BYTE_STRING=new Fr("");const rce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Sc(n){if(Le(!!n),"string"==typeof n){let e=0;const t=rce.exec(n);if(Le(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Zn(n.seconds),nanos:Zn(n.nanos)}}function Zn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function El(n){return"string"==typeof n?Fr.fromBase64String(n):Fr.fromUint8Array(n)}function g0(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function _0(n){const e=n.mapValue.fields.__previous_value__;return g0(e)?_0(e):e}function sy(n){const e=Sc(n.mapValue.fields.__local_write_time__.timestampValue);return new On(e.seconds,e.nanos)}class ice{constructor(e,t,r,i,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class Rc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Rc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Rc&&e.projectId===this.projectId&&e.database===this.database}}const Mc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},y0={nullValue:"NULL_VALUE"};function Pc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?g0(n)?4:gG(n)?9007199254740991:10:De()}function ka(n,e){if(n===e)return!0;const t=Pc(n);if(t!==Pc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return sy(n).isEqual(sy(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Sc(i.timestampValue),a=Sc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,El(n.bytesValue).isEqual(El(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return Zn(i.geoPointValue.latitude)===Zn(s.geoPointValue.latitude)&&Zn(i.geoPointValue.longitude)===Zn(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Zn(i.integerValue)===Zn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Zn(i.doubleValue),a=Zn(s.doubleValue);return o===a?iy(o)===iy(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Jf(n.arrayValue.values||[],e.arrayValue.values||[],ka);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(cG(o)!==cG(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(void 0===a[l]||!ka(o[l],a[l])))return!1;return!0}(n,e);default:return De()}var s}function oy(n,e){return void 0!==(n.values||[]).find(t=>ka(t,e))}function Nc(n,e){if(n===e)return 0;const t=Pc(n),r=Pc(e);if(t!==r)return rt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return rt(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Zn(s.integerValue||s.doubleValue),l=Zn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return fG(n.timestampValue,e.timestampValue);case 4:return fG(sy(n),sy(e));case 5:return rt(n.stringValue,e.stringValue);case 6:return function(s,o){const a=El(s),l=El(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const h=rt(a[c],l[c]);if(0!==h)return h}return rt(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=rt(Zn(s.latitude),Zn(o.latitude));return 0!==a?a:rt(Zn(s.longitude),Zn(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){const a=s.values||[],l=o.values||[];for(let c=0;c<a.length&&c<l.length;++c){const h=Nc(a[c],l[c]);if(h)return h}return rt(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Mc.mapValue&&o===Mc.mapValue)return 0;if(s===Mc.mapValue)return 1;if(o===Mc.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},h=Object.keys(c);l.sort(),h.sort();for(let p=0;p<l.length&&p<h.length;++p){const g=rt(l[p],h[p]);if(0!==g)return g;const _=Nc(a[l[p]],c[h[p]]);if(0!==_)return _}return rt(l.length,h.length)}(n.mapValue,e.mapValue);default:throw De()}}function fG(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return rt(n,e);const t=Sc(n),r=Sc(e),i=rt(t.seconds,r.seconds);return 0!==i?i:rt(t.nanos,r.nanos)}function rp(n){return aR(n)}function aR(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=Sc(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?El(n.bytesValue).toBase64():"referenceValue"in n?ye.fromName(n.referenceValue).toString():"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(const s of t.values||[])i?i=!1:r+=",",r+=aR(s);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${aR(t.fields[o])}`;return i+"}"}(n.mapValue):De()}function dd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function lR(n){return!!n&&"integerValue"in n}function ay(n){return!!n&&"arrayValue"in n}function pG(n){return!!n&&"nullValue"in n}function mG(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function b0(n){return!!n&&"mapValue"in n}function ly(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Dc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=ly(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ly(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gG(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function sce(n){return"nullValue"in n?y0:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?dd(Rc.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:De()}function oce(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?dd(Rc.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Mc:De()}function _G(n,e){const t=Nc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function yG(n,e){const t=Nc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class li{constructor(e){this.value=e}static empty(){return new li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!b0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ly(t)}setAll(e){let t=In.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=a.popLast()}o?r[a.lastSegment()]=ly(o):i.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());b0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ka(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];b0(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Dc(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new li(ly(this.value))}}function vG(n){const e=[];return Dc(n.fields,(t,r)=>{const i=new In([t]);if(b0(r)){const s=vG(r.mapValue).fields;if(0===s.length)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new _s(e)}class Cn{constructor(e,t,r,i,s,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Cn(e,0,Be.min(),Be.min(),Be.min(),li.empty(),0)}static newFoundDocument(e,t,r,i){return new Cn(e,1,t,Be.min(),r,i,0)}static newNoDocument(e,t){return new Cn(e,2,t,Be.min(),Be.min(),li.empty(),0)}static newUnknownDocument(e,t){return new Cn(e,3,t,Be.min(),Be.min(),li.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Be.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Cn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Cn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class kc{constructor(e,t){this.position=e,this.inclusive=t}}function bG(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],o=n.position[i];if(r=s.field.isKeyField()?ye.comparator(ye.fromName(o.referenceValue),t.key):Nc(o,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function EG(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ka(n.position[t],e.position[t]))return!1;return!0}class cy{constructor(e,t="asc"){this.field=e,this.dir=t}}function ace(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class wG{}class Nt extends wG{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new lce(e,t,r):"array-contains"===t?new dce(e,r):"in"===t?new DG(e,r):"not-in"===t?new hce(e,r):"array-contains-any"===t?new fce(e,r):new Nt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new cce(e,r):new uce(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Nc(t,this.value)):null!==t&&Pc(this.value)===Pc(t)&&this.matchesComparison(Nc(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return De()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xt extends wG{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new Xt(e,t)}matches(e){return ip(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ip(n){return"and"===n.op}function cR(n){return"or"===n.op}function uR(n){return xG(n)&&ip(n)}function xG(n){for(const e of n.filters)if(e instanceof Xt)return!1;return!0}function dR(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+rp(n.value);if(uR(n))return n.filters.map(e=>dR(e)).join(",");{const e=n.filters.map(t=>dR(t)).join(",");return`${n.op}(${e})`}}function IG(n,e){return n instanceof Nt?(r=n,(i=e)instanceof Nt&&r.op===i.op&&r.field.isEqual(i.field)&&ka(r.value,i.value)):n instanceof Xt?function(r,i){return i instanceof Xt&&r.op===i.op&&r.filters.length===i.filters.length&&r.filters.reduce((s,o,a)=>s&&IG(o,i.filters[a]),!0)}(n,e):void De();var r,i}function CG(n,e){const t=n.filters.concat(e);return Xt.create(t,n.op)}function AG(n){return n instanceof Nt?`${(t=n).field.canonicalString()} ${t.op} ${rp(t.value)}`:n instanceof Xt?function(t){return t.op.toString()+" {"+t.getFilters().map(AG).join(" ,")+"}"}(n):"Filter";var t}class lce extends Nt{constructor(e,t,r){super(e,t,r),this.key=ye.fromName(r.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class cce extends Nt{constructor(e,t){super(e,"in",t),this.keys=TG(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class uce extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=TG(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function TG(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>ye.fromName(r.referenceValue))}class dce extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ay(t)&&oy(t.arrayValue,this.value)}}class DG extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&oy(this.value.arrayValue,t)}}class hce extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if(oy(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!oy(this.value.arrayValue,t)}}class fce extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ay(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>oy(this.value.arrayValue,r))}}class pce{constructor(e,t=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ce=null}}function hR(n,e=null,t=[],r=[],i=null,s=null,o=null){return new pce(n,e,t,r,i,s,o)}function hd(n){const e=_e(n);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>dR(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(s=r).field.canonicalString()+s.dir;var s}).join(","),ry(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>rp(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>rp(r)).join(",")),e.ce=t}return e.ce}function uy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!ace(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IG(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!EG(n.startAt,e.startAt)&&EG(n.endAt,e.endAt)}function E0(n){return ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function w0(n,e){return n.filters.filter(t=>t instanceof Nt&&t.field.isEqual(e))}function SG(n,e,t){let r=y0,i=!0;for(const s of w0(n,e)){let o=y0,a=!0;switch(s.op){case"<":case"<=":o=sce(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=y0}_G({value:r,inclusive:i},{value:o,inclusive:a})<0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];_G({value:r,inclusive:i},{value:o,inclusive:t.inclusive})<0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}function RG(n,e,t){let r=Mc,i=!0;for(const s of w0(n,e)){let o=Mc,a=!0;switch(s.op){case">=":case">":o=oce(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=Mc}yG({value:r,inclusive:i},{value:o,inclusive:a})>0&&(r=o,i=a)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const o=t.position[s];yG({value:r,inclusive:i},{value:o,inclusive:t.inclusive})>0&&(r=o,i=t.inclusive);break}return{value:r,inclusive:i}}class wl{constructor(e,t=null,r=[],i=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.le=null,this.he=null,this.Pe=null}}function MG(n,e,t,r,i,s,o,a){return new wl(n,e,t,r,i,s,o,a)}function sp(n){return new wl(n)}function PG(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function fR(n){return null!==n.collectionGroup}function op(n){const e=_e(n);if(null===e.le){e.le=[];const t=new Set;for(const s of e.explicitOrderBy)e.le.push(s),t.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rn(In.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.le.push(new cy(s,r))}),t.has(In.keyField().canonicalString())||e.le.push(new cy(In.keyField(),r))}return e.le}function Qi(n){const e=_e(n);return e.he||(e.he=function NG(n,e){if("F"===n.limitType)return hR(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>new cy(i.field,"desc"===i.dir?"asc":"desc"));const t=n.endAt?new kc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new kc(n.startAt.position,n.startAt.inclusive):null;return hR(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}(e,op(n))),e.he}function pR(n,e){const t=n.filters.concat([e]);return new wl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function x0(n,e,t){return new wl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function dy(n,e){return uy(Qi(n),Qi(e))&&n.limitType===e.limitType}function kG(n){return`${hd(Qi(n))}|lt:${n.limitType}`}function ap(n){return`Query(target=${function(t){let r=t.path.canonicalString();return null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>AG(i)).join(", ")}]`),ry(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>{return`${(o=i).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>rp(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>rp(i)).join(",")),`Target(${r})`}(Qi(n))}; limitType=${n.limitType})`}function hy(n,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return null!==r.collectionGroup?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ye.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(n,e)&&function(r,i){for(const s of op(r))if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((r=n).startAt&&!function(o,a,l){const c=bG(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,op(r),i)||r.endAt&&!function(o,a,l){const c=bG(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,op(r),i)));var r,i}function OG(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function FG(n){return(e,t)=>{let r=!1;for(const i of op(n)){const s=mce(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function mce(n,e,t){const r=n.field.isKeyField()?ye.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Nc(l,c):De()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return De()}}class xl{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Dc(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return uG(this.inner)}size(){return this.innerSize}}const gce=new mn(ye.comparator);function ys(){return gce}const LG=new mn(ye.comparator);function fy(...n){let e=LG;for(const t of n)e=e.insert(t.key,t);return e}function VG(n){let e=LG;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Oa(){return py()}function BG(){return py()}function py(){return new xl(n=>n.toString(),(n,e)=>n.isEqual(e))}const _ce=new mn(ye.comparator),yce=new rn(ye.comparator);function mt(...n){let e=yce;for(const t of n)e=e.add(t);return e}const vce=new rn(rt);function mR(){return vce}function UG(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iy(e)?"-0":e}}function jG(n){return{integerValue:""+n}}function HG(n,e){return nG(e)?jG(e):UG(n,e)}class I0{constructor(){this._=void 0}}function bce(n,e,t){return n instanceof lp?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&g0(s)&&(s=_0(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof fd?GG(n,e):n instanceof pd?zG(n,e):function(i,s){const o=$G(i,s),a=qG(o)+qG(i.Ie);return lR(o)&&lR(i.Ie)?jG(a):UG(i.serializer,a)}(n,e)}function Ece(n,e,t){return n instanceof fd?GG(n,e):n instanceof pd?zG(n,e):t}function $G(n,e){return n instanceof cp?lR(r=e)||(s=r)&&"doubleValue"in s?e:{integerValue:0}:null;var r,s}class lp extends I0{}class fd extends I0{constructor(e){super(),this.elements=e}}function GG(n,e){const t=WG(e);for(const r of n.elements)t.some(i=>ka(i,r))||t.push(r);return{arrayValue:{values:t}}}class pd extends I0{constructor(e){super(),this.elements=e}}function zG(n,e){let t=WG(e);for(const r of n.elements)t=t.filter(i=>!ka(i,r));return{arrayValue:{values:t}}}class cp extends I0{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function qG(n){return Zn(n.integerValue||n.doubleValue)}function WG(n){return ay(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class my{constructor(e,t){this.field=e,this.transform=t}}class xce{constructor(e,t){this.version=e,this.transformResults=t}}class Fn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fn}static exists(e){return new Fn(void 0,e)}static updateTime(e){return new Fn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function C0(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class A0{}function KG(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new dp(n.key,Fn.none()):new up(n.key,n.data,Fn.none());{const t=n.data,r=li.empty();let i=new rn(In.comparator);for(let s of e.fields)if(!i.has(s)){let o=t.field(s);null===o&&s.length>1&&(s=s.popLast(),o=t.field(s)),null===o?r.delete(s):r.set(s,o),i=i.add(s)}return new Il(n.key,r,new _s(i.toArray()),Fn.none())}}function Ice(n,e,t){n instanceof up?function(i,s,o){const a=i.value.clone(),l=YG(i.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Il?function(i,s,o){if(!C0(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=YG(i.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(ZG(i)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function gy(n,e,t,r){return n instanceof up?function(s,o,a,l){if(!C0(s.precondition,o))return a;const c=s.value.clone(),h=XG(s.fieldTransforms,l,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof Il?function(s,o,a,l){if(!C0(s.precondition,o))return a;const c=XG(s.fieldTransforms,l,o),h=o.data;return h.setAll(ZG(s)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,r):(a=t,C0(n.precondition,o=e)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a);var o,a}function Cce(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=$G(r.transform,i||null);null!=s&&(null===t&&(t=li.empty()),t.set(r.field,s))}return t||null}function QG(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(r=n.fieldTransforms)&&void 0===i||r&&i&&Jf(r,i,(s,o)=>function wce(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(r=n.transform)instanceof fd&&i instanceof fd||r instanceof pd&&i instanceof pd?Jf(r.elements,i.elements,ka):r instanceof cp&&i instanceof cp?ka(r.Ie,i.Ie):r instanceof lp&&i instanceof lp);var r,i}(s,o))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var r,i}class up extends A0{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Il extends A0{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function ZG(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function YG(n,e,t){const r=new Map;Le(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,Ece(o,a,t[i]))}return r}function XG(n,e,t){const r=new Map;for(const i of n){const s=i.transform,o=t.data.field(i.field);r.set(i.field,bce(s,o,e))}return r}class dp extends A0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gR extends A0{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class _R{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&Ice(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=gy(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=gy(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=BG();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(i.key)?null:a;const l=KG(o,a);null!==l&&r.set(i.key,l),o.isValidDocument()||o.convertToNoDocument(Be.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),mt())}isEqual(e){return this.batchId===e.batchId&&Jf(this.mutations,e.mutations,(t,r)=>QG(t,r))&&Jf(this.baseMutations,e.baseMutations,(t,r)=>QG(t,r))}}class yR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Le(e.mutations.length===r.length);let i=_ce;const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new yR(e,t,r,i)}}class vR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Tce{constructor(e,t){this.count=e,this.unchangedNames=t}}var Er,Lt;function JG(n){switch(n){default:return De();case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0}}function ez(n){if(void 0===n)return ar("GRPC error has no .code"),$.UNKNOWN;switch(n){case Er.OK:return $.OK;case Er.CANCELLED:return $.CANCELLED;case Er.UNKNOWN:return $.UNKNOWN;case Er.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Er.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Er.INTERNAL:return $.INTERNAL;case Er.UNAVAILABLE:return $.UNAVAILABLE;case Er.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Er.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Er.NOT_FOUND:return $.NOT_FOUND;case Er.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Er.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Er.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Er.ABORTED:return $.ABORTED;case Er.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Er.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Er.DATA_LOSS:return $.DATA_LOSS;default:return De()}}(Lt=Er||(Er={}))[Lt.OK=0]="OK",Lt[Lt.CANCELLED=1]="CANCELLED",Lt[Lt.UNKNOWN=2]="UNKNOWN",Lt[Lt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Lt[Lt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Lt[Lt.NOT_FOUND=5]="NOT_FOUND",Lt[Lt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Lt[Lt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Lt[Lt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Lt[Lt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Lt[Lt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Lt[Lt.ABORTED=10]="ABORTED",Lt[Lt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Lt[Lt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Lt[Lt.INTERNAL=13]="INTERNAL",Lt[Lt.UNAVAILABLE=14]="UNAVAILABLE",Lt[Lt.DATA_LOSS=15]="DATA_LOSS";function tz(){return new TextEncoder}const Dce=new Zf([4294967295,4294967295],0);function nz(n){const e=tz().encode(n),t=new Ele;return t.update(e),new Uint8Array(t.digest())}function rz(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Zf([t,r],0),new Zf([i,s],0)]}class bR{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new _y(`Invalid padding: ${t}`);if(r<0)throw new _y(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new _y(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new _y(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=Zf.fromNumber(this.Te)}de(e,t,r){let i=e.add(t.multiply(Zf.fromNumber(r)));return 1===i.compare(Dce)&&(i=new Zf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=nz(e),[r,i]=rz(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);if(!this.Ae(o))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new bR(s,i,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(0===this.Te)return;const t=nz(e),[r,i]=rz(t);for(let s=0;s<this.hashCount;s++){const o=this.de(r,i,s);this.Re(o)}}Re(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class _y extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class yy{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,vy.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new yy(Be.min(),i,new mn(rt),ys(),mt())}}class vy{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new vy(r,t,mt(),mt(),mt())}}class D0{constructor(e,t,r,i){this.Ve=e,this.removedTargetIds=t,this.key=r,this.me=i}}class iz{constructor(e,t){this.targetId=e,this.fe=t}}class sz{constructor(e,t,r=Fr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class oz{constructor(){this.ge=0,this.pe=lz(),this.ye=Fr.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=mt(),t=mt(),r=mt();return this.pe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:De()}}),new vy(this.ye,this.we,e,t,r)}Fe(){this.Se=!1,this.pe=lz()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Le(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Sce{constructor(e){this.Le=e,this.ke=new Map,this.qe=ys(),this.Qe=az(),this.Ke=new mn(rt)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,t=>{const r=this.ze(t);switch(e.state){case 0:this.je(t)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(t);break;case 3:this.je(t)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),r.Ce(e.resumeToken));break;default:De()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach((r,i)=>{this.je(i)&&t(i)})}Je(e){const t=e.targetId,r=e.fe.count,i=this.Ye(t);if(i){const s=i.target;if(E0(s))if(0===r){const o=new ye(s.path);this.We(t,o,Cn.newNoDocument(o,Be.min()))}else Le(1===r);else{const o=this.Ze(t);if(o!==r){const a=this.Xe(e),l=a?this.et(a,e,o):1;0!==l&&(this.He(t),this.Ke=this.Ke.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch"))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=t;let o,a;try{o=El(r).toUint8Array()}catch(l){if(l instanceof hG)return gs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new bR(o,i,s)}catch(l){return gs(l instanceof _y?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return 0===a.Te?null:a}et(e,t,r){return t.fe.count===r-this.rt(e,t.targetId)?0:2}rt(e,t){const r=this.Le.getRemoteKeysForTarget(t);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),i++)}),i}it(e){const t=new Map;this.ke.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&E0(a.target)){const l=new ye(a.target.path);null!==this.qe.get(l)||this.st(o,l)||this.We(o,l,Cn.newNoDocument(l,e))}s.De&&(t.set(o,s.ve()),s.Fe())}});let r=mt();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||"TargetPurposeLimboResolution"===c.purpose||(a=!1,!1)}),a&&(r=r.add(s))}),this.qe.forEach((s,o)=>o.setReadTime(e));const i=new yy(e,t,this.Ke,this.qe,r);return this.qe=ys(),this.Qe=az(),this.Ke=new mn(rt),i}Ue(e,t){if(!this.je(e))return;const r=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,r),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),r&&(this.qe=this.qe.insert(t,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new oz,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new rn(rt),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||ue("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new oz),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function az(){return new mn(ye.comparator)}function lz(){return new mn(ye.comparator)}const Rce={asc:"ASCENDING",desc:"DESCENDING"},Mce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Pce={and:"AND",or:"OR"};class Nce{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ER(n,e){return n.useProto3Json||ry(e)?e:{value:e}}function hp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cz(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function kce(n,e){return hp(n,e.toTimestamp())}function lr(n){return Le(!!n),Be.fromTimestamp(function(t){const r=Sc(t);return new On(r.seconds,r.nanos)}(n))}function wR(n,e){return xR(n,e).canonicalString()}function xR(n,e){const t=(i=n,new Pt(["projects",i.projectId,"databases",i.database])).child("documents");var i;return void 0===e?t:t.child(e)}function uz(n){const e=Pt.fromString(n);return Le(bz(e)),e}function by(n,e){return wR(n.databaseId,e.path)}function Fa(n,e){const t=uz(e);if(t.get(1)!==n.databaseId.projectId)throw new le($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new le($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(fz(t))}function dz(n,e){return wR(n.databaseId,e)}function hz(n){const e=uz(n);return 4===e.length?Pt.emptyPath():fz(e)}function IR(n){return new Pt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function fz(n){return Le(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function pz(n,e,t){return{name:by(n,e),fields:t.value.mapValue.fields}}function mz(n,e,t){const r=Fa(n,e.name),i=lr(e.updateTime),s=e.createTime?lr(e.createTime):Be.min(),o=new li({mapValue:{fields:e.fields}}),a=Cn.newFoundDocument(r,i,s,o);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function Ey(n,e){let t;if(e instanceof up)t={update:pz(n,e.key,e.value)};else if(e instanceof dp)t={delete:by(n,e.key)};else if(e instanceof Il)t={update:pz(n,e.key,e.data),updateMask:Hce(e.fieldMask)};else{if(!(e instanceof gR))return De();t={verify:by(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof lp)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof fd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof pd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof cp)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw De()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:kce(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:De()),t;var s}function CR(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?Fn.updateTime(lr(s.updateTime)):void 0!==s.exists?Fn.exists(s.exists):Fn.none():Fn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(o,a){let l=null;"setToServerValue"in a?(Le("REQUEST_TIME"===a.setToServerValue),l=new lp):"appendMissingElements"in a?l=new fd(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new pd(a.removeAllFromArray.values||[]):"increment"in a?l=new cp(o,a.increment):De();const c=In.fromServerFormat(a.fieldPath);return new my(c,l)}(n,i)):[];var s;if(e.update){const i=Fa(n,e.update.name),s=new li({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=new _s((e.updateMask.fieldPaths||[]).map(h=>In.fromServerFormat(h)));return new Il(i,s,o,t,r)}return new up(i,s,t,r)}if(e.delete){const i=Fa(n,e.delete);return new dp(i,t)}if(e.verify){const i=Fa(n,e.verify);return new gR(i,t)}return De()}function gz(n,e){return{documents:[dz(n,e.path)]}}function AR(n,e){const t={structuredQuery:{}},r=e.path;let i;null!==e.collectionGroup?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=dz(n,i);const s=function(c){if(0!==c.length)return vz(Xt.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(0!==c.length)return c.map(h=>{return{field:Oc((g=h).field),direction:Bce(g.dir)};var g})}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=ER(n,e.limit);return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(c=e.startAt).inclusive,values:c.position}),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ut:t,parent:i};var c}function _z(n){let e=hz(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Le(1===r);const h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(p){const g=yz(p);return g instanceof Xt&&uR(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=t.orderBy.map(g=>{return new cy(fp((v=g).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction));var v}));let a=null;t.limit&&(a=function(p){let g;return g="object"==typeof p?p.value:p,ry(g)?null:g}(t.limit));let l=null;var p;t.startAt&&(l=new kc((p=t.startAt).values||[],!!p.before));let c=null;return t.endAt&&(c=function(p){return new kc(p.values||[],!p.before)}(t.endAt)),MG(e,i,o,s,a,"F",l,c)}function yz(n){return void 0!==n.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=fp(t.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=fp(t.unaryFilter.field);return Nt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fp(t.unaryFilter.field);return Nt.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fp(t.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return De()}}(n):void 0!==n.fieldFilter?Nt.create(fp((t=n).fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return De()}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==n.compositeFilter?function(t){return Xt.create(t.compositeFilter.filters.map(r=>yz(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return De()}}(t.compositeFilter.op))}(n):De();var t}function Bce(n){return Rce[n]}function Uce(n){return Mce[n]}function jce(n){return Pce[n]}function Oc(n){return{fieldPath:n.canonicalString()}}function fp(n){return In.fromServerFormat(n.fieldPath)}function vz(n){return n instanceof Nt?function(t){if("=="===t.op){if(mG(t.value))return{unaryFilter:{field:Oc(t.field),op:"IS_NAN"}};if(pG(t.value))return{unaryFilter:{field:Oc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(mG(t.value))return{unaryFilter:{field:Oc(t.field),op:"IS_NOT_NAN"}};if(pG(t.value))return{unaryFilter:{field:Oc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Oc(t.field),op:Uce(t.op),value:t.value}}}(n):n instanceof Xt?function(t){const r=t.getFilters().map(i=>vz(i));return 1===r.length?r[0]:{compositeFilter:{op:jce(t.op),filters:r}}}(n):De()}function Hce(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function bz(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class Cl{constructor(e,t,r,i,s=Be.min(),o=Be.min(),a=Fr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Cl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Cl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Cl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ez{constructor(e){this.ct=e}}function wz(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:S0(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:by(s=n.ct,(o=e).key),fields:o.data.value.mapValue.fields,updateTime:hp(s,o.version.toTimestamp()),createTime:hp(s,o.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:md(e.version)};else{if(!e.isUnknownDocument())return De();r.unknownDocument={path:t.path.toArray(),version:md(e.version)}}var s,o;return r}function S0(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function md(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function gd(n){const e=new On(n.seconds,n.nanoseconds);return Be.fromTimestamp(e)}function _d(n,e){const t=(e.baseMutations||[]).map(s=>CR(n.ct,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>CR(n.ct,s)),i=On.fromMillis(e.localWriteTimeMs);return new _R(e.batchId,i,t,r)}function wy(n){const e=gd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?gd(n.lastLimboFreeSnapshotVersion):Be.min();let r;return r=void 0!==n.query.documents?(Le(1===(s=n.query).documents.length),Qi(sp(hz(s.documents[0])))):function(s){return Qi(_z(s))}(n.query),new Cl(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Fr.fromBase64String(n.resumeToken));var s}function xz(n,e){const t=md(e.snapshotVersion),r=md(e.lastLimboFreeSnapshotVersion);let i;i=E0(e.target)?gz(n.ct,e.target):AR(n.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:hd(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function TR(n){const e=_z({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?x0(e,e.limit,"L"):e}function DR(n,e){return new vR(e.largestBatchId,CR(n.ct,e.overlayMutation))}function Iz(n,e){const t=e.path.lastSegment();return[n,Mi(e.path.popLast()),t]}function Cz(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:md(r.readTime),documentKey:Mi(r.documentKey.path),largestBatchId:r.largestBatchId}}class Gce{getBundleMetadata(e,t){return Az(e).get(t).next(r=>{if(r)return{id:(s=r).bundleId,createTime:gd(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Az(e).put({bundleId:(i=t).id,createTime:md(lr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Tz(e).get(t).next(r=>{if(r)return{name:(s=r).name,query:TR(s.bundledQuery),readTime:gd(s.readTime)};var s})}saveNamedQuery(e,t){return Tz(e).put({name:(i=t).name,readTime:md(lr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Az(n){return qr(n,"bundles")}function Tz(n){return qr(n,"namedQueries")}class R0{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){return new R0(e,t.uid||"")}getOverlay(e,t){return xy(e).get(Iz(this.userId,t)).next(r=>r?DR(this.serializer,r):null)}getOverlays(e,t){const r=Oa();return B.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,o)=>{const a=new vR(t,o);i.push(this.ht(e,a))}),B.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(o=>i.add(Mi(o.getCollectionPath())));const s=[];return i.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);s.push(xy(e).H("collectionPathOverlayIndex",a))}),B.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Oa(),s=Mi(t),o=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xy(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const c=DR(this.serializer,l);i.set(c.getKey(),c)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Oa();let o;const a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xy(e).Y({index:"collectionGroupOverlayIndex",range:a},(l,c,h)=>{const p=DR(this.serializer,c);s.size()<i||p.largestBatchId===o?(s.set(p.getKey(),p),o=p.largestBatchId):h.done()}).next(()=>s)}ht(e,t){return xy(e).put(function(i,s,o){const[a,l,c]=Iz(s,o.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:o.mutation.key.getCollectionGroup(),largestBatchId:o.largestBatchId,overlayMutation:Ey(i.ct,o.mutation)}}(this.serializer,this.userId,t))}}function xy(n){return qr(n,"documentOverlays")}class yd{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Zn(e.integerValue));else if("doubleValue"in e){const r=Zn(e.doubleValue);isNaN(r)?this.Et(t,13):(this.Et(t,15),iy(r)?t.dt(0):t.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(t,20),"string"==typeof r?t.At(r):(t.At(`${r.seconds||""}`),t.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(El(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(t,45),t.dt(r.latitude||0),t.dt(r.longitude||0)}else"mapValue"in e?gG(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):De()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const r=e.fields||{};this.Et(t,55);for(const i of Object.keys(r))this.Rt(i,t),this.It(r[i],t)}wt(e,t){const r=e.values||[];this.Et(t,50);for(const i of r)this.It(i,t)}gt(e,t){this.Et(t,37),ye.fromName(e).path.forEach(r=>{this.Et(t,60),this.St(r,t)})}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function zce(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function Dz(n){const e=64-function(r){let i=0;for(let s=0;s<8;++s){const o=zce(255&r[s]);if(i+=o,8!==o)break}return i}(n);return Math.ceil(e/8)}yd.bt=new yd;class qce{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ct(r.value),r=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Mt(r.value),r=t.next();this.xt()}Ot(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=t.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=t.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){const t=this.Lt(e),r=Dz(t);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Lt(e),r=Dz(t);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(s){const o=new DataView(new ArrayBuffer(8));return o.setFloat64(0,s,!1),new Uint8Array(o.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class Wce{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class Kce{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class Iy{constructor(){this.Gt=new qce,this.zt=new Wce(this.Gt),this.jt=new Kce(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class vd{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new vd(this.indexId,this.documentKey,this.arrayValue,r)}}function Fc(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Sz(n.arrayValue,e.arrayValue),0!==t?t:(t=Sz(n.directionalValue,e.directionalValue),0!==t?t:ye.comparator(n.documentKey,e.documentKey)))}function Sz(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Rz{constructor(e){this.Yt=new rn((t,r)=>In.comparator(t.field,r.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const r=t;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(Le(e.collectionGroup===this.collectionId),this.en)return!1;const t=nR(e);if(void 0!==t&&!this.nn(t))return!1;const r=ld(e);let i=new Set,s=0,o=0;for(;s<r.length&&this.nn(r[s]);++s)i=i.add(r[s].fieldPath.canonicalString());if(s===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const l=r[s];if(!this.rn(a,l)||!this.sn(this.Zt[o++],l))return!1}++s}for(;s<r.length;++s)if(o>=this.Zt.length||!this.sn(this.Zt[o++],r[s]))return!1;return!0}on(){if(this.en)return null;let e=new rn(In.comparator);const t=[];for(const r of this.Xt)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new cd(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new cd(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new cd(r.field,"asc"===r.dir?0:1)));return new ep(ep.UNKNOWN_ID,this.collectionId,t,tp.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Mz(n){var e,t;if(Le(n instanceof Nt||n instanceof Xt),n instanceof Nt){if(n instanceof DG){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>Nt.create(n.field,"==",s)))||[];return Xt.create(i,"or")}return n}const r=n.filters.map(i=>Mz(i));return Xt.create(r,n.op)}function Qce(n){if(0===n.getFilters().length)return[];const e=MR(Mz(n));return Le(Pz(e)),SR(e)||RR(e)?[e]:e.getFilters()}function SR(n){return n instanceof Nt}function RR(n){return n instanceof Xt&&uR(n)}function Pz(n){return SR(n)||RR(n)||function(t){if(t instanceof Xt&&cR(t)){for(const r of t.getFilters())if(!SR(r)&&!RR(r))return!1;return!0}return!1}(n)}function MR(n){if(Le(n instanceof Nt||n instanceof Xt),n instanceof Nt)return n;if(1===n.filters.length)return MR(n.filters[0]);const e=n.filters.map(r=>MR(r));let t=Xt.create(e,n.op);return t=M0(t),Pz(t)?t:(Le(t instanceof Xt),Le(ip(t)),Le(t.filters.length>1),t.filters.reduce((r,i)=>PR(r,i)))}function PR(n,e){let t;return Le(n instanceof Nt||n instanceof Xt),Le(e instanceof Nt||e instanceof Xt),t=n instanceof Nt?e instanceof Nt?Xt.create([n,e],"and"):Nz(n,e):e instanceof Nt?Nz(e,n):function(i,s){if(Le(i.filters.length>0&&s.filters.length>0),ip(i)&&ip(s))return CG(i,s.getFilters());const o=cR(i)?i:s,a=cR(i)?s:i,l=o.filters.map(c=>PR(c,a));return Xt.create(l,"or")}(n,e),M0(t)}function Nz(n,e){if(ip(e))return CG(e,n.getFilters());{const t=e.filters.map(r=>PR(n,r));return Xt.create(t,"or")}}function M0(n){if(Le(n instanceof Nt||n instanceof Xt),n instanceof Nt)return n;const e=n.getFilters();if(1===e.length)return M0(e[0]);if(xG(n))return n;const t=e.map(i=>M0(i)),r=[];return t.forEach(i=>{i instanceof Nt?r.push(i):i instanceof Xt&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:Xt.create(r,n.op)}class Zce{constructor(){this._n=new NR}addToCollectionParentIndex(e,t){return this._n.add(t),B.resolve()}getCollectionParents(e,t){return B.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return B.resolve()}deleteFieldIndex(e,t){return B.resolve()}deleteAllFieldIndexes(e){return B.resolve()}createTargetIndexes(e,t){return B.resolve()}getDocumentsMatchingTarget(e,t){return B.resolve(null)}getIndexType(e,t){return B.resolve(0)}getFieldIndexes(e,t){return B.resolve([])}getNextCollectionGroupToUpdate(e){return B.resolve(null)}getMinOffset(e,t){return B.resolve(Fs.min())}getMinOffsetFromCollectionGroup(e,t){return B.resolve(Fs.min())}updateCollectionGroup(e,t,r){return B.resolve()}updateIndexEntries(e,t){return B.resolve()}}class NR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new rn(Pt.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new rn(Pt.comparator)).toArray()}}const P0=new Uint8Array(0);class Yce{constructor(e,t){this.databaseId=t,this.an=new NR,this.un=new xl(r=>hd(r),(r,i)=>uy(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.an.add(t)});const s={collectionId:r,parent:Mi(i)};return kz(e).put(s)}return B.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[Z$(t),""],!1,!0);return kz(e).W(i).next(s=>{for(const o of s){if(o.collectionId!==t)break;r.push(Na(o.parent))}return r})}addFieldIndex(e,t){const r=Cy(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete i.indexId;const s=r.add(i);if(t.indexState){const o=mp(e);return s.next(a=>{o.put(Cz(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=Cy(e),i=mp(e),s=pp(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Cy(e),r=pp(e),i=mp(e);return t.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,t){return B.forEach(this.cn(t),r=>this.getIndexType(e,r).next(i=>{if(0===i||1===i){const s=new Rz(r).on();if(null!=s)return this.addFieldIndex(e,s)}}))}getDocumentsMatchingTarget(e,t){const r=pp(e);let i=!0;const s=new Map;return B.forEach(this.cn(t),o=>this.ln(e,o).next(a=>{i&&(i=!!a),s.set(o,a)})).next(()=>{if(i){let o=mt();const a=[];return B.forEach(s,(l,c)=>{var k;ue("IndexedDbIndexManager",`Using index ${k=l,`id=${k.indexId}|cg=${k.collectionGroup}|f=${k.fields.map(G=>`${G.fieldPath}:${G.kind}`).join(",")}`} to execute ${hd(t)}`);const h=function(k,G){const de=nR(G);if(void 0===de)return null;for(const Se of w0(k,de.fieldPath))switch(Se.op){case"array-contains-any":return Se.value.arrayValue.values||[];case"array-contains":return[Se.value]}return null}(c,l),p=function(k,G){const de=new Map;for(const Se of ld(G))for(const it of w0(k,Se.fieldPath))switch(it.op){case"==":case"in":de.set(Se.fieldPath.canonicalString(),it.value);break;case"not-in":case"!=":return de.set(Se.fieldPath.canonicalString(),it.value),Array.from(de.values())}return null}(c,l),g=function(k,G){const de=[];let Se=!0;for(const it of ld(G)){const Kt=0===it.kind?SG(k,it.fieldPath,k.startAt):RG(k,it.fieldPath,k.startAt);de.push(Kt.value),Se&&(Se=Kt.inclusive)}return new kc(de,Se)}(c,l),_=function(k,G){const de=[];let Se=!0;for(const it of ld(G)){const Kt=0===it.kind?RG(k,it.fieldPath,k.endAt):SG(k,it.fieldPath,k.endAt);de.push(Kt.value),Se&&(Se=Kt.inclusive)}return new kc(de,Se)}(c,l),v=this.hn(l,c,g),E=this.hn(l,c,_),x=this.Pn(l,c,p),M=this.In(l.indexId,h,v,g.inclusive,E,_.inclusive,x);return B.forEach(M,D=>r.j(D,t.limit).next(k=>{k.forEach(G=>{const de=ye.fromSegments(G.documentKey);o.has(de)||(o=o.add(de),a.push(de))})}))}).next(()=>a)}return B.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Qce(Xt.create(e.filters,"and")).map(r=>hR(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}In(e,t,r,i,s,o,a){const l=(null!=t?t.length:1)*Math.max(r.length,s.length),c=l/(null!=t?t.length:1),h=[];for(let p=0;p<l;++p){const g=t?this.Tn(t[p/c]):P0,_=this.En(e,g,r[p%c],i),v=this.dn(e,g,s[p%c],o),E=a.map(x=>this.En(e,g,x,!0));h.push(...this.createRange(_,v,E))}return h}En(e,t,r,i){const s=new vd(e,ye.empty(),t,r);return i?s:s.Jt()}dn(e,t,r,i){const s=new vd(e,ye.empty(),t,r);return i?s.Jt():s}ln(e,t){const r=new Rz(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let o=null;for(const a of s)r.tn(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,t){let r=2;const i=this.cn(t);return B.forEach(i,s=>this.ln(e,s).next(o=>{o?0!==r&&o.fields.length<function(l){let c=new rn(In.comparator),h=!1;for(const p of l.filters)for(const g of p.getFlattenedFilters())g.field.isKeyField()||("array-contains"===g.op||"array-contains-any"===g.op?h=!0:c=c.add(g.field));for(const p of l.orderBy)p.field.isKeyField()||(c=c.add(p.field));return c.size+(h?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}An(e,t){const r=new Iy;for(const i of ld(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const o=r.Ht(i.kind);yd.bt.Pt(s,o)}return r.Wt()}Tn(e){const t=new Iy;return yd.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const r=new Iy;return yd.bt.Pt(dd(this.databaseId,t),r.Ht(function(s){const o=ld(s);return 0===o.length?0:o[o.length-1].kind}(e))),r.Wt()}Pn(e,t,r){if(null===r)return[];let i=[];i.push(new Iy);let s=0;for(const o of ld(e)){const a=r[s++];for(const l of i)if(this.Vn(t,o.fieldPath)&&ay(a))i=this.mn(i,o,a);else{const c=l.Ht(o.kind);yd.bt.Pt(a,c)}}return this.fn(i)}hn(e,t,r){return this.Pn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Wt();return t}mn(e,t,r){const i=[...e],s=[];for(const o of r.arrayValue.values||[])for(const a of i){const l=new Iy;l.seed(a.Wt()),yd.bt.Pt(o,l.Ht(t.kind)),s.push(l)}return s}Vn(e,t){return!!e.filters.find(r=>r instanceof Nt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Cy(e),i=mp(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const o=[];return B.forEach(s,a=>i.get([a.indexId,this.uid]).next(l=>{o.push(function(h,p){const g=p?new tp(p.sequenceNumber,new Fs(gd(p.readTime),new ye(Na(p.documentKey)),p.largestBatchId)):tp.empty(),_=h.fields.map(([v,E])=>new cd(In.fromServerFormat(v),E));return new ep(h.indexId,h.collectionGroup,_,g)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:rt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Cy(e),s=mp(e);return this.gn(e).next(o=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>B.forEach(a,l=>s.put(Cz(l.indexId,this.uid,o,r)))))}updateIndexEntries(e,t){const r=new Map;return B.forEach(t,(i,s)=>{const o=r.get(i.collectionGroup);return(o?B.resolve(o):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),B.forEach(a,l=>this.pn(e,i,l).next(c=>{const h=this.yn(s,l);return c.isEqual(h)?B.resolve():this.wn(e,s,l,c,h)}))))})}Sn(e,t,r,i){return pp(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,t.key),documentKey:t.key.path.toArray()})}bn(e,t,r,i){return pp(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,t.key),t.key.path.toArray()])}pn(e,t,r){const i=pp(e);let s=new rn(Fc);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,t)])},(o,a)=>{s=s.add(new vd(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>s)}yn(e,t){let r=new rn(Fc);const i=this.An(t,e);if(null==i)return r;const s=nR(t);if(null!=s){const o=e.data.field(s.fieldPath);if(ay(o))for(const a of o.arrayValue.values||[])r=r.add(new vd(t.indexId,e.key,this.Tn(a),i))}else r=r.add(new vd(t.indexId,e.key,P0,i));return r}wn(e,t,r,i,s){ue("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(l,c,h,p,g){const _=l.getIterator(),v=c.getIterator();let E=np(_),x=np(v);for(;E||x;){let M=!1,D=!1;if(E&&x){const k=h(E,x);k<0?D=!0:k>0&&(M=!0)}else null!=E?D=!0:M=!0;M?(p(x),x=np(v)):D?(g(E),E=np(_)):(E=np(_),x=np(v))}}(i,s,Fc,a=>{o.push(this.Sn(e,t,r,a))},a=>{o.push(this.bn(e,t,r,a))}),B.waitFor(o)}gn(e){let t=1;return mp(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((o,a)=>Fc(o,a)).filter((o,a,l)=>!a||0!==Fc(o,l[a-1]));const i=[];i.push(e);for(const o of r){const a=Fc(o,e),l=Fc(o,t);if(0===a)i[0]=e.Jt();else if(a>0&&l<0)i.push(o),i.push(o.Jt());else if(l>0)break}i.push(t);const s=[];for(let o=0;o<i.length;o+=2){if(this.Dn(i[o],i[o+1]))return[];s.push(IDBKeyRange.bound([i[o].indexId,this.uid,i[o].arrayValue,i[o].directionalValue,P0,[]],[i[o+1].indexId,this.uid,i[o+1].arrayValue,i[o+1].directionalValue,P0,[]]))}return s}Dn(e,t){return Fc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Oz)}getMinOffset(e,t){return B.mapArray(this.cn(t),r=>this.ln(e,r).next(i=>i||De())).next(Oz)}}function kz(n){return qr(n,"collectionParents")}function pp(n){return qr(n,"indexEntries")}function Cy(n){return qr(n,"indexConfiguration")}function mp(n){return qr(n,"indexState")}function Oz(n){Le(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;rR(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Fs(e.readTime,e.documentKey,t)}const Fz={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Pi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Pi(e,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Lz(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],o=IDBKeyRange.only(t.batchId);let a=0;const l=r.Y({range:o},(h,p,g)=>(a++,g.delete()));s.push(l.next(()=>{Le(1===a)}));const c=[];for(const h of t.mutations){const p=sG(e,h.key.path,t.batchId);s.push(i.delete(p)),c.push(h.key)}return B.waitFor(s).next(()=>c)}function N0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw De();e=n.noDocument}return JSON.stringify(e).length}Pi.DEFAULT_COLLECTION_PERCENTILE=10,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pi.DEFAULT=new Pi(41943040,Pi.DEFAULT_COLLECTION_PERCENTILE,Pi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pi.DISABLED=new Pi(-1,0,0);class k0{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,t,r,i){Le(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new k0(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Lc(e).Y({index:"userMutationsIndex",range:r},(i,s,o)=>{t=!1,o.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=gp(e),o=Lc(e);return o.add({}).next(a=>{Le("number"==typeof a);const l=new _R(a,t,r,i),c=function(_,v,E){const x=E.baseMutations.map(D=>Ey(_.ct,D)),M=E.mutations.map(D=>Ey(_.ct,D));return{userId:v,batchId:E.batchId,localWriteTimeMs:E.localWriteTime.toMillis(),baseMutations:x,mutations:M}}(this.serializer,this.userId,l),h=[];let p=new rn((g,_)=>rt(g.canonicalString(),_.canonicalString()));for(const g of i){const _=sG(this.userId,g.key.path,a);p=p.add(g.key.path.popLast()),h.push(o.put(c)),h.push(s.put(_,Ble))}return p.forEach(g=>{h.push(this.indexManager.addToCollectionParentIndex(e,g))}),e.addOnCommittedListener(()=>{this.Cn[a]=l.keys()}),B.waitFor(h).next(()=>l)})}lookupMutationBatch(e,t){return Lc(e).get(t).next(r=>r?(Le(r.userId===this.userId),_d(this.serializer,r)):null)}vn(e,t){return this.Cn[t]?B.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Cn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return Lc(e).Y({index:"userMutationsIndex",range:i},(o,a,l)=>{a.userId===this.userId&&(Le(a.batchId>=r),s=_d(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Lc(e).Y({index:"userMutationsIndex",range:t,reverse:!0},(i,s,o)=>{r=s.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Lc(e).W("userMutationsIndex",t).next(r=>r.map(i=>_d(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=p0(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return gp(e).Y({range:i},(o,a,l)=>{const[c,h,p]=o,g=Na(h);if(c===this.userId&&t.path.isEqual(g))return Lc(e).get(p).next(_=>{if(!_)throw De();Le(_.userId===this.userId),s.push(_d(this.serializer,_))});l.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rn(rt);const i=[];return t.forEach(s=>{const o=p0(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=gp(e).Y({range:a},(c,h,p)=>{const[g,_,v]=c,E=Na(_);g===this.userId&&s.path.isEqual(E)?r=r.add(v):p.done()});i.push(l)}),B.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=p0(this.userId,r),o=IDBKeyRange.lowerBound(s);let a=new rn(rt);return gp(e).Y({range:o},(l,c,h)=>{const[p,g,_]=l,v=Na(g);p===this.userId&&r.isPrefixOf(v)?v.length===i&&(a=a.add(_)):h.done()}).next(()=>this.Fn(e,a))}Fn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(Lc(e).get(s).next(o=>{if(null===o)throw De();Le(o.userId===this.userId),r.push(_d(this.serializer,o))}))}),B.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return Lz(e.ae,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Mn(t.batchId)}),B.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return B.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return gp(e).Y({range:r},(s,o,a)=>{if(s[0]===this.userId){const l=Na(s[1]);i.push(l)}else a.done()}).next(()=>{Le(0===i.length)})})}containsKey(e,t){return Vz(e,this.userId,t)}xn(e){return Bz(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Vz(n,e,t){const r=p0(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return gp(n).Y({range:s,J:!0},(a,l,c)=>{const[h,p,g]=a;h===e&&p===i&&(o=!0),c.done()}).next(()=>o)}function Lc(n){return qr(n,"mutations")}function gp(n){return qr(n,"documentMutations")}function Bz(n){return qr(n,"mutationQueues")}class bd{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new bd(0)}static Bn(){return new bd(-1)}}class Xce{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next(t=>{const r=new bd(t.highestTargetId);return t.highestTargetId=r.next(),this.kn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(t=>Be.fromTimestamp(new On(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i)))}addTargetData(e,t){return this.qn(e,t).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(t,r),this.kn(e,r))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>_p(e).delete(t.targetId)).next(()=>this.Ln(e)).next(r=>(Le(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return _p(e).Y((o,a)=>{const l=wy(a);l.sequenceNumber<=t&&null===r.get(l.targetId)&&(i++,s.push(this.removeTargetData(e,l)))}).next(()=>B.waitFor(s)).next(()=>i)}forEachTarget(e,t){return _p(e).Y((r,i)=>{const s=wy(i);t(s)})}Ln(e){return Uz(e).get("targetGlobalKey").next(t=>(Le(null!==t),t))}kn(e,t){return Uz(e).put("targetGlobalKey",t)}qn(e,t){return _p(e).put(xz(this.serializer,t))}Qn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(t=>t.targetCount)}getTargetData(e,t){const r=hd(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return _p(e).Y({range:i,index:"queryTargetsIndex"},(o,a,l)=>{const c=wy(a);uy(t,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Vc(e);return t.forEach(o=>{const a=Mi(o.path);i.push(s.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,o))}),B.waitFor(i)}removeMatchingKeys(e,t,r){const i=Vc(e);return B.forEach(t,s=>{const o=Mi(s.path);return B.waitFor([i.delete([r,o]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Vc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Vc(e);let s=mt();return i.Y({range:r,J:!0},(o,a,l)=>{const c=Na(o[1]),h=new ye(c);s=s.add(h)}).next(()=>s)}containsKey(e,t){const r=Mi(t.path),i=IDBKeyRange.bound([r],[Z$(r)],!1,!0);let s=0;return Vc(e).Y({index:"documentTargetsIndex",J:!0,range:i},([o,a],l,c)=>{0!==o&&(s++,c.done())}).next(()=>s>0)}_t(e,t){return _p(e).get(t).next(r=>r?wy(r):null)}}function _p(n){return qr(n,"targets")}function Uz(n){return qr(n,"targetGlobal")}function Vc(n){return qr(n,"targetDocuments")}function jz([n,e],[t,r]){const i=rt(n,t);return 0===i?rt(e,r):i}class Jce{constructor(e){this.Kn=e,this.buffer=new rn(jz),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();jz(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Hz{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){var t=this;ue("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,X.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Tc(r)?ue("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ac(r)}yield t.zn(3e5)}))}}class eue{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return B.resolve(Ls._e);const r=new Jce(t);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector","Garbage collection skipped; disabled"),B.resolve(Fz)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ue("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Fz):this.Yn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let r,i,s,o,a,l,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(ue("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,o=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(c=Date.now(),Xf()<=ks.in.DEBUG&&ue("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-h}ms\n\tDetermined least recently used ${i} in `+(a-o)+`ms\n\tRemoved ${s} targets in `+(l-a)+`ms\n\tRemoved ${p} documents in `+(c-l)+`ms\nTotal Duration: ${c-h}ms`),B.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:p})))}}class tue{constructor(e,t){this.db=e,this.garbageCollector=function $z(n,e){return new eue(n,e)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Zn(e){let t=0;return this.Jn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,(r,i)=>t(i))}addReference(e,t,r){return O0(e,r)}removeReference(e,t,r){return O0(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return O0(e,t)}er(e,t){return function(i,s){let o=!1;return Bz(i).Z(a=>Vz(i,a,s).next(l=>(l&&(o=!0),B.resolve(!l)))).next(()=>o)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Xn(e,(o,a)=>{if(a<=t){const l=this.er(e,o).next(c=>{if(!c)return s++,r.getEntry(e,o).next(()=>(r.removeEntry(o,Be.min()),Vc(e).delete([0,Mi(o.path)])))});i.push(l)}}).next(()=>B.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return O0(e,t)}Xn(e,t){const r=Vc(e);let i,s=Ls._e;return r.Y({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:c})=>{0===o?(s!==Ls._e&&t(new ye(Na(i)),s),s=c,i=l):s=Ls._e}).next(()=>{s!==Ls._e&&t(new ye(Na(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function O0(n,e){return Vc(n).put((i=n.currentSequenceNumber,{targetId:0,path:Mi(e.path),sequenceNumber:i}));var i}class Gz{constructor(){this.changes=new xl(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Cn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?B.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class nue{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ed(e).put(r)}removeEntry(e,t,r){return Ed(e).delete(function(s,o){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],S0(o),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.tr(e,r)))}getEntry(e,t){let r=Cn.newInvalidDocument(t);return Ed(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ay(t))},(i,s)=>{r=this.nr(t,s)}).next(()=>r)}rr(e,t){let r={size:0,document:Cn.newInvalidDocument(t)};return Ed(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(Ay(t))},(i,s)=>{r={document:this.nr(t,s),size:N0(s)}}).next(()=>r)}getEntries(e,t){let r=ys();return this.ir(e,t,(i,s)=>{const o=this.nr(i,s);r=r.insert(i,o)}).next(()=>r)}sr(e,t){let r=ys(),i=new mn(ye.comparator);return this.ir(e,t,(s,o)=>{const a=this.nr(s,o);r=r.insert(s,a),i=i.insert(s,N0(o))}).next(()=>({documents:r,_r:i}))}ir(e,t,r){if(t.isEmpty())return B.resolve();let i=new rn(Kz);t.forEach(l=>i=i.add(l));const s=IDBKeyRange.bound(Ay(i.first()),Ay(i.last())),o=i.getIterator();let a=o.getNext();return Ed(e).Y({index:"documentKeyIndex",range:s},(l,c,h)=>{const p=ye.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&Kz(a,p)<0;)r(a,null),a=o.getNext();a&&a.isEqual(p)&&(r(a,c),a=o.hasNext()?o.getNext():null),a?h.U(Ay(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,s){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),S0(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ed(e).W(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let h=ys();for(const p of c){const g=this.nr(ye.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);g.isFoundDocument()&&(hy(t,g)||i.has(g.key))&&(h=h.insert(g.key,g))}return h})}getAllFromCollectionGroup(e,t,r,i){let s=ys();const o=Wz(t,r),a=Wz(t,Fs.max());return Ed(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,c,h)=>{const p=this.nr(ye.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(p.key,p),s.size===i&&h.done()}).next(()=>s)}newChangeBuffer(e){return new rue(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return qz(e).get("remoteDocumentGlobalKey").next(t=>(Le(!!t),t))}tr(e,t){return qz(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const r=function $ce(n,e){let t;if(e.document)t=mz(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=ye.fromSegments(e.noDocument.path),i=gd(e.noDocument.readTime);t=Cn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return De();{const r=ye.fromSegments(e.unknownDocument.path),i=gd(e.unknownDocument.version);t=Cn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){const s=new On(i[0],i[1]);return Be.fromTimestamp(s)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Be.min()))return r}return Cn.newInvalidDocument(e)}}function zz(n){return new nue(n)}class rue extends Gz{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new xl(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new rn((s,o)=>rt(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{const a=this.ur.get(s);if(t.push(this.ar.removeEntry(e,s,a.readTime)),o.isValidDocument()){const l=wz(this.ar.serializer,o);i=i.add(s.path.popLast());const c=N0(l);r+=c-a.size,t.push(this.ar.addEntry(e,s,l))}else if(r-=a.size,this.trackRemovals){const l=wz(this.ar.serializer,o.convertToNoDocument(Be.min()));t.push(this.ar.addEntry(e,s,l))}}),i.forEach(s=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.ar.updateMetadata(e,r)),B.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next(r=>(this.ur.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.ar.sr(e,t).next(({documents:r,_r:i})=>(i.forEach((s,o)=>{this.ur.set(s,{size:o,readTime:r.get(s).readTime})}),r))}}function qz(n){return qr(n,"remoteDocumentGlobal")}function Ed(n){return qr(n,"remoteDocumentsV14")}function Ay(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Wz(n,e){const t=e.documentKey.path.toArray();return[n,S0(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Kz(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=rt(t[s],r[s]),i)return i;return i=rt(t.length,r.length),i||(i=rt(t[t.length-2],r[r.length-2]),i||rt(t[t.length-1],r[r.length-1]))}class iue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Qz{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&gy(r.mutation,i,_s.empty(),On.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,mt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=mt()){const i=Oa();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let o=fy();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Oa();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,mt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,i){let s=ys();const o=py(),a=py();return t.forEach((l,c)=>{const h=r.get(c.key);i.has(c.key)&&(void 0===h||h.mutation instanceof Il)?s=s.insert(c.key,c):void 0!==h?(o.set(c.key,h.mutation.getFieldMask()),gy(h.mutation,c,h.mutation.getFieldMask(),On.now())):o.set(c.key,_s.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,h)=>o.set(c,h)),t.forEach((c,h)=>{var p;return a.set(c,new iue(h,null!==(p=o.get(c))&&void 0!==p?p:null))}),a))}recalculateAndSaveOverlays(e,t){const r=py();let i=new mn((o,a)=>o-a),s=mt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(null===c)return;let h=r.get(l)||_s.empty();h=a.applyToLocalView(c,h),r.set(l,h);const p=(i.get(a.batchId)||mt()).add(l);i=i.insert(a.batchId,p)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,h=l.value,p=BG();h.forEach(g=>{if(!s.has(g)){const _=KG(t.get(g),r.get(g));null!==_&&p.set(g,_),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return B.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return ye.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):fR(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i);var o}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):B.resolve(Oa());let a=-1,l=s;return o.next(c=>B.forEach(c,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?B.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{l=l.insert(h,g)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,mt())).next(h=>({batchId:a,changes:VG(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next(r=>{let i=fy();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){const s=t.collectionGroup;let o=fy();return this.indexManager.getCollectionParents(e,s).next(a=>B.forEach(a,l=>{const c=(p=t,g=l.child(s),new wl(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt));var p,g;return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(h=>{h.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,s,i))).next(o=>{s.forEach((l,c)=>{const h=c.getKey();null===o.get(h)&&(o=o.insert(h,Cn.newInvalidDocument(h)))});let a=fy();return o.forEach((l,c)=>{const h=s.get(l);void 0!==h&&gy(h.mutation,c,_s.empty(),On.now()),hy(t,c)&&(a=a.insert(l,c))}),a})}}class sue{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return B.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,{id:(i=t).id,version:i.version,createTime:lr(i.createTime)}),B.resolve();var i}getNamedQuery(e,t){return B.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,{name:(i=t).name,query:TR(i.bundledQuery),readTime:lr(i.readTime)}),B.resolve();var i}}class oue{constructor(){this.overlays=new mn(ye.comparator),this.hr=new Map}getOverlay(e,t){return B.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Oa();return B.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ht(e,t,s)}),B.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.hr.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),B.resolve()}getOverlaysForCollection(e,t,r){const i=Oa(),s=t.length+1,o=new ye(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>r&&i.set(l.getKey(),l)}return B.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new mn((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let h=s.get(c.largestBatchId);null===h&&(h=Oa(),s=s.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Oa(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=i)););return B.resolve(a)}ht(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vR(t,r));let s=this.hr.get(t);void 0===s&&(s=mt(),this.hr.set(t,s)),this.hr.set(t,s.add(r.key))}}class kR{constructor(){this.Pr=new rn(Wr.Ir),this.Tr=new rn(Wr.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const r=new Wr(e,t);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Ar(new Wr(e,t))}Rr(e,t){e.forEach(r=>this.removeReference(r,t))}Vr(e){const t=new ye(new Pt([])),r=new Wr(t,e),i=new Wr(t,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new ye(new Pt([])),r=new Wr(t,e),i=new Wr(t,e+1);let s=mt();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Wr(e,0),r=this.Pr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Wr{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return ye.comparator(e.key,t.key)||rt(e.pr,t.pr)}static Er(e,t){return rt(e.pr,t.pr)||ye.comparator(e.key,t.key)}}class aue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new rn(Wr.Ir)}checkEmpty(e){return B.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.yr;this.yr++;const o=new _R(s,t,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Wr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return B.resolve(o)}lookupMutationBatch(e,t){return B.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.br(t+1),s=i<0?0:i;return B.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return B.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return B.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Wr(t,0),i=new Wr(t,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),B.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new rn(rt);return t.forEach(i=>{const s=new Wr(i,0),o=new Wr(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),B.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;ye.isDocumentKey(s)||(s=s.child(""));const o=new Wr(new ye(s),0);let a=new rn(rt);return this.wr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(l.pr)),!0)},o),B.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach(r=>{const i=this.Sr(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Le(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let r=this.wr;return B.forEach(t.mutations,i=>{const s=new Wr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,t){const r=new Wr(t,0),i=this.wr.firstAfterOrEqual(r);return B.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return B.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class lue{constructor(e){this.vr=e,this.docs=new mn(ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return B.resolve(r?r.document.mutableCopy():Cn.newInvalidDocument(t))}getEntries(e,t){let r=ys();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Cn.newInvalidDocument(i))}),B.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=ys();const o=t.path,a=new ye(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:h}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||rR(X$(h),r)<=0||(i.has(h.key)||hy(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return B.resolve(s)}getAllFromCollectionGroup(e,t,r,i){De()}Fr(e,t){return B.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new cue(this)}getSize(e){return B.resolve(this.size)}}class cue extends Gz{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),B.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class uue{constructor(e){this.persistence=e,this.Mr=new xl(t=>hd(t),uy),this.lastRemoteSnapshotVersion=Be.min(),this.highestTargetId=0,this.Or=0,this.Nr=new kR,this.targetCount=0,this.Br=bd.Nn()}forEachTarget(e,t){return this.Mr.forEach((r,i)=>t(i)),B.resolve()}getLastRemoteSnapshotVersion(e){return B.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return B.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),B.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Or&&(this.Or=t),B.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new bd(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,B.resolve()}updateTargetData(e,t){return this.qn(t),B.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,B.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=t&&null===r.get(a.targetId)&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),B.waitFor(s).next(()=>i)}getTargetCount(e){return B.resolve(this.targetCount)}getTargetData(e,t){const r=this.Mr.get(t)||null;return B.resolve(r)}addMatchingKeys(e,t,r){return this.Nr.dr(t,r),B.resolve()}removeMatchingKeys(e,t,r){this.Nr.Rr(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),B.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),B.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Nr.gr(t);return B.resolve(r)}containsKey(e,t){return B.resolve(this.Nr.containsKey(t))}}class OR{constructor(e,t){this.Lr={},this.overlays={},this.kr=new Ls(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new uue(this),this.indexManager=new Zce,this.remoteDocumentCache=new lue(r=>this.referenceDelegate.Kr(r)),this.serializer=new Ez(t),this.$r=new sue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new oue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Lr[e.toKey()];return r||(r=new aue(t,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,r){ue("MemoryPersistence","Starting transaction:",e);const i=new due(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,t){return B.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,t)))}}class due extends eG{constructor(e){super(),this.currentSequenceNumber=e}}class F0{constructor(e){this.persistence=e,this.zr=new kR,this.jr=null}static Hr(e){return new F0(e)}get Jr(){if(this.jr)return this.jr;throw De()}addReference(e,t,r){return this.zr.addReference(r,t),this.Jr.delete(r.toString()),B.resolve()}removeReference(e,t,r){return this.zr.removeReference(r,t),this.Jr.add(r.toString()),B.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),B.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return B.forEach(this.Jr,r=>{const i=ye.fromPath(r);return this.Yr(e,i).next(s=>{s||t.removeEntry(i,Be.min())})}).next(()=>(this.jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Yr(e,t).next(r=>{r?this.Jr.delete(t.toString()):this.Jr.add(t.toString())})}Kr(e){return 0}Yr(e,t){return B.or([()=>B.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class hue{constructor(e){this.serializer=e}N(e,t,r,i){const s=new f0("createOrUpgrade",t);var l;r<1&&i>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iG,{unique:!0}),l.createObjectStore("documentMutations"),Zz(e),function(l){l.createObjectStore("remoteDocuments")}(e));let o=B.resolve();return r<3&&i>=3&&(0!==r&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),Zz(e)),o=o.next(()=>function(l){const c=l.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Be.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",h)}(s))),r<4&&i>=4&&(0!==r&&(o=o.next(()=>function(l,c){return c.store("mutations").W().next(h=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",iG,{unique:!0});const p=c.store("mutations"),g=h.map(_=>p.put(_));return B.waitFor(g)})}(e,s))),o=o.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(o=o.next(()=>this.Xr(s))),r<6&&i>=6&&(o=o.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.ei(s)))),r<7&&i>=7&&(o=o.next(()=>this.ti(s))),r<8&&i>=8&&(o=o.next(()=>this.ni(e,s))),r<9&&i>=9&&(o=o.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(o=o.next(()=>this.ri(s))),r<11&&i>=11&&(o=o.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(o=o.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:Yle});c.createIndex("collectionPathOverlayIndex",Xle,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Jle,{unique:!1})}(e)})),r<13&&i>=13&&(o=o.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:Ule});c.createIndex("documentKeyIndex",jle),c.createIndex("collectionGroupIndex",Hle)}(e)).next(()=>this.ii(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(o=o.next(()=>this.si(e,s))),r<15&&i>=15&&(o=o.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:Wle}).createIndex("sequenceNumberIndex",Kle,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:Qle}).createIndex("documentKeyIndex",Zle,{unique:!1})}(e))),o}ei(e){let t=0;return e.store("remoteDocuments").Y((r,i)=>{t+=N0(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>B.forEach(i,s=>{const o=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>B.forEach(a,l=>{Le(l.userId===s.userId);const c=_d(this.serializer,l);return Lz(e,s.userId,c).next(()=>{})}))}))}ti(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Y((o,a)=>{const l=new Pt(o),c=[0,Mi(l)];s.push(t.get(c).next(h=>h?B.resolve():t.put({targetId:0,path:Mi(l),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>B.waitFor(s))})}ni(e,t){e.createObjectStore("collectionParents",{keyPath:qle});const r=t.store("collectionParents"),i=new NR,s=o=>{if(i.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Mi(l)})}};return t.store("remoteDocuments").Y({J:!0},(o,a)=>{const l=new Pt(o);return s(l.popLast())}).next(()=>t.store("documentMutations").Y({J:!0},([o,a,l],c)=>{const h=Na(a);return s(h.popLast())}))}ri(e){const t=e.store("targets");return t.Y((r,i)=>{const s=wy(i),o=xz(this.serializer,s);return t.put(o)})}ii(e,t){const r=t.store("remoteDocuments"),i=[];return r.Y((s,o)=>{const a=t.store("remoteDocumentsV14"),l=(p=o,p.document?new ye(Pt.fromString(p.document.name).popFirst(5)):p.noDocument?ye.fromSegments(p.noDocument.path):p.unknownDocument?ye.fromSegments(p.unknownDocument.path):De()).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};var p;i.push(a.put(c))}).next(()=>B.waitFor(i))}si(e,t){const r=t.store("mutations"),i=zz(this.serializer),s=new OR(F0.Hr,this.serializer.ct);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var c;let h=null!==(c=a.get(l.userId))&&void 0!==c?c:mt();_d(this.serializer,l).keys().forEach(p=>h=h.add(p)),a.set(l.userId,h)}),B.forEach(a,(l,c)=>{const h=new zr(c),p=R0.lt(this.serializer,h),g=s.getIndexManager(h),_=k0.lt(h,this.serializer,g,s.referenceDelegate);return new Qz(i,_,p,g).recalculateAndSaveOverlaysForDocumentKeys(new oR(t,Ls._e),l).next()})})}}function Zz(n){n.createObjectStore("targetDocuments",{keyPath:Gle}).createIndex("documentTargetsIndex",zle,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$le,{unique:!0}),n.createObjectStore("targetGlobal")}const FR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class LR{constructor(e,t,r,i,s,o,a,l,c,h,p=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.oi=s,this.window=o,this.document=a,this._i=c,this.ai=h,this.ui=p,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=g=>Promise.resolve(),!LR.D())throw new le($.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tue(this,i),this.Ti=t+"main",this.serializer=new Ez(l),this.Ei=new co(this.Ti,this.ui,new hue(this.serializer)),this.Qr=new Xce(this.referenceDelegate,this.serializer),this.remoteDocumentCache=zz(this.serializer),this.$r=new Gce,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===h&&ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new le($.FAILED_PRECONDITION,FR);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new Ls(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){var t=this;return this.Ii=function(){var r=(0,X.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(function(){var t=(0,X.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((0,X.Z)(function*(){t.started&&(yield t.Ai())})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>V0(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(t=>this.isPrimary&&!t?this.yi(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Tc(e))return ue("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ue("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Ty(e).get("owner").next(t=>B.resolve(this.Si(t)))}bi(e){return V0(e).delete(this.clientId)}Di(){var e=this;return(0,X.Z)(function*(){if(e.isPrimary&&!e.Ci(e.Pi,18e5)){e.Pi=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=qr(r,"clientMetadata");return i.W().next(s=>{const o=e.vi(s,18e5),a=s.filter(l=>-1===o.indexOf(l));return B.forEach(a,l=>i.delete(l.clientId)).next(()=>a)})}).catch(()=>[]);if(e.di)for(const r of t)e.di.removeItem(e.Fi(r.clientId))}})()}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?B.resolve(!0):Ty(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new le($.FAILED_PRECONDITION,FR);return!1}}return!(!this.networkEnabled||!this.inForeground)||V0(e).W().next(r=>void 0===this.vi(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ue("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,X.Z)(function*(){e.qr=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Oi(),e.Ni(),yield e.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new oR(t,Ls._e);return e.yi(r).next(()=>e.bi(r))}),e.Ei.close(),e.Bi()})()}vi(e,t){return e.filter(r=>this.Ci(r.updateTimeMs,t)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>V0(e).W().next(t=>this.vi(t,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,t){return k0.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yce(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return R0.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,r){ue("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.ui)?tce:14===l?lG:13===l?aG:12===l?ece:11===l?oG:void De();var l;let o;return this.Ei.runTransaction(e,i,s,a=>(o=new oR(a,this.kr?this.kr.next():Ls._e),"readwrite-primary"===t?this.gi(o).next(l=>!!l||this.pi(o)).next(l=>{if(!l)throw ar(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new le($.FAILED_PRECONDITION,J$);return r(o)}).next(l=>this.wi(o).next(()=>l)):this.ki(o).next(()=>r(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}ki(e){return Ty(e).get("owner").next(t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new le($.FAILED_PRECONDITION,FR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ty(e).put("owner",t)}static D(){return co.D()}yi(e){const t=Ty(e);return t.get("owner").next(r=>this.Si(r)?(ue("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):B.resolve())}Ci(e,t){const r=Date.now();return!(e<r-t||e>r&&(ar(`Detected an update time that is in the future: ${e} > ${r}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,w.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const r=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return ue("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ar("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){ar("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch{}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Ty(n){return qr(n,"owner")}function V0(n){return qr(n,"clientMetadata")}function VR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class BR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.qi=r,this.Qi=i}static Ki(e,t){let r=mt(),i=mt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new BR(e,t.fromCache,r,i)}}class fue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Yz{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=(0,w.G6)()?8:co.v((0,w.z$)())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,r,i){const s={result:null};return this.ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,t,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new fue;return this.Ji(e,t,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,t,o,a.size)})}).next(()=>s.result)}Yi(e,t,r,i){return r.documentReadCount<this.Wi?(Xf()<=ks.in.DEBUG&&ue("QueryEngine","SDK will not create cache indexes for query:",ap(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),B.resolve()):(Xf()<=ks.in.DEBUG&&ue("QueryEngine","Query:",ap(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(Xf()<=ks.in.DEBUG&&ue("QueryEngine","The SDK decides to create cache indexes for query:",ap(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qi(t))):B.resolve())}ji(e,t){if(PG(t))return B.resolve(null);let r=Qi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=x0(t,null,"F"),r=Qi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=mt(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.Zi(t,a);return this.Xi(t,c,o,l.readTime)?this.ji(e,x0(t,null,"F")):this.es(e,c,t,l)}))})))}Hi(e,t,r,i){return PG(t)||i.isEqual(Be.min())?B.resolve(null):this.zi.getDocuments(e,r).next(s=>{const o=this.Zi(t,s);return this.Xi(t,o,r,i)?B.resolve(null):(Xf()<=ks.in.DEBUG&&ue("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ap(t)),this.es(e,o,t,Y$(i,-1)).next(a=>a))})}Zi(e,t){let r=new rn(FG(e));return t.forEach((i,s)=>{hy(e,s)&&(r=r.add(s))}),r}Xi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,t,r){return Xf()<=ks.in.DEBUG&&ue("QueryEngine","Using full collection scan to execute query:",ap(t)),this.zi.getDocumentsMatchingQuery(e,t,Fs.min(),r)}es(e,t,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}class pue{constructor(e,t,r,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new mn(rt),this.rs=new xl(s=>hd(s),uy),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qz(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ns))}}function Xz(n,e,t,r){return new pue(n,e,t,r)}function Jz(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,X.Z)(function*(n,e){const t=_e(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t._s(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let l=mt();for(const c of i){o.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}for(const c of s){a.push(c.batchId);for(const h of c.mutations)l=l.add(h.key)}return t.localDocuments.getDocuments(r,l).next(c=>({us:c,removedBatchIds:o,addedBatchIds:a}))})})}),UR.apply(this,arguments)}function e4(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Qr.getLastRemoteSnapshotVersion(t))}function t4(n,e,t){let r=mt(),i=mt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let o=ys();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),l.isNoDocument()&&l.version.isEqual(Be.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||0===l.version.compareTo(c.version)&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ue("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{cs:o,ls:i}})}function _ue(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yp(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Qr.getTargetData(r,e).next(s=>s?(i=s,B.resolve(i)):t.Qr.allocateTargetId(r).next(o=>(i=new Cl(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ns.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ns=t.ns.insert(r.targetId,r),t.rs.set(e,r.targetId)),r})}function vp(n,e,t){return jR.apply(this,arguments)}function jR(){return jR=(0,X.Z)(function*(n,e,t){const r=_e(n),i=r.ns.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Tc(o))throw o;ue("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)}),jR.apply(this,arguments)}function B0(n,e,t){const r=_e(n);let i=Be.min(),s=mt();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,h){const p=_e(l),g=p.rs.get(h);return void 0!==g?B.resolve(p.ns.get(g)):p.Qr.getTargetData(c,h)}(r,o,Qi(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,t?i:Be.min(),t?s:mt())).next(a=>(i4(r,OG(e),a),{documents:a,hs:s})))}function n4(n,e){const t=_e(n),r=_e(t.Qr),i=t.ns.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r._t(s,e).next(o=>o?o.target:null))}function r4(n,e){const t=_e(n),r=t.ss.get(e)||Be.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.os.getAllFromCollectionGroup(i,e,Y$(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(i4(t,e,i),i))}function i4(n,e,t){let r=n.ss.get(e)||Be.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.ss.set(e,r)}function HR(){return HR=(0,X.Z)(function*(n,e,t,r){const i=_e(n);let s=mt(),o=ys();for(const c of t){const h=e.Ps(c.metadata.name);c.document&&(s=s.add(h));const p=e.Is(c);p.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(h,p)}const a=i.os.newChangeBuffer({trackRemovals:!0}),l=yield yp(i,(h=r,Qi(sp(Pt.fromString(`__bundle__/docs/${h}`)))));var h;return i.persistence.runTransaction("Apply bundle documents","readwrite",c=>t4(c,a,o).next(h=>(a.apply(c),h)).next(h=>i.Qr.removeMatchingKeysForTargetId(c,l.targetId).next(()=>i.Qr.addMatchingKeys(c,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(c,h.cs,h.ls)).next(()=>h.cs)))}),HR.apply(this,arguments)}function vue(n,e){return $R.apply(this,arguments)}function $R(){return $R=(0,X.Z)(function*(n,e,t=mt()){const r=yield yp(n,Qi(TR(e.bundledQuery))),i=_e(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const o=lr(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(s,e);const a=r.withResumeToken(Fr.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(s,a).next(()=>i.Qr.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Qr.addMatchingKeys(s,t,r.targetId)).next(()=>i.$r.saveNamedQuery(s,e))})}),$R.apply(this,arguments)}function s4(n,e){return`firestore_clients_${n}_${e}`}function o4(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function GR(n,e){return`firestore_targets_${n}_${e}`}class U0{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Es(e,t,r){const i=JSON.parse(r);let s,o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code,o&&(s=new le(i.error.code,i.error.message))),o?new U0(e,t,i.state,s):(ar("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dy{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Es(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new le(r.error.code,r.error.message))),s?new Dy(e,r.state,i):(ar("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class j0{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=mR();for(let o=0;i&&o<r.activeTargetIds.length;++o)i=nG(r.activeTargetIds[o]),s=s.add(r.activeTargetIds[o]);return i?new j0(e,s):(ar("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zR{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zR(t.clientId,t.onlineState):(ar("SharedClientState",`Failed to parse online state: ${e}`),null)}}class qR{constructor(){this.activeTargetIds=mR()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WR{constructor(e,t,r,i,s){this.window=e,this.oi=t,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new mn(rt),this.started=!1,this.ys=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ws=s4(this.persistenceKey,this.Vs),this.Ss=`firestore_sequence_number_${this.persistenceKey}`,this.ps=this.ps.insert(this.Vs,new qR),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=`firestore_online_state_${this.persistenceKey}`,this.Fs=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,X.Z)(function*(){const t=yield e.syncEngine.Li();for(const i of t){if(i===e.Vs)continue;const s=e.getItem(s4(e.persistenceKey,i));if(s){const o=j0.Es(i,s);o&&(e.ps=e.ps.insert(o.clientId,o))}}e.Ms();const r=e.storage.getItem(e.vs);if(r){const i=e.xs(r);i&&e.Os(i)}for(const i of e.ys)e.gs(i);e.ys=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,r){this.Bs(e,t,r),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(GR(this.persistenceKey,e));if(r){const i=Dy.Es(e,r);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(GR(this.persistenceKey,e))}updateQueryState(e,t,r){this.qs(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ue("SharedClientState","READ",e,t),t}setItem(e,t){ue("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ue("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ue("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ws)return void ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((0,X.Z)(function*(){if(t.started){if(null!==r.key)if(t.bs.test(r.key)){if(null==r.newValue){const i=t.$s(r.key);return t.Us(i,null)}{const i=t.Ws(r.key,r.newValue);if(i)return t.Us(i.clientId,i)}}else if(t.Ds.test(r.key)){if(null!==r.newValue){const i=t.Gs(r.key,r.newValue);if(i)return t.zs(i)}}else if(t.Cs.test(r.key)){if(null!==r.newValue){const i=t.js(r.key,r.newValue);if(i)return t.Hs(i)}}else if(r.key===t.vs){if(null!==r.newValue){const i=t.xs(r.newValue);if(i)return t.Os(i)}}else if(r.key===t.Ss){const i=function(o){let a=Ls._e;if(null!=o)try{const l=JSON.parse(o);Le("number"==typeof l),a=l}catch(l){ar("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(r.newValue);i!==Ls._e&&t.sequenceNumberHandler(i)}else if(r.key===t.Fs){const i=t.Js(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Ys(s)))}}else t.ys.push(r)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,r){const i=new U0(this.currentUser,e,t,r),s=o4(this.persistenceKey,this.currentUser,e);this.setItem(s,i.ds())}Ls(e){const t=o4(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){this.storage.setItem(this.vs,JSON.stringify({clientId:this.Vs,onlineState:e}))}qs(e,t,r){const i=GR(this.persistenceKey,e),s=new Dy(e,t,r);this.setItem(i,s.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const r=this.$s(e);return j0.Es(r,t)}Gs(e,t){const r=this.Ds.exec(e),i=Number(r[1]);return U0.Es(new zr(void 0!==r[2]?r[2]:null),i,t)}js(e,t){const r=this.Cs.exec(e),i=Number(r[1]);return Dy.Es(i,t)}xs(e){return zR.Es(e)}Js(e){return JSON.parse(e)}zs(e){var t=this;return(0,X.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Zs(e.batchId,e.state,e.error);ue("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const r=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),s=this.Ns(r),o=[],a=[];return s.forEach(l=>{i.has(l)||o.push(l)}),i.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.eo(o,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=mR();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class a4{constructor(){this.no=new qR,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,r){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new qR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class bue{io(e){}shutdown(){}}class l4{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){ue("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){ue("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let H0=null;function KR(){return null===H0?H0=268435456+Math.round(2147483648*Math.random()):H0++,"0x"+H0.toString(16)}const Eue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class wue{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const Ni="WebChannelConnection";class xue extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+t.host,this.po=`projects/${i}/databases/${s}`,this.yo="(default)"===this.databaseId.database?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get wo(){return!1}So(t,r,i,s,o){const a=KR(),l=this.bo(t,r.toUriEncodedString());ue("RestConnection",`Sending RPC '${t}' ${a}:`,l,i);const c={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(c,s,o),this.Co(t,l,c,i).then(h=>(ue("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw gs("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",l,"request:",i),h})}vo(t,r,i,s,o,a){return this.So(t,r,i,s,o)}Do(t,r,i){t["X-Goog-Api-Client"]="gl-js/ fire/"+Yf,t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>t[o]=s),i&&i.headers.forEach((s,o)=>t[o]=s)}bo(t,r){return`${this.fo}/v1/${r}:${Eue[t]}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,r,i){const s=KR();return new Promise((o,a)=>{const l=new ble;l.setWithCredentials(!0),l.listenOnce(yle.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case eR.NO_ERROR:const h=l.getResponseJson();ue(Ni,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case eR.TIMEOUT:ue(Ni,`RPC '${e}' ${s} timed out`),a(new le($.DEADLINE_EXCEEDED,"Request time out"));break;case eR.HTTP_ERROR:const p=l.getStatus();if(ue(Ni,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let g=l.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g?.error;if(_&&_.status&&_.message){const v=function(x){const M=x.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(M)>=0?M:$.UNKNOWN}(_.status);a(new le(v,_.message))}else a(new le($.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new le($.UNAVAILABLE,"Connection failed."));break;default:De()}}finally{ue(Ni,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);ue(Ni,`RPC '${e}' ${s} sending request:`,i),l.send(t,"POST",c,r,15)})}Fo(e,t,r){const i=KR(),s=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=gle(),a=_le(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const h=s.join("");ue(Ni,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);let g=!1,_=!1;const v=new wue({lo:x=>{_?ue(Ni,`Not sending because RPC '${e}' stream ${i} is closed:`,x):(g||(ue(Ni,`Opening RPC '${e}' stream ${i} transport.`),p.open(),g=!0),ue(Ni,`RPC '${e}' stream ${i} sending:`,x),p.send(x))},ho:()=>p.close()}),E=(x,M,D)=>{x.listen(M,k=>{try{D(k)}catch(G){setTimeout(()=>{throw G},0)}})};return E(p,h0.EventType.OPEN,()=>{_||ue(Ni,`RPC '${e}' stream ${i} transport opened.`)}),E(p,h0.EventType.CLOSE,()=>{_||(_=!0,ue(Ni,`RPC '${e}' stream ${i} transport closed`),v.Vo())}),E(p,h0.EventType.ERROR,x=>{_||(_=!0,gs(Ni,`RPC '${e}' stream ${i} transport errored:`,x),v.Vo(new le($.UNAVAILABLE,"The operation could not be completed")))}),E(p,h0.EventType.MESSAGE,x=>{var M;if(!_){const D=x.data[0];Le(!!D);const G=D.error||(null===(M=D[0])||void 0===M?void 0:M.error);if(G){ue(Ni,`RPC '${e}' stream ${i} received error:`,G);const de=G.status;let Se=function(di){const _o=Er[di];if(void 0!==_o)return ez(_o)}(de),it=G.message;void 0===Se&&(Se=$.INTERNAL,it="Unknown error status: "+de+" with message "+G.message),_=!0,v.Vo(new le(Se,it)),p.close()}else ue(Ni,`RPC '${e}' stream ${i} received:`,D),v.mo(D)}}),E(a,vle.STAT_EVENT,x=>{x.stat===z$.PROXY?ue(Ni,`RPC '${e}' stream ${i} detected buffering proxy`):x.stat===z$.NOPROXY&&ue(Ni,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{v.Ro()},0),v}}function c4(){return typeof window<"u"?window:null}function $0(){return typeof document<"u"?document:null}function Sy(n){return new Nce(n,!0)}class QR{constructor(e,t,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=t,this.Mo=r,this.xo=i,this.Oo=s,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,t-r);i>0&&ue("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}class u4{constructor(e,t,r,i,s,o,a,l){this.oi=e,this.$o=r,this.Uo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new QR(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}stop(){var e=this;return(0,X.Z)(function*(){e.Ho()&&(yield e.close(0))})()}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}e_(){var e=this;return(0,X.Z)(function*(){if(e.Jo())return e.close(0)})()}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}close(e,t){var r=this;return(0,X.Z)(function*(){r.n_(),r.r_(),r.jo.cancel(),r.Wo++,4!==e?r.jo.reset():t&&t.code===$.RESOURCE_EXHAUSTED?(ar(t.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),r.jo.ko()):t&&t.code===$.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.i_(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.To(t)})()}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===t&&this.o_(r,i)},r=>{e(()=>{const i=new le($.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,t){const r=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){var e=this;this.state=5,this.jo.qo((0,X.Z)(function*(){e.state=0,e.start()}))}__(e){return ue("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget(()=>this.Wo===e?t():(ue("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Iue extends u4{constructor(e,t,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function Fce(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:De(),i=e.targetChange.targetIds||[],s=function(c,h){return c.useProto3Json?(Le(void 0===h||"string"==typeof h),Fr.fromBase64String(h||"")):(Le(void 0===h||h instanceof Uint8Array),Fr.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=void 0===c.code?$.UNKNOWN:ez(c.code);return new le(h,c.message||"")}(o);t=new sz(r,i,s,a||null)}else if("documentChange"in e){const r=e.documentChange,i=Fa(n,r.document.name),s=lr(r.document.updateTime),o=r.document.createTime?lr(r.document.createTime):Be.min(),a=new li({mapValue:{fields:r.document.fields}}),l=Cn.newFoundDocument(i,s,o,a);t=new D0(r.targetIds||[],r.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const r=e.documentDelete,i=Fa(n,r.document),s=r.readTime?lr(r.readTime):Be.min(),o=Cn.newNoDocument(i,s);t=new D0([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in e){const r=e.documentRemove,i=Fa(n,r.document);t=new D0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return De();{const r=e.filter,{count:i=0,unchangedNames:s}=r,o=new Tce(i,s);t=new iz(r.targetId,o)}}var c;return t}(this.serializer,e),r=function(s){if(!("targetChange"in s))return Be.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Be.min():o.readTime?lr(o.readTime):Be.min()}(e);return this.listener.u_(t,r)}c_(e){const t={};t.database=IR(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=E0(l)?{documents:gz(s,l)}:{query:AR(s,l).ut},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=cz(s,o.resumeToken);const c=ER(s,o.expectedCount);null!==c&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Be.min())>0){a.readTime=hp(s,o.snapshotVersion.toTimestamp());const c=ER(s,o.expectedCount);null!==c&&(a.expectedCount=c)}return a}(this.serializer,e);const r=function Vce(n,e){const t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return De()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.t_(t)}l_(e){const t={};t.database=IR(this.serializer),t.removeTarget=e,this.t_(t)}}class Cue extends u4{constructor(e,t,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,o),this.serializer=s,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function Lce(n,e){return n&&n.length>0?(Le(void 0!==e),n.map(t=>function(i,s){let o=lr(i.updateTime?i.updateTime:s);return o.isEqual(Be.min())&&(o=lr(s)),new xce(o,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=lr(e.commitTime);return this.listener.T_(r,t)}return Le(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=IR(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Ey(this.serializer,r))};this.t_(t)}}class Aue extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new le($.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.So(e,xR(t,r),i,s,o)).catch(s=>{throw"FirebaseError"===s.name?(s.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new le($.UNKNOWN,s.toString())})}vo(e,t,r,i,s){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.vo(e,xR(t,r),i,o,a,s)).catch(o=>{throw"FirebaseError"===o.name?(o.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new le($.UNKNOWN,o.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Due{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(ar(t),this.g_=!1):ue("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Sue{constructor(e,t,r,i,s){var o=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=s,this.M_.io(a=>{r.enqueueAndForget((0,X.Z)(function*(){var l;Bc(o)&&(ue("RemoteStore","Restarting streams for network reachability change."),yield(l=(0,X.Z)(function*(h){const p=_e(h);p.v_.add(4),yield bp(p),p.x_.set("Unknown"),p.v_.delete(4),yield Ry(p)}),function c(h){return l.apply(this,arguments)})(o))}))}),this.x_=new Due(r,i)}}function Ry(n){return YR.apply(this,arguments)}function YR(){return YR=(0,X.Z)(function*(n){if(Bc(n))for(const e of n.F_)yield e(!0)}),YR.apply(this,arguments)}function bp(n){return XR.apply(this,arguments)}function XR(){return XR=(0,X.Z)(function*(n){for(const e of n.F_)yield e(!1)}),XR.apply(this,arguments)}function G0(n,e){const t=_e(n);t.C_.has(e.targetId)||(t.C_.set(e.targetId,e),tM(t)?eM(t):wp(t).Jo()&&JR(t,e))}function My(n,e){const t=_e(n),r=wp(t);t.C_.delete(e),r.Jo()&&d4(t,e),0===t.C_.size&&(r.Jo()?r.Xo():Bc(t)&&t.x_.set("Unknown"))}function JR(n,e){if(n.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Be.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wp(n).c_(e)}function d4(n,e){n.O_.Oe(e),wp(n).l_(e)}function eM(n){n.O_=new Sce({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>n.C_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),wp(n).start(),n.x_.p_()}function tM(n){return Bc(n)&&!wp(n).Ho()&&n.C_.size>0}function Bc(n){return 0===_e(n).v_.size}function h4(n){n.O_=void 0}function Rue(n){return nM.apply(this,arguments)}function nM(){return nM=(0,X.Z)(function*(n){n.C_.forEach((e,t)=>{JR(n,e)})}),nM.apply(this,arguments)}function Mue(n,e){return rM.apply(this,arguments)}function rM(){return rM=(0,X.Z)(function*(n,e){h4(n),tM(n)?(n.x_.S_(e),eM(n)):n.x_.set("Unknown")}),rM.apply(this,arguments)}function Pue(n,e,t){return iM.apply(this,arguments)}function iM(){return iM=(0,X.Z)(function*(n,e,t){if(n.x_.set("Online"),e instanceof sz&&2===e.state&&e.cause)try{yield(r=(0,X.Z)(function*(s,o){const a=o.cause;for(const l of o.targetIds)s.C_.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.C_.delete(l),s.O_.removeTarget(l))}),function i(s,o){return r.apply(this,arguments)})(n,e)}catch(r){ue("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield z0(n,r)}else if(e instanceof D0?n.O_.$e(e):e instanceof iz?n.O_.Je(e):n.O_.Ge(e),!t.isEqual(Be.min()))try{const r=yield e4(n.localStore);t.compareTo(r)>=0&&(yield function(s,o){const a=s.O_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.C_.get(c);h&&s.C_.set(c,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const h=s.C_.get(l);if(!h)return;s.C_.set(l,h.withResumeToken(Fr.EMPTY_BYTE_STRING,h.snapshotVersion)),d4(s,l);const p=new Cl(h.target,l,c,h.sequenceNumber);JR(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){ue("RemoteStore","Failed to raise snapshot:",r),yield z0(n,r)}var r}),iM.apply(this,arguments)}function z0(n,e,t){return sM.apply(this,arguments)}function sM(){return sM=(0,X.Z)(function*(n,e,t){if(!Tc(e))throw e;n.v_.add(1),yield bp(n),n.x_.set("Offline"),t||(t=()=>e4(n.localStore)),n.asyncQueue.enqueueRetryable((0,X.Z)(function*(){ue("RemoteStore","Retrying IndexedDB access"),yield t(),n.v_.delete(1),yield Ry(n)}))}),sM.apply(this,arguments)}function f4(n,e){return e().catch(t=>z0(n,t,e))}function Ep(n){return oM.apply(this,arguments)}function oM(){return oM=(0,X.Z)(function*(n){const e=_e(n),t=Uc(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;Nue(e);)try{const i=yield _ue(e.localStore,r);if(null===i){0===e.D_.length&&t.Xo();break}r=i.batchId,kue(e,i)}catch(i){yield z0(e,i)}p4(e)&&m4(e)}),oM.apply(this,arguments)}function Nue(n){return Bc(n)&&n.D_.length<10}function kue(n,e){n.D_.push(e);const t=Uc(n);t.Jo()&&t.P_&&t.I_(e.mutations)}function p4(n){return Bc(n)&&!Uc(n).Ho()&&n.D_.length>0}function m4(n){Uc(n).start()}function Oue(n){return aM.apply(this,arguments)}function aM(){return aM=(0,X.Z)(function*(n){Uc(n).d_()}),aM.apply(this,arguments)}function Fue(n){return lM.apply(this,arguments)}function lM(){return lM=(0,X.Z)(function*(n){const e=Uc(n);for(const t of n.D_)e.I_(t.mutations)}),lM.apply(this,arguments)}function Lue(n,e,t){return cM.apply(this,arguments)}function cM(){return cM=(0,X.Z)(function*(n,e,t){const r=n.D_.shift(),i=yR.from(r,e,t);yield f4(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ep(n)}),cM.apply(this,arguments)}function Vue(n,e){return uM.apply(this,arguments)}function uM(){return uM=(0,X.Z)(function*(n,e){var t;e&&Uc(n).P_&&(yield(t=(0,X.Z)(function*(i,s){if(JG(a=s.code)&&a!==$.ABORTED){const o=i.D_.shift();Uc(i).Zo(),yield f4(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),yield Ep(i)}var a}),function r(i,s){return t.apply(this,arguments)})(n,e)),p4(n)&&m4(n)}),uM.apply(this,arguments)}function g4(n,e){return dM.apply(this,arguments)}function dM(){return dM=(0,X.Z)(function*(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),ue("RemoteStore","RemoteStore received new credentials");const r=Bc(t);t.v_.add(3),yield bp(t),r&&t.x_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.v_.delete(3),yield Ry(t)}),dM.apply(this,arguments)}function hM(n,e){return fM.apply(this,arguments)}function fM(){return fM=(0,X.Z)(function*(n,e){const t=_e(n);e?(t.v_.delete(2),yield Ry(t)):e||(t.v_.add(2),yield bp(t),t.x_.set("Unknown"))}),fM.apply(this,arguments)}function wp(n){return n.N_||(n.N_=function(t,r,i){const s=_e(t);return s.R_(),new Iue(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:Rue.bind(null,n),To:Mue.bind(null,n),u_:Pue.bind(null,n)}),n.F_.push(function(){var e=(0,X.Z)(function*(t){t?(n.N_.Zo(),tM(n)?eM(n):n.x_.set("Unknown")):(yield n.N_.stop(),h4(n))});return function(t){return e.apply(this,arguments)}}())),n.N_}function Uc(n){return n.B_||(n.B_=function(t,r,i){const s=_e(t);return s.R_(),new Cue(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(n.datastore,n.asyncQueue,{Po:Oue.bind(null,n),To:Vue.bind(null,n),E_:Fue.bind(null,n),T_:Lue.bind(null,n)}),n.F_.push(function(){var e=(0,X.Z)(function*(t){t?(n.B_.Zo(),yield Ep(n)):(yield n.B_.stop(),n.D_.length>0&&(ue("RemoteStore",`Stopping write stream with ${n.D_.length} pending writes`),n.D_=[]))});return function(t){return e.apply(this,arguments)}}())),n.B_}class pM{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,s){const o=Date.now()+r,a=new pM(e,t,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new le($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xp(n,e){if(ar("AsyncQueue",`${e}: ${n}`),Tc(n))return new le($.UNAVAILABLE,`${e}: ${n}`);throw n}class Ip{constructor(e){this.comparator=e?(t,r)=>e(t,r)||ye.comparator(t.key,r.key):(t,r)=>ye.comparator(t.key,r.key),this.keyedMap=fy(),this.sortedSet=new mn(this.comparator)}static emptySet(e){return new Ip(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ip)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Ip;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class _4{constructor(){this.L_=new mn(ye.comparator)}track(e){const t=e.doc.key,r=this.L_.get(t);r?0!==e.type&&3===r.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==r.type?this.L_=this.L_.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.L_=this.L_.remove(t):1===e.type&&2===r.type?this.L_=this.L_.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):De():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Cp{constructor(e,t,r,i,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,i,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new Cp(e,t,Ip.emptySet(t),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&dy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class Bue{constructor(){this.q_=void 0,this.Q_=[]}}class Uue{constructor(){this.queries=new xl(e=>kG(e),dy),this.onlineState="Unknown",this.K_=new Set}}function mM(n,e){return gM.apply(this,arguments)}function gM(){return gM=(0,X.Z)(function*(n,e){const t=_e(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new Bue),i)try{s.q_=yield t.onListen(r)}catch(o){const a=xp(o,`Initialization of query '${ap(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.Q_.push(e),e.U_(t.onlineState),s.q_&&e.W_(s.q_)&&vM(t)}),gM.apply(this,arguments)}function _M(n,e){return yM.apply(this,arguments)}function yM(){return yM=(0,X.Z)(function*(n,e){const t=_e(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const o=s.Q_.indexOf(e);o>=0&&(s.Q_.splice(o,1),i=0===s.Q_.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),yM.apply(this,arguments)}function jue(n,e){const t=_e(n);let r=!1;for(const i of e){const o=t.queries.get(i.query);if(o){for(const a of o.Q_)a.W_(i)&&(r=!0);o.q_=i}}r&&vM(t)}function Hue(n,e,t){const r=_e(n),i=r.queries.get(e);if(i)for(const s of i.Q_)s.onError(t);r.queries.delete(e)}function vM(n){n.K_.forEach(e=>{e.next()})}class bM{constructor(e,t,r){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Cp(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){return!e.fromCache||(!this.options.Z_||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Y_(e){e=Cp.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}class $ue{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}class y4{constructor(e){this.serializer=e}Ps(e){return Fa(this.serializer,e)}Is(e){return e.metadata.exists?mz(this.serializer,e.document,!1):Cn.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return lr(e)}}class Gue{constructor(e,t,r){this.ta=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=v4(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const r=Pt.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,r=new y4(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.Ps(i.metadata.name);for(const o of i.metadata.queries){const a=(t.get(o)||mt()).add(s);t.set(o,a)}}return t}complete(){var e=this;return(0,X.Z)(function*(){const t=yield function yue(n,e,t,r){return HR.apply(this,arguments)}(e.localStore,new y4(e.serializer),e.documents,e.ta.id),r=e.ra(e.documents);for(const i of e.queries)yield vue(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,ia:e.collectionGroups,sa:t}})()}}function v4(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class b4{constructor(e){this.key=e}}class E4{constructor(e){this.key=e}}class w4{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=mt(),this.mutatedKeys=mt(),this.ua=FG(e),this.ca=new Ip(this.ua)}get la(){return this.oa}ha(e,t){const r=t?t.Pa:new _4,i=t?t.ca:this.ca;let s=t?t.mutatedKeys:this.mutatedKeys,o=i,a=!1;const l="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{const g=i.get(h),_=hy(this.query,p)?p:null,v=!!g&&this.mutatedKeys.has(g.key),E=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let x=!1;g&&_?g.data.isEqual(_.data)?v!==E&&(r.track({type:3,doc:_}),x=!0):this.Ia(g,_)||(r.track({type:2,doc:_}),x=!0,(l&&this.ua(_,l)>0||c&&this.ua(_,c)<0)&&(a=!0)):!g&&_?(r.track({type:0,doc:_}),x=!0):g&&!_&&(r.track({type:1,doc:g}),x=!0,(l||c)&&(a=!0)),x&&(_?(o=o.add(_),s=E?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),null!==this.query.limit)for(;o.size>this.query.limit;){const h="F"===this.query.limitType?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{ca:o,Pa:r,Xi:a,mutatedKeys:s}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){const s=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort((h,p)=>function(_,v){const E=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return De()}};return E(_)-E(v)}(h.type,p.type)||this.ua(h.doc,p.doc)),this.Ta(r),i=null!=i&&i;const a=t&&!i?this.Ea():[],l=0===this.aa.size&&this.current&&!i?1:0,c=l!==this._a;return this._a=l,0!==o.length||c?{snapshot:new Cp(this.query,e.ca,s,o,e.mutatedKeys,0===l,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new _4,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(t=>this.oa=this.oa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.oa=this.oa.delete(t)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=mt(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const t=[];return e.forEach(r=>{this.aa.has(r)||t.push(new E4(r))}),this.aa.forEach(r=>{e.has(r)||t.push(new b4(r))}),t}Ra(e){this.oa=e.hs,this.aa=mt();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return Cp.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class zue{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class que{constructor(e){this.key=e,this.ma=!1}}class Wue{constructor(e,t,r,i,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new xl(a=>kG(a),dy),this.pa=new Map,this.ya=new Set,this.wa=new mn(ye.comparator),this.Sa=new Map,this.ba=new kR,this.Da={},this.Ca=new Map,this.va=bd.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}function Kue(n,e){return EM.apply(this,arguments)}function EM(){return EM=(0,X.Z)(function*(n,e){const t=GM(n);let r,i;const s=t.ga.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.Va();else{const o=yield yp(t.localStore,Qi(e)),a=t.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=yield wM(t,e,r,"current"===a,o.resumeToken),t.isPrimaryClient&&G0(t.remoteStore,o)}return i}),EM.apply(this,arguments)}function wM(n,e,t,r,i){return xM.apply(this,arguments)}function xM(){return xM=(0,X.Z)(function*(n,e,t,r,i){n.Ma=(p,g,_)=>{return(v=(0,X.Z)(function*(x,M,D,k){let G=M.view.ha(D);G.Xi&&(G=yield B0(x.localStore,M.query,!1).then(({documents:Kt})=>M.view.ha(Kt,G)));const de=k&&k.targetChanges.get(M.targetId),Se=k&&null!=k.targetMismatches.get(M.targetId),it=M.view.applyChanges(G,x.isPrimaryClient,de,Se);return NM(x,M.targetId,it.da),it.snapshot}),function E(x,M,D,k){return v.apply(this,arguments)})(n,p,g,_);var v};const s=yield B0(n.localStore,e,!0),o=new w4(e,s.hs),a=o.ha(s.documents),l=vy.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),c=o.applyChanges(a,n.isPrimaryClient,l);NM(n,t,c.da);const h=new zue(e,t,o);return n.ga.set(e,h),n.pa.has(t)?n.pa.get(t).push(e):n.pa.set(t,[e]),c.snapshot}),xM.apply(this,arguments)}function Que(n,e){return IM.apply(this,arguments)}function IM(){return IM=(0,X.Z)(function*(n,e){const t=_e(n),r=t.ga.get(e),i=t.pa.get(r.targetId);if(i.length>1)return t.pa.set(r.targetId,i.filter(s=>!dy(s,e))),void t.ga.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield vp(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),My(t.remoteStore,r.targetId),Ap(t,r.targetId)}).catch(Ac))):(Ap(t,r.targetId),yield vp(t.localStore,r.targetId,!0))}),IM.apply(this,arguments)}function CM(){return CM=(0,X.Z)(function*(n,e,t){const r=zM(n);try{const i=yield function(o,a){const l=_e(o),c=On.now(),h=a.reduce((_,v)=>_.add(v.key),mt());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",_=>{let v=ys(),E=mt();return l.os.getEntries(_,h).next(x=>{v=x,v.forEach((M,D)=>{D.isValidDocument()||(E=E.add(M))})}).next(()=>l.localDocuments.getOverlayedDocuments(_,v)).next(x=>{p=x;const M=[];for(const D of a){const k=Cce(D,p.get(D.key).overlayedDocument);null!=k&&M.push(new Il(D.key,k,vG(k.value.mapValue),Fn.exists(!0)))}return l.mutationQueue.addMutationBatch(_,c,M,a)}).next(x=>{g=x;const M=x.applyToLocalDocumentSet(p,E);return l.documentOverlayCache.saveOverlays(_,x.batchId,M)})}).then(()=>({batchId:g.batchId,changes:VG(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,l){let c=o.Da[o.currentUser.toKey()];c||(c=new mn(rt)),c=c.insert(a,l),o.Da[o.currentUser.toKey()]=c}(r,i.batchId,t),yield Al(r,i.changes),yield Ep(r.remoteStore)}catch(i){const s=xp(i,"Failed to persist write");t.reject(s)}}),CM.apply(this,arguments)}function x4(n,e){return AM.apply(this,arguments)}function AM(){return AM=(0,X.Z)(function*(n,e){const t=_e(n);try{const r=yield function gue(n,e){const t=_e(n),r=e.snapshotVersion;let i=t.ns;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.os.newChangeBuffer({trackRemovals:!0});i=t.ns;const a=[];e.targetChanges.forEach((h,p)=>{const g=i.get(p);if(!g)return;a.push(t.Qr.removeMatchingKeys(s,h.removedDocuments,p).next(()=>t.Qr.addMatchingKeys(s,h.addedDocuments,p)));let _=g.withSequenceNumber(s.currentSequenceNumber);var E,x,M;null!==e.targetMismatches.get(p)?_=_.withResumeToken(Fr.EMPTY_BYTE_STRING,Be.min()).withLastLimboFreeSnapshotVersion(Be.min()):h.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(h.resumeToken,r)),i=i.insert(p,_),x=_,M=h,(0===(E=g).resumeToken.approximateByteSize()||x.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8||M.addedDocuments.size+M.modifiedDocuments.size+M.removedDocuments.size>0)&&a.push(t.Qr.updateTargetData(s,_))});let l=ys(),c=mt();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(t4(s,o,e.documentUpdates).next(h=>{l=h.cs,c=h.ls})),!r.isEqual(Be.min())){const h=t.Qr.getLastRemoteSnapshotVersion(s).next(p=>t.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return B.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.ns=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const o=t.Sa.get(s);o&&(Le(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.ma=!0:i.modifiedDocuments.size>0?Le(o.ma):i.removedDocuments.size>0&&(Le(o.ma),o.ma=!1))}),yield Al(t,r,e)}catch(r){yield Ac(r)}}),AM.apply(this,arguments)}function I4(n,e,t){const r=_e(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ga.forEach((s,o)=>{const a=o.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const l=_e(o);l.onlineState=a;let c=!1;l.queries.forEach((h,p)=>{for(const g of p.Q_)g.U_(a)&&(c=!0)}),c&&vM(l)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Yue(n,e,t){return TM.apply(this,arguments)}function TM(){return TM=(0,X.Z)(function*(n,e,t){const r=_e(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Sa.get(e),s=i&&i.key;if(s){let o=new mn(ye.comparator);o=o.insert(s,Cn.newNoDocument(s,Be.min()));const a=mt().add(s),l=new yy(Be.min(),new Map,new mn(rt),o,a);yield x4(r,l),r.wa=r.wa.remove(s),r.Sa.delete(e),kM(r)}else yield vp(r.localStore,e,!1).then(()=>Ap(r,e,t)).catch(Ac)}),TM.apply(this,arguments)}function Xue(n,e){return DM.apply(this,arguments)}function DM(){return DM=(0,X.Z)(function*(n,e){const t=_e(n),r=e.batch.batchId;try{const i=yield function mue(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.os.newChangeBuffer({trackRemovals:!0});return function(a,l,c,h){const p=c.batch,g=p.keys();let _=B.resolve();return g.forEach(v=>{_=_.next(()=>h.getEntry(l,v)).next(E=>{const x=c.docVersions.get(v);Le(null!==x),E.version.compareTo(x)<0&&(p.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),h.addEntry(E)))})}),_.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=mt();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);PM(t,r,null),MM(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Al(t,i)}catch(i){yield Ac(i)}}),DM.apply(this,arguments)}function Jue(n,e,t){return SM.apply(this,arguments)}function SM(){return SM=(0,X.Z)(function*(n,e,t){const r=_e(n);try{const i=yield function(o,a){const l=_e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(Le(null!==p),h=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>l.localDocuments.getDocuments(c,h))})}(r.localStore,e);PM(r,e,t),MM(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Al(r,i)}catch(i){yield Ac(i)}}),SM.apply(this,arguments)}function RM(){return RM=(0,X.Z)(function*(n,e){const t=_e(n);Bc(t.remoteStore)||ue("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(o){const a=_e(o);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ca.get(r)||[];i.push(e),t.Ca.set(r,i)}catch(r){const i=xp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),RM.apply(this,arguments)}function MM(n,e){(n.Ca.get(e)||[]).forEach(t=>{t.resolve()}),n.Ca.delete(e)}function PM(n,e,t){const r=_e(n);let i=r.Da[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function Ap(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.pa.get(e))n.ga.delete(r),t&&n.fa.xa(r,t);n.pa.delete(e),n.isPrimaryClient&&n.ba.Vr(e).forEach(r=>{n.ba.containsKey(r)||C4(n,r)})}function C4(n,e){n.ya.delete(e.path.canonicalString());const t=n.wa.get(e);null!==t&&(My(n.remoteStore,t),n.wa=n.wa.remove(e),n.Sa.delete(t),kM(n))}function NM(n,e,t){for(const r of t)r instanceof b4?(n.ba.addReference(r.key,e),tde(n,r)):r instanceof E4?(ue("SyncEngine","Document no longer in limbo: "+r.key),n.ba.removeReference(r.key,e),n.ba.containsKey(r.key)||C4(n,r.key)):De()}function tde(n,e){const t=e.key,r=t.path.canonicalString();n.wa.get(t)||n.ya.has(r)||(ue("SyncEngine","New document in limbo: "+t),n.ya.add(r),kM(n))}function kM(n){for(;n.ya.size>0&&n.wa.size<n.maxConcurrentLimboResolutions;){const e=n.ya.values().next().value;n.ya.delete(e);const t=new ye(Pt.fromString(e)),r=n.va.next();n.Sa.set(r,new que(t)),n.wa=n.wa.insert(t,r),G0(n.remoteStore,new Cl(Qi(sp(t.path)),r,"TargetPurposeLimboResolution",Ls._e))}}function Al(n,e,t){return OM.apply(this,arguments)}function OM(){return OM=(0,X.Z)(function*(n,e,t){const r=_e(n),i=[],s=[],o=[];var a;r.ga.isEmpty()||(r.ga.forEach((a,l)=>{o.push(r.Ma(l,e,t).then(c=>{if((c||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,c?.fromCache?"not-current":"current"),c){i.push(c);const h=BR.Ki(l.targetId,c);s.push(h)}}))}),yield Promise.all(o),r.fa.u_(i),yield(a=(0,X.Z)(function*(c,h){const p=_e(c);try{yield p.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>B.forEach(h,_=>B.forEach(_.qi,v=>p.persistence.referenceDelegate.addReference(g,_.targetId,v)).next(()=>B.forEach(_.Qi,v=>p.persistence.referenceDelegate.removeReference(g,_.targetId,v)))))}catch(g){if(!Tc(g))throw g;ue("LocalStore","Failed to update sequence numbers: "+g)}for(const g of h){const _=g.targetId;if(!g.fromCache){const v=p.ns.get(_),x=v.withLastLimboFreeSnapshotVersion(v.snapshotVersion);p.ns=p.ns.insert(_,x)}}}),function l(c,h){return a.apply(this,arguments)})(r.localStore,s))}),OM.apply(this,arguments)}function nde(n,e){return FM.apply(this,arguments)}function FM(){return FM=(0,X.Z)(function*(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){ue("SyncEngine","User change. New user:",e.toKey());const r=yield Jz(t.localStore,e);t.currentUser=e,(s=t).Ca.forEach(a=>{a.forEach(l=>{l.reject(new le($.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.Ca.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Al(t,r.us)}var s}),FM.apply(this,arguments)}function rde(n,e){const t=_e(n),r=t.Sa.get(e);if(r&&r.ma)return mt().add(r.key);{let i=mt();const s=t.pa.get(e);if(!s)return i;for(const o of s){const a=t.ga.get(o);i=i.unionWith(a.view.la)}return i}}function ide(n,e){return LM.apply(this,arguments)}function LM(){return LM=(0,X.Z)(function*(n,e){const t=_e(n),r=yield B0(t.localStore,e.query,!0),i=e.view.Ra(r);return t.isPrimaryClient&&NM(t,e.targetId,i.da),i}),LM.apply(this,arguments)}function sde(n,e){return VM.apply(this,arguments)}function VM(){return VM=(0,X.Z)(function*(n,e){const t=_e(n);return r4(t.localStore,e).then(r=>Al(t,r))}),VM.apply(this,arguments)}function ode(n,e,t,r){return BM.apply(this,arguments)}function BM(){return BM=(0,X.Z)(function*(n,e,t,r){const i=_e(n),s=yield function(a,l){const c=_e(a),h=_e(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.vn(p,l).next(g=>g?c.localDocuments.getDocuments(p,g):B.resolve(null)))}(i.localStore,e);var l;null!==s?("pending"===t?yield Ep(i.remoteStore):"acknowledged"===t||"rejected"===t?(PM(i,e,r||null),MM(i,e),l=e,_e(_e(i.localStore).mutationQueue).Mn(l)):De(),yield Al(i,s)):ue("SyncEngine","Cannot apply mutation batch with id: "+e)}),BM.apply(this,arguments)}function UM(){return UM=(0,X.Z)(function*(n,e){const t=_e(n);if(GM(t),zM(t),!0===e&&!0!==t.Fa){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield A4(t,r.toArray());t.Fa=!0,yield hM(t.remoteStore,!0);for(const s of i)G0(t.remoteStore,s)}else if(!1===e&&!1!==t.Fa){const r=[];let i=Promise.resolve();t.pa.forEach((s,o)=>{t.sharedClientState.isLocalQueryTarget(o)?r.push(o):i=i.then(()=>(Ap(t,o),vp(t.localStore,o,!0))),My(t.remoteStore,o)}),yield i,yield A4(t,r),function(o){const a=_e(o);a.Sa.forEach((l,c)=>{My(a.remoteStore,c)}),a.ba.mr(),a.Sa=new Map,a.wa=new mn(ye.comparator)}(t),t.Fa=!1,yield hM(t.remoteStore,!1)}}),UM.apply(this,arguments)}function A4(n,e,t){return jM.apply(this,arguments)}function jM(){return jM=(0,X.Z)(function*(n,e,t){const r=_e(n),i=[],s=[];for(const o of e){let a;const l=r.pa.get(o);if(l&&0!==l.length){a=yield yp(r.localStore,Qi(l[0]));for(const c of l){const h=r.ga.get(c),p=yield ide(r,h);p.snapshot&&s.push(p.snapshot)}}else{const c=yield n4(r.localStore,o);a=yield yp(r.localStore,c),yield wM(r,T4(c),o,!1,a.resumeToken)}i.push(a)}return r.fa.u_(s),i}),jM.apply(this,arguments)}function T4(n){return MG(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function lde(n){return t=_e(n).localStore,_e(_e(t).persistence).Li();var t}function cde(n,e,t,r){return HM.apply(this,arguments)}function HM(){return HM=(0,X.Z)(function*(n,e,t,r){const i=_e(n);if(i.Fa)return void ue("SyncEngine","Ignoring unexpected query state notification.");const s=i.pa.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const o=yield r4(i.localStore,OG(s[0])),a=yy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Fr.EMPTY_BYTE_STRING);yield Al(i,o,a);break}case"rejected":yield vp(i.localStore,e,!0),Ap(i,e,r);break;default:De()}}),HM.apply(this,arguments)}function ude(n,e,t){return $M.apply(this,arguments)}function $M(){return $M=(0,X.Z)(function*(n,e,t){const r=GM(n);if(r.Fa){for(const i of e){if(r.pa.has(i)){ue("SyncEngine","Adding an already active target "+i);continue}const s=yield n4(r.localStore,i),o=yield yp(r.localStore,s);yield wM(r,T4(s),o.targetId,!1,o.resumeToken),G0(r.remoteStore,o)}for(const i of t)r.pa.has(i)&&(yield vp(r.localStore,i,!1).then(()=>{My(r.remoteStore,i),Ap(r,i)}).catch(Ac))}}),$M.apply(this,arguments)}function GM(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=x4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=rde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yue.bind(null,e),e.fa.u_=jue.bind(null,e.eventManager),e.fa.xa=Hue.bind(null,e.eventManager),e}function zM(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xue.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jue.bind(null,e),e}class Py{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,X.Z)(function*(){t.serializer=Sy(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Xz(this.persistence,new Yz,e.initialUser,this.serializer)}createPersistence(e){return new OR(F0.Hr,this.serializer)}createSharedClientState(e){return new a4}terminate(){var e=this;return(0,X.Z)(function*(){var t,r;null===(t=e.gcScheduler)||void 0===t||t.stop(),null===(r=e.indexBackfillerScheduler)||void 0===r||r.stop(),e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class qM extends Py{constructor(e,t,r){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,X.Z)(function*(){yield t().call(r,e),yield r.Na.initialize(r,e),yield zM(r.Na.syncEngine),yield Ep(r.Na.remoteStore),yield r.persistence.fi(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Xz(this.persistence,new Yz,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Hz(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Lle(t,this.persistence);return new Fle(e.asyncQueue,r)}createPersistence(e){const t=VR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Pi.withCacheSize(this.cacheSizeBytes):Pi.DEFAULT;return new LR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,c4(),$0(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new a4}}class D4 extends qM{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,X.Z)(function*(){yield t().call(r,e);const i=r.Na.syncEngine;r.sharedClientState instanceof WR&&(r.sharedClientState.syncEngine={Zs:ode.bind(null,i),Xs:cde.bind(null,i),eo:ude.bind(null,i),Li:lde.bind(null,i),Ys:sde.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.fi(function(){var s=(0,X.Z)(function*(o){yield function ade(n,e){return UM.apply(this,arguments)}(r.Na.syncEngine,o),r.gcScheduler&&(o&&!r.gcScheduler.started?r.gcScheduler.start():o||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(o&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():o||r.indexBackfillerScheduler.stop())});return function(o){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=c4();if(!WR.D(t))throw new le($.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=VR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new WR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Tp{initialize(e,t){var r=this;return(0,X.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>I4(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=nde.bind(null,r.syncEngine),yield hM(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Uue}createDatastore(e){const t=Sy(e.databaseInfo.databaseId),r=new xue(e.databaseInfo);return new Aue(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return r=this.localStore,i=this.datastore,s=e.asyncQueue,o=t=>I4(this.syncEngine,t,0),a=l4.D()?new l4:new bue,new Sue(r,i,s,o,a);var r,i,s,o,a}createSyncEngine(e,t){return function(i,s,o,a,l,c,h){const p=new Wue(i,s,o,a,l,c);return h&&(p.Fa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){var e=this;return(0,X.Z)(function*(){var t,r;yield(r=(0,X.Z)(function*(s){const o=_e(s);ue("RemoteStore","RemoteStore shutting down."),o.v_.add(5),yield bp(o),o.M_.shutdown(),o.x_.set("Unknown")}),function i(s){return r.apply(this,arguments)})(e.remoteStore),null===(t=e.datastore)||void 0===t||t.terminate()})()}}function S4(n,e=10240){let t=0;return{read:()=>(0,X.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,X.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class q0{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class fde{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new Or,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.X_)}`))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}getMetadata(){var e=this;return(0,X.Z)(function*(){return e.metadata.promise})()}Oa(){var e=this;return(0,X.Z)(function*(){return yield e.getMetadata(),e.Qa()})()}Qa(){var e=this;return(0,X.Z)(function*(){const t=yield e.Ka();if(null===t)return null;const r=e.qa.decode(t),i=Number(r);isNaN(i)&&e.$a(`length string (${r}) is not valid number`);const s=yield e.Ua(i);return new $ue(JSON.parse(s),t.length+i)})()}Wa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Ka(){var e=this;return(0,X.Z)(function*(){for(;e.Wa()<0&&!(yield e.Ga()););if(0===e.buffer.length)return null;const t=e.Wa();t<0&&e.$a("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Ua(e){var t=this;return(0,X.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ga())&&t.$a("Reached the end of bundle when more is expected.");const r=t.qa.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}Ga(){var e=this;return(0,X.Z)(function*(){const t=yield e.ka.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class pde{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,X.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw t.lastTransactionError=new le($.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),t.lastTransactionError;const r=yield(i=(0,X.Z)(function*(o,a){const l=_e(o),c={documents:a.map(_=>by(l.serializer,_))},h=yield l.vo("BatchGetDocuments",l.serializer.databaseId,Pt.emptyPath(),c,a.length),p=new Map;h.forEach(_=>{const v=function Oce(n,e){return"found"in e?function(r,i){Le(!!i.found);const s=Fa(r,i.found.name),o=lr(i.found.updateTime),a=i.found.createTime?lr(i.found.createTime):Be.min(),l=new li({mapValue:{fields:i.found.fields}});return Cn.newFoundDocument(s,o,a,l)}(n,e):"missing"in e?function(r,i){Le(!!i.missing),Le(!!i.readTime);const s=Fa(r,i.missing),o=lr(i.readTime);return Cn.newNoDocument(s,o)}(n,e):De()}(l.serializer,_);p.set(v.key.toString(),v)});const g=[];return a.forEach(_=>{const v=p.get(_.toString());Le(!!v),g.push(v)}),g}),function s(o,a){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new dp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,X.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastTransactionError)throw e.lastTransactionError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=ye.fromPath(i);e.mutations.push(new gR(s,e.precondition(s)))}),yield(r=(0,X.Z)(function*(s,o){const a=_e(s),l={writes:o.map(c=>Ey(a.serializer,c))};yield a.So("Commit",a.serializer.databaseId,Pt.emptyPath(),l)}),function i(s,o){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw De();t=Be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new le($.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Be.min())?Fn.exists(!1):Fn.updateTime(t):Fn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Be.min()))throw new le($.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fn.updateTime(t)}return Fn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class mde{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.za=r.maxAttempts,this.jo=new QR(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){var e=this;this.jo.qo((0,X.Z)(function*(){const t=new pde(e.datastore),r=e.Ja(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Ya(s)}))}).catch(i=>{e.Ya(i)})}))}Ja(e){try{const t=this.updateFunction(e);return!ry(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!JG(t)}return!1}}class gde{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=zr.UNAUTHENTICATED,this.clientId=Q$.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var o=(0,X.Z)(function*(a){ue("FirestoreClient","Received user=",a.uid),yield s.authCredentialListener(a),s.user=a});return function(a){return o.apply(this,arguments)}}()),this.appCheckCredentials.start(r,o=>(ue("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new le($.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,X.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=xp(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function W0(n,e){return WM.apply(this,arguments)}function WM(){return WM=(0,X.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ue("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,X.Z)(function*(s){r.isEqual(s)||(yield Jz(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),WM.apply(this,arguments)}function KM(n,e){return QM.apply(this,arguments)}function QM(){return QM=(0,X.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ZM(n);ue("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>g4(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>g4(e.remoteStore,i)),n._onlineComponents=e}),QM.apply(this,arguments)}function R4(n){return"FirebaseError"===n.name?n.code===$.FAILED_PRECONDITION||n.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function ZM(n){return YM.apply(this,arguments)}function YM(){return YM=(0,X.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ue("FirestoreClient","Using user provided OfflineComponentProvider");try{yield W0(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!R4(t))throw t;gs("Error using user provided cache. Falling back to memory cache: "+t),yield W0(n,new Py)}}else ue("FirestoreClient","Using default OfflineComponentProvider"),yield W0(n,new Py);return n._offlineComponents}),YM.apply(this,arguments)}function K0(n){return XM.apply(this,arguments)}function XM(){return XM=(0,X.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ue("FirestoreClient","Using user provided OnlineComponentProvider"),yield KM(n,n._uninitializedComponentsProvider._online)):(ue("FirestoreClient","Using default OnlineComponentProvider"),yield KM(n,new Tp))),n._onlineComponents}),XM.apply(this,arguments)}function M4(n){return ZM(n).then(e=>e.persistence)}function Dp(n){return ZM(n).then(e=>e.localStore)}function P4(n){return K0(n).then(e=>e.remoteStore)}function JM(n){return K0(n).then(e=>e.syncEngine)}function Sp(n){return eP.apply(this,arguments)}function eP(){return eP=(0,X.Z)(function*(n){const e=yield K0(n),t=e.eventManager;return t.onListen=Kue.bind(null,e.syncEngine),t.onUnlisten=Que.bind(null,e.syncEngine),t}),eP.apply(this,arguments)}function k4(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function(s,o,a,l,c){const h=new q0({next:g=>{o.enqueueAndForget(()=>_M(s,p));const _=g.docs.has(a);!_&&g.fromCache?c.reject(new le($.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&l&&"server"===l.source?c.reject(new le($.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new bM(sp(a.path),h,{includeMetadataChanges:!0,Z_:!0});return mM(s,p)}(yield Sp(n),n.asyncQueue,e,t,r)})),r.promise}function O4(n,e,t={}){const r=new Or;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function(s,o,a,l,c){const h=new q0({next:g=>{o.enqueueAndForget(()=>_M(s,p)),g.fromCache&&"server"===l.source?c.reject(new le($.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(g)},error:g=>c.reject(g)}),p=new bM(a,h,{includeMetadataChanges:!0,Z_:!0});return mM(s,p)}(yield Sp(n),n.asyncQueue,e,t,r)})),r.promise}function F4(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const L4=new Map;function tP(n,e,t){if(!t)throw new le($.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function V4(n,e,t,r){if(!0===e&&!0===r)throw new le($.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function B4(n){if(!ye.isDocumentKey(n))throw new le($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function U4(n){if(ye.isDocumentKey(n))throw new le($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Q0(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(r=n).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof n?"a function":De()}function Rt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new le($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Q0(n);throw new le($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function j4(n,e){if(e<=0)throw new le($.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class H4{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new le($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new le($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}V4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=F4(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(s){if(void 0!==s.timeoutSeconds){if(isNaN(s.timeoutSeconds))throw new le($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new le($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new le($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ny{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new H4({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new le($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new le($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new H4(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new Ile;switch(r.type){case"firstParty":return new Dle(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new le($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=L4.get(t);r&&(ue("ComponentProvider","Removing Datastore"),L4.delete(t),r.terminate())}(this),Promise.resolve()}}class ci{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ci(this.firestore,e,this._query)}}class An{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new La(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new An(this.firestore,e,this._key)}}class La extends ci{constructor(e,t,r){super(e,t,sp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new An(this.firestore,null,new ye(e))}withConverter(e){return new La(this.firestore,e,this._path)}}function G4(n,e,...t){if(n=(0,w.m9)(n),tP("collection","path",e),n instanceof Ny){const r=Pt.fromString(e,...t);return U4(r),new La(n,null,r)}{if(!(n instanceof An||n instanceof La))throw new le($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return U4(r),new La(n.firestore,null,r)}}function Z0(n,e,...t){if(n=(0,w.m9)(n),1===arguments.length&&(e=Q$.newId()),tP("doc","path",e),n instanceof Ny){const r=Pt.fromString(e,...t);return B4(r),new An(n,null,new ye(r))}{if(!(n instanceof An||n instanceof La))throw new le($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Pt.fromString(e,...t));return B4(r),new An(n.firestore,n instanceof La?n.converter:null,new ye(r))}}function z4(n,e){return n=(0,w.m9)(n),e=(0,w.m9)(e),(n instanceof An||n instanceof La)&&(e instanceof An||e instanceof La)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function nP(n,e){return n=(0,w.m9)(n),e=(0,w.m9)(e),n instanceof ci&&e instanceof ci&&n.firestore===e.firestore&&dy(n._query,e._query)&&n.converter===e.converter}class Dde{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new QR(this,"async_queue_retry"),this._u=()=>{const t=$0();t&&ue("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const e=$0();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=$0();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const t=new Or;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}cu(){var e=this;return(0,X.Z)(function*(){if(0!==e.eu.length){try{yield e.eu[0](),e.eu.shift(),e.jo.reset()}catch(t){if(!Tc(t))throw t;ue("AsyncQueue","Operation failed with retryable error: "+t)}e.eu.length>0&&e.jo.qo(()=>e.cu())}})()}uu(e){const t=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{throw this.ru=r,this.iu=!1,ar("INTERNAL UNHANDLED ERROR: ",function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+"\n"+o.stack),a}(r)),r}).then(r=>(this.iu=!1,r))));return this.Xa=t,t}enqueueAfterDelay(e,t,r){this.au(),this.ou.indexOf(e)>-1&&(t=0);const i=pM.createAndSchedule(this,e,t,r,s=>this.lu(s));return this.nu.push(i),i}au(){this.ru&&De()}verifyOperationInProgress(){}hu(){var e=this;return(0,X.Z)(function*(){let t;do{t=e.Xa,yield t}while(t!==e.Xa)})()}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function rP(n){return function(t,r){if("object"!=typeof t||null===t)return!1;const i=t;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class Sde{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class gn extends Ny{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Dde,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||q4(this),this._firestoreClient.terminate()}}function Yn(n){return n._firestoreClient||q4(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function q4(n){var e,t,r;const i=n._freezeSettings(),s=(l=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new ice(n._databaseId,l,n._persistenceKey,(h=i).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,F4(h.experimentalLongPollingOptions),h.useFetchStreams));var l,h;n._firestoreClient=new gde(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.localCache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.localCache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function W4(n,e,t){const r=new Or;return n.asyncQueue.enqueue((0,X.Z)(function*(){try{yield W0(n,t),yield KM(n,e),r.resolve()}catch(i){const s=i;if(!R4(s))throw s;gs("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function K4(n){if(n._initialized||n._terminated)throw new le($.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Va{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Va(Fr.fromBase64String(e))}catch(t){throw new le($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Va(Fr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Tl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new le($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new In(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class wd{constructor(e){this._methodName=e}}class Y0{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new le($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new le($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return rt(this._lat,e._lat)||rt(this._long,e._long)}}const Ude=/^__.*__$/;class jde{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Il(e,this.data,this.fieldMask,t,this.fieldTransforms):new up(e,this.data,t,this.fieldTransforms)}}class Q4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Il(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Z4(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw De()}}class X0{constructor(e,t,r,i,s,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.Eu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new X0(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return tx(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Z4(this.du)&&Ude.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Hde{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Sy(e)}Su(e,t,r,i=!1){return new X0({du:e,methodName:t,wu:r,path:In.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xd(n){const e=n._freezeSettings(),t=Sy(n._databaseId);return new Hde(n._databaseId,!!e.ignoreUndefinedProperties,t)}function J0(n,e,t,r,i,s={}){const o=n.Su(s.merge||s.mergeFields?2:0,e,t,i);uP("Data must be an object, but it was:",o,r);const a=J4(r,o);let l,c;if(s.merge)l=new _s(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const p of s.mergeFields){const g=Fy(e,p,t);if(!o.contains(g))throw new le($.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);tq(h,g)||h.push(g)}l=new _s(h),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new jde(new li(a),l,c)}class Oy extends wd{_toFieldTransform(e){if(2!==e.du)throw e.pu(1===e.du?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Oy}}function Y4(n,e,t){return new X0({du:3,wu:e.settings.wu,methodName:n._methodName,Vu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class iP extends wd{_toFieldTransform(e){return new my(e.path,new lp)}isEqual(e){return e instanceof iP}}class sP extends wd{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Y4(this,e,!0),r=this.bu.map(s=>Id(s,t)),i=new fd(r);return new my(e.path,i)}isEqual(e){return e instanceof sP&&(0,w.vZ)(this.bu,e.bu)}}class oP extends wd{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=Y4(this,e,!0),r=this.bu.map(s=>Id(s,t)),i=new pd(r);return new my(e.path,i)}isEqual(e){return e instanceof oP&&(0,w.vZ)(this.bu,e.bu)}}class aP extends wd{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new cp(e.serializer,HG(e.serializer,this.Du));return new my(e.path,t)}isEqual(e){return e instanceof aP&&this.Du===e.Du}}function lP(n,e,t,r){const i=n.Su(1,e,t);uP("Data must be an object, but it was:",i,r);const s=[],o=li.empty();Dc(r,(l,c)=>{const h=ex(e,l,t);c=(0,w.m9)(c);const p=i.fu(h);if(c instanceof Oy)s.push(h);else{const g=Id(c,p);null!=g&&(s.push(h),o.set(h,g))}});const a=new _s(s);return new Q4(o,a,i.fieldTransforms)}function cP(n,e,t,r,i,s){const o=n.Su(1,e,t),a=[Fy(e,r,t)],l=[i];if(s.length%2!=0)throw new le($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<s.length;g+=2)a.push(Fy(e,s[g])),l.push(s[g+1]);const c=[],h=li.empty();for(let g=a.length-1;g>=0;--g)if(!tq(c,a[g])){const _=a[g];let v=l[g];v=(0,w.m9)(v);const E=o.fu(_);if(v instanceof Oy)c.push(_);else{const x=Id(v,E);null!=x&&(c.push(_),h.set(_,x))}}const p=new _s(c);return new Q4(h,p,o.fieldTransforms)}function X4(n,e,t,r=!1){return Id(t,n.Su(r?4:3,e))}function Id(n,e){if(eq(n=(0,w.m9)(n)))return uP("Unsupported field value:",e,n),J4(n,e);if(n instanceof wd)return function(r,i){if(!Z4(i.du))throw i.pu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.pu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let l=Id(a,i.gu(o));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(r,i){if(null===(r=(0,w.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return HG(i.serializer,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const s=On.fromDate(r);return{timestampValue:hp(i.serializer,s)}}if(r instanceof On){const s=new On(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:hp(i.serializer,s)}}if(r instanceof Y0)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Va)return{bytesValue:cz(i.serializer,r._byteString)};if(r instanceof An){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.pu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:wR(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu(`Unsupported field value: ${Q0(r)}`)}(n,e)}function J4(n,e){const t={};return uG(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Dc(n,(r,i)=>{const s=Id(i,e.Ru(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function eq(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof On||n instanceof Y0||n instanceof Va||n instanceof An||n instanceof wd)}function uP(n,e,t){if(!eq(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const r=Q0(t);throw e.pu("an object"===r?n+" a custom object":n+" "+r)}var i}function Fy(n,e,t){if((e=(0,w.m9)(e))instanceof Tl)return e._internalPath;if("string"==typeof e)return ex(n,e);throw tx("Field path arguments must be of type string or ",n,!1,void 0,t)}const $de=new RegExp("[~\\*/\\[\\]]");function ex(n,e,t){if(e.search($de)>=0)throw tx(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Tl(...e.split("."))._internalPath}catch{throw tx(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tx(n,e,t,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${r}`),o&&(l+=` in document ${i}`),l+=")"),new le($.INVALID_ARGUMENT,a+n+l)}function tq(n,e){return n.some(t=>t.isEqual(e))}class Ly{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new An(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gde(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nx("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gde extends Ly{data(){return super.data()}}function nx(n,e){return"string"==typeof e?ex(n,e):e instanceof Tl?e._internalPath:e._delegate._internalPath}function nq(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new le($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class dP{}class Vy extends dP{}function jc(n,e,...t){let r=[];e instanceof dP&&r.push(e),r=r.concat(t),function(s){const o=s.filter(l=>l instanceof Rp).length,a=s.filter(l=>l instanceof By).length;if(o>1||o>0&&a>0)throw new le($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class By extends Vy{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new By(e,t,r)}_apply(e){const t=this._parse(e);return oq(e._query,t),new ci(e.firestore,e.converter,pR(e._query,t))}_parse(e){const t=xd(e.firestore);return function(s,o,a,l,c,h,p){let g;if(c.isKeyField()){if("array-contains"===h||"array-contains-any"===h)throw new le($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if("in"===h||"not-in"===h){sq(p,h);const _=[];for(const v of p)_.push(iq(l,s,v));g={arrayValue:{values:_}}}else g=iq(l,s,p)}else"in"!==h&&"not-in"!==h&&"array-contains-any"!==h||sq(p,h),g=X4(a,"where",p,"in"===h||"not-in"===h);return Nt.create(c,h,g)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Rp extends dP{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Rp(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:Xt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const l of a)oq(o,l),o=pR(o,l)}(e._query,t),new ci(e.firestore,e.converter,pR(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class hP extends Vy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new hP(e,t)}_apply(e){const t=function(i,s,o){if(null!==i.startAt)throw new le($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new le($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cy(s,o)}(e._query,this._field,this._direction);return new ci(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new wl(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class rx extends Vy{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new rx(e,t,r)}_apply(e){return new ci(e.firestore,e.converter,x0(e._query,this._limit,this._limitType))}}class ix extends Vy{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new ix(e,t,r)}_apply(e){const t=rq(e,this.type,this._docOrFields,this._inclusive);return new ci(e.firestore,e.converter,(s=t,new wl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class sx extends Vy{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new sx(e,t,r)}_apply(e){const t=rq(e,this.type,this._docOrFields,this._inclusive);return new ci(e.firestore,e.converter,(s=t,new wl((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function rq(n,e,t,r){if(t[0]=(0,w.m9)(t[0]),t[0]instanceof Ly)return function(s,o,a,l,c){if(!l)throw new le($.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const h=[];for(const p of op(s))if(p.field.isKeyField())h.push(dd(o,l.key));else{const g=l.data.field(p.field);if(g0(g))throw new le($.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===g){const _=p.field.canonicalString();throw new le($.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}h.push(g)}return new kc(h,c)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=xd(n.firestore);return function(o,a,l,c,h,p){const g=o.explicitOrderBy;if(h.length>g.length)throw new le($.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let v=0;v<h.length;v++){const E=h[v];if(g[v].field.isKeyField()){if("string"!=typeof E)throw new le($.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof E}`);if(!fR(o)&&-1!==E.indexOf("/"))throw new le($.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${E}' contains a slash.`);const x=o.path.child(Pt.fromString(E));if(!ye.isDocumentKey(x))throw new le($.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${x}' is not because it contains an odd number of segments.`);const M=new ye(x);_.push(dd(a,M))}else{const x=X4(l,c,E);_.push(x)}}return new kc(_,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function iq(n,e,t){if("string"==typeof(t=(0,w.m9)(t))){if(""===t)throw new le($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!fR(e)&&-1!==t.indexOf("/"))throw new le($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Pt.fromString(t));if(!ye.isDocumentKey(r))throw new le($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return dd(n,new ye(r))}if(t instanceof An)return dd(n,t._key);throw new le($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Q0(t)}.`)}function sq(n,e){if(!Array.isArray(n)||0===n.length)throw new le($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function oq(n,e){const t=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new le($.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class fP{convertValue(e,t="none"){switch(Pc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Zn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(El(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw De()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Dc(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new Y0(Zn(e.latitude),Zn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=_0(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(sy(e));default:return null}}convertTimestamp(e){const t=Sc(e);return new On(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Pt.fromString(e);Le(bz(r));const i=new Rc(r.get(1),r.get(3)),s=new ye(r.popFirst(5));return i.isEqual(t)||ar(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function ox(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class Jde extends fP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,t)}}class Cd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Dl extends Ly{constructor(e,t,r,i,s,o){super(e,t,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Uy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(nx("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Uy extends Dl{data(e={}){return super.data(e)}}class Hc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Cd(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Uy(this._firestore,this._userDataWriter,r.key,r,new Cd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new le($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new Uy(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:o++}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new Uy(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Cd(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,h=-1;return 0!==a.type&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),1!==a.type&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:the(a.type),doc:l,oldIndex:c,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function the(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return De()}}function lq(n,e){return n instanceof Dl&&e instanceof Dl?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Hc&&e instanceof Hc&&n._firestore===e._firestore&&nP(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class $c extends fP{constructor(e){super(),this.firestore=e}convertBytes(e){return new Va(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new An(this.firestore,null,t)}}function cq(n,e,t){n=Rt(n,An);const r=Rt(n.firestore,gn),i=ox(n.converter,e,t);return Mp(r,[J0(xd(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Fn.none())])}function uq(n,e,t,...r){n=Rt(n,An);const i=Rt(n.firestore,gn),s=xd(i);let o;return o="string"==typeof(e=(0,w.m9)(e))||e instanceof Tl?cP(s,"updateDoc",n._key,e,t,r):lP(s,"updateDoc",n._key,e),Mp(i,[o.toMutation(n._key,Fn.exists(!0))])}function dq(n,...e){var t,r,i;n=(0,w.m9)(n);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||rP(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(rP(e[o])){const p=e[o];e[o]=null===(t=p.next)||void 0===t?void 0:t.bind(p),e[o+1]=null===(r=p.error)||void 0===r?void 0:r.bind(p),e[o+2]=null===(i=p.complete)||void 0===i?void 0:i.bind(p)}let l,c,h;if(n instanceof An)c=Rt(n.firestore,gn),h=sp(n._key.path),l={next:p=>{e[o]&&e[o](pP(c,n,p))},error:e[o+1],complete:e[o+2]};else{const p=Rt(n,ci);c=Rt(p.firestore,gn),h=p._query;const g=new $c(c);l={next:_=>{e[o]&&e[o](new Hc(c,g,p,_))},error:e[o+1],complete:e[o+2]},nq(n._query)}return function(g,_,v,E){const x=new q0(E),M=new bM(_,x,v);return g.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return mM(yield Sp(g),M)})),()=>{x.La(),g.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return _M(yield Sp(g),M)}))}}(Yn(c),h,a,l)}function Mp(n,e){return function(r,i){const s=new Or;return r.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function Zue(n,e,t){return CM.apply(this,arguments)}(yield JM(r),i,s)})),s.promise}(Yn(n),e)}function pP(n,e,t){const r=t.docs.get(e._key),i=new $c(n);return new Dl(n,i,e._key,r,new Cd(t.hasPendingWrites,t.fromCache),e.converter)}const vhe={maxAttempts:5};class hq{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xd(e)}set(e,t,r){this._verifyNotCommitted();const i=Gc(e,this._firestore),s=ox(i.converter,t,r),o=J0(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(o.toMutation(i._key,Fn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=Gc(e,this._firestore);let o;return o="string"==typeof(t=(0,w.m9)(t))||t instanceof Tl?cP(this._dataReader,"WriteBatch.update",s._key,t,r,i):lP(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(o.toMutation(s._key,Fn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Gc(e,this._firestore);return this._mutations=this._mutations.concat(new dp(t._key,Fn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new le($.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gc(n,e){if((n=(0,w.m9)(n)).firestore!==e)throw new le($.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class bhe extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=xd(t)}get(t){const r=Gc(t,this._firestore),i=new Jde(this._firestore);return this._transaction.lookup([r._key]).then(s=>{if(!s||1!==s.length)return De();const o=s[0];if(o.isFoundDocument())return new Ly(this._firestore,i,o.key,o,r.converter);if(o.isNoDocument())return new Ly(this._firestore,i,r._key,null,r.converter);throw De()})}set(t,r,i){const s=Gc(t,this._firestore),o=ox(s.converter,r,i),a=J0(this._dataReader,"Transaction.set",s._key,o,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(t,r,i,...s){const o=Gc(t,this._firestore);let a;return a="string"==typeof(r=(0,w.m9)(r))||r instanceof Tl?cP(this._dataReader,"Transaction.update",o._key,r,i,s):lP(this._dataReader,"Transaction.update",o._key,r),this._transaction.update(o._key,a),this}delete(t){const r=Gc(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Gc(e,this._firestore),r=new $c(this._firestore);return super.get(e).then(i=>new Dl(this._firestore,r,t._key,i._document,new Cd(!1,!1),t.converter))}}function gP(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new le("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function gq(){if(typeof Uint8Array>"u")throw new le("unimplemented","Uint8Arrays are not available in this environment.")}function _q(){if(!function nce(){return typeof atob<"u"}())throw new le("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){Yf=ms.SDK_VERSION,(0,ms._registerComponent)(new jo.wA("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new gn(new Ale(r.getProvider("auth-internal")),new Sle(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new le($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Rc(c.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,ms.registerVersion)(q$,"4.4.2",e),(0,ms.registerVersion)(q$,"4.4.2","esm2017")}();class jy{constructor(e){this._delegate=e}static fromBase64String(e){return _q(),new jy(Va.fromBase64String(e))}static fromUint8Array(e){return gq(),new jy(Va.fromUint8Array(e))}toBase64(){return _q(),this._delegate.toBase64()}toUint8Array(){return gq(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function _P(n){return function Rhe(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Mhe{enableIndexedDbPersistence(e,t){return function Mde(n,e){K4(n=Rt(n,gn));const t=Yn(n);if(t._uninitializedComponentsProvider)throw new le($.FAILED_PRECONDITION,"SDK cache is already specified.");gs("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Tp;return W4(t,i,new qM(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Pde(n){K4(n=Rt(n,gn));const e=Yn(n);if(e._uninitializedComponentsProvider)throw new le($.FAILED_PRECONDITION,"SDK cache is already specified.");gs("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Tp;return W4(e,r,new D4(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Nde(n){if(n._initialized&&!n._terminated)throw new le($.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,X.Z)(function*(){try{yield(t=(0,X.Z)(function*(i){if(!co.D())return Promise.resolve();const s=i+"main";yield co.delete(s)}),function r(i){return t.apply(this,arguments)})(VR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class yq{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Rc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&gs("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function $4(n,e,t,r={}){var i;const s=(n=Rt(n,Ny))._getSettings(),o=`${e}:${t}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,l;if("string"==typeof r.mockUserToken)a=r.mockUserToken,l=zr.MOCK_USER;else{a=(0,w.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new le($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new zr(c)}n._authCredentials=new Cle(new W$(a,l))}}(this._delegate,e,t,r)}enableNetwork(){return function Ode(n){return function _de(n){return n.asyncQueue.enqueue((0,X.Z)(function*(){const e=yield M4(n),t=yield P4(n);return e.setNetworkEnabled(!0),function(i){const s=_e(i);return s.v_.delete(0),Ry(s)}(t)}))}(Yn(n=Rt(n,gn)))}(this._delegate)}disableNetwork(){return function Fde(n){return function yde(n){return n.asyncQueue.enqueue((0,X.Z)(function*(){const e=yield M4(n),t=yield P4(n);return e.setNetworkEnabled(!1),(r=(0,X.Z)(function*(s){const o=_e(s);o.v_.add(0),yield bp(o),o.x_.set("Offline")}),function i(s){return r.apply(this,arguments)})(t);var r}))}(Yn(n=Rt(n,gn)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,V4("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function kde(n){return function(t){const r=new Or;return t.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return function ede(n,e){return RM.apply(this,arguments)}(yield JM(t),r)})),r.promise}(Yn(n=Rt(n,gn)))}(this._delegate)}onSnapshotsInSync(e){return function uhe(n,e){return function Ede(n,e){const t=new q0(e);return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return i=yield Sp(n),s=t,_e(i).K_.add(s),void s.next();var i,s})),()=>{t.La(),n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return i=yield Sp(n),s=t,void _e(i).K_.delete(s);var i,s}))}}(Yn(n=Rt(n,gn)),rP(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new le("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Pp(this,G4(this._delegate,e))}catch(t){throw Zi(t,"collection()","Firestore.collection()")}}doc(e){try{return new uo(this,Z0(this._delegate,e))}catch(t){throw Zi(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Yi(this,function Tde(n,e){if(n=Rt(n,Ny),tP("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new le($.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ci(n,null,(r=e,new wl(Pt.emptyPath(),r)));var r}(this._delegate,e))}catch(t){throw Zi(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Ehe(n,e,t){n=Rt(n,gn);const r=Object.assign(Object.assign({},vhe),t);return function(s){if(s.maxAttempts<1)throw new le($.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,o,a){const l=new Or;return s.asyncQueue.enqueueAndForget((0,X.Z)(function*(){const c=yield function N4(n){return K0(n).then(e=>e.datastore)}(s);new mde(s.asyncQueue,c,a,o,l).ja()})),l.promise}(Yn(n),i=>e(new bhe(n,i)),r)}(this._delegate,t=>e(new vq(this,t)))}batch(){return Yn(this._delegate),new bq(new hq(this._delegate,e=>Mp(this._delegate,e)))}loadBundle(e){return function Lde(n,e){const t=Yn(n=Rt(n,gn)),r=new Sde;return function wde(n,e,t,r){const i=function(o,a){let l;return l="string"==typeof o?tz().encode(o):o,h=function(h,p){if(h instanceof Uint8Array)return S4(h,p);if(h instanceof ArrayBuffer)return S4(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new fde(h,a);var h}(t,Sy(e));n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){!function dde(n,e,t){const r=_e(n);var i;(i=(0,X.Z)(function*(o,a,l){try{const c=yield a.getMetadata();if(yield function(v,E){const x=_e(v),M=lr(E.createTime);return x.persistence.runTransaction("hasNewerBundle","readonly",D=>x.$r.getBundleMetadata(D,E.id)).then(D=>!!D&&D.createTime.compareTo(M)>=0)}(o.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(v=c).totalDocuments,bytesLoaded:v.totalBytes,totalDocuments:v.totalDocuments,totalBytes:v.totalBytes}),Promise.resolve(new Set);l._updateProgress(v4(c));const h=new Gue(c,o.localStore,a.serializer);let p=yield a.Oa();for(;p;){const _=yield h.na(p);_&&l._updateProgress(_),p=yield a.Oa()}const g=yield h.complete();return yield Al(o,g.sa,void 0),yield function(v,E){const x=_e(v);return x.persistence.runTransaction("Save bundle","readwrite",M=>x.$r.saveBundleMetadata(M,E))}(o.localStore,c),l._completeWith(g.progress),Promise.resolve(g.ia)}catch(c){return gs("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var v}),function s(o,a,l){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield JM(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Vde(n,e){return function xde(n,e){return n.asyncQueue.enqueue((0,X.Z)(function*(){return function(r,i){const s=_e(r);return s.persistence.runTransaction("Get named query","readonly",o=>s.$r.getNamedQuery(o,i))}(yield Dp(n),e)}))}(Yn(n=Rt(n,gn)),e).then(t=>t?new ci(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Yi(this,t):null)}}class lx extends fP{constructor(e){super(),this.firestore=e}convertBytes(e){return new jy(new Va(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return uo.forKey(t,this.firestore,null)}}class vq{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new lx(e)}get(e){const t=Td(e);return this._delegate.get(t).then(r=>new Hy(this._firestore,new Dl(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Td(e);return r?(gP("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Td(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Td(e);return this._delegate.delete(t),this}}class bq{constructor(e){this._delegate=e}set(e,t,r){const i=Td(e);return r?(gP("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=Td(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=Td(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Ad{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Uy(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $y(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Ad.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Ad(e,new lx(e),t),i.set(t,s)),s}}Ad.INSTANCES=new WeakMap;class uo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lx(e)}static forPath(e,t,r){if(e.length%2!=0)throw new le("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new uo(t,new An(t._delegate,r,new ye(e)))}static forKey(e,t,r){return new uo(t,new An(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Pp(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Pp(this.firestore,G4(this._delegate,e))}catch(t){throw Zi(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,w.m9)(e))instanceof An&&z4(this._delegate,e)}set(e,t){t=gP("DocumentReference.set",t);try{return t?cq(this._delegate,e,t):cq(this._delegate,e)}catch(r){throw Zi(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?uq(this._delegate,e):uq(this._delegate,e,t,...r)}catch(i){throw Zi(i,"updateDoc()","DocumentReference.update()")}}delete(){return function lhe(n){return Mp(Rt(n.firestore,gn),[new dp(n._key,Fn.none())])}(this._delegate)}onSnapshot(...e){const t=Eq(e),r=wq(e,i=>new Hy(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return dq(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function rhe(n){n=Rt(n,An);const e=Rt(n.firestore,gn),t=Yn(e),r=new $c(e);return function vde(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return(r=(0,X.Z)(function*(s,o,a){try{const l=yield function(h,p){const g=_e(h);return g.persistence.runTransaction("read document","readonly",_=>g.localDocuments.getDocument(_,p))}(s,o);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new le($.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=xp(l,`Failed to get document '${o} from cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Dp(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Dl(e,r,n._key,i,new Cd(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function ihe(n){n=Rt(n,An);const e=Rt(n.firestore,gn);return k4(Yn(e),n._key,{source:"server"}).then(t=>pP(e,n,t))}(this._delegate):function nhe(n){n=Rt(n,An);const e=Rt(n.firestore,gn);return k4(Yn(e),n._key).then(t=>pP(e,n,t))}(this._delegate),t.then(r=>new Hy(this.firestore,new Dl(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new uo(this.firestore,this._delegate.withConverter(e?Ad.getInstance(this.firestore,e):null))}}function Zi(n,e,t){return n.message=n.message.replace(e,t),n}function Eq(n){for(const e of n)if("object"==typeof e&&!_P(e))return e;return{}}function wq(n,e){var t,r;let i;return i=_P(n[0])?n[0]:_P(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Hy{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new uo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lq(this._delegate,e._delegate)}}class $y extends Hy{data(e){const t=this._delegate.data(e);return this._delegate._converter||function xle(n,e){n||De()}(void 0!==t),t}}class Yi{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new lx(e)}where(e,t,r){try{return new Yi(this.firestore,jc(this._delegate,function zde(n,e,t){const r=e,i=nx("where",n);return By._create(i,r,t)}(e,t,r)))}catch(i){throw Zi(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Yi(this.firestore,jc(this._delegate,function qde(n,e="asc"){const t=e,r=nx("orderBy",n);return hP._create(r,t)}(e,t)))}catch(r){throw Zi(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Yi(this.firestore,jc(this._delegate,function Wde(n){return j4("limit",n),rx._create("limit",n,"F")}(e)))}catch(t){throw Zi(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Yi(this.firestore,jc(this._delegate,function Kde(n){return j4("limitToLast",n),rx._create("limitToLast",n,"L")}(e)))}catch(t){throw Zi(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Yi(this.firestore,jc(this._delegate,function Qde(...n){return ix._create("startAt",n,!0)}(...e)))}catch(t){throw Zi(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Yi(this.firestore,jc(this._delegate,function Zde(...n){return ix._create("startAfter",n,!1)}(...e)))}catch(t){throw Zi(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Yi(this.firestore,jc(this._delegate,function Yde(...n){return sx._create("endBefore",n,!1)}(...e)))}catch(t){throw Zi(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Yi(this.firestore,jc(this._delegate,function Xde(...n){return sx._create("endAt",n,!0)}(...e)))}catch(t){throw Zi(t,"endAt()","Query.endAt()")}}isEqual(e){return nP(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function ohe(n){n=Rt(n,ci);const e=Rt(n.firestore,gn),t=Yn(e),r=new $c(e);return function bde(n,e){const t=new Or;return n.asyncQueue.enqueueAndForget((0,X.Z)(function*(){return(r=(0,X.Z)(function*(s,o,a){try{const l=yield B0(s,o,!0),c=new w4(o,l.hs),h=c.ha(l.documents),p=c.applyChanges(h,!1);a.resolve(p.snapshot)}catch(l){const c=xp(l,`Failed to execute query '${o} against cache`);a.reject(c)}}),function i(s,o,a){return r.apply(this,arguments)})(yield Dp(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Hc(e,r,n,i))}(this._delegate):"server"===e?.source?function ahe(n){n=Rt(n,ci);const e=Rt(n.firestore,gn),t=Yn(e),r=new $c(e);return O4(t,n._query,{source:"server"}).then(i=>new Hc(e,r,n,i))}(this._delegate):function she(n){n=Rt(n,ci);const e=Rt(n.firestore,gn),t=Yn(e),r=new $c(e);return nq(n._query),O4(t,n._query).then(i=>new Hc(e,r,n,i))}(this._delegate),t.then(r=>new yP(this.firestore,new Hc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Eq(e),r=wq(e,i=>new yP(this.firestore,new Hc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return dq(this._delegate,t,r)}withConverter(e){return new Yi(this.firestore,this._delegate.withConverter(e?Ad.getInstance(this.firestore,e):null))}}class Nhe{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $y(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class yP{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Yi(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $y(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Nhe(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $y(this._firestore,r))})}isEqual(e){return lq(this._delegate,e._delegate)}}class Pp extends Yi{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new uo(this.firestore,e):null}doc(e){try{return new uo(this.firestore,void 0===e?Z0(this._delegate):Z0(this._delegate,e))}catch(t){throw Zi(t,"doc()","CollectionReference.doc()")}}add(e){return function che(n,e){const t=Rt(n.firestore,gn),r=Z0(n),i=ox(n.converter,e);return Mp(t,[J0(xd(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Fn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new uo(this.firestore,t))}isEqual(e){return z4(this._delegate,e._delegate)}withConverter(e){return new Pp(this.firestore,this._delegate.withConverter(e?Ad.getInstance(this.firestore,e):null))}}function Td(n){return Rt(n,An)}class vP{constructor(...e){this._delegate=new Tl(...e)}static documentId(){return new vP(In.keyField().canonicalString())}isEqual(e){return(e=(0,w.m9)(e))instanceof Tl&&this._delegate._internalPath.isEqual(e._internalPath)}}class Dd{constructor(e){this._delegate=e}static serverTimestamp(){const e=function xhe(){return new iP("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Dd(e)}static delete(){const e=function whe(){return new Oy("deleteField")}();return e._methodName="FieldValue.delete",new Dd(e)}static arrayUnion(...e){const t=function Ihe(...n){return new sP("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Dd(t)}static arrayRemove(...e){const t=function Che(...n){return new oP("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Dd(t)}static increment(e){const t=function Ahe(n){return new aP("increment",n)}(e);return t._methodName="FieldValue.increment",new Dd(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const khe={Firestore:yq,GeoPoint:Y0,Timestamp:On,Blob:jy,Transaction:vq,WriteBatch:bq,DocumentReference:uo,DocumentSnapshot:Hy,Query:Yi,QueryDocumentSnapshot:$y,QuerySnapshot:yP,CollectionReference:Pp,FieldPath:vP,FieldValue:Dd,setLogLevel:function Phe(n){!function wle(n){Cc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function xq(n,e){return function Lhe(n,e=dw){return new dt(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function bP(n,e){return xq(n,e).pipe(re(t=>({payload:t,type:"query"})))}!function Fhe(n){(function Ohe(n,e){n.INTERNAL.registerComponent(new jo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},khe)))})(n,(e,t)=>new yq(e,t,new Mhe)),n.registerVersion("@firebase/firestore-compat","0.3.25")}(Ns.Z);class Iq{constructor(e,t){je(this,"ref",void 0),je(this,"afs",void 0),this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=Rq(r,t);return new Tq(i,s,this.afs)}snapshotChanges(){return function Vhe(n,e){return xq(n,e).pipe(d_(void 0),hS(),re(t=>{const[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(or)}valueChanges(e={}){return this.snapshotChanges().pipe(re(({payload:t})=>e.idField?{...t.data(),[e.idField]:t.id}:t.data()))}get(e){return j(this.ref.get(e)).pipe(or)}}function cx(n,e){return bP(n,e).pipe(d_(void 0),hS(),re(t=>{const[r,i]=t,s=i.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function Cq(n,e,t){return cx(n,t).pipe(Rf((r,i)=>function Bhe(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function Uhe(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return EP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return EP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return EP(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),on(),re(r=>r.map(i=>({type:i.type,payload:i}))))}function EP(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Aq(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class Tq{constructor(e,t,r){je(this,"ref",void 0),je(this,"query",void 0),je(this,"afs",void 0),this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=cx(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(re(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(d_(void 0),hS(),ii(([r,i])=>i.length>0||!r),re(([,r])=>r),or)}auditTrail(e){return this.stateChanges(e).pipe(Rf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Aq(e);return Cq(this.query,t,this.afs.schedulers.outsideAngular).pipe(or)}valueChanges(e={}){return bP(this.query,this.afs.schedulers.outsideAngular).pipe(re(t=>t.payload.docs.map(r=>e.idField?{...r.data(),[e.idField]:r.id}:r.data())),or)}get(e){return j(this.query.get(e)).pipe(or)}add(e){return this.ref.add(e)}doc(e){return new Iq(this.ref.doc(e),this.afs)}}class jhe{constructor(e,t){je(this,"query",void 0),je(this,"afs",void 0),this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?cx(this.query,this.afs.schedulers.outsideAngular).pipe(re(t=>t.filter(r=>e.indexOf(r.type)>-1)),ii(t=>t.length>0),or):cx(this.query,this.afs.schedulers.outsideAngular).pipe(or)}auditTrail(e){return this.stateChanges(e).pipe(Rf((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Aq(e);return Cq(this.query,t,this.afs.schedulers.outsideAngular).pipe(or)}valueChanges(e={}){return bP(this.query,this.afs.schedulers.outsideAngular).pipe(re(r=>r.payload.docs.map(i=>e.idField?{[e.idField]:i.id,...i.data()}:i.data())),or)}get(e){return j(this.query.get(e)).pipe(or)}}const Dq=new oe("angularfire2.enableFirestorePersistence"),Sq=new oe("angularfire2.firestore.persistenceSettings"),Hhe=new oe("angularfire2.firestore.settings"),$he=new oe("angularfire2.firestore.use-emulator");function Rq(n,e=(t=>t)){return{query:e(n),ref:n}}let Mq=(()=>{class n{constructor(t,r,i,s,o,a,l,c,h,p,g,_,v,E,x,M,D){je(this,"schedulers",void 0),je(this,"firestore",void 0),je(this,"persistenceEnabled$",void 0),this.schedulers=l;const k=M_(t,a,r),G=h;p&&dS(k,a,g,v,E,x,_,M),[this.firestore,this.persistenceEnabled$]=Bw(`${k.name}.firestore`,"AngularFirestore",k.name,()=>{const de=a.runOutsideAngular(()=>k.firestore());if(s&&de.settings(s),G&&de.useEmulator(...G),i&&!xa(o)){const Se=()=>{try{return j(de.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(it){return typeof console<"u"&&console.warn(it),K(!1)}};return[de,a.runOutsideAngular(Se)]}return[de,K(!1)]},[s,G,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:o}=Rq(i,r),a=this.schedulers.ngZone.run(()=>s);return new Tq(a,o,this)}collectionGroup(t,r){const i=r||(o=>o),s=this.firestore.collectionGroup(t);return new jhe(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Iq(i,this)}createId(){return this.firestore.collection("_").doc().id}}return je(n,"\u0275fac",function(t){return new(t||n)(O(Hf),O($f,8),O(Dq,8),O(Hhe,8),O(nr),O(Je),O(Vw),O(Sq,8),O($he,8),O(P_,8),O(sS,8),O(oS,8),O(aS,8),O(lS,8),O(cS,8),O(uS,8),O(Lw,8))}),je(n,"\u0275prov",se({token:n,factory:n.\u0275fac,providedIn:"any"})),n})(),Ghe=(()=>{class n{constructor(){Ns.Z.registerVersion("angularfire",Bf.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:Dq,useValue:!0},{provide:Sq,useValue:t}]}}}return je(n,"\u0275fac",function(t){return new(t||n)}),je(n,"\u0275mod",bt({type:n})),je(n,"\u0275inj",gt({providers:[Mq]})),n})(),Sd=(()=>{class n{constructor(t,r,i,s){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=s,this.afAuth.authState.subscribe(o=>{o?(this.userData=o,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(s=>{s&&this.router.navigate(["home"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(O(Mq),O(P_),O(Wi),O(Je))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zhe(n,e){if(1&n&&(pe(0,"li")(1,"p")(2,"strong"),Ee(3,"Album Title: "),ce(),Ee(4),ce(),pe(5,"p")(6,"strong"),Ee(7,"Posted by: "),ce(),Ee(8),ce(),pe(9,"a",1),Ee(10),ce()()),2&n){const t=e.$implicit;Ne(4),gr(" ",t.title," "),Ne(4),gr(" ",t.userId," "),Ne(2),ko(t.id)}}let qhe=(()=>{class n{constructor(t,r){this.data=t,this.authService=r}ngOnInit(){this.data.getAlbums().subscribe(t=>this.posts$=t)}}return n.\u0275fac=function(t){return new(t||n)(C(Vf),C(Sd))},n.\u0275cmp=Mn({type:n,selectors:[["app-posts"]],decls:4,vars:1,consts:[[4,"ngFor","ngForOf"],["routerLink",""]],template:function(t,r){1&t&&(pe(0,"h1"),Ee(1,"Albums"),ce(),pe(2,"ul"),$t(3,zhe,11,3,"li",0),ce()),2&t&&(Ne(3),tt("ngForOf",r.posts$))},dependencies:[Qg,Uo]}),n})();function Whe(n,e){if(1&n&&(pe(0,"div")(1,"h1"),Ee(2),ce(),pe(3,"ul")(4,"li")(5,"strong"),Ee(6,"Username:"),ce(),Ee(7),ce(),pe(8,"li")(9,"strong"),Ee(10,"Email:"),ce(),Ee(11),ce(),pe(12,"li")(13,"strong"),Ee(14,"Phone:"),ce(),Ee(15),ce(),pe(16,"li")(17,"strong"),Ee(18,"Address:"),ce(),Ee(19),ce(),pe(20,"li")(21,"strong"),Ee(22,"Company:"),ce(),Ee(23),pe(24,"strong"),Ee(25,"Catch phrase: "),ce(),Ee(26),pe(27,"strong"),Ee(28,"Mission: "),ce(),Ee(29),ce()()()),2&n){const t=Ii();Ne(2),ko(t.user$.name),Ne(5),gr(" ",t.user$.username,""),Ne(4),gr(" ",t.user$.email,""),Ne(4),gr(" ",t.user$.phone,""),Ne(4),OA(" ",t.user$.address.street,", ",t.user$.address.suite,", ",t.user$.address.city,", ",t.user$.address.zipcode," "),Ne(4),gr(" ",t.user$.company.name," "),Ne(3),gr("",t.user$.company.catchPhrase,". "),Ne(3),gr("",t.user$.company.bs,". ")}}let Khe=(()=>{class n{constructor(t,r){this.data=t,this.route=r,this.route.params.subscribe(i=>this.user$=i.id)}ngOnInit(){this.data.getUser(this.user$).subscribe(t=>this.user$=t)}}return n.\u0275fac=function(t){return new(t||n)(C(Vf),C(Sa))},n.\u0275cmp=Mn({type:n,selectors:[["app-details"]],decls:1,vars:1,consts:[[4,"ngIf"]],template:function(t,r){1&t&&$t(0,Whe,30,11,"div",0),2&t&&tt("ngIf",r.user$)},dependencies:[Hu]}),n})();const Qhe=function(n){return{title:n}},Zhe=function(n,e){return["/photos",n,e]},Yhe=function(){return{exact:!0}};function Xhe(n,e){if(1&n&&(pe(0,"li")(1,"a",1),Ee(2),ce(),pe(3,"ul")(4,"li")(5,"strong"),Ee(6,"Album Title:"),ce(),Ee(7),ce(),pe(8,"li")(9,"strong"),Ee(10,"Album Id:"),ce(),Ee(11),ce(),pe(12,"li")(13,"strong"),Ee(14,"Posted by User:"),ce(),Ee(15),ce(),pe(16,"li")(17,"a",2),Ee(18),ce()()()()),2&n){const t=e.$implicit;Ne(1),tt("routerLink",VL(10,Zhe,t.id,WA(8,Qhe,t.title)))("routerLinkActiveOptions",qA(13,Yhe)),Ne(1),gr(" ",t.title," "),Ne(5),gr(" ",t.title," "),Ne(4),gr(" ",t.id," "),Ne(4),gr(" ",t.userId," "),Ne(2),df("href","http://",t.website,"",yg),Ne(1),ko(t.website)}}let Jhe=(()=>{class n{constructor(t,r){this.data=t,this.route=r,this.route.params.subscribe(i=>this.userAlbum$=i.id)}ngOnInit(){this.data.getUserAlbum(this.userAlbum$).subscribe(t=>this.userAlbum$=t)}}return n.\u0275fac=function(t){return new(t||n)(C(Vf),C(Sa))},n.\u0275cmp=Mn({type:n,selectors:[["app-user-albums"]],decls:9,vars:2,consts:[[4,"ngFor","ngForOf"],["routerLinkActive","activated",3,"routerLink","routerLinkActiveOptions"],[3,"href"]],template:function(t,r){1&t&&(pe(0,"h1")(1,"u"),Ee(2,"User Details"),ce()(),mr(3,"app-details"),pe(4,"h1")(5,"u"),Ee(6,"User Albums"),ce()(),pe(7,"ul"),$t(8,Xhe,19,14,"li",0),ce()),2&t&&(Ne(7),tt("@listStagger",r.userAlbum$),Ne(1),tt("ngForOf",r.userAlbum$))},dependencies:[Qg,Uo,Fw,Khe],data:{animation:[fw("listStagger",[pw("* <=> *",[Df(":enter",[Ms({opacity:0,transform:"translateY(-15px)"}),PD("200ms",Xu("550ms ease-out",Ms({opacity:1,transform:"translateY(0px)"})))],{optional:!0}),Df(":leave",Xu("100ms",Ms({opacity:0})),{optional:!0})])])]}}),n})();const efe=function(n){return["/edit-photo",n]};function tfe(n,e){if(1&n&&(pe(0,"div",5)(1,"div",6),mr(2,"img",7),pe(3,"div",8)(4,"h5",9),Ee(5),ce(),pe(6,"p",10),Ee(7),ce(),pe(8,"a",11),Ee(9,"View Image"),ce()()()()),2&n){const t=e.$implicit;Ne(2),RA("src",t.url,yg),Ne(3),ko(t.title),Ne(2),ko(t.albumId),Ne(1),tt("routerLink",WA(4,efe,t.id))}}let nfe=(()=>{class n{constructor(t,r){this.data=t,this.route=r,this.route.params.subscribe(i=>{this.userAlbum$=i.id,this.albumTitle=i.title})}ngOnInit(){this.data.getPhotos(this.userAlbum$).subscribe(t=>this.userAlbum$=t)}}return n.\u0275fac=function(t){return new(t||n)(C(Vf),C(Sa))},n.\u0275cmp=Mn({type:n,selectors:[["app-photos"]],decls:8,vars:2,consts:[[1,"container"],[1,"row"],[1,"col-md-12"],[1,"text-center"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"card","mb-4"],["alt","Photo",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],["href","#",1,"btn","btn-primary",3,"routerLink"]],template:function(t,r){1&t&&(pe(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),Ee(4),ce()()()(),pe(5,"div",0)(6,"div",1),$t(7,tfe,10,6,"div",4),ce()()),2&t&&(Ne(4),gr("Album Title: ",r.albumTitle,""),Ne(3),tt("ngForOf",r.userAlbum$))},dependencies:[Qg,Uo],styles:[".content[_ngcontent-%COMP%]{padding:16px}"],data:{animation:[fw("listStagger",[pw("* <=> *",[Df(":enter",[Ms({opacity:0,transform:"translateY(-15px)"}),PD("200ms",Xu("550ms ease-out",Ms({opacity:1,transform:"translateY(0px)"})))],{optional:!0}),Df(":leave",Xu("100ms",Ms({opacity:0})),{optional:!0})])])]}}),n})();function rfe(n,e){if(1&n){const t=uf();pe(0,"div")(1,"ul")(2,"li")(3,"strong"),Ee(4,"Photo Title :"),ce(),Ee(5),ce(),pe(6,"li")(7,"strong"),Ee(8,"Photo Url:"),ce(),Ee(9),ce(),pe(10,"li")(11,"strong"),Ee(12,"Photo Id:"),ce(),Ee(13),ce()(),pe(14,"form")(15,"mat-form-field")(16,"mat-label"),Ee(17,"Edit Title:"),ce(),pe(18,"input",1),Bn("ngModelChange",function(i){return Do(t),nl(Ii().photoData.title=i)}),ce()(),pe(19,"button",2),Bn("click",function(){return Do(t),nl(Ii().updatePhoto())}),Ee(20,"Submit"),ce()()()}if(2&n){const t=Ii();Ne(5),gr(" ",t.photoData.title,""),Ne(4),gr(" ",t.photoData.url,""),Ne(4),gr(" ",t.photoData.id,""),Ne(5),tt("ngModel",t.photoData.title)}}let ife=(()=>{class n{constructor(t,r,i){this.route=t,this.dataService=r,this.fb=i}ngOnInit(){this.route.params.subscribe(t=>{this.photoId=+t.id}),this.dataService.getIndividualPhoto(this.photoId).subscribe(t=>{this.photoData=t,this.createForm()},t=>{console.error("Error fetching individual photo:",t)})}createForm(){this.photoForm=this.fb.group({title:[this.photoData.title,bB.required]})}updatePhoto(){this.photoForm.valid&&this.dataService.updatePhotoTitle(this.photoId,this.photoForm.value.title).subscribe(r=>{console.log("Photo title updated successfully:",r)},r=>{console.error("Error updating photo title:",r)})}}return n.\u0275fac=function(t){return new(t||n)(C(Sa),C(Vf),C(cne))},n.\u0275cmp=Mn({type:n,selectors:[["app-edit-photo"]],decls:1,vars:1,consts:[[4,"ngIf"],["matInput","","type","text","id","title","name","title",3,"ngModel","ngModelChange"],["mat-raised-button","","color","primary","type","submit",3,"click"]],template:function(t,r){1&t&&$t(0,rfe,21,4,"div",0),2&t&&tt("ngIf",r.photoData)},dependencies:[Hu,gD,e_,oD,aD,iw,xf,RD,hj,dj,kD]}),n})();function Pq(n){for(let e in n){let t=n[e]??"";switch(e){case"display":n.display="flex"===t?["-webkit-flex","flex"]:"inline-flex"===t?["-webkit-inline-flex","inline-flex"]:t;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":n["-webkit-"+e]=t;break;case"flex-direction":n["-webkit-flex-direction"]=t,n["flex-direction"]=t;break;case"order":n.order=n["-webkit-"+e]=isNaN(+t)?"0":t}}return n}const wP="inline",ux=["row","column","row-reverse","column-reverse"];function Nq(n){let[e,t,r]=kq(n);return function ofe(n,e=null,t=!1){return{display:t?"inline-flex":"flex","box-sizing":"border-box","flex-direction":n,"flex-wrap":e||null}}(e,t,r)}function kq(n){n=n?.toLowerCase()??"";let[e,t,r]=n.split(" ");return ux.find(i=>i===e)||(e=ux[0]),t===wP&&(t=r!==wP?r:"",r=wP),[e,sfe(t),!!r]}function Gy(n){let[e]=kq(n);return e.indexOf("row")>-1}function sfe(n){if(n)switch(n.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":n="wrap-reverse";break;case"no":case"none":case"nowrap":n="nowrap";break;default:n="wrap"}return n}function Sl(n,...e){if(null==n)throw TypeError("Cannot convert undefined or null to object");for(let t of e)if(null!=t)for(let r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}const lfe={provide:xE,useFactory:function afe(n,e){return()=>{if($u(e)){const t=Array.from(n.querySelectorAll(`[class*=${Oq}]`)),r=/\bflex-layout-.+?\b/g;t.forEach(i=>{i.classList.contains(`${Oq}ssr`)&&i.parentNode?i.parentNode.removeChild(i):i.className.replace(r,"")})}}},deps:[zt,nr],multi:!0},Oq="flex-layout-";let xP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({providers:[lfe]}),n})();class Rd{constructor(e=!1,t="all",r="",i="",s=0){this.matches=e,this.mediaQuery=t,this.mqAlias=r,this.suffix=i,this.priority=s,this.property=""}clone(){return new Rd(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let cfe=(()=>{class n{constructor(){this.stylesheet=new Map}addStyleToElement(t,r,i){const s=this.stylesheet.get(t);s?s.set(r,i):this.stylesheet.set(t,new Map([[r,i]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(t,r){const i=this.stylesheet.get(t);let s="";if(i){const o=i.get(r);("number"==typeof o||"string"==typeof o)&&(s=o+"")}return s}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const IP={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},Go=new oe("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>IP}),Np=new oe("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),CP=new oe("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function Fq(n,e){return n=n?.clone()??new Rd,e&&(n.mqAlias=e.alias,n.mediaQuery=e.mediaQuery,n.suffix=e.suffix,n.priority=e.priority),n}class Xn{constructor(){this.shouldCache=!0}sideEffect(e,t,r){}}let Tn=(()=>{class n{constructor(t,r,i,s){this._serverStylesheet=t,this._serverModuleLoaded=r,this._platformId=i,this.layoutConfig=s}applyStyleToElement(t,r,i=null){let s={};"string"==typeof r&&(s[r]=i,r=s),s=this.layoutConfig.disableVendorPrefixes?r:Pq(r),this._applyMultiValueStyleToElement(s,t)}applyStyleToElements(t,r=[]){const i=this.layoutConfig.disableVendorPrefixes?t:Pq(t);r.forEach(s=>{this._applyMultiValueStyleToElement(i,s)})}getFlowDirection(t){const r="flex-direction";let i=this.lookupStyle(t,r);return[i||"row",this.lookupInlineStyle(t,r)||xa(this._platformId)&&this._serverModuleLoaded?i:""]}hasWrap(t){return"wrap"===this.lookupStyle(t,"flex-wrap")}lookupAttributeValue(t,r){return t.getAttribute(r)??""}lookupInlineStyle(t,r){return $u(this._platformId)?t.style.getPropertyValue(r):function ufe(n,e){return Lq(n)[e]??""}(t,r)}lookupStyle(t,r,i=!1){let s="";return t&&((s=this.lookupInlineStyle(t,r))||($u(this._platformId)?i||(s=getComputedStyle(t).getPropertyValue(r)):this._serverModuleLoaded&&(s=this._serverStylesheet.getStyleForElement(t,r)))),s?s.trim():""}_applyMultiValueStyleToElement(t,r){Object.keys(t).sort().forEach(i=>{const s=t[i],o=Array.isArray(s)?s:[s];o.sort();for(let a of o)a=a?a+"":"",$u(this._platformId)||!this._serverModuleLoaded?$u(this._platformId)?r.style.setProperty(i,a):dfe(r,i,a):this._serverStylesheet.addStyleToElement(r,i,a)})}}return n.\u0275fac=function(t){return new(t||n)(O(cfe),O(Np),O(nr),O(Go))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function dfe(n,e,t){e=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const r=Lq(n);r[e]=t??"",function hfe(n,e){let t="";for(const r in e)e[r]&&(t+=`${r}:${e[r]};`);n.setAttribute("style",t)}(n,r)}function Lq(n){const e={},t=n.getAttribute("style");if(t){const r=t.split(/;+/g);for(let i=0;i<r.length;i++){const s=r[i].trim();if(s.length>0){const o=s.indexOf(":");if(-1===o)throw new Error(`Invalid CSS style: ${s}`);e[s.substr(0,o).trim()]=s.substr(o+1).trim()}}}return e}function zy(n,e){return(e&&e.priority||0)-(n&&n.priority||0)}function ffe(n,e){return(n.priority||0)-(e.priority||0)}let AP=(()=>{class n{constructor(t,r,i){this._zone=t,this._platformId=r,this._document=i,this.source=new Q(new Rd(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const t=[];return this.registry.forEach((r,i)=>{r.matches&&t.push(i)}),t}isActive(t){return this.registry.get(t)?.matches??this.registerQuery(t).some(i=>i.matches)}observe(t,r=!1){if(t&&t.length){const i=this._observable$.pipe(ii(o=>!r||t.indexOf(o.mediaQuery)>-1));return V(new dt(o=>{const a=this.registerQuery(t);if(a.length){const l=a.pop();a.forEach(c=>{o.next(c)}),this.source.next(l)}o.complete()}),i)}return this._observable$}registerQuery(t){const r=Array.isArray(t)?t:[t],i=[];return function pfe(n,e){const t=n.filter(r=>!Vq[r]);if(t.length>0){const r=t.join(", ");try{const i=e.createElement("style");i.setAttribute("type","text/css"),i.styleSheet||i.appendChild(e.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${r} {.fx-query-test{ }}\n`)),e.head.appendChild(i),t.forEach(s=>Vq[s]=i)}catch(i){console.error(i)}}}(r,this._document),r.forEach(s=>{const o=l=>{this._zone.run(()=>this.source.next(new Rd(l.matches,s)))};let a=this.registry.get(s);a||(a=this.buildMQL(s),a.addListener(o),this.pendingRemoveListenerFns.push(()=>a.removeListener(o)),this.registry.set(s,a)),a.matches&&i.push(new Rd(!0,s))}),i}ngOnDestroy(){let t;for(;t=this.pendingRemoveListenerFns.pop();)t()}buildMQL(t){return function gfe(n,e){return e&&window.matchMedia("all").addListener?window.matchMedia(n):function mfe(n){const e=new EventTarget;return e.matches="all"===n||""===n,e.media=n,e.addListener=()=>{},e.removeListener=()=>{},e.addEventListener=()=>{},e.dispatchEvent=()=>!1,e.onchange=null,e}(n)}(t,$u(this._platformId))}}return n.\u0275fac=function(t){return new(t||n)(O(Je),O(nr),O(zt))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Vq={},_fe=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],Bq="(orientation: portrait) and (max-width: 599.98px)",Uq="(orientation: landscape) and (max-width: 959.98px)",jq="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",Hq="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",$q="(orientation: portrait) and (min-width: 840px)",Gq="(orientation: landscape) and (min-width: 1280px)",Rl={HANDSET:`${Bq}, ${Uq}`,TABLET:`${jq} , ${Hq}`,WEB:`${$q}, ${Gq} `,HANDSET_PORTRAIT:`${Bq}`,TABLET_PORTRAIT:`${jq} `,WEB_PORTRAIT:`${$q}`,HANDSET_LANDSCAPE:`${Uq}`,TABLET_LANDSCAPE:`${Hq}`,WEB_LANDSCAPE:`${Gq}`},yfe=[{alias:"handset",priority:2e3,mediaQuery:Rl.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:Rl.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:Rl.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:Rl.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:Rl.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:Rl.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:Rl.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:Rl.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:Rl.WEB_PORTRAIT,overlapping:!0}],vfe=/(\.|-|_)/g;function bfe(n){let e=n.length>0?n.charAt(0):"",t=n.length>1?n.slice(1):"";return e.toUpperCase()+t}const Ife=new oe("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const n=me(CP),e=me(Go),t=[].concat.apply([],(n||[]).map(i=>Array.isArray(i)?i:[i]));return function xfe(n,e=[]){const t={};return n.forEach(r=>{t[r.alias]=r}),e.forEach(r=>{t[r.alias]?Sl(t[r.alias],r):t[r.alias]=r}),function wfe(n){return n.forEach(e=>{e.suffix||(e.suffix=function Efe(n){return n.replace(vfe,"|").split("|").map(bfe).join("")}(e.alias),e.overlapping=!!e.overlapping)}),n}(Object.keys(t).map(r=>t[r]))}((e.disableDefaultBps?[]:_fe).concat(e.addOrientationBps?yfe:[]),t)}});let TP=(()=>{class n{constructor(t){this.findByMap=new Map,this.items=[...t].sort(ffe)}findByAlias(t){return t?this.findWithPredicate(t,r=>r.alias===t):null}findByQuery(t){return this.findWithPredicate(t,r=>r.mediaQuery===t)}get overlappings(){return this.items.filter(t=>t.overlapping)}get aliases(){return this.items.map(t=>t.alias)}get suffixes(){return this.items.map(t=>t?.suffix??"")}findWithPredicate(t,r){let i=this.findByMap.get(t);return i||(i=this.items.find(r)??null,this.findByMap.set(t,i)),i??null}}return n.\u0275fac=function(t){return new(t||n)(O(Ife))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const kp="print",Cfe={alias:kp,mediaQuery:kp,priority:1e3};let Afe=(()=>{class n{constructor(t,r,i){this.breakpoints=t,this.layoutConfig=r,this._document=i,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new Tfe,this.deactivations=[]}withPrintQuery(t){return[...t,kp]}isPrintEvent(t){return t.mediaQuery.startsWith(kp)}get printAlias(){return[...this.layoutConfig.printWithBreakpoints??[]]}get printBreakPoints(){return this.printAlias.map(t=>this.breakpoints.findByAlias(t)).filter(t=>null!==t)}getEventBreakpoints({mediaQuery:t}){const r=this.breakpoints.findByQuery(t);return(r?[...this.printBreakPoints,r]:this.printBreakPoints).sort(zy)}updateEvent(t){let r=this.breakpoints.findByQuery(t.mediaQuery);return this.isPrintEvent(t)&&(r=this.getEventBreakpoints(t)[0],t.mediaQuery=r?.mediaQuery??""),Fq(t,r)}registerBeforeAfterPrintHooks(t){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const r=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(t,this.getEventBreakpoints(new Rd(!0,kp))),t.updateStyles())},i=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(t),t.updateStyles())};this._document.defaultView.addEventListener("beforeprint",r),this._document.defaultView.addEventListener("afterprint",i),this.beforePrintEventListeners.push(r),this.afterPrintEventListeners.push(i)}interceptEvents(t){return r=>{this.isPrintEvent(r)?r.matches&&!this.isPrinting?(this.startPrinting(t,this.getEventBreakpoints(r)),t.updateStyles()):!r.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(t),t.updateStyles()):this.collectActivations(t,r)}}blockPropagation(){return t=>!(this.isPrinting||this.isPrintEvent(t))}startPrinting(t,r){this.isPrinting=!0,this.formerActivations=t.activatedBreakpoints,t.activatedBreakpoints=this.queue.addPrintBreakpoints(r)}stopPrinting(t){t.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(t,r){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!r.matches){const i=this.breakpoints.findByQuery(r.mediaQuery);if(i){const s=this.formerActivations&&this.formerActivations.includes(i),o=!this.formerActivations&&t.activatedBreakpoints.includes(i);(s||o)&&(this.deactivations.push(i),this.deactivations.sort(zy))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("beforeprint",t)),this.afterPrintEventListeners.forEach(t=>this._document.defaultView.removeEventListener("afterprint",t)))}}return n.\u0275fac=function(t){return new(t||n)(O(TP),O(Go),O(zt))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class Tfe{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(e){return e.push(Cfe),e.sort(zy),e.forEach(t=>this.addBreakpoint(t)),this.printBreakpoints}addBreakpoint(e){e&&void 0===this.printBreakpoints.find(r=>r.mediaQuery===e.mediaQuery)&&(this.printBreakpoints=function Dfe(n){return n?.mediaQuery.startsWith(kp)??!1}(e)?[e,...this.printBreakpoints]:[...this.printBreakpoints,e])}clear(){this.printBreakpoints=[]}}let Ln=(()=>{class n{constructor(t,r,i){this.matchMedia=t,this.breakpoints=r,this.hook=i,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new z,this.observeActivations()}get activatedAlias(){return this.activatedBreakpoints[0]?.alias??""}set activatedBreakpoints(t){this._activatedBreakpoints=[...t]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(t){this._useFallbacks=t}onMediaChange(t){const r=this.findByQuery(t.mediaQuery);if(r){t=Fq(t,r);const i=this.activatedBreakpoints.indexOf(r);t.matches&&-1===i?(this._activatedBreakpoints.push(r),this._activatedBreakpoints.sort(zy),this.updateStyles()):!t.matches&&-1!==i&&(this._activatedBreakpoints.splice(i,1),this._activatedBreakpoints.sort(zy),this.updateStyles())}}init(t,r,i,s,o=[]){zq(this.updateMap,t,r,i),zq(this.clearMap,t,r,s),this.buildElementKeyMap(t,r),this.watchExtraTriggers(t,r,o)}getValue(t,r,i){const s=this.elementMap.get(t);if(s){const o=void 0!==i?s.get(i):this.getActivatedValues(s,r);if(o)return o.get(r)}}hasValue(t,r){const i=this.elementMap.get(t);if(i){const s=this.getActivatedValues(i,r);if(s)return void 0!==s.get(r)||!1}return!1}setValue(t,r,i,s){let o=this.elementMap.get(t);if(o){const l=(o.get(s)??new Map).set(r,i);o.set(s,l),this.elementMap.set(t,o)}else o=(new Map).set(s,(new Map).set(r,i)),this.elementMap.set(t,o);const a=this.getValue(t,r);void 0!==a&&this.updateElement(t,r,a)}trackValue(t,r){return this.subject.asObservable().pipe(ii(i=>i.element===t&&i.key===r))}updateStyles(){this.elementMap.forEach((t,r)=>{const i=new Set(this.elementKeyMap.get(r));let s=this.getActivatedValues(t);s&&s.forEach((o,a)=>{this.updateElement(r,a,o),i.delete(a)}),i.forEach(o=>{if(s=this.getActivatedValues(t,o),s){const a=s.get(o);this.updateElement(r,o,a)}else this.clearElement(r,o)})})}clearElement(t,r){const i=this.clearMap.get(t);if(i){const s=i.get(r);s&&(s(),this.subject.next({element:t,key:r,value:""}))}}updateElement(t,r,i){const s=this.updateMap.get(t);if(s){const o=s.get(r);o&&(o(i),this.subject.next({element:t,key:r,value:i}))}}releaseElement(t){const r=this.watcherMap.get(t);r&&(r.forEach(s=>s.unsubscribe()),this.watcherMap.delete(t));const i=this.elementMap.get(t);i&&(i.forEach((s,o)=>i.delete(o)),this.elementMap.delete(t))}triggerUpdate(t,r){const i=this.elementMap.get(t);if(i){const s=this.getActivatedValues(i,r);s&&(r?this.updateElement(t,r,s.get(r)):s.forEach((o,a)=>this.updateElement(t,a,o)))}}buildElementKeyMap(t,r){let i=this.elementKeyMap.get(t);i||(i=new Set,this.elementKeyMap.set(t,i)),i.add(r)}watchExtraTriggers(t,r,i){if(i&&i.length){let s=this.watcherMap.get(t);if(s||(s=new Map,this.watcherMap.set(t,s)),!s.get(r)){const a=V(...i).subscribe(()=>{const l=this.getValue(t,r);this.updateElement(t,r,l)});s.set(r,a)}}}findByQuery(t){return this.breakpoints.findByQuery(t)}getActivatedValues(t,r){for(let s=0;s<this.activatedBreakpoints.length;s++){const a=t.get(this.activatedBreakpoints[s].alias);if(a&&(void 0===r||a.has(r)&&null!=a.get(r)))return a}if(!this._useFallbacks)return;const i=t.get("");return void 0===r||i&&i.has(r)?i:void 0}observeActivations(){const t=this.breakpoints.items.map(r=>r.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(t)).pipe(br(this.hook.interceptEvents(this)),ii(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return n.\u0275fac=function(t){return new(t||n)(O(AP),O(TP),O(Afe))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function zq(n,e,t,r){if(void 0!==r){const i=n.get(e)??new Map;i.set(t,r),n.set(e,i)}}let Hn=(()=>{class n{constructor(t,r,i,s){this.elementRef=t,this.styleBuilder=r,this.styler=i,this.marshal=s,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new z,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(t){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,this.marshal.activatedAlias)}ngOnChanges(t){Object.keys(t).forEach(r=>{if(-1!==this.inputs.indexOf(r)){const i=r.split(".").slice(1).join(".");this.setValue(t[r].currentValue,i)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(t=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),t)}addStyles(t,r){const i=this.styleBuilder,s=i.shouldCache;let o=this.styleCache.get(t);(!o||!s)&&(o=i.buildStyles(t,r),s&&this.styleCache.set(t,o)),this.mru={...o},this.applyStyleToElement(o),i.sideEffect(t,o,r)}clearStyles(){Object.keys(this.mru).forEach(t=>{this.mru[t]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(t,r=!1){if(t){const[i,s]=this.styler.getFlowDirection(t);if(!s&&r){const o=Nq(i);this.styler.applyStyleToElements(o,[t])}return i.trim()}return"row"}hasWrap(t){return this.styler.hasWrap(t)}applyStyleToElement(t,r,i=this.nativeElement){this.styler.applyStyleToElement(i,t,r)}setValue(t,r){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,t,r)}updateWithValue(t){this.currentValue!==t&&(this.addStyles(t),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(C(et),C(Xn),C(Tn),C(Ln))},n.\u0275dir=ne({type:n,features:[Rr]}),n})();EventTarget;let Mfe=(()=>{class n extends Xn{buildStyles(t,{display:r}){const i=Nq(t);return{...i,display:"none"===r?r:i.display}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ve(n)))(r||n)}}(),n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Pfe=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let Nfe=(()=>{class n extends Hn{constructor(t,r,i,s,o){super(t,i,r,s),this._config=o,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(t){const i=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=Zq.get(i)??new Map,Zq.set(i,this.styleCache),this.currentValue!==t&&(this.addStyles(t,{display:i}),this.currentValue=t)}}return n.\u0275fac=function(t){return new(t||n)(C(et),C(Tn),C(Mfe),C(Ln),C(Go))},n.\u0275dir=ne({type:n,features:[ve]}),n})(),Qq=(()=>{class n extends Nfe{constructor(){super(...arguments),this.inputs=Pfe}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ve(n)))(r||n)}}(),n.\u0275dir=ne({type:n,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[ve]}),n})();const Zq=new Map;let Epe=(()=>{class n extends Xn{buildStyles(t,r){const i={},[s,o]=t.split(" ");switch(s){case"center":i["justify-content"]="center";break;case"space-around":i["justify-content"]="space-around";break;case"space-between":i["justify-content"]="space-between";break;case"space-evenly":i["justify-content"]="space-evenly";break;case"end":case"flex-end":i["justify-content"]="flex-end";break;default:i["justify-content"]="flex-start"}switch(o){case"start":case"flex-start":i["align-items"]=i["align-content"]="flex-start";break;case"center":i["align-items"]=i["align-content"]="center";break;case"end":case"flex-end":i["align-items"]=i["align-content"]="flex-end";break;case"space-between":i["align-content"]="space-between",i["align-items"]="stretch";break;case"space-around":i["align-content"]="space-around",i["align-items"]="stretch";break;case"baseline":i["align-content"]="stretch",i["align-items"]="baseline";break;default:i["align-items"]=i["align-content"]="stretch"}return Sl(i,{display:r.inline?"inline-flex":"flex","flex-direction":r.layout,"box-sizing":"border-box","max-width":"stretch"===o?Gy(r.layout)?null:"100%":null,"max-height":"stretch"===o&&Gy(r.layout)?"100%":null})}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ve(n)))(r||n)}}(),n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const wpe=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let xpe=(()=>{class n extends Hn{constructor(t,r,i,s){super(t,i,r,s),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(ao(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(t){const r=this.layout||"row",i=this.inline;"row"===r&&i?this.styleCache=Dpe:"row"!==r||i?"row-reverse"===r&&i?this.styleCache=Rpe:"row-reverse"!==r||i?"column"===r&&i?this.styleCache=Spe:"column"!==r||i?"column-reverse"===r&&i?this.styleCache=Mpe:"column-reverse"===r&&!i&&(this.styleCache=Tpe):this.styleCache=Cpe:this.styleCache=Ape:this.styleCache=Ipe,this.addStyles(t,{layout:r,inline:i})}onLayoutChange(t){const r=t.value.split(" ");this.layout=r[0],this.inline=t.value.includes("inline"),ux.find(i=>i===this.layout)||(this.layout="row"),this.triggerUpdate()}}return n.\u0275fac=function(t){return new(t||n)(C(et),C(Tn),C(Epe),C(Ln))},n.\u0275dir=ne({type:n,features:[ve]}),n})(),Jq=(()=>{class n extends xpe{constructor(){super(...arguments),this.inputs=wpe}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=Ve(n)))(r||n)}}(),n.\u0275dir=ne({type:n,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[ve]}),n})();const Ipe=new Map,Cpe=new Map,Ape=new Map,Tpe=new Map,Dpe=new Map,Spe=new Map,Rpe=new Map,Mpe=new Map;let e3=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[xP,SD]}),n})();function Ppe(n,e){1&n&&(pe(0,"span"),Ee(1,"Email is required."),ce())}function Npe(n,e){1&n&&(pe(0,"span"),Ee(1,"Invalid email address."),ce())}function kpe(n,e){if(1&n&&(pe(0,"mat-error"),$t(1,Ppe,2,0,"span",5),$t(2,Npe,2,0,"span",5),ce()),2&n){Ii();const t=Rs(9);Ne(1),tt("ngIf",null==t.errors?null:t.errors.required),Ne(1),tt("ngIf",null==t.errors?null:t.errors.email)}}function Ope(n,e){1&n&&(pe(0,"span"),Ee(1,"Password is required."),ce())}function Fpe(n,e){1&n&&(pe(0,"span"),Ee(1,"Password must be at least 6 characters long."),ce())}function Lpe(n,e){if(1&n&&(pe(0,"mat-error"),$t(1,Ope,2,0,"span",5),$t(2,Fpe,2,0,"span",5),ce()),2&n){Ii();const t=Rs(13);Ne(1),tt("ngIf",null==t.errors?null:t.errors.required),Ne(1),tt("ngIf",null==t.errors?null:t.errors.minlength)}}let Vpe=(()=>{class n{constructor(t){this.authService=t,this.userEmailValue="",this.userPasswordValue=""}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(C(Sd))},n.\u0275cmp=Mn({type:n,selectors:[["app-sign-in"]],decls:17,vars:5,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"authBlock"],["fxLayout","column","fxLayoutAlign","center stretch",3,"ngSubmit"],["signInForm","ngForm"],["matInput","","placeholder","Email","name","userEmail","required","","email","",3,"ngModel","ngModelChange"],["userEmail","ngModel"],[4,"ngIf"],["matInput","","type","password","placeholder","Password","name","userPassword","required","","minlength","6",3,"ngModel","ngModelChange"],["userPassword","ngModel"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(t,r){if(1&t){const i=uf();pe(0,"mat-card",0)(1,"mat-card-header")(2,"mat-card-title"),Ee(3,"Sign In"),ce()(),pe(4,"mat-card-content")(5,"form",1,2),Bn("ngSubmit",function(){Do(i);const o=Rs(9),a=Rs(13);return nl(r.authService.SignIn(o.value,a.value))}),pe(7,"mat-form-field")(8,"input",3,4),Bn("ngModelChange",function(o){return r.userEmailValue=o}),ce(),$t(10,kpe,3,2,"mat-error",5),ce(),pe(11,"mat-form-field")(12,"input",6,7),Bn("ngModelChange",function(o){return r.userPasswordValue=o}),ce(),$t(14,Lpe,3,2,"mat-error",5),ce(),pe(15,"button",8),Ee(16,"Log in"),ce()()()()}if(2&t){const i=Rs(6),s=Rs(9),o=Rs(13);Ne(8),tt("ngModel",r.userEmailValue),Ne(2),tt("ngIf",s.invalid&&(s.dirty||s.touched)),Ne(2),tt("ngModel",r.userPasswordValue),Ne(2),tt("ngIf",o.invalid&&(o.dirty||o.touched)),Ne(1),tt("disabled",i.invalid)}},dependencies:[Hu,gD,e_,oD,aD,ow,xD,wD,iw,xf,RD,hj,dj,Xre,Qq,Jq]}),n})(),Bpe=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(C(Sd))},n.\u0275cmp=Mn({type:n,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=uf();pe(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),Ee(4,"Sign Up"),ce(),pe(5,"div",3),mr(6,"input",4,5),ce(),pe(8,"div",3),mr(9,"input",6,7),ce(),pe(11,"div",3)(12,"input",8),Bn("click",function(){Do(i);const o=Rs(7),a=Rs(10);return nl(r.authService.SignUp(o.value,a.value))}),ce()(),pe(13,"div",3)(14,"span",9)(15,"span",10),Ee(16,"Or"),ce()()(),pe(17,"div",11)(18,"span"),Ee(19,"Already have an account? "),pe(20,"span",12),Ee(21,"Log In"),ce()()()()()()}},dependencies:[Uo]}),n})(),Upe=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(C(Sd))},n.\u0275cmp=Mn({type:n,selectors:[["app-forgot-password"]],decls:19,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=uf();pe(0,"p"),Ee(1,"forgot-password works!"),ce(),pe(2,"div",0)(3,"div",1)(4,"div",2)(5,"h3"),Ee(6,"Reset Password"),ce(),pe(7,"p",3),Ee(8," Please enter your email address to request a password reset. "),ce(),pe(9,"div",4),mr(10,"input",5,6),ce(),pe(12,"div",4)(13,"input",7),Bn("click",function(){Do(i);const o=Rs(11);return nl(r.authService.ForgotPassword(o.value))}),ce()()(),pe(14,"div",8)(15,"span"),Ee(16,"Go back to ? "),pe(17,"span",9),Ee(18,"Log In"),ce()()()()()}},dependencies:[Uo]}),n})();function jpe(n,e){if(1&n&&(pe(0,"div",4)(1,"p",9),Ee(2," We have sent a confirmation email to "),pe(3,"strong"),Ee(4),ce(),Ee(5,". "),ce(),pe(6,"p",9),Ee(7," Please check your email and click on the link to verfiy your email address. "),ce()()),2&n){const t=e.ngIf;Ne(4),ko(t.email)}}let Hpe=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(C(Sd))},n.\u0275cmp=Mn({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(pe(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),Ee(4,"Thank You for Registering"),ce(),$t(5,jpe,8,1,"div",3),pe(6,"div",4)(7,"button",5),Bn("click",function(){return r.authService.SendVerificationMail()}),mr(8,"i",6),Ee(9," Resend Verification Email "),ce()()(),pe(10,"div",7)(11,"span"),Ee(12,"Go back to?"),pe(13,"span",8),Ee(14," Sign in"),ce()()()()()),2&t&&(Ne(5),tt("ngIf",r.authService.userData))},dependencies:[Hu,Uo]}),n})(),qy=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(O(Sd),O(Wi))},n.\u0275prov=se({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $pe=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:Vpe},{path:"register-user",component:Bpe},{path:"forgot-password",component:Upe},{path:"verify-email-address",component:Hpe},{path:"home",component:Goe,canActivate:[qy]},{path:"albums",component:qhe,canActivate:[qy]},{path:"albums/:id",component:Jhe,canActivate:[qy]},{path:"photos/:id",component:nfe,canActivate:[qy]},{path:"edit-photo/:id",component:ife,canActivate:[qy]}];let Gpe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[wH.forRoot($pe,{}),wH]}),n})();function zpe(n,e){if(1&n){const t=uf();pe(0,"li")(1,"button",4),Bn("click",function(){return Do(t),nl(Ii().authService.SignOut())}),mr(2,"i",5),Ee(3," Log out "),ce()()}}let qpe=(()=>{class n{constructor(t,r){this.router=t,this.authService=r,t.events.subscribe(i=>this.currentUrl=this.router.url)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(C(Wi),C(Sd))},n.\u0275cmp=Mn({type:n,selectors:[["app-sidebar"]],decls:11,vars:1,consts:[["routerLink","home","routerLinkActive","activated"],[1,"material-icons"],["routerLink","albums","routerLinkActive","activated"],[4,"ngIf"],["mat-button","","color","warn",3,"click"],[1,"fas","fa-sign-out-alt"]],template:function(t,r){1&t&&(pe(0,"nav")(1,"ul")(2,"li")(3,"a",0)(4,"i",1),Ee(5,"supervised_user_circle"),ce()()(),pe(6,"li")(7,"a",2)(8,"i",1),Ee(9,"album"),ce()()(),$t(10,zpe,4,0,"li",3),ce()()),2&t&&(Ne(10),tt("ngIf",r.authService.isLoggedIn))},dependencies:[Hu,Uo,Fw,RD],styles:["nav[_ngcontent-%COMP%]{background:rgb(0,0,0);height:100%}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding:0;margin:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff;padding:20px;display:block}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .activated[_ngcontent-%COMP%]{background-color:#00a8ff}"]}),n})(),Wpe=(()=>{class n{constructor(){this.title="angular-user-posts"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Mn({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[["id","container"],["id","content"]],template:function(t,r){1&t&&(pe(0,"div",0),mr(1,"app-sidebar"),pe(2,"div",1),mr(3,"router-outlet"),ce()())},dependencies:[ZD,qpe]}),n})();function t3(n){return new L(3e3,!1)}function zc(n){switch(n.length){case 0:return new p_;case 1:return n[0];default:return new XU(n)}}function n3(n,e,t=new Map,r=new Map){const i=[],s=[];let o=-1,a=null;if(e.forEach(l=>{const c=l.get("offset"),h=c==o,p=h&&a||new Map;l.forEach((g,_)=>{let v=_,E=g;if("offset"!==_)switch(v=n.normalizePropertyName(v,i),E){case"!":E=t.get(_);break;case gl:E=r.get(_);break;default:E=n.normalizeStyleValue(_,v,E,i)}p.set(v,E)}),h||s.push(p),a=p,o=c}),i.length)throw function gme(n){return new L(3502,!1)}();return s}function DP(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&SP(t,"start",n)));break;case"done":n.onDone(()=>r(t&&SP(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&SP(t,"destroy",n)))}}function SP(n,e,t){const s=RP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),o=n._data;return null!=o&&(s._data=o),s}function RP(n,e,t,r,i="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!o}}function Vs(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function r3(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}const Dme=(()=>typeof document>"u"?null:document.documentElement)();function MP(n){const e=n.parentNode||n.host||null;return e===Dme?null:e}let Md=null,s3=!1;function o3(n,e){for(;e;){if(e===n)return!0;e=MP(e)}return!1}function a3(n,e,t){if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]}let l3=(()=>{class n{validateStyleProperty(t){return function Rme(n){Md||(Md=function Mme(){return typeof document<"u"?document.body:null}()||{},s3=!!Md.style&&"WebkitAppearance"in Md.style);let e=!0;return Md.style&&!function Sme(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Md.style,!e&&s3&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Md.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return o3(t,r)}getParentElement(t){return MP(t)}query(t,r,i){return a3(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,o,a=[],l){return new p_(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})(),PP=(()=>{class n{}return n.NOOP=new l3,n})();const Pme=1e3,NP="ng-enter",fx="ng-leave",px="ng-trigger",mx=".ng-trigger",u3="ng-animating",kP=".ng-animating";function Ml(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:OP(parseFloat(e[1]),e[2])}function OP(n,e){return"s"===e?n*Pme:n}function gx(n,e,t){return n.hasOwnProperty("duration")?n:function kme(n,e,t){let i,s=0,o="";if("string"==typeof n){const a=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===a)return e.push(t3()),{duration:0,delay:0,easing:""};i=OP(parseFloat(a[1]),a[2]);const l=a[3];null!=l&&(s=OP(parseFloat(l),a[4]));const c=a[5];c&&(o=c)}else i=n;if(!t){let a=!1,l=e.length;i<0&&(e.push(function Kpe(){return new L(3100,!1)}()),a=!0),s<0&&(e.push(function Qpe(){return new L(3101,!1)}()),a=!0),a&&e.splice(l,0,t3())}return{duration:i,delay:s,easing:o}}(n,e,t)}function Wy(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function d3(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function qc(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function Ba(n,e,t){e.forEach((r,i)=>{const s=LP(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r})}function Pd(n,e){e.forEach((t,r)=>{const i=LP(r);n.style[i]=""})}function Ky(n){return Array.isArray(n)?1==n.length?n[0]:YU(n):n}const FP=new RegExp("{{\\s*(.+?)\\s*}}","g");function f3(n){let e=[];if("string"==typeof n){let t;for(;t=FP.exec(n);)e.push(t[1]);FP.lastIndex=0}return e}function Qy(n,e,t){const r=n.toString(),i=r.replace(FP,(s,o)=>{let a=e[o];return null==a&&(t.push(function Ype(n){return new L(3003,!1)}()),a=""),a.toString()});return i==r?n:i}function _x(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const Lme=/-+([a-z0-9])/g;function LP(n){return n.replace(Lme,(...e)=>e[1].toUpperCase())}function Bs(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function Xpe(n){return new L(3004,!1)}()}}function p3(n,e){return window.getComputedStyle(n)[e]}const yx="*";function Ume(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function jme(n,e,t){if(":"==n[0]){const l=function Hme(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function hme(n){return new L(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof l)return void e.push(l);n=l}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function dme(n){return new L(3015,!1)}()),e;const i=r[1],s=r[2],o=r[3];e.push(m3(i,o));"<"==s[0]&&!(i==yx&&o==yx)&&e.push(m3(o,i))}(r,t,e)):t.push(n),t}const vx=new Set(["true","1"]),bx=new Set(["false","0"]);function m3(n,e){const t=vx.has(n)||bx.has(n),r=vx.has(e)||bx.has(e);return(i,s)=>{let o=n==yx||n==i,a=e==yx||e==s;return!o&&t&&"boolean"==typeof i&&(o=i?vx.has(n):bx.has(n)),!a&&r&&"boolean"==typeof s&&(a=s?vx.has(e):bx.has(e)),o&&a}}const $me=new RegExp("s*:selfs*,?","g");function VP(n,e,t,r){return new Gme(n).build(e,t,r)}class Gme{constructor(e){this._driver=e}build(e,t,r){const i=new Wme(t);return this._resetContextStyleTimingState(i),Bs(this,Ky(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],o=[];return"@"==e.name.charAt(0)&&t.errors.push(function eme(){return new L(3006,!1)}()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),0==a.type){const l=a,c=l.name;c.toString().split(/\s*,\s*/).forEach(h=>{l.name=h,s.push(this.visitState(l,t))}),l.name=c}else if(1==a.type){const l=this.visitTransition(a,t);r+=l.queryCount,i+=l.depCount,o.push(l)}else t.errors.push(function tme(){return new L(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:o,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,o=i||{};r.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{f3(l).forEach(c=>{o.hasOwnProperty(c)||s.add(c)})})}),s.size&&(_x(s.values()),t.errors.push(function nme(n,e){return new L(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Bs(this,Ky(e.animation),t);return{type:1,matchers:Ume(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Nd(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Bs(this,r,t)),options:Nd(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(o=>{t.currentTime=r;const a=Bs(this,o,t);return i=Math.max(i,t.currentTime),a});return t.currentTime=i,{type:3,steps:s,options:Nd(e.options)}}visitAnimate(e,t){const r=function Qme(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return BP(gx(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=BP(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=gx(t,e);return BP(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:Ms({});if(5==s.type)i=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;const c={};r.easing&&(c.easing=r.easing),o=Ms(c)}t.currentTime+=r.duration+r.delay;const l=this.visitStyle(o,t);l.isEmptyStep=a,i=l}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of i)"string"==typeof a?a===gl?r.push(a):t.errors.push(new L(3002,!1)):r.push(d3(a));let s=!1,o=null;return r.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s))for(let l of a.values())if(l.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(o=>{"string"!=typeof o&&o.forEach((a,l)=>{const c=t.collectedStyles.get(t.currentQuerySelector),h=c.get(l);let p=!0;h&&(s!=i&&s>=h.startTime&&i<=h.endTime&&(t.errors.push(function ime(n,e,t,r,i){return new L(3010,!1)}()),p=!1),s=h.startTime),p&&c.set(l,{startTime:s,endTime:i}),t.options&&function Fme(n,e,t){const r=e.params||{},i=f3(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function Zpe(n){return new L(3001,!1)}())})}(a,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function sme(){return new L(3011,!1)}()),r;let s=0;const o=[];let a=!1,l=!1,c=0;const h=e.steps.map(M=>{const D=this._makeStyleAst(M,t);let k=null!=D.offset?D.offset:function Kme(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(D.styles),G=0;return null!=k&&(s++,G=D.offset=k),l=l||G<0||G>1,a=a||G<c,c=G,o.push(G),D});l&&t.errors.push(function ome(){return new L(3012,!1)}()),a&&t.errors.push(function ame(){return new L(3200,!1)}());const p=e.steps.length;let g=0;s>0&&s<p?t.errors.push(function lme(){return new L(3202,!1)}()):0==s&&(g=1/(p-1));const _=p-1,v=t.currentTime,E=t.currentAnimateTimings,x=E.duration;return h.forEach((M,D)=>{const k=g>0?D==_?1:g*D:o[D],G=k*x;t.currentTime=v+E.delay+G,E.duration=G,this._validateStyleAst(M,t),M.offset=k,r.styles.push(M)}),r}visitReference(e,t){return{type:8,animation:Bs(this,Ky(e.animation),t),options:Nd(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Nd(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Nd(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,o]=function zme(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace($me,"")),n=n.replace(/@\*/g,mx).replace(/@\w+/g,t=>mx+"-"+t.slice(1)).replace(/:animating/g,kP),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,Vs(t.collectedStyles,t.currentQuerySelector,new Map);const a=Bs(this,Ky(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Nd(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function cme(){return new L(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:gx(e.timings,t.errors,!0);return{type:12,animation:Bs(this,Ky(e.animation),t),timings:r,options:null}}}class Wme{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Nd(n){return n?(n=Wy(n)).params&&(n.params=function qme(n){return n?Wy(n):null}(n.params)):n={},n}function BP(n,e,t){return{duration:n,delay:e,easing:t}}function UP(n,e,t,r,i,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:o,subTimeline:a}}class Ex{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const Xme=new RegExp(":enter","g"),ege=new RegExp(":leave","g");function jP(n,e,t,r,i,s=new Map,o=new Map,a,l,c=[]){return(new tge).buildKeyframes(n,e,t,r,i,s,o,a,l,c)}class tge{buildKeyframes(e,t,r,i,s,o,a,l,c,h=[]){c=c||new Ex;const p=new HP(e,t,c,i,s,h,[]);p.options=l;const g=l.delay?Ml(l.delay):0;p.currentTimeline.delayNextStep(g),p.currentTimeline.setStyles([o],null,p.errors,l),Bs(this,r,p);const _=p.timelines.filter(v=>v.containsAnimation());if(_.length&&a.size){let v;for(let E=_.length-1;E>=0;E--){const x=_[E];if(x.element===t){v=x;break}}v&&!v.allowOnlyTimelineStyles()&&v.setStyles([a],null,p.errors,l)}return _.length?_.map(v=>v.buildKeyframes()):[UP(t,[],[],[],0,g,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(r,i,i.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const o="number"==typeof s?s:Ml(Qy(s,i?.params??{},t.errors));r.delayNextStep(o)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const o=null!=r.duration?Ml(r.duration):null,a=null!=r.delay?Ml(r.delay):null;return 0!==o&&e.forEach(l=>{const c=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,c.duration+c.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Bs(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=wx);const o=Ml(s.delay);i.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Bs(this,o,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?Ml(e.options.delay):0;e.steps.forEach(o=>{const a=t.createSubContext(e.options);s&&a.delayNextStep(s),Bs(this,o,a),i=Math.max(i,a.currentTimeline.currentTime),r.push(a.currentTimeline)}),r.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return gx(t.params?Qy(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,a=t.createSubContext().currentTimeline;a.easing=r.easing,e.styles.forEach(l=>{a.forwardTime((l.offset||0)*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?Ml(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=wx);let o=r;const a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((c,h)=>{t.currentQueryIndex=h;const p=t.createSubContext(e.options,c);s&&p.delayNextStep(s),c===t.element&&(l=p.currentTimeline),Bs(this,e.animation,p),p.currentTimeline.applyStylesToKeyframe(),o=Math.max(o,p.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1);let l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=r.currentStaggerTime}const h=t.currentTimeline;l&&h.delayNextStep(l);const p=h.currentTime;Bs(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-p+(i.startTime-r.currentTimeline.startTime)}}const wx={};class HP{constructor(e,t,r,i,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=o,this.timelines=a,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=wx,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=l||new xx(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=Ml(r.duration)),null!=r.delay&&(i.delay=Ml(r.delay));const s=r.params;if(s){let o=i.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=Qy(s[a],o,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new HP(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=wx,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new nge(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,o){let a=[];if(i&&a.push(this.element),e.length>0){e=(e=e.replace(Xme,"."+this._enterClassName)).replace(ege,"."+this._leaveClassName);let c=this._driver.query(this.element,e,1!=r);0!==r&&(c=r<0?c.slice(c.length+r,c.length):c.slice(0,r)),a.push(...c)}return!s&&0==a.length&&o.push(function ume(n){return new L(3014,!1)}()),a}}class xx{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new xx(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||gl),this._currentKeyframe.set(t,gl);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},o=function rge(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,gl)}else qc(i,t)}),t}(e,this._globalTimelineStyles);for(let[a,l]of o){const c=Qy(l,s,r);this._pendingStyles.set(a,c),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??gl),this._updateStyle(a,c)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((a,l)=>{const c=qc(a,new Map,this._backFill);c.forEach((h,p)=>{"!"===h?e.add(p):h===gl&&t.add(p)}),r||c.set("offset",l/this.duration),i.push(c)});const s=e.size?_x(e.values()):[],o=t.size?_x(t.values()):[];if(r){const a=i[0],l=new Map(a);a.set("offset",0),l.set("offset",1),i=[a,l]}return UP(this.element,i,s,o,this.duration,this.startTime,this.easing,!1)}}class nge extends xx{constructor(e,t,r,i,s,o,a=!1){super(e,t,o.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],o=r+t,a=t/o,l=qc(e[0]);l.set("offset",0),s.push(l);const c=qc(e[0]);c.set("offset",y3(a)),s.push(c);const h=e.length-1;for(let p=1;p<=h;p++){let g=qc(e[p]);const _=g.get("offset");g.set("offset",y3((t+_*r)/o)),s.push(g)}r=o,t=0,i="",e=s}return UP(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function y3(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class $P{}const ige=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class sge extends $P{normalizePropertyName(e,t){return LP(e)}normalizeStyleValue(e,t,r,i){let s="";const o=r.toString().trim();if(ige.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const a=r.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&0==a[1].length&&i.push(function Jpe(n,e){return new L(3005,!1)}())}return o+s}}function v3(n,e,t,r,i,s,o,a,l,c,h,p,g){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:p,errors:g}}const GP={};class b3{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function oge(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,o,a,l,c,h){const p=[],g=this.ast.options&&this.ast.options.params||GP,v=this.buildStyles(r,a&&a.params||GP,p),E=l&&l.params||GP,x=this.buildStyles(i,E,p),M=new Set,D=new Map,k=new Map,G="void"===i,de={params:age(E,g),delay:this.ast.options?.delay},Se=h?[]:jP(e,t,this.ast.animation,s,o,v,x,de,c,p);let it=0;if(Se.forEach(di=>{it=Math.max(di.duration+di.delay,it)}),p.length)return v3(t,this._triggerName,r,i,G,v,x,[],[],D,k,it,p);Se.forEach(di=>{const _o=di.element,X9=Vs(D,_o,new Set);di.preStyleProps.forEach(qd=>X9.add(qd));const Rv=Vs(k,_o,new Set);di.postStyleProps.forEach(qd=>Rv.add(qd)),_o!==t&&M.add(_o)});const Kt=_x(M.values());return v3(t,this._triggerName,r,i,G,v,x,Se,Kt,D,k,it)}}function age(n,e){const t=Wy(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class lge{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=Wy(this.defaultParams);return Object.keys(e).forEach(s=>{const o=e[s];null!==o&&(i[s]=o)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((o,a)=>{o&&(o=Qy(o,i,t));const l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),r.set(a,o)})}),r}}class uge{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new lge(i.style,i.options&&i.options.params||{},r))}),E3(this.states,"true","1"),E3(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new b3(e,i,this.states))}),this.fallbackTransition=function dge(n,e,t){return new b3(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(o,a)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(o=>o.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function E3(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const hge=new Ex;class fge{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=VP(this._driver,t,r,[]);if(r.length)throw function _me(n){return new L(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=n3(this._normalizer,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let o;const a=new Map;if(s?(o=jP(this._driver,t,s,NP,fx,new Map,new Map,r,hge,i),o.forEach(h=>{const p=Vs(a,h.element,new Map);h.postStyleProps.forEach(g=>p.set(g,null))})):(i.push(function yme(){return new L(3300,!1)}()),o=[]),i.length)throw function vme(n){return new L(3504,!1)}();a.forEach((h,p)=>{h.forEach((g,_)=>{h.set(_,this._driver.computeStyle(p,_,gl))})});const c=zc(o.map(h=>{const p=a.get(h.element);return this._buildPlayer(h,new Map,p)}));return this._playersById.set(e,c),c.onDestroy(()=>this.destroy(e)),this.players.push(c),c}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function bme(n){return new L(3301,!1)}();return t}listen(e,t,r,i){const s=RP(t,"","","");return DP(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const w3="ng-animate-queued",zP="ng-animate-disabled",yge=[],x3={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},vge={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ho="__ng_removed";class qP{get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function xge(n){return n??null}(r?e.value:e),r){const s=Wy(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const Zy="void",WP=new qP(Zy);class bge{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,fo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function Eme(n,e){return new L(3302,!1)}();if(null==r||0==r.length)throw function wme(n){return new L(3303,!1)}();if(!function Ige(n){return"start"==n||"done"==n}(r))throw function xme(n,e){return new L(3400,!1)}();const s=Vs(this._elementListeners,e,[]),o={name:t,phase:r,callback:i};s.push(o);const a=Vs(this._engine.statesByElement,e,new Map);return a.has(t)||(fo(e,px),fo(e,px+"-"+t),a.set(t,WP)),()=>{this._engine.afterFlush(()=>{const l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function Ime(n){return new L(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),o=new KP(this.id,t,e);let a=this._engine.statesByElement.get(e);a||(fo(e,px),fo(e,px+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t);const c=new qP(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&l&&c.absorbOptions(l.options),a.set(t,c),l||(l=WP),c.value!==Zy&&l.value===c.value){if(!function Tge(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(l.params,c.params)){const E=[],x=s.matchStyles(l.value,l.params,E),M=s.matchStyles(c.value,c.params,E);E.length?this._engine.reportError(E):this._engine.afterFlush(()=>{Pd(e,x),Ba(e,M)})}return}const g=Vs(this._engine.playersByElement,e,[]);g.forEach(E=>{E.namespaceId==this.id&&E.triggerName==t&&E.queued&&E.destroy()});let _=s.matchTransition(l.value,c.value,e,c.params),v=!1;if(!_){if(!i)return;_=s.fallbackTransition,v=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:_,fromState:l,toState:c,player:o,isFallbackTransition:v}),v||(fo(e,w3),o.onStart(()=>{Op(e,w3)})),o.onDone(()=>{let E=this.players.indexOf(o);E>=0&&this.players.splice(E,1);const x=this._engine.playersByElement.get(e);if(x){let M=x.indexOf(o);M>=0&&x.splice(M,1)}}),this.players.push(o),g.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,mx,!0);r.forEach(i=>{if(i[ho])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(o=>o.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),o=new Map;if(s){const a=[];if(s.forEach((l,c)=>{if(o.set(c,l.value),this._triggers.has(c)){const h=this.trigger(e,c,Zy,i);h&&a.push(h)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),r&&zc(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const o=s.name;if(i.has(o))return;i.add(o);const l=this._triggers.get(o).fallbackTransition,c=r.get(o)||WP,h=new qP(Zy),p=new KP(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:c,toState:h,player:p,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let o=e;for(;o=o.parentNode;)if(r.statesByElement.get(o)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[ho];(!s||s===x3)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){fo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==r.triggerName){const l=RP(s,r.triggerName,r.fromState.value,r.toState.value);l._data=e,DP(r.player,a.phase,l,a.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,o=i.transition.ast.depCount;return 0==s||0==o?s-o:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class Ege{_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new bge(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){const l=i.get(a);if(l){const c=r.indexOf(l);r.splice(c+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(Ix(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!Ix(t))return;const s=t[ho];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){const o=this._fetchNamespace(e);o&&o.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),fo(e,zP)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),Op(e,zP))}removeNode(e,t,r){if(Ix(t)){const i=e?this._fetchNamespace(e):null;i?i.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r);const s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,r)}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[ho]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return Ix(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,mx,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,kP,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return zc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[ho];if(t&&t.setForRemoval){if(e[ho]=x3,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(zP)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)fo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?zc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function Cme(n){return new L(3402,!1)}()}_flushAnimations(e,t){const r=new Ex,i=[],s=new Map,o=[],a=new Map,l=new Map,c=new Map,h=new Set;this.disabledNodes.forEach(Oe=>{h.add(Oe);const He=this.driver.query(Oe,".ng-animate-queued",!0);for(let Qe=0;Qe<He.length;Qe++)h.add(He[Qe])});const p=this.bodyNode,g=Array.from(this.statesByElement.keys()),_=A3(g,this.collectedEnterElements),v=new Map;let E=0;_.forEach((Oe,He)=>{const Qe=NP+E++;v.set(He,Qe),Oe.forEach(jt=>fo(jt,Qe))});const x=[],M=new Set,D=new Set;for(let Oe=0;Oe<this.collectedLeaveElements.length;Oe++){const He=this.collectedLeaveElements[Oe],Qe=He[ho];Qe&&Qe.setForRemoval&&(x.push(He),M.add(He),Qe.hasAnimation?this.driver.query(He,".ng-star-inserted",!0).forEach(jt=>M.add(jt)):D.add(He))}const k=new Map,G=A3(g,Array.from(M));G.forEach((Oe,He)=>{const Qe=fx+E++;k.set(He,Qe),Oe.forEach(jt=>fo(jt,Qe))}),e.push(()=>{_.forEach((Oe,He)=>{const Qe=v.get(He);Oe.forEach(jt=>Op(jt,Qe))}),G.forEach((Oe,He)=>{const Qe=k.get(He);Oe.forEach(jt=>Op(jt,Qe))}),x.forEach(Oe=>{this.processLeaveNode(Oe)})});const de=[],Se=[];for(let Oe=this._namespaceList.length-1;Oe>=0;Oe--)this._namespaceList[Oe].drainQueuedTransitions(t).forEach(Qe=>{const jt=Qe.player,Zr=Qe.element;if(de.push(jt),this.collectedEnterElements.length){const Fi=Zr[ho];if(Fi&&Fi.setForMove){if(Fi.previousTriggersValues&&Fi.previousTriggersValues.has(Qe.triggerName)){const Wd=Fi.previousTriggersValues.get(Qe.triggerName),yo=this.statesByElement.get(Qe.element);if(yo&&yo.has(Qe.triggerName)){const mI=yo.get(Qe.triggerName);mI.value=Wd,yo.set(Qe.triggerName,mI)}}return void jt.destroy()}}const qa=!p||!this.driver.containsElement(p,Zr),$s=k.get(Zr),iu=v.get(Zr),zn=this._buildInstruction(Qe,r,iu,$s,qa);if(zn.errors&&zn.errors.length)return void Se.push(zn);if(qa)return jt.onStart(()=>Pd(Zr,zn.fromStyles)),jt.onDestroy(()=>Ba(Zr,zn.toStyles)),void i.push(jt);if(Qe.isFallbackTransition)return jt.onStart(()=>Pd(Zr,zn.fromStyles)),jt.onDestroy(()=>Ba(Zr,zn.toStyles)),void i.push(jt);const t6=[];zn.timelines.forEach(Fi=>{Fi.stretchStartingKeyframe=!0,this.disabledNodes.has(Fi.element)||t6.push(Fi)}),zn.timelines=t6,r.append(Zr,zn.timelines),o.push({instruction:zn,player:jt,element:Zr}),zn.queriedElements.forEach(Fi=>Vs(a,Fi,[]).push(jt)),zn.preStyleProps.forEach((Fi,Wd)=>{if(Fi.size){let yo=l.get(Wd);yo||l.set(Wd,yo=new Set),Fi.forEach((mI,bk)=>yo.add(bk))}}),zn.postStyleProps.forEach((Fi,Wd)=>{let yo=c.get(Wd);yo||c.set(Wd,yo=new Set),Fi.forEach((mI,bk)=>yo.add(bk))})});if(Se.length){const Oe=[];Se.forEach(He=>{Oe.push(function Ame(n,e){return new L(3505,!1)}())}),de.forEach(He=>He.destroy()),this.reportError(Oe)}const it=new Map,Kt=new Map;o.forEach(Oe=>{const He=Oe.element;r.has(He)&&(Kt.set(He,He),this._beforeAnimationBuild(Oe.player.namespaceId,Oe.instruction,it))}),i.forEach(Oe=>{const He=Oe.element;this._getPreviousPlayers(He,!1,Oe.namespaceId,Oe.triggerName,null).forEach(jt=>{Vs(it,He,[]).push(jt),jt.destroy()})});const di=x.filter(Oe=>D3(Oe,l,c)),_o=new Map;C3(_o,this.driver,D,c,gl).forEach(Oe=>{D3(Oe,l,c)&&di.push(Oe)});const Rv=new Map;_.forEach((Oe,He)=>{C3(Rv,this.driver,new Set(Oe),l,"!")}),di.forEach(Oe=>{const He=_o.get(Oe),Qe=Rv.get(Oe);_o.set(Oe,new Map([...He?.entries()??[],...Qe?.entries()??[]]))});const qd=[],J9=[],e6={};o.forEach(Oe=>{const{element:He,player:Qe,instruction:jt}=Oe;if(r.has(He)){if(h.has(He))return Qe.onDestroy(()=>Ba(He,jt.toStyles)),Qe.disabled=!0,Qe.overrideTotalTime(jt.totalTime),void i.push(Qe);let Zr=e6;if(Kt.size>1){let $s=He;const iu=[];for(;$s=$s.parentNode;){const zn=Kt.get($s);if(zn){Zr=zn;break}iu.push($s)}iu.forEach(zn=>Kt.set(zn,Zr))}const qa=this._buildAnimation(Qe.namespaceId,jt,it,s,Rv,_o);if(Qe.setRealPlayer(qa),Zr===e6)qd.push(Qe);else{const $s=this.playersByElement.get(Zr);$s&&$s.length&&(Qe.parentPlayer=zc($s)),i.push(Qe)}}else Pd(He,jt.fromStyles),Qe.onDestroy(()=>Ba(He,jt.toStyles)),J9.push(Qe),h.has(He)&&i.push(Qe)}),J9.forEach(Oe=>{const He=s.get(Oe.element);if(He&&He.length){const Qe=zc(He);Oe.setRealPlayer(Qe)}}),i.forEach(Oe=>{Oe.parentPlayer?Oe.syncPlayerEvents(Oe.parentPlayer):Oe.destroy()});for(let Oe=0;Oe<x.length;Oe++){const He=x[Oe],Qe=He[ho];if(Op(He,fx),Qe&&Qe.hasAnimation)continue;let jt=[];if(a.size){let qa=a.get(He);qa&&qa.length&&jt.push(...qa);let $s=this.driver.query(He,kP,!0);for(let iu=0;iu<$s.length;iu++){let zn=a.get($s[iu]);zn&&zn.length&&jt.push(...zn)}}const Zr=jt.filter(qa=>!qa.destroyed);Zr.length?Cge(this,He,Zr):this.processLeaveNode(He)}return x.length=0,qd.forEach(Oe=>{this.players.push(Oe),Oe.onDone(()=>{Oe.destroy();const He=this.players.indexOf(Oe);this.players.splice(He,1)}),Oe.play()}),qd}elementContainsData(e,t){let r=!1;const i=t[ho];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let o=[];if(t){const a=this.playersByQueriedElement.get(e);a&&(o=a)}else{const a=this.playersByElement.get(e);if(a){const l=!s||s==Zy;a.forEach(c=>{c.queued||!l&&c.triggerName!=i||o.push(c)})}}return(r||i)&&(o=o.filter(a=>!(r&&r!=a.namespaceId||i&&i!=a.triggerName))),o}_beforeAnimationBuild(e,t,r){const s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:t.triggerName;for(const l of t.timelines){const c=l.element,h=c!==s,p=Vs(r,c,[]);this._getPreviousPlayers(c,h,o,a,t.toState).forEach(_=>{const v=_.getRealPlayer();v.beforeDestroy&&v.beforeDestroy(),_.destroy(),p.push(_)})}Pd(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,o){const a=t.triggerName,l=t.element,c=[],h=new Set,p=new Set,g=t.timelines.map(v=>{const E=v.element;h.add(E);const x=E[ho];if(x&&x.removedBeforeQueried)return new p_(v.duration,v.delay);const M=E!==l,D=function Age(n){const e=[];return T3(n,e),e}((r.get(E)||yge).map(it=>it.getRealPlayer())).filter(it=>!!it.element&&it.element===E),k=s.get(E),G=o.get(E),de=n3(this._normalizer,v.keyframes,k,G),Se=this._buildPlayer(v,de,D);if(v.subTimeline&&i&&p.add(E),M){const it=new KP(e,a,E);it.setRealPlayer(Se),c.push(it)}return Se});c.forEach(v=>{Vs(this.playersByQueriedElement,v.element,[]).push(v),v.onDone(()=>function wge(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,v.element,v))}),h.forEach(v=>fo(v,u3));const _=zc(g);return _.onDestroy(()=>{h.forEach(v=>Op(v,u3)),Ba(l,t.toStyles)}),p.forEach(v=>{Vs(i,v,[]).push(_)}),_}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new p_(e.duration,e.delay)}}class KP{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new p_,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>DP(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Vs(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function Ix(n){return n&&1===n.nodeType}function I3(n,e){const t=n.style.display;return n.style.display=e??"none",t}function C3(n,e,t,r,i){const s=[];t.forEach(l=>s.push(I3(l)));const o=[];r.forEach((l,c)=>{const h=new Map;l.forEach(p=>{const g=e.computeStyle(c,p,i);h.set(p,g),(!g||0==g.length)&&(c[ho]=vge,o.push(c))}),n.set(c,h)});let a=0;return t.forEach(l=>I3(l,s[a++])),o}function A3(n,e){const t=new Map;if(n.forEach(a=>t.set(a,[])),0==e.length)return t;const i=new Set(e),s=new Map;function o(a){if(!a)return 1;let l=s.get(a);if(l)return l;const c=a.parentNode;return l=t.has(c)?c:i.has(c)?1:o(c),s.set(a,l),l}return e.forEach(a=>{const l=o(a);1!==l&&t.get(l).push(a)}),t}function fo(n,e){n.classList?.add(e)}function Op(n,e){n.classList?.remove(e)}function Cge(n,e,t){zc(t).onDone(()=>n.processLeaveNode(e))}function T3(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof XU?T3(r.players,e):e.push(r)}}function D3(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class Cx{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new Ege(e,t,r),this._timelineEngine=new fge(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const o=e+"-"+i;let a=this._triggerCache[o];if(!a){const l=[],h=VP(this._driver,s,l,[]);if(l.length)throw function mme(n,e){return new L(3404,!1)}();a=function cge(n,e,t){return new uge(n,e,t)}(i,h,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,i,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r){this._transitionEngine.removeNode(e,t,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,o]=r3(r);this._timelineEngine.command(s,t,o,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[o,a]=r3(r);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}}let Sge=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ba(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ba(this._element,this._initialStyles),this._endStyles&&(Ba(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Pd(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pd(this._element,this._endStyles),this._endStyles=null),Ba(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function QP(n){let e=null;return n.forEach((t,r)=>{(function Rge(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class S3{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:p3(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class Mge{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return o3(e,t)}getParentElement(e){return MP(e)}query(e,t,r){return a3(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,o=[]){const l={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(l.easing=s);const c=new Map,h=o.filter(_=>_ instanceof S3);(function Vme(n,e){return 0===n||0===e})(r,i)&&h.forEach(_=>{_.currentSnapshot.forEach((v,E)=>c.set(E,v))});let p=function Ome(n){return n.length?n[0]instanceof Map?n:n.map(e=>d3(e)):[]}(t).map(_=>qc(_));p=function Bme(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,o)=>{r.has(o)||i.push(o),r.set(o,s)}),i.length)for(let s=1;s<e.length;s++){let o=e[s];i.forEach(a=>o.set(a,p3(n,a)))}}return e}(e,p,c);const g=function Dge(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=QP(e[0]),e.length>1&&(r=QP(e[e.length-1]))):e instanceof Map&&(t=QP(e)),t||r?new Sge(n,t,r):null}(e,p);return new S3(e,p,l,g)}}let Pge=(()=>{class n extends ZU{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:gi.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?YU(t):t;return R3(this._renderer,null,r,"register",[i]),new Nge(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(O(Ig),O(zt))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();class Nge extends wre{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new kge(this._id,e,t||{},this._renderer)}}class kge{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return R3(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function R3(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const M3="@.disabled";let Oge=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,r.onRemovalComplete=(s,o)=>{const a=o?.parentNode(s);a&&o.removeChild(a,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let h=this._rendererCache.get(s);return h||(h=new P3("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,h)),h}const o=r.id,a=r.id+"-"+this._currentId;this._currentId++,this.engine.register(a,t);const l=h=>{Array.isArray(h)?h.forEach(l):this.engine.registerTrigger(o,a,t,h.name,h)};return r.data.animation.forEach(l),new Fge(this,a,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&queueMicrotask(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(O(Ig),O(Cx),O(Je))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();class P3{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==M3?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class Fge extends P3{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==M3?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Lge(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),o="";return"@"!=s.charAt(0)&&([s,o]=function Vge(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,o,a=>{this.factory.scheduleListenerCallback(a._data||-1,r,a)})}return this.delegate.listen(e,t,r)}}let Bge=(()=>{class n extends Cx{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(O(zt),O(PP),O($P),O(Vu))},n.\u0275prov=se({token:n,factory:n.\u0275fac}),n})();const N3=[{provide:ZU,useClass:Pge},{provide:$P,useFactory:function Uge(){return new sge}},{provide:Cx,useClass:Bge},{provide:Ig,useFactory:function jge(n,e,t){return new Oge(n,e,t)},deps:[QT,Cx,Je]}],ZP=[{provide:PP,useFactory:()=>new Mge},{provide:Qh,useValue:"BrowserAnimations"},...N3],k3=[{provide:PP,useClass:l3},{provide:Qh,useValue:"NoopAnimations"},...N3];let Hge=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?k3:ZP}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({providers:ZP,imports:[z2]}),n})();const O3_firebase={apiKey:"AIzaSyCD9VuJIlLIZAEvEIdwdIFeinlUMoPMVTE",authDomain:"sil-hosting.firebaseapp.com",projectId:"sil-hosting",storageBucket:"sil-hosting.appspot.com",messagingSenderId:"675416219162",appId:"1:675416219162:web:78958919f2fa479b19fba3"},F3="firebasestorage.googleapis.com",L3="storageBucket";class $n extends w.ZR{constructor(e,t,r=0){super(YP(e),`Firebase Storage: ${t} (${YP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,$n.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return YP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ze=(()=>((ze=ze||{}).UNKNOWN="unknown",ze.OBJECT_NOT_FOUND="object-not-found",ze.BUCKET_NOT_FOUND="bucket-not-found",ze.PROJECT_NOT_FOUND="project-not-found",ze.QUOTA_EXCEEDED="quota-exceeded",ze.UNAUTHENTICATED="unauthenticated",ze.UNAUTHORIZED="unauthorized",ze.UNAUTHORIZED_APP="unauthorized-app",ze.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",ze.INVALID_CHECKSUM="invalid-checksum",ze.CANCELED="canceled",ze.INVALID_EVENT_NAME="invalid-event-name",ze.INVALID_URL="invalid-url",ze.INVALID_DEFAULT_BUCKET="invalid-default-bucket",ze.NO_DEFAULT_BUCKET="no-default-bucket",ze.CANNOT_SLICE_BLOB="cannot-slice-blob",ze.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",ze.NO_DOWNLOAD_URL="no-download-url",ze.INVALID_ARGUMENT="invalid-argument",ze.INVALID_ARGUMENT_COUNT="invalid-argument-count",ze.APP_DELETED="app-deleted",ze.INVALID_ROOT_OPERATION="invalid-root-operation",ze.INVALID_FORMAT="invalid-format",ze.INTERNAL_ERROR="internal-error",ze.UNSUPPORTED_ENVIRONMENT="unsupported-environment",ze))();function YP(n){return"storage/"+n}function XP(){return new $n(ze.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function V3(){return new $n(ze.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function B3(){return new $n(ze.CANCELED,"User canceled the upload/download.")}function U3(){return new $n(ze.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Fp(n){return new $n(ze.INVALID_ARGUMENT,n)}function j3(){return new $n(ze.APP_DELETED,"The Firebase app was deleted.")}function H3(n){return new $n(ze.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Yy(n,e){return new $n(ze.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Xy(n){throw new $n(ze.INTERNAL_ERROR,"Internal error: "+n)}class ki{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ki.makeFromUrl(e,t)}catch{return new ki(e,"")}if(""===r.path)return r;throw function Xge(n){return new $n(ze.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",a=new RegExp("^gs://"+i+"(/(.*))?$","i");function c(G){G.path_=decodeURIComponent(G.path)}const p=t.replace(/[.]/g,"\\."),k=[{regex:a,indices:{bucket:1,path:3},postModify:function s(G){"/"===G.path.charAt(G.path.length-1)&&(G.path_=G.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${p}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:c},{regex:new RegExp(`^https?://${t===F3?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:c}];for(let G=0;G<k.length;G++){const de=k[G],Se=de.regex.exec(e);if(Se){let Kt=Se[de.indices.path];Kt||(Kt=""),r=new ki(Se[de.indices.bucket],Kt),de.postModify(r);break}}if(null==r)throw function Yge(n){return new $n(ze.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class r_e{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function Tx(n){return"string"==typeof n||n instanceof String}function $3(n){return JP()&&n instanceof Blob}function JP(){return typeof Blob<"u"}function eN(n,e,t,r){if(r<e)throw Fp(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Fp(`Invalid value for '${n}'. Expected ${t} or less.`)}function Pl(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function G3(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var vs=(()=>((vs=vs||{})[vs.NO_ERROR=0]="NO_ERROR",vs[vs.NETWORK_ERROR=1]="NETWORK_ERROR",vs[vs.ABORT=2]="ABORT",vs))();function z3(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class c_e{constructor(e,t,r,i,s,o,a,l,c,h,p,g=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,v)=>{this.resolve_=_,this.reject_=v,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());!function o_e(n){return void 0!==n}(l)?s():s(l)}catch(l){o(l)}else if(null!==a){const l=XP();l.serverResponse=a.getErrorText(),o(this.errorCallback_?this.errorCallback_(a,l):l)}else o(i.canceled?this.appDelete_?j3():B3():V3())};this.canceled_?t(0,new Dx(!1,null,!0)):this.backoffId_=function i_e(n,e,t){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function h(...x){c||(c=!0,e.apply(null,x))}function p(x){i=setTimeout(()=>{i=null,n(_,l())},x)}function g(){s&&clearTimeout(s)}function _(x,...M){if(c)return void g();if(x)return g(),void h.call(null,x,...M);if(l()||o)return g(),void h.call(null,x,...M);let k;r<64&&(r*=2),1===a?(a=2,k=0):k=1e3*(r+Math.random()),p(k)}let v=!1;function E(x){v||(v=!0,g(),!c&&(null!==i?(x||(a=2),clearTimeout(i),p(0)):x||(a=1)))}return p(0),s=setTimeout(()=>{o=!0,E(!0)},t),E}((r,i)=>{if(i)return void r(!1,new Dx(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{null!==this.progressCallback_&&this.progressCallback_(a.loaded,a.lengthComputable?a.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===vs.NO_ERROR,l=s.getStatus();if(!a||z3(l,this.additionalRetryCodes_)&&this.retry){const h=s.getErrorCode()===vs.ABORT;return void r(!1,new Dx(!1,null,h))}const c=-1!==this.successCodes_.indexOf(l);r(!0,new Dx(c,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function s_e(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Dx{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function g_e(...n){const e=function m_e(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(JP())return new Blob(n);throw new $n(ze.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const Us={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class tN{constructor(e,t){this.data=e,this.contentType=t||null}}function nN(n,e){switch(n){case Us.RAW:return new tN(q3(e));case Us.BASE64:case Us.BASE64URL:return new tN(W3(n,e));case Us.DATA_URL:return new tN(function b_e(n){const e=new K3(n);return e.base64?W3(Us.BASE64,e.rest):function v_e(n){let e;try{e=decodeURIComponent(n)}catch{throw Yy(Us.DATA_URL,"Malformed data URL.")}return q3(e)}(e.rest)}(e),function E_e(n){return new K3(n).contentType}(e))}throw XP()}function q3(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function W3(n,e){switch(n){case Us.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw Yy(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Us.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw Yy(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function y_e(n){if(typeof atob>"u")throw function n_e(n){return new $n(ze.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:Yy(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class K3{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Yy(Us.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function w_e(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Ua{constructor(e,t){let r=0,i="";$3(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if($3(this.data_)){const i=function __e(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Ua(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Ua(r,!0)}}static getBlob(...e){if(JP()){const t=e.map(r=>r instanceof Ua?r.data_:r);return new Ua(g_e.apply(null,t))}{const t=e.map(o=>Tx(o)?nN(Us.RAW,o).data:o.data_);let r=0;t.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Ua(i,!0)}}uploadData(){return this.data_}}function rN(n){let e;try{e=JSON.parse(n)}catch{return null}return function l_e(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Q3(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function C_e(n,e){return e}class Xi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||C_e}}let Sx=null;function Jy(){if(Sx)return Sx;const n=[];n.push(new Xi("bucket")),n.push(new Xi("generation")),n.push(new Xi("metageneration")),n.push(new Xi("name","fullPath",!0));const t=new Xi("name");t.xform=function e(s,o){return function A_e(n){return!Tx(n)||n.length<2?n:Q3(n)}(o)},n.push(t);const i=new Xi("size");return i.xform=function r(s,o){return void 0!==o?Number(o):o},n.push(i),n.push(new Xi("timeCreated")),n.push(new Xi("updated")),n.push(new Xi("md5Hash",null,!0)),n.push(new Xi("cacheControl",null,!0)),n.push(new Xi("contentDisposition",null,!0)),n.push(new Xi("contentEncoding",null,!0)),n.push(new Xi("contentLanguage",null,!0)),n.push(new Xi("contentType",null,!0)),n.push(new Xi("metadata","customMetadata",!0)),Sx=n,Sx}function Z3(n,e,t){const r=rN(e);return null===r?null:function D_e(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const o=t[s];r[o.local]=o.xform(r,e[o.server])}return function T_e(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new ki(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function iN(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const Y3="prefixes",X3="items";class ja{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ha(n){if(!n)throw XP()}function Rx(n,e){return function t(r,i){const s=Z3(n,i,e);return Ha(null!==s),s}}function Lp(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Qge(){return new $n(ze.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Kge(){return new $n(ze.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Wge(n){return new $n(ze.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Zge(n){return new $n(ze.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function ev(n){const e=Lp(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function qge(n){return new $n(ze.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function J3(n,e,t){const i=Pl(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ja(i,"GET",Rx(n,t),o);return a.errorHandler=ev(e),a}function k_e(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const a=Pl(e.bucketOnlyServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,h=new ja(a,"GET",function P_e(n,e){return function t(r,i){const s=function M_e(n,e,t){const r=rN(t);return null===r?null:function R_e(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Y3])for(const i of t[Y3]){const s=i.replace(/\/$/,""),o=n._makeStorageReference(new ki(e,s));r.prefixes.push(o)}if(t[X3])for(const i of t[X3]){const s=n._makeStorageReference(new ki(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return Ha(null!==s),s}}(n,e.bucket),c);return h.urlParams=s,h.errorHandler=Lp(e),h}function t5(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function V_e(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Mx{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function sN(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ha(!1)}return Ha(!!t&&-1!==(e||["active"]).indexOf(t)),t}const H_e={STATE_CHANGED:"state_changed"},Ji={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function oN(n){switch(n){case"running":case"pausing":case"canceling":return Ji.RUNNING;case"paused":return Ji.PAUSED;case"success":return Ji.SUCCESS;case"canceled":return Ji.CANCELED;default:return Ji.ERROR}}class $_e{constructor(e,t,r){if(function a_e(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function Vp(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let i5=null;class G_e{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Xy("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Xy("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Xy("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Xy("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Xy("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class z_e extends G_e{initXhr(){this.xhr_.responseType="text"}}function zo(){return i5?i5():new z_e}class s5{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Jy(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ze.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(z3(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=V3()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ze.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function B_e(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o=t5(e,r,i),a={name:o.fullPath},l=Pl(s,n.host,n._protocol),h={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},p=iN(o,t),v=new ja(l,"POST",function _(E){let x;sN(E);try{x=E.getResponseHeader("X-Goog-Upload-URL")}catch{Ha(!1)}return Ha(Tx(x)),x},n.maxUploadRetryTime);return v.urlParams=a,v.headers=h,v.body=p,v.errorHandler=Lp(e),v}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,zo,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function U_e(n,e,t,r){const l=new ja(t,"POST",function s(c){const h=sN(c,["active","final"]);let p=null;try{p=c.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ha(!1)}p||Ha(!1);const g=Number(p);return Ha(!isNaN(g)),new Mx(g,r.size(),"final"===h)},n.maxUploadRetryTime);return l.headers={"X-Goog-Upload-Command":"query"},l.errorHandler=Lp(e),l}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,zo,t,r);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Mx(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let o;try{o=function j_e(n,e,t,r,i,s,o,a){const l=new Mx(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw function e_e(){return new $n(ze.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const c=l.total-l.current;let h=c;i>0&&(h=Math.min(h,i));const p=l.current;let _="";_=0===h?"finalize":c===h?"upload, finalize":"upload";const v={"X-Goog-Upload-Command":_,"X-Goog-Upload-Offset":`${l.current}`},E=r.slice(p,p+h);if(null===E)throw U3();const k=new ja(t,"POST",function x(G,de){const Se=sN(G,["active","final"]),it=l.current+h,Kt=r.size();let di;return di="final"===Se?Rx(e,s)(G,de):null,new Mx(it,Kt,"final"===Se,di)},e.maxUploadRetryTime);return k.headers=v,k.body=E.uploadData(),k.progressCallback=a||null,k.errorHandler=Lp(n),k}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(l){return this._error=l,void this._transition("error")}const a=this._ref.storage._makeRequest(o,zo,i,s,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=J3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,zo,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function n5(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"},l=function a(){let k="";for(let G=0;G<2;G++)k+=Math.random().toString().slice(2);return k}();o["Content-Type"]="multipart/related; boundary="+l;const c=t5(e,r,i),h=iN(c,t),_=Ua.getBlob("--"+l+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+h+"\r\n--"+l+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",r,"\r\n--"+l+"--");if(null===_)throw U3();const v={name:c.fullPath},E=Pl(s,n.host,n._protocol),M=n.maxUploadRetryTime,D=new ja(E,"POST",Rx(n,t),M);return D.urlParams=v,D.headers=o,D.body=_.uploadData(),D.errorHandler=Lp(e),D}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,zo,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=B3(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=oN(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new $_e(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(oN(this._state)){case Ji.SUCCESS:Vp(this._resolve.bind(null,this.snapshot))();break;case Ji.CANCELED:case Ji.ERROR:Vp(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(oN(this._state)){case Ji.RUNNING:case Ji.PAUSED:e.next&&Vp(e.next.bind(e,this.snapshot))();break;case Ji.SUCCESS:e.complete&&Vp(e.complete.bind(e))();break;default:e.error&&Vp(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class kd{constructor(e,t){this._service=e,this._location=t instanceof ki?t:ki.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new kd(e,t)}get root(){const e=new ki(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Q3(this._location.path)}get storage(){return this._service}get parent(){const e=function x_e(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ki(this._location.bucket,e);return new kd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw H3(e)}}function a5(n,e,t){return aN.apply(this,arguments)}function aN(){return aN=(0,X.Z)(function*(n,e,t){const i=yield l5(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield a5(n,e,i.nextPageToken))}),aN.apply(this,arguments)}function l5(n,e){null!=e&&"number"==typeof e.maxResults&&eN("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=k_e(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,zo)}function rye(n){n._throwIfRoot("getDownloadURL");const e=function O_e(n,e,t){const i=Pl(e.fullServerUrl(),n.host,n._protocol),o=n.maxOperationRetryTime,a=new ja(i,"GET",function N_e(n,e){return function t(r,i){const s=Z3(n,i,e);return Ha(null!==s),function S_e(n,e,t,r){const i=rN(e);if(null===i||!Tx(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const p=n.fullPath;return Pl("/b/"+o(n.bucket)+"/o/"+o(p),t,r)+G3({alt:"media",token:c})})[0]}(s,i,n.host,n._protocol)}}(n,t),o);return a.errorHandler=ev(e),a}(n.storage,n._location,Jy());return n.storage.makeRequestWithTokens(e,zo).then(t=>{if(null===t)throw function t_e(){return new $n(ze.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function c5(n,e){const t=function I_e(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ki(n._location.bucket,t);return new kd(n.storage,r)}function u5(n,e){if(n instanceof lN){const t=n;if(null==t._bucket)throw function Jge(){return new $n(ze.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+L3+"' property when initializing the app?")}();const r=new kd(t,t._bucket);return null!=e?u5(r,e):r}return void 0!==e?c5(n,e):n}function aye(n,e){if(e&&function sye(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof lN)return function oye(n,e){return new kd(n,e)}(n,e);throw Fp("To use ref(service, url), the first argument must be a Storage instance.")}return u5(n,e)}function d5(n,e){const t=e?.[L3];return null==t?null:ki.makeFromBucketSpec(t,n)}class lN{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=F3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ki.makeFromBucketSpec(i,this._host):d5(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ki.makeFromBucketSpec(this._url,e):d5(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){eN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){eN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,X.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,X.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new kd(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new r_e(j3());{const o=function p_e(n,e,t,r,i,s,o=!0){const a=G3(n.urlParams),l=n.url+a,c=Object.assign({},n.headers);return function h_e(n,e){e&&(n["X-Firebase-GMPID"]=e)}(c,e),function u_e(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(c,t),function d_e(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(c,s),function f_e(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(c,r),new c_e(l,n.method,c,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,o)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}makeRequestWithTokens(e,t){var r=this;return(0,X.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const h5="@firebase/storage";function m5(n,e){return aye(n=(0,w.m9)(n),e)}function _ye(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new lN(t,r,i,e,ms.SDK_VERSION)}!function yye(){(0,ms._registerComponent)(new jo.wA("storage",_ye,"PUBLIC").setMultipleInstances(!0)),(0,ms.registerVersion)(h5,"0.12.1",""),(0,ms.registerVersion)(h5,"0.12.1","esm2017")}();class Px{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class _5{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Px(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Px(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?o=>t(new Px(o,this,this._ref)):{next:t.next?o=>t.next(new Px(o,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class y5{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Nl(e,this._service))}get items(){return this._delegate.items.map(e=>new Nl(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Nl{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function gye(n,e){return c5(n,e)}(this._delegate,e);return new Nl(t,this.storage)}get root(){return new Nl(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Nl(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new _5(function cye(n,e,t){return function X_e(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new s5(n,new Ua(e),t)}(n=(0,w.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Us.RAW,r){this._throwIfRoot("putString");const i=nN(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new _5(new s5(this._delegate,new Ua(i.data,!0),s),this)}listAll(){return function fye(n){return function eye(n){const e={prefixes:[],items:[]};return a5(n,e).then(()=>e)}(n=(0,w.m9)(n))}(this._delegate).then(e=>new y5(e,this.storage))}list(e){return function hye(n,e){return l5(n=(0,w.m9)(n),e)}(this._delegate,e||void 0).then(t=>new y5(t,this.storage))}getMetadata(){return function uye(n){return function tye(n){n._throwIfRoot("getMetadata");const e=J3(n.storage,n._location,Jy());return n.storage.makeRequestWithTokens(e,zo)}(n=(0,w.m9)(n))}(this._delegate)}updateMetadata(e){return function dye(n,e){return function nye(n,e){n._throwIfRoot("updateMetadata");const t=function F_e(n,e,t,r){const s=Pl(e.fullServerUrl(),n.host,n._protocol),a=iN(t,r),c=n.maxOperationRetryTime,h=new ja(s,"PATCH",Rx(n,r),c);return h.headers={"Content-Type":"application/json; charset=utf-8"},h.body=a,h.errorHandler=ev(e),h}(n.storage,n._location,e,Jy());return n.storage.makeRequestWithTokens(t,zo)}(n=(0,w.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function pye(n){return rye(n=(0,w.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function mye(n){return function iye(n){n._throwIfRoot("deleteObject");const e=function L_e(n,e){const r=Pl(e.fullServerUrl(),n.host,n._protocol),a=new ja(r,"DELETE",function o(l,c){},n.maxOperationRetryTime);return a.successCodes=[200,204],a.errorHandler=ev(e),a}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,zo)}(n=(0,w.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw H3(e)}}class v5{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(b5(e))throw Fp("ref() expected a child path but got a URL, use refFromURL instead.");return new Nl(m5(this._delegate,e),this)}refFromURL(e){if(!b5(e))throw Fp("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ki.makeFromUrl(e,this._delegate.host)}catch{throw Fp("refFromUrl() expected a valid full URL but got an invalid one.")}return new Nl(m5(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function g5(n,e,t,r={}){!function lye(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,w.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function b5(n){return/^[A-Za-z]+:\/\//.test(n)}function wye(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new v5(t,r)}function E5(n){const e=function Iye(n){return new dt(e=>{const t=o=>e.next(o);t(n.snapshot);const s=n.on("state_changed",t);return n.then(o=>{t(o),e.complete()},o=>{t(n.snapshot),(o=>{e.error(o)})(o)}),function(){s()}}).pipe(TU(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(re(t=>t.bytesTransferred/t.totalBytes*100))}}function Nx(n){return{getDownloadURL:()=>K(void 0).pipe(CH,Dt(()=>n.getDownloadURL()),or),getMetadata:()=>K(void 0).pipe(CH,Dt(()=>n.getMetadata()),or),delete:()=>j(n.delete()),child:e=>Nx(n.child(e)),updateMetadata:e=>j(n.updateMetadata(e)),put:(e,t)=>E5(n.put(e,t)),putString:(e,t,r)=>E5(n.putString(e,t,r)),list:e=>j(n.list(e)),listAll:()=>j(n.listAll())}}!function xye(n){const e={TaskState:Ji,TaskEvent:H_e,StringFormat:Us,Storage:v5,Reference:Nl};n.INTERNAL.registerComponent(new jo.wA("storage-compat",wye,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.4")}(Ns.Z);const Cye=new oe("angularfire2.storageBucket"),Aye=new oe("angularfire2.storage.maxUploadRetryTime"),Tye=new oe("angularfire2.storage.maxOperationRetryTime"),Dye=new oe("angularfire2.storage.use-emulator");let Sye=(()=>{class n{constructor(t,r,i,s,o,a,l,c,h,p){je(this,"storage",void 0);const g=M_(t,o,r);this.storage=Bw(`${g.name}.storage.${i}`,"AngularFireStorage",g.name,()=>{const _=o.runOutsideAngular(()=>g.storage(i||void 0)),v=h;return v&&_.useEmulator(...v),l&&_.setMaxUploadRetryTime(l),c&&_.setMaxOperationRetryTime(c),_},[l,c])}ref(t){return Nx(this.storage.ref(t))}refFromURL(t){return Nx(this.storage.refFromURL(t))}upload(t,r,i){return Nx(this.storage.ref(t)).put(r,i)}}return je(n,"\u0275fac",function(t){return new(t||n)(O(Hf),O($f,8),O(Cye,8),O(nr),O(Je),O(Vw),O(Aye,8),O(Tye,8),O(Dye,8),O(Lw,8))}),je(n,"\u0275prov",se({token:n,factory:n.\u0275fac,providedIn:"any"})),n})(),Rye=(()=>{class n{}return je(n,"\u0275fac",function(t){return new(t||n)}),je(n,"\u0275mod",bt({type:n})),je(n,"\u0275inj",gt({})),n})(),Mye=(()=>{class n{constructor(){Ns.Z.registerVersion("angularfire",Bf.full,"gcs-compat")}}return je(n,"\u0275fac",function(t){return new(t||n)}),je(n,"\u0275mod",bt({type:n})),je(n,"\u0275inj",gt({providers:[Sye],imports:[Rye]})),n})();const w5="@firebase/database";let cN="";function uN(n){cN=n}class kye{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,w.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,w.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class Oye{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,w.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const I5=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new kye(e)}}catch{}return new Oye},Od=I5("localStorage"),dN=I5("sessionStorage"),Bp=new ks.Yd("@firebase/database"),C5=function(){let n=1;return function(){return n++}}(),A5=function(n){const e=(0,w.dS)(n),t=new w.gQ;t.update(e);const r=t.digest();return w.US.encodeByteArray(r)},tv=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=tv.apply(null,r):e+="object"==typeof r?(0,w.Wl)(r):r,e+=" "}return e};let Fd=null,T5=!0;const D5=function(n,e){(0,w.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Bp.logLevel=ks.in.VERBOSE,Fd=Bp.log.bind(Bp),e&&dN.set("logging_enabled",!0)):"function"==typeof n?Fd=n:(Fd=null,dN.remove("logging_enabled"))},Kr=function(...n){if(!0===T5&&(T5=!1,null===Fd&&!0===dN.get("logging_enabled")&&D5(!0)),Fd){const e=tv.apply(null,n);Fd(e)}},nv=function(n){return function(...e){Kr(n,...e)}},hN=function(...n){const e="FIREBASE INTERNAL ERROR: "+tv(...n);Bp.error(e)},$a=function(...n){const e=`FIREBASE FATAL ERROR: ${tv(...n)}`;throw Bp.error(e),new Error(e)},Oi=function(...n){const e="FIREBASE WARNING: "+tv(...n);Bp.warn(e)},kx=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Wc="[MIN_NAME]",kl="[MAX_NAME]",Ld=function(n,e){if(n===e)return 0;if(n===Wc||e===kl)return-1;if(e===Wc||n===kl)return 1;{const t=M5(n),r=M5(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Vye=function(n,e){return n===e?0:n<e?-1:1},rv=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,w.Wl)(e))},fN=function(n){if("object"!=typeof n||null===n)return(0,w.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,w.Wl)(e[r]),t+=":",t+=fN(n[e[r]]);return t+="}",t},S5=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Qr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const R5=function(n){(0,w.hu)(!kx(n),"Invalid JSON number");const r=1023;let i,s,o,a,l;0===n?(s=0,o=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=a+r,o=Math.round(n*Math.pow(2,52-a)-Math.pow(2,52))):(s=0,o=Math.round(n/Math.pow(2,-1074))));const c=[];for(l=52;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=11;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(i?1:0),c.reverse();const h=c.join("");let p="";for(l=0;l<64;l+=8){let g=parseInt(h.substr(l,8),2).toString(16);1===g.length&&(g="0"+g),p+=g}return p.toLowerCase()},Hye=new RegExp("^-?(0*)\\d{1,10}$"),M5=function(n){if(Hye.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Up=function(n){try{n()}catch(e){setTimeout(()=>{throw Oi("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},iv=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class qye{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Oi(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Wye{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Kr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Oi(e)}}let sv=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const F5=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,B5="websocket",U5="long_polling";class mN{constructor(e,t,r,i,s=!1,o="",a=!1,l=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Od.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Od.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function j5(n,e,t){let r;if((0,w.hu)("string"==typeof e,"typeof type must == string"),(0,w.hu)("object"==typeof t,"typeof params must == object"),e===B5)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==U5)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Kye(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Qr(t,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}class Qye{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,w.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,w.p$)(this.counters_)}}const gN={},_N={};function yN(n){const e=n.toString();return gN[e]||(gN[e]=new Qye),gN[e]}class Yye{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Up(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Kc{constructor(e,t,r,i,s,o,a){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nv(e),this.stats_=yN(t),this.urlFn=l=>(this.appCheckToken&&(l.ac=this.appCheckToken),j5(t,U5,l))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Yye(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,w.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new vN((...s)=>{const[o,a,l,c,h]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===o)this.id=a,this.password=l;else{if("close"!==o)throw new Error("Unrecognized command received: "+o);a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&F5.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Kc.forceAllow_=!0}static forceDisallow(){Kc.forceDisallow_=!0}static isAvailable(){return!((0,w.Yr)()||!Kc.forceAllow_&&(Kc.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,w.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,w.h$)(t),i=S5(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,w.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,w.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class vN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,w.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=C5(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=vN.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){Kr("frame writing exception"),a.stack&&Kr(a.stack),Kr(a)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Kr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const o=this.pendingSegs.shift();r=r+"&seg"+i+"="+o.seg+"&ts"+i+"="+o.ts+"&d"+i+"="+o.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,w.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Kr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Fx=null;typeof MozWebSocket<"u"?Fx=MozWebSocket:typeof WebSocket<"u"&&(Fx=WebSocket);let jp=(()=>{class n{constructor(t,r,i,s,o,a,l){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nv(this.connId),this.stats_=yN(r),this.connURL=n.connectionURL_(r,a,l,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,o){const a={v:"5"};return!(0,w.Yr)()&&typeof location<"u"&&location.hostname&&F5.test(location.hostname)&&(a.r="f"),r&&(a.s=r),i&&(a.ls=i),s&&(a.ac=s),o&&(a.p=o),j5(t,B5,a)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Od.set("previous_websocket_failure",!0);try{let i;if((0,w.Yr)()){i={headers:{"User-Agent":`Firebase/5/${cN}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new Fx(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Fx&&!n.forceDisallow_}static previouslyFailed(){return Od.isInMemoryStorage||!0===Od.get("previous_websocket_failure")}markConnectionHealthy(){Od.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,w.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,w.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,w.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=S5(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),K5=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Kc,jp]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=jp&&jp.isAvailable();let i=r&&!jp.previouslyFailed();if(t.webSocketOnly&&(r||Oi("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[jp];else{const s=this.transports_=[];for(const o of n.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class tW{constructor(e,t,r,i,s,o,a,l,c,h){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nv("c:"+this.id+":"),this.transportManager_=new K5(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=iv(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=rv("t",e),r=rv("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=rv("t",e),r=rv("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=rv("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?hN("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):hN("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Oi("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),iv(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):iv(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Od.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class nW{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class rW{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,w.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,w.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Lx extends rW{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,w.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Lx}getInitialEvent(e){return(0,w.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Wt{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Gt(){return new Wt("")}function Ct(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Qc(n){return n.pieces_.length-n.pieceNum_}function ln(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Wt(n.pieces_,e)}function EN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ov(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function oW(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Wt(e,0)}function Vn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Wt)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Wt(t,0)}function At(n){return n.pieceNum_>=n.pieces_.length}function es(n,e){const t=Ct(n),r=Ct(e);if(null===t)return e;if(t===r)return es(ln(n),ln(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function vve(n,e){const t=ov(n,0),r=ov(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Ld(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function wN(n,e){if(Qc(n)!==Qc(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function po(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Qc(n)>Qc(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class bve{constructor(e,t){this.errorPrefix_=t,this.parts_=ov(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,w.ug)(this.parts_[r]);aW(this)}}function aW(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vd(n))}function Vd(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class xN extends rW{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new xN}getInitialEvent(e){return(0,w.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const av=1e3;let Bx,Bd=(()=>{class n extends nW{constructor(t,r,i,s,o,a,l,c){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=n.nextPersistentConnectionId_++,this.log_=nv("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=av,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,w.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");xN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Lx.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,o={r:s,a:t,b:r};this.log_((0,w.Wl)(o)),(0,w.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new w.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:a=>{const l=a.d;"ok"===a.s?r.resolve(l):r.reject(l)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),(0,w.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,w.hu)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");const l={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const o={p:i};t.tag&&(o.q=r._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,l=>{const c=l.d,h=l.s;n.warnOnListenWarnings_(c,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",l),"ok"!==h&&this.removeListen_(i,s),t.onComplete&&t.onComplete(h,c))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,w.r3)(t,"w")){const i=(0,w.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();Oi(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,w.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,w.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const o=s.s,a=s.d||"error";this.authToken_===t&&("ok"===o?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,w.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const o={p:t};s&&(o.q=i,o.t=s),this.sendRequest("n",o)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const o={p:r,d:i};this.log_("onDisconnect "+t,o),this.sendRequest(t,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,o){this.initConnection_();const a={p:r,d:i};void 0!==o&&(a.h=o),this.outstandingPuts_.push({action:t,request:a,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,w.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):hN("Unrecognized action received from server: "+(0,w.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,w.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=av,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=av,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=av),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,X.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+n.nextConnectionId_++,a=t.lastSessionId;let l=!1,c=null;const h=function(){c?c.close():(l=!0,s())};t.realtime_={close:h,sendRequest:function(_){(0,w.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(_)}};const g=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[_,v]=yield Promise.all([t.authTokenProvider_.getToken(g),t.appCheckTokenProvider_.getToken(g)]);l?Kr("getToken() completed but was canceled"):(Kr("getToken() completed. Creating connection."),t.authToken_=_&&_.accessToken,t.appCheckToken_=v&&v.token,c=new tW(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,E=>{Oi(E+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(_){t.log_("Failed to get token: "+_),l||(t.repoInfo_.nodeAdmin&&Oi(_),h())}}})()}interrupt(t){Kr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Kr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,w.xb)(this.interruptReasons_)&&(this.reconnectDelay_=av,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(o=>fN(o)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Wt(t).toString();let s;if(this.listens.has(i)){const o=this.listens.get(i);s=o.get(r),o.delete(r),0===o.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Kr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Kr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,w.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+cN.replace(/\./g,"-")]=1,(0,w.uI)()?t["framework.cordova"]=1:(0,w.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Lx.getInstance().currentlyOnline();return(0,w.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Tt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Tt(e,t)}}class Vx{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Tt(Wc,e),i=new Tt(Wc,t);return 0!==this.compare(r,i)}minPost(){return Tt.MIN}}class uW extends Vx{static get __EMPTY_NODE(){return Bx}static set __EMPTY_NODE(e){Bx=e}compare(e,t){return Ld(e.name,t.name)}isDefinedOn(e){throw(0,w.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Tt.MIN}maxPost(){return new Tt(kl,Bx)}makePost(e,t){return(0,w.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Tt(e,Bx)}toString(){return".key"}}const Ga=new uW;class Ux{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,i&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let CN,qo=(()=>{class n{constructor(t,r,i,s,o){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??bs.EMPTY_NODE,this.right=o??bs.EMPTY_NODE}copy(t,r,i,s,o){return new n(t??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const o=i(t,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===o?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return bs.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return bs.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class bs{constructor(e,t=bs.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new bs(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,qo.BLACK,null,null))}remove(e){return new bs(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,qo.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ux(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Ux(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Ux(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Ux(this.root_,null,this.comparator_,!0,e)}}function Dve(n,e){return Ld(n.name,e.name)}function IN(n,e){return Ld(n,e)}bs.EMPTY_NODE=new class Tve{copy(e,t,r,i,s){return this}insert(e,t,r){return new qo(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const dW=function(n){return"number"==typeof n?"number:"+R5(n):"string:"+n},hW=function(n){if(n.isLeafNode()){const e=n.val();(0,w.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,w.r3)(e,".sv"),"Priority must be a string or number.")}else(0,w.hu)(n===CN||n.isEmpty(),"priority of unexpected type.");(0,w.hu)(n===CN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let fW,pW,mW,Hp=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,w.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),hW(this.priorityNode_)}static set __childrenNodeConstructor(t){fW=t}static get __childrenNodeConstructor(){return fW}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return At(t)?this:".priority"===Ct(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Ct(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,w.hu)(".priority"!==i||1===Qc(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(ln(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+dW(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?R5(this.value_):this.value_,this.lazyHash_=A5(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,w.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),o=n.VALUE_TYPE_ORDER.indexOf(i);return(0,w.hu)(s>=0,"Unknown leaf type: "+r),(0,w.hu)(o>=0,"Unknown leaf type: "+i),s===o?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const _n=new class Pve extends Vx{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Ld(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Tt.MIN}maxPost(){return new Tt(kl,new Hp("[PRIORITY-POST]",mW))}makePost(e,t){const r=pW(e);return new Tt(t,new Hp("[PRIORITY-POST]",r))}toString(){return".priority"}},Nve=Math.log(2);class kve{constructor(e){this.count=parseInt(Math.log(e+1)/Nve,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const jx=function(n,e,t,r){n.sort(e);const i=function(l,c){const h=c-l;let p,g;if(0===h)return null;if(1===h)return p=n[l],g=t?t(p):p,new qo(g,p.node,qo.BLACK,null,null);{const _=parseInt(h/2,10)+l,v=i(l,_),E=i(_+1,c);return p=n[_],g=t?t(p):p,new qo(g,p.node,qo.BLACK,v,E)}},a=function(l){let c=null,h=null,p=n.length;const g=function(v,E){const x=p-v,M=p;p-=v;const D=i(x+1,M),k=n[x],G=t?t(k):k;_(new qo(G,k.node,E,null,D))},_=function(v){c?(c.left=v,c=v):(h=v,c=v)};for(let v=0;v<l.count;++v){const E=l.nextBitIsOne(),x=Math.pow(2,l.count-(v+1));E?g(x,qo.BLACK):(g(x,qo.BLACK),g(x,qo.RED))}return h}(new kve(n.length));return new bs(r||e,a)};let AN;const $p={};class Ol{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,w.hu)($p&&_n,"ChildrenNode.ts has not been loaded"),AN=AN||new Ol({".priority":$p},{".priority":_n}),AN}get(e){const t=(0,w.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof bs?t:null}hasIndex(e){return(0,w.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,w.hu)(e!==Ga,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(Tt.Wrap);let a,o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();a=i?jx(r,e.getCompare()):$p;const l=e.toString(),c=Object.assign({},this.indexSet_);c[l]=e;const h=Object.assign({},this.indexes_);return h[l]=a,new Ol(h,c)}addToIndexes(e,t){const r=(0,w.UI)(this.indexes_,(i,s)=>{const o=(0,w.DV)(this.indexSet_,s);if((0,w.hu)(o,"Missing index implementation for "+s),i===$p){if(o.isDefinedOn(e.node)){const a=[],l=t.getIterator(Tt.Wrap);let c=l.getNext();for(;c;)c.name!==e.name&&a.push(c),c=l.getNext();return a.push(e),jx(a,o.getCompare())}return $p}{const a=t.get(e.name);let l=i;return a&&(l=l.remove(new Tt(e.name,a))),l.insert(e,e.node)}});return new Ol(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,w.UI)(this.indexes_,i=>{if(i===$p)return i;{const s=t.get(e.name);return s?i.remove(new Tt(e.name,s)):i}});return new Ol(r,this.indexSet_)}}let lv,lt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&hW(this.priorityNode_),this.children_.isEmpty()&&(0,w.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return lv||(lv=new n(new bs(IN),null,Ol.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||lv}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?lv:r}}getChild(t){const r=Ct(t);return null===r?this:this.getImmediateChild(r).getChild(ln(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,w.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Tt(t,r);let s,o;r.isEmpty()?(s=this.children_.remove(t),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),o=this.indexMap_.addToIndexes(i,this.children_));const a=s.isEmpty()?lv:this.priorityNode_;return new n(s,a,o)}}updateChild(t,r){const i=Ct(t);if(null===i)return r;{(0,w.hu)(".priority"!==Ct(t)||1===Qc(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(ln(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,o=!0;if(this.forEachChild(_n,(a,l)=>{r[a]=l.val(t),i++,o&&n.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!t&&o&&s<2*i){const a=[];for(const l in r)a[l]=r[l];return a}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+dW(this.getPriority().val())+":"),this.forEachChild(_n,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":A5(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const o=s.getPredecessorKey(new Tt(t,r));return o?o.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Tt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Tt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,Tt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,Tt.Wrap);let o=s.peek();for(;null!=o&&r.compare(o,t)>0;)s.getNext(),o=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===cv?-1:0}withIndex(t){if(t===Ga||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ga||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(_n),s=r.getIterator(_n);let o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return null===o&&null===a}return!1}return!1}}resolveIndex_(t){return t===Ga?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const cv=new class Ove extends lt{constructor(){super(new bs(IN),lt.EMPTY_NODE,Ol.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return lt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(Tt,{MIN:{value:new Tt(Wc,lt.EMPTY_NODE)},MAX:{value:new Tt(kl,cv)}}),uW.__EMPTY_NODE=lt.EMPTY_NODE,Hp.__childrenNodeConstructor=lt,function Sve(n){CN=n}(cv),function Mve(n){mW=n}(cv);const Fve=!0;function Gn(n,e=null){if(null===n)return lt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,w.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Hp(n,Gn(e));if(n instanceof Array||!Fve){let t=lt.EMPTY_NODE;return Qr(n,(r,i)=>{if((0,w.r3)(n,r)&&"."!==r.substring(0,1)){const s=Gn(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(Gn(e))}{const t=[];let r=!1;if(Qr(n,(o,a)=>{if("."!==o.substring(0,1)){const l=Gn(a);l.isEmpty()||(r=r||!l.getPriority().isEmpty(),t.push(new Tt(o,l)))}}),0===t.length)return lt.EMPTY_NODE;const s=jx(t,Dve,o=>o.name,IN);if(r){const o=jx(t,_n.getCompare());return new lt(s,Gn(e),new Ol({".priority":o},{".priority":_n}))}return new lt(s,Gn(e),Ol.Default)}}!function Rve(n){pW=n}(Gn);class TN extends Vx{constructor(e){super(),this.indexPath_=e,(0,w.hu)(!At(e)&&".priority"!==Ct(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Ld(e.name,t.name):s}makePost(e,t){const r=Gn(e),i=lt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Tt(t,i)}maxPost(){const e=lt.EMPTY_NODE.updateChild(this.indexPath_,cv);return new Tt(kl,e)}toString(){return ov(this.indexPath_,0).join("/")}}const DN=new class Lve extends Vx{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Ld(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Tt.MIN}maxPost(){return Tt.MAX}makePost(e,t){const r=Gn(e);return new Tt(t,r)}toString(){return".value"}};function gW(n){return{type:"value",snapshotNode:n}}function Gp(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function uv(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function dv(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class SN{constructor(e){this.index_=e}updateChild(e,t,r,i,s,o){(0,w.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(i).equals(r.getChild(i))&&a.isEmpty()===r.isEmpty()||(null!=o&&(r.isEmpty()?e.hasChild(t)?o.trackChildChange(uv(t,a)):(0,w.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Gp(t,r)):o.trackChildChange(dv(t,r,a))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(_n,(i,s)=>{t.hasChild(i)||r.trackChildChange(uv(i,s))}),t.isLeafNode()||t.forEachChild(_n,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(dv(i,s,o))}else r.trackChildChange(Gp(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?lt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class hv{constructor(e){this.indexedFilter_=new SN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=hv.getStartPost_(e),this.endPost_=hv.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,o){return this.matches(new Tt(t,r))||(r=lt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,o)}updateFullNode(e,t,r){t.isLeafNode()&&(t=lt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(lt.EMPTY_NODE);const s=this;return t.forEachChild(_n,(o,a)=>{s.matches(new Tt(o,a))||(i=i.updateImmediateChild(o,lt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Bve{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new hv(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,o){return this.rangedFilter_.matches(new Tt(t,r))||(r=lt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,o):this.fullLimitUpdateChild_(e,t,r,s,o)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=lt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=lt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const a=s.getNext();if(this.withinDirectionalStart(a)){if(!this.withinDirectionalEnd(a))break;i=i.updateImmediateChild(a.name,a.node),o++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(lt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let o=0;for(;s.hasNext();){const a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:i=i.updateImmediateChild(a.name,lt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let o;if(this.reverse_){const p=this.index_.getCompare();o=(g,_)=>p(_,g)}else o=this.index_.getCompare();const a=e;(0,w.hu)(a.numChildren()===this.limit_,"");const l=new Tt(t,r),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(l);if(a.hasChild(t)){const p=a.getImmediateChild(t);let g=i.getChildAfterChild(this.index_,c,this.reverse_);for(;null!=g&&(g.name===t||a.hasChild(g.name));)g=i.getChildAfterChild(this.index_,g,this.reverse_);const _=null==g?1:o(g,l);if(h&&!r.isEmpty()&&_>=0)return s?.trackChildChange(dv(t,r,p)),a.updateImmediateChild(t,r);{s?.trackChildChange(uv(t,p));const E=a.updateImmediateChild(t,lt.EMPTY_NODE);return null!=g&&this.rangedFilter_.matches(g)?(s?.trackChildChange(Gp(g.name,g.node)),E.updateImmediateChild(g.name,g.node)):E}}return r.isEmpty()?e:h&&o(c,l)>=0?(null!=s&&(s.trackChildChange(uv(c.name,c.node)),s.trackChildChange(Gp(t,r))),a.updateImmediateChild(t,r).updateImmediateChild(c.name,lt.EMPTY_NODE)):e}}class Hx{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=_n}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,w.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,w.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Wc}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,w.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,w.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:kl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,w.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===_n}copy(){const e=new Hx;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function RN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function MN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function $x(n,e){const t=n.copy();return t.index_=e,t}function _W(n){const e={};if(n.isDefault())return e;let t;if(n.index_===_n?t="$priority":n.index_===DN?t="$value":n.index_===Ga?t="$key":((0,w.hu)(n.index_ instanceof TN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,w.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,w.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,w.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,w.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,w.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function yW(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==_n&&(e.i=n.index_.toString()),e}class Gx extends nW{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=nv("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,w.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=Gx.getListenId_(e,r),a={};this.listens_[o]=a;const l=_W(e._queryParams);this.restRequest_(s+".json",l,(c,h)=>{let p=h;if(404===c&&(p=null,c=null),null===c&&this.onDataUpdate_(s,p,!1,r),(0,w.DV)(this.listens_,o)===a){let g;g=c?401===c?"permission_denied":"rest_error:"+c:"ok",i(g,null)}})}unlisten(e,t){const r=Gx.getListenId_(e,t);delete this.listens_[r]}get(e){const t=_W(e._queryParams),r=e._path.toString(),i=new w.BH;return this.restRequest_(r+".json",t,(s,o)=>{let a=o;404===s&&(a=null,s=null),null===s?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,w.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=(0,w.cI)(a.responseText)}catch{Oi("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,l)}else 401!==a.status&&404!==a.status&&Oi("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}}class zve{constructor(){this.rootNode_=lt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function zx(){return{value:null,children:new Map}}function zp(n,e,t){if(At(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Ct(e);n.children.has(r)||n.children.set(r,zx()),zp(n.children.get(r),e=ln(e),t)}}function PN(n,e){if(At(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(_n,(r,i)=>{zp(n,new Wt(r),i)}),PN(n,e)}}if(n.children.size>0){const t=Ct(e);return e=ln(e),n.children.has(t)&&PN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function NN(n,e,t){null!==n.value?t(e,n.value):function qve(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{NN(i,new Wt(e.toString()+"/"+r),t)})}class Wve{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Qr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class Zve{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Wve(e);const r=1e4+2e4*Math.random();iv(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Qr(e,(i,s)=>{s>0&&(0,w.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),iv(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var wr=(()=>((wr=wr||{})[wr.OVERWRITE=0]="OVERWRITE",wr[wr.MERGE=1]="MERGE",wr[wr.ACK_USER_WRITE=2]="ACK_USER_WRITE",wr[wr.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",wr))();function FN(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class qx{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=wr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(At(this.path)){if(null!=this.affectedTree.value)return(0,w.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Wt(e));return new qx(Gt(),t,this.revert)}}return(0,w.hu)(Ct(this.path)===e,"operationForChild called for unrelated child."),new qx(ln(this.path),this.affectedTree,this.revert)}}class fv{constructor(e,t){this.source=e,this.path=t,this.type=wr.LISTEN_COMPLETE}operationForChild(e){return At(this.path)?new fv(this.source,Gt()):new fv(this.source,ln(this.path))}}class Ud{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=wr.OVERWRITE}operationForChild(e){return At(this.path)?new Ud(this.source,Gt(),this.snap.getImmediateChild(e)):new Ud(this.source,ln(this.path),this.snap)}}class qp{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=wr.MERGE}operationForChild(e){if(At(this.path)){const t=this.children.subtree(new Wt(e));return t.isEmpty()?null:t.value?new Ud(this.source,Gt(),t.value):new qp(this.source,Gt(),t)}return(0,w.hu)(Ct(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new qp(this.source,ln(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Zc{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(At(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ct(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class Yve{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function pv(n,e,t,r,i,s){const o=r.filter(a=>a.type===t);o.sort((a,l)=>function ebe(n,e,t){if(null==e.childName||null==t.childName)throw(0,w.g5)("Should only compare child_ events.");const r=new Tt(e.childName,e.snapshotNode),i=new Tt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,a,l)),o.forEach(a=>{const l=function Jve(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,a,s);i.forEach(c=>{c.respondsTo(a.type)&&e.push(c.createEvent(l,n.query_))})})}function Wx(n,e){return{eventCache:n,serverCache:e}}function mv(n,e,t,r){return Wx(new Zc(e,t,r),n.serverCache)}function bW(n,e,t,r){return Wx(n.eventCache,new Zc(e,t,r))}function Kx(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function jd(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let LN;class yn{constructor(e,t=(()=>(LN||(LN=new bs(Vye)),LN))()){this.value=e,this.children=t}static fromObject(e){let t=new yn(null);return Qr(e,(r,i)=>{t=t.set(new Wt(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Gt(),value:this.value};if(At(e))return null;{const r=Ct(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(ln(e),t);return null!=s?{path:Vn(new Wt(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(At(e))return this;{const t=Ct(e),r=this.children.get(t);return null!==r?r.subtree(ln(e)):new yn(null)}}set(e,t){if(At(e))return new yn(t,this.children);{const r=Ct(e),s=(this.children.get(r)||new yn(null)).set(ln(e),t),o=this.children.insert(r,s);return new yn(this.value,o)}}remove(e){if(At(e))return this.children.isEmpty()?new yn(null):new yn(null,this.children);{const t=Ct(e),r=this.children.get(t);if(r){const i=r.remove(ln(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new yn(null):new yn(this.value,s)}return this}}get(e){if(At(e))return this.value;{const t=Ct(e),r=this.children.get(t);return r?r.get(ln(e)):null}}setTree(e,t){if(At(e))return t;{const r=Ct(e),s=(this.children.get(r)||new yn(null)).setTree(ln(e),t);let o;return o=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new yn(this.value,o)}}fold(e){return this.fold_(Gt(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Vn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Gt(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(At(e))return null;{const s=Ct(e),o=this.children.get(s);return o?o.findOnPath_(ln(e),Vn(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Gt(),t)}foreachOnPath_(e,t,r){if(At(e))return this;{this.value&&r(t,this.value);const i=Ct(e),s=this.children.get(i);return s?s.foreachOnPath_(ln(e),Vn(t,i),r):new yn(null)}}foreach(e){this.foreach_(Gt(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Vn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Wo{constructor(e){this.writeTree_=e}static empty(){return new Wo(new yn(null))}}function gv(n,e,t){if(At(e))return new Wo(new yn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const o=es(i,e);return s=s.updateChild(o,t),new Wo(n.writeTree_.set(i,s))}{const i=new yn(t),s=n.writeTree_.setTree(e,i);return new Wo(s)}}}function VN(n,e,t){let r=n;return Qr(t,(i,s)=>{r=gv(r,Vn(e,i),s)}),r}function EW(n,e){if(At(e))return Wo.empty();{const t=n.writeTree_.setTree(e,new yn(null));return new Wo(t)}}function BN(n,e){return null!=Hd(n,e)}function Hd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(es(t.path,e)):null}function wW(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(_n,(r,i)=>{e.push(new Tt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Tt(r,i.value))}),e}function Yc(n,e){if(At(e))return n;{const t=Hd(n,e);return new Wo(null!=t?new yn(t):n.writeTree_.subtree(e))}}function UN(n){return n.writeTree_.isEmpty()}function Wp(n,e){return xW(Gt(),n.writeTree_,e)}function xW(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,w.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=xW(Vn(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Vn(n,".priority"),r)),t}}function Qx(n,e){return DW(e,n)}function obe(n,e){if(n.snap)return po(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&po(Vn(n.path,t),e))return!0;return!1}function lbe(n){return n.visible}function IW(n,e,t){let r=Wo.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const o=s.path;let a;if(s.snap)po(t,o)?(a=es(t,o),r=gv(r,a,s.snap)):po(o,t)&&(a=es(o,t),r=gv(r,Gt(),s.snap.getChild(a)));else{if(!s.children)throw(0,w.g5)("WriteRecord should have .snap or .children");if(po(t,o))a=es(t,o),r=VN(r,a,s.children);else if(po(o,t))if(a=es(o,t),At(a))r=VN(r,Gt(),s.children);else{const l=(0,w.DV)(s.children,Ct(a));if(l){const c=l.getChild(ln(a));r=gv(r,Gt(),c)}}}}}return r}function CW(n,e,t,r,i){if(r||i){const s=Yc(n.visibleWrites,e);return!i&&UN(s)?t:i||null!=t||BN(s,Gt())?Wp(IW(n.allWrites,function(c){return(c.visible||i)&&(!r||!~r.indexOf(c.writeId))&&(po(c.path,e)||po(e,c.path))},e),t||lt.EMPTY_NODE):null}{const s=Hd(n.visibleWrites,e);if(null!=s)return s;{const o=Yc(n.visibleWrites,e);return UN(o)?t:null!=t||BN(o,Gt())?Wp(o,t||lt.EMPTY_NODE):null}}}function Zx(n,e,t,r){return CW(n.writeTree,n.treePath,e,t,r)}function jN(n,e){return function cbe(n,e,t){let r=lt.EMPTY_NODE;const i=Hd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(_n,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(t){const s=Yc(n.visibleWrites,e);return t.forEachChild(_n,(o,a)=>{const l=Wp(Yc(s,new Wt(o)),a);r=r.updateImmediateChild(o,l)}),wW(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}return wW(Yc(n.visibleWrites,e)).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}(n.writeTree,n.treePath,e)}function AW(n,e,t,r){return function ube(n,e,t,r,i){(0,w.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Vn(e,t);if(BN(n.visibleWrites,s))return null;{const o=Yc(n.visibleWrites,s);return UN(o)?i.getChild(t):Wp(o,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function Yx(n,e){return function hbe(n,e){return Hd(n.visibleWrites,e)}(n.writeTree,Vn(n.treePath,e))}function HN(n,e,t){return function dbe(n,e,t,r){const i=Vn(e,t),s=Hd(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?Wp(Yc(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function TW(n,e){return DW(Vn(n.treePath,e),n.writeTree)}function DW(n,e){return{treePath:n,writeTree:e}}class gbe{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,w.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,w.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,dv(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,uv(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Gp(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,w.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,dv(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const SW=new class _be{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class $N{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Zc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return HN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:jd(this.viewCache_),s=function mbe(n,e,t,r,i,s){return function fbe(n,e,t,r,i,s,o){let a;const l=Yc(n.visibleWrites,e),c=Hd(l,Gt());if(null!=c)a=c;else{if(null==t)return[];a=Wp(l,t)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const h=[],p=o.getCompare(),g=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let _=g.getNext();for(;_&&h.length<i;)0!==p(_,r)&&h.push(_),_=g.getNext();return h}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function RW(n,e,t,r,i,s){const o=e.eventCache;if(null!=Yx(r,t))return e;{let a,l;if(At(t))if((0,w.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const c=jd(e),p=jN(r,c instanceof lt?c:lt.EMPTY_NODE);a=n.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{const c=Zx(r,jd(e));a=n.filter.updateFullNode(e.eventCache.getNode(),c,s)}else{const c=Ct(t);if(".priority"===c){(0,w.hu)(1===Qc(t),"Can't have a priority with additional path components");const h=o.getNode();l=e.serverCache.getNode();const p=AW(r,t,h,l);a=null!=p?n.filter.updatePriority(h,p):o.getNode()}else{const h=ln(t);let p;if(o.isCompleteForChild(c)){l=e.serverCache.getNode();const g=AW(r,t,o.getNode(),l);p=null!=g?o.getNode().getImmediateChild(c).updateChild(h,g):o.getNode().getImmediateChild(c)}else p=HN(r,c,e.serverCache);a=null!=p?n.filter.updateChild(o.getNode(),c,p,h,i,s):o.getNode()}}return mv(e,a,o.isFullyInitialized()||At(t),n.filter.filtersNodes())}}function Xx(n,e,t,r,i,s,o,a){const l=e.serverCache;let c;const h=o?n.filter:n.filter.getIndexedFilter();if(At(t))c=h.updateFullNode(l.getNode(),r,null);else if(h.filtersNodes()&&!l.isFiltered()){const _=l.getNode().updateChild(t,r);c=h.updateFullNode(l.getNode(),_,null)}else{const _=Ct(t);if(!l.isCompleteForPath(t)&&Qc(t)>1)return e;const v=ln(t),x=l.getNode().getImmediateChild(_).updateChild(v,r);c=".priority"===_?h.updatePriority(l.getNode(),x):h.updateChild(l.getNode(),_,x,v,SW,null)}const p=bW(e,c,l.isFullyInitialized()||At(t),h.filtersNodes());return RW(n,p,t,i,new $N(i,p,s),a)}function GN(n,e,t,r,i,s,o){const a=e.eventCache;let l,c;const h=new $N(i,e,s);if(At(t))c=n.filter.updateFullNode(e.eventCache.getNode(),r,o),l=mv(e,c,!0,n.filter.filtersNodes());else{const p=Ct(t);if(".priority"===p)c=n.filter.updatePriority(e.eventCache.getNode(),r),l=mv(e,c,a.isFullyInitialized(),a.isFiltered());else{const g=ln(t),_=a.getNode().getImmediateChild(p);let v;if(At(g))v=r;else{const E=h.getCompleteChild(p);v=null!=E?".priority"===EN(g)&&E.getChild(oW(g)).isEmpty()?E:E.updateChild(g,r):lt.EMPTY_NODE}l=_.equals(v)?e:mv(e,n.filter.updateChild(a.getNode(),p,v,g,h,o),a.isFullyInitialized(),n.filter.filtersNodes())}}return l}function MW(n,e){return n.eventCache.isCompleteForChild(e)}function PW(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function zN(n,e,t,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let c,l=e;c=At(t)?r:new yn(null).setTree(t,r);const h=e.serverCache.getNode();return c.children.inorderTraversal((p,g)=>{if(h.hasChild(p)){const v=PW(0,e.serverCache.getNode().getImmediateChild(p),g);l=Xx(n,l,new Wt(p),v,i,s,o,a)}}),c.children.inorderTraversal((p,g)=>{const _=!e.serverCache.isCompleteForChild(p)&&null===g.value;if(!h.hasChild(p)&&!_){const E=PW(0,e.serverCache.getNode().getImmediateChild(p),g);l=Xx(n,l,new Wt(p),E,i,s,o,a)}}),l}class Abe{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new SN(r.getIndex()),s=function Uve(n){return n.loadsAllData()?new SN(n.getIndex()):n.hasLimit()?new Bve(n):new hv(n)}(r);this.processor_=function ybe(n){return{filter:n}}(s);const o=t.serverCache,a=t.eventCache,l=i.updateFullNode(lt.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(lt.EMPTY_NODE,a.getNode(),null),h=new Zc(l,o.isFullyInitialized(),i.filtersNodes()),p=new Zc(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Wx(p,h),this.eventGenerator_=new Yve(this.query_)}get query(){return this.query_}}function Sbe(n,e){const t=jd(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!At(e)&&!t.getImmediateChild(Ct(e)).isEmpty())?t.getChild(e):null}function NW(n){return 0===n.eventRegistrations_.length}function kW(n,e,t){const r=[];if(t){(0,w.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(t,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const o=n.eventRegistrations_[s];if(o.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(o)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function OW(n,e,t,r){e.type===wr.MERGE&&null!==e.source.queryId&&((0,w.hu)(jd(n.viewCache_),"We should always have a full cache before handling merges"),(0,w.hu)(Kx(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function bbe(n,e,t,r,i){const s=new gbe;let o,a;if(t.type===wr.OVERWRITE){const c=t;c.source.fromUser?o=GN(n,e,c.path,c.snap,r,i,s):((0,w.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!At(c.path),o=Xx(n,e,c.path,c.snap,r,i,a,s))}else if(t.type===wr.MERGE){const c=t;c.source.fromUser?o=function wbe(n,e,t,r,i,s,o){let a=e;return r.foreach((l,c)=>{const h=Vn(t,l);MW(e,Ct(h))&&(a=GN(n,a,h,c,i,s,o))}),r.foreach((l,c)=>{const h=Vn(t,l);MW(e,Ct(h))||(a=GN(n,a,h,c,i,s,o))}),a}(n,e,c.path,c.children,r,i,s):((0,w.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=zN(n,e,c.path,c.children,r,i,a,s))}else if(t.type===wr.ACK_USER_WRITE){const c=t;o=c.revert?function Cbe(n,e,t,r,i,s){let o;if(null!=Yx(r,t))return e;{const a=new $N(r,e,i),l=e.eventCache.getNode();let c;if(At(t)||".priority"===Ct(t)){let h;if(e.serverCache.isFullyInitialized())h=Zx(r,jd(e));else{const p=e.serverCache.getNode();(0,w.hu)(p instanceof lt,"serverChildren would be complete if leaf node"),h=jN(r,p)}c=n.filter.updateFullNode(l,h,s)}else{const h=Ct(t);let p=HN(r,h,e.serverCache);null==p&&e.serverCache.isCompleteForChild(h)&&(p=l.getImmediateChild(h)),c=null!=p?n.filter.updateChild(l,h,p,ln(t),a,s):e.eventCache.getNode().hasChild(h)?n.filter.updateChild(l,h,lt.EMPTY_NODE,ln(t),a,s):l,c.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=Zx(r,jd(e)),o.isLeafNode()&&(c=n.filter.updateFullNode(c,o,s)))}return o=e.serverCache.isFullyInitialized()||null!=Yx(r,Gt()),mv(e,c,o,n.filter.filtersNodes())}}(n,e,c.path,r,i,s):function xbe(n,e,t,r,i,s,o){if(null!=Yx(i,t))return e;const a=e.serverCache.isFiltered(),l=e.serverCache;if(null!=r.value){if(At(t)&&l.isFullyInitialized()||l.isCompleteForPath(t))return Xx(n,e,t,l.getNode().getChild(t),i,s,a,o);if(At(t)){let c=new yn(null);return l.getNode().forEachChild(Ga,(h,p)=>{c=c.set(new Wt(h),p)}),zN(n,e,t,c,i,s,a,o)}return e}{let c=new yn(null);return r.foreach((h,p)=>{const g=Vn(t,h);l.isCompleteForPath(g)&&(c=c.set(h,l.getNode().getChild(g)))}),zN(n,e,t,c,i,s,a,o)}}(n,e,c.path,c.affectedTree,r,i,s)}else{if(t.type!==wr.LISTEN_COMPLETE)throw(0,w.g5)("Unknown operation type: "+t.type);o=function Ibe(n,e,t,r,i){const s=e.serverCache;return RW(n,bW(e,s.getNode(),s.isFullyInitialized()||At(t),s.isFiltered()),t,r,SW,i)}(n,e,t.path,r,s)}const l=s.getChanges();return function Ebe(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Kx(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(gW(Kx(e)))}}(e,o,l),{viewCache:o,changes:l}}(n.processor_,i,e,t,r);return function vbe(n,e){(0,w.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,w.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,w.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,FW(n,s.changes,s.viewCache.eventCache.getNode(),null)}function FW(n,e,t,r){return function Xve(n,e,t,r){const i=[],s=[];return e.forEach(o=>{"child_changed"===o.type&&n.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(function Vve(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(o.childName,o.snapshotNode))}),pv(n,i,"child_removed",e,r,t),pv(n,i,"child_added",e,r,t),pv(n,i,"child_moved",s,r,t),pv(n,i,"child_changed",e,r,t),pv(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let Jx,tI;class LW{constructor(){this.views=new Map}}function qN(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,w.hu)(null!=s,"SyncTree gave us an op for an invalid query."),OW(s,e,t,r)}{let s=[];for(const o of n.views.values())s=s.concat(OW(o,e,t,r));return s}}function VW(n,e,t,r,i){const o=n.views.get(e._queryIdentifier);if(!o){let a=Zx(t,i?r:null),l=!1;a?l=!0:r instanceof lt?(a=jN(t,r),l=!1):(a=lt.EMPTY_NODE,l=!1);const c=Wx(new Zc(a,l,!1),new Zc(r,i,!1));return new Abe(e,c)}return o}function BW(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Xc(n,e){let t=null;for(const r of n.views.values())t=t||Sbe(r,e);return t}function UW(n,e){return e._queryParams.loadsAllData()?eI(n):n.views.get(e._queryIdentifier)}function jW(n,e){return null!=UW(n,e)}function Jc(n){return null!=eI(n)}function eI(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let Bbe=1;class HW{constructor(e){this.listenProvider_=e,this.syncPointTree_=new yn(null),this.pendingWriteTree_=function pbe(){return{visibleWrites:Wo.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function WN(n,e,t,r,i){return function nbe(n,e,t,r,i){(0,w.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=gv(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Kp(n,new Ud({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function eu(n,e,t=!1){const r=function ibe(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function sbe(n,e){const t=n.allWrites.findIndex(a=>a.writeId===e);(0,w.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,o=n.allWrites.length-1;for(;i&&o>=0;){const a=n.allWrites[o];a.visible&&(o>=t&&obe(a,r.path)?i=!1:po(r.path,a.path)&&(s=!0)),o--}return!!i&&(s?(function abe(n){n.visibleWrites=IW(n.allWrites,lbe,Gt()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=EW(n.visibleWrites,r.path):Qr(r.children,l=>{n.visibleWrites=EW(n.visibleWrites,Vn(r.path,l))}),!0))}(n.pendingWriteTree_,e)){let s=new yn(null);return null!=r.snap?s=s.set(Gt(),!0):Qr(r.children,o=>{s=s.set(new Wt(o),!0)}),Kp(n,new qx(r.path,s,t))}return[]}function _v(n,e,t){return Kp(n,new Ud({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function nI(n,e,t,r,i=!1){const s=e._path,o=n.syncPointTree_.get(s);let a=[];if(o&&("default"===e._queryIdentifier||jW(o,e))){const l=function Fbe(n,e,t,r){const i=e._queryIdentifier,s=[];let o=[];const a=Jc(n);if("default"===i)for(const[l,c]of n.views.entries())o=o.concat(kW(c,t,r)),NW(c)&&(n.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{const l=n.views.get(i);l&&(o=o.concat(kW(l,t,r)),NW(l)&&(n.views.delete(i),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Jc(n)&&s.push(new(function Nbe(){return(0,w.hu)(Jx,"Reference.ts has not been loaded"),Jx}())(e._repo,e._path)),{removed:s,events:o}}(o,e,t,r);(function kbe(n){return 0===n.views.size})(o)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const c=l.removed;if(a=l.events,!i){const h=-1!==c.findIndex(g=>g._queryParams.loadsAllData()),p=n.syncPointTree_.findOnPath(s,(g,_)=>Jc(_));if(h&&!p){const g=n.syncPointTree_.subtree(s);if(!g.isEmpty()){const _=function qbe(n){return n.fold((e,t,r)=>{if(t&&Jc(t))return[eI(t)];{let i=[];return t&&(i=BW(t)),Qr(r,(s,o)=>{i=i.concat(o)}),i}})}(g);for(let v=0;v<_.length;++v){const E=_[v],x=E.query,M=qW(n,E);n.listenProvider_.startListening(vv(x),yv(n,x),M.hashFn,M.onComplete)}}}!p&&c.length>0&&!r&&(h?n.listenProvider_.stopListening(vv(e),null):c.forEach(g=>{const _=n.queryToTagMap.get(iI(g));n.listenProvider_.stopListening(vv(g),_)}))}!function Wbe(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=iI(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,c)}return a}function $W(n,e,t,r){const i=QN(n,r);if(null!=i){const s=ZN(i),o=s.path,a=s.queryId,l=es(o,e);return YN(n,o,new Ud(FN(a),l,t))}return[]}function KN(n,e,t,r=!1){const i=e._path;let s=null,o=!1;n.syncPointTree_.foreachOnPath(i,(g,_)=>{const v=es(g,i);s=s||Xc(_,v),o=o||Jc(_)});let l,a=n.syncPointTree_.get(i);a?(o=o||Jc(a),s=s||Xc(a,Gt())):(a=new LW,n.syncPointTree_=n.syncPointTree_.set(i,a)),null!=s?l=!0:(l=!1,s=lt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((_,v)=>{const E=Xc(v,Gt());E&&(s=s.updateImmediateChild(_,E))}));const c=jW(a,e);if(!c&&!e._queryParams.loadsAllData()){const g=iI(e);(0,w.hu)(!n.queryToTagMap.has(g),"View does not exist, but we have a tag");const _=function Kbe(){return Bbe++}();n.queryToTagMap.set(g,_),n.tagToQueryMap.set(_,g)}let p=function Obe(n,e,t,r,i,s){const o=VW(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,o),function Rbe(n,e){n.eventRegistrations_.push(e)}(o,t),function Mbe(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(_n,(s,o)=>{r.push(Gp(s,o))}),t.isFullyInitialized()&&r.push(gW(t.getNode())),FW(n,r,t.getNode(),e)}(o,t)}(a,e,t,Qx(n.pendingWriteTree_,i),s,l);if(!c&&!o&&!r){const g=UW(a,e);p=p.concat(function Qbe(n,e,t){const r=e._path,i=yv(n,e),s=qW(n,t),o=n.listenProvider_.startListening(vv(e),i,s.hashFn,s.onComplete),a=n.syncPointTree_.subtree(r);if(i)(0,w.hu)(!Jc(a.value),"If we're adding a query, it shouldn't be shadowed");else{const l=a.fold((c,h,p)=>{if(!At(c)&&h&&Jc(h))return[eI(h).query];{let g=[];return h&&(g=g.concat(BW(h).map(_=>_.query))),Qr(p,(_,v)=>{g=g.concat(v)}),g}});for(let c=0;c<l.length;++c){const h=l[c];n.listenProvider_.stopListening(vv(h),yv(n,h))}}return o}(n,e,g))}return p}function rI(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(o,a)=>{const c=Xc(a,es(o,e));if(c)return c});return CW(i,e,s,t,!0)}function Kp(n,e){return GW(e,n.syncPointTree_,null,Qx(n.pendingWriteTree_,Gt()))}function GW(n,e,t,r){if(At(n.path))return zW(n,e,t,r);{const i=e.get(Gt());null==t&&null!=i&&(t=Xc(i,Gt()));let s=[];const o=Ct(n.path),a=n.operationForChild(o),l=e.children.get(o);if(l&&a){const c=t?t.getImmediateChild(o):null,h=TW(r,o);s=s.concat(GW(a,l,c,h))}return i&&(s=s.concat(qN(i,n,r,t))),s}}function zW(n,e,t,r){const i=e.get(Gt());null==t&&null!=i&&(t=Xc(i,Gt()));let s=[];return e.children.inorderTraversal((o,a)=>{const l=t?t.getImmediateChild(o):null,c=TW(r,o),h=n.operationForChild(o);h&&(s=s.concat(zW(h,a,l,c)))}),i&&(s=s.concat(qN(i,n,r,t))),s}function qW(n,e){const t=e.query,r=yv(n,t);return{hashFn:()=>(function Tbe(n){return n.viewCache_.serverCache.getNode()}(e)||lt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function $be(n,e,t){const r=QN(n,t);if(r){const i=ZN(r),s=i.path,o=i.queryId,a=es(s,e);return YN(n,s,new fv(FN(o),a))}return[]}(n,t._path,r):function Hbe(n,e){return Kp(n,new fv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function jye(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return nI(n,t,null,s)}}}}function yv(n,e){const t=iI(e);return n.queryToTagMap.get(t)}function iI(n){return n._path.toString()+"$"+n._queryIdentifier}function QN(n,e){return n.tagToQueryMap.get(e)}function ZN(n){const e=n.indexOf("$");return(0,w.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Wt(n.substr(0,e))}}function YN(n,e,t){const r=n.syncPointTree_.get(e);return(0,w.hu)(r,"Missing sync point for query tag that we're tracking"),qN(r,t,Qx(n.pendingWriteTree_,e),null)}function vv(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function Vbe(){return(0,w.hu)(tI,"Reference.ts has not been loaded"),tI}())(n._repo,n._path):n}class XN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new XN(t)}node(){return this.node_}}class JN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Vn(this.path_,e);return new JN(this.syncTree_,t)}node(){return rI(this.syncTree_,this.path_)}}const Zbe=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},WW=function(n,e,t){return n&&"object"==typeof n?((0,w.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?Ybe(n[".sv"],e,t):"object"==typeof n[".sv"]?Xbe(n[".sv"],e):void(0,w.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},Ybe=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,w.hu)(!1,"Unexpected server value: "+n)},Xbe=function(n,e,t){n.hasOwnProperty("increment")||(0,w.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,w.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,w.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},KW=function(n,e,t,r){return tk(e,new JN(t,n),r)},ek=function(n,e,t){return tk(n,new XN(e),t)};function tk(n,e,t){const r=n.getPriority().val(),i=WW(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const o=n,a=WW(o.getValue(),e,t);return a!==o.getValue()||i!==o.getPriority().val()?new Hp(a,Gn(i)):n}{const o=n;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Hp(i))),o.forEachChild(_n,(a,l)=>{const c=tk(l,e.getImmediateChild(a),t);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}class nk{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function sI(n,e){let t=e instanceof Wt?e:new Wt(e),r=n,i=Ct(t);for(;null!==i;){const s=(0,w.DV)(r.node.children,i)||{children:{},childCount:0};r=new nk(i,r,s),t=ln(t),i=Ct(t)}return r}function $d(n){return n.node.value}function rk(n,e){n.node.value=e,ik(n)}function QW(n){return n.node.childCount>0}function oI(n,e){Qr(n.node.children,(t,r)=>{e(new nk(t,n,r))})}function ZW(n,e,t,r){t&&!r&&e(n),oI(n,i=>{ZW(i,e,!0,r)}),t&&r&&e(n)}function bv(n){return new Wt(null===n.parent?n.name:bv(n.parent)+"/"+n.name)}function ik(n){null!==n.parent&&function tEe(n,e,t){const r=function Jbe(n){return void 0===$d(n)&&!QW(n)}(t),i=(0,w.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,ik(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,ik(n))}(n.parent,n.name,n)}const nEe=/[\[\].#$\/\u0000-\u001F\u007F]/,rEe=/[\[\].#$\u0000-\u001F\u007F]/,sk=10485760,aI=function(n){return"string"==typeof n&&0!==n.length&&!nEe.test(n)},YW=function(n){return"string"==typeof n&&0!==n.length&&!rEe.test(n)},Ev=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!kx(n)||n&&"object"==typeof n&&(0,w.r3)(n,".sv")},za=function(n,e,t,r){r&&void 0===e||wv((0,w.gK)(n,"value"),e,t)},wv=function(n,e,t){const r=t instanceof Wt?new bve(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Vd(r));if("function"==typeof e)throw new Error(n+"contains a function "+Vd(r)+" with contents = "+e.toString());if(kx(e))throw new Error(n+"contains "+e.toString()+" "+Vd(r));if("string"==typeof e&&e.length>sk/3&&(0,w.ug)(e)>sk)throw new Error(n+"contains a string greater than "+sk+" utf8 bytes "+Vd(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Qr(e,(o,a)=>{if(".value"===o)i=!0;else if(".priority"!==o&&".sv"!==o&&(s=!0,!aI(o)))throw new Error(n+" contains an invalid key ("+o+") "+Vd(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Eve(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,w.ug)(e),aW(n)})(r,o),wv(n,a,r),function wve(n){const e=n.parts_.pop();n.byteLength_-=(0,w.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Vd(r)+" in addition to actual children.")}},XW=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,w.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Qr(e,(o,a)=>{const l=new Wt(o);if(wv(i,a,Vn(t,l)),".priority"===EN(l)&&!Ev(a))throw new Error(i+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=ov(r);for(let o=0;o<s.length;o++)if((".priority"!==s[o]||o!==s.length-1)&&!aI(s[o]))throw new Error(n+"contains an invalid key ("+s[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(vve);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&po(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},ok=function(n,e,t){if(!t||void 0!==e){if(kx(e))throw new Error((0,w.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Ev(e))throw new Error((0,w.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},xv=function(n,e,t,r){if(!(r&&void 0===t||aI(t)))throw new Error((0,w.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Iv=function(n,e,t,r){if(!(r&&void 0===t||YW(t)))throw new Error((0,w.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},oEe=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Iv(n,e,t,r)},mo=function(n,e){if(".info"===Ct(e))throw new Error(n+" failed = Can't modify data under /.info/")},JW=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!aI(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),YW(n)}(t))throw new Error((0,w.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class aEe{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function lI(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!wN(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function e9(n,e,t){lI(n,t),t9(n,r=>wN(r,e))}function js(n,e,t){lI(n,t),t9(n,r=>po(r,e)||po(e,r))}function t9(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(lEe(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function lEe(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Fd&&Kr("event: "+t.toString()),Up(r)}}}const n9="repo_interrupt",cEe=25;class uEe{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new aEe,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zx(),this.transactionQueueTree_=new nk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function r9(n){const t=n.infoData_.getNode(new Wt(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Cv(n){return Zbe({timestamp:r9(n)})}function i9(n,e,t,r,i){n.dataUpdateCount++;const s=new Wt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let o=[];if(i)if(r){const l=(0,w.UI)(t,c=>Gn(c));o=function Gbe(n,e,t,r){const i=QN(n,r);if(i){const s=ZN(i),o=s.path,a=s.queryId,l=es(o,e),c=yn.fromObject(t);return YN(n,o,new qp(FN(a),l,c))}return[]}(n.serverSyncTree_,s,l,i)}else{const l=Gn(t);o=$W(n.serverSyncTree_,s,l,i)}else if(r){const l=(0,w.UI)(t,c=>Gn(c));o=function jbe(n,e,t){const r=yn.fromObject(t);return Kp(n,new qp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,l)}else{const l=Gn(t);o=_v(n.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Zp(n,s)),js(n.eventQueue_,a,o)}function s9(n,e){ak(n,"connected",e),!1===e&&function mEe(n){Qp(n,"onDisconnectEvents");const e=Cv(n),t=zx();NN(n.onDisconnect_,Gt(),(i,s)=>{const o=KW(i,s,n.serverSyncTree_,e);zp(t,i,o)});let r=[];NN(t,Gt(),(i,s)=>{r=r.concat(_v(n.serverSyncTree_,i,s));const o=dk(n,i);Zp(n,o)}),n.onDisconnect_=zx(),js(n.eventQueue_,Gt(),r)}(n)}function ak(n,e,t){const r=new Wt("/.info/"+e),i=Gn(t);n.infoData_.updateSnapshot(r,i);const s=_v(n.infoSyncTree_,r,i);js(n.eventQueue_,r,s)}function cI(n){return n.nextWriteId_++}function lk(n,e,t,r,i){Qp(n,"set",{path:e.toString(),value:t,priority:r});const s=Cv(n),o=Gn(t,r),a=rI(n.serverSyncTree_,e),l=ek(o,a,s),c=cI(n),h=WN(n.serverSyncTree_,e,l,c,!0);lI(n.eventQueue_,h),n.server_.put(e.toString(),o.val(!0),(g,_)=>{const v="ok"===g;v||Oi("set at "+e+" failed: "+g);const E=eu(n.serverSyncTree_,c,!v);js(n.eventQueue_,e,E),tu(0,i,g,_)});const p=dk(n,e);Zp(n,p),js(n.eventQueue_,p,[])}function gEe(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&PN(n.onDisconnect_,e),tu(0,t,r,i)})}function o9(n,e,t,r){const i=Gn(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,o)=>{"ok"===s&&zp(n.onDisconnect_,e,i),tu(0,r,s,o)})}function ck(n,e,t){let r;r=".info"===Ct(e._path)?nI(n.infoSyncTree_,e,t):nI(n.serverSyncTree_,e,t),e9(n.eventQueue_,e._path,r)}function a9(n){n.persistentConnection_&&n.persistentConnection_.interrupt(n9)}function Qp(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Kr(t,...e)}function tu(n,e,t,r){e&&Up(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function uk(n,e,t){return rI(n.serverSyncTree_,e,t)||lt.EMPTY_NODE}function uI(n,e=n.transactionQueueTree_){if(e||dI(n,e),$d(e)){const t=c9(n,e);(0,w.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function wEe(n,e,t){const r=t.map(c=>c.currentWriteId),i=uk(n,e,r);let s=i;const o=i.hash();for(let c=0;c<t.length;c++){const h=t[c];(0,w.hu)(0===h.status,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const p=es(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}const a=s.val(!0),l=e;n.server_.put(l.toString(),a,c=>{Qp(n,"transaction put response",{path:l.toString(),status:c});let h=[];if("ok"===c){const p=[];for(let g=0;g<t.length;g++)t[g].status=2,h=h.concat(eu(n.serverSyncTree_,t[g].currentWriteId)),t[g].onComplete&&p.push(()=>t[g].onComplete(null,!0,t[g].currentOutputSnapshotResolved)),t[g].unwatcher();dI(n,sI(n.transactionQueueTree_,e)),uI(n,n.transactionQueueTree_),js(n.eventQueue_,e,h);for(let g=0;g<p.length;g++)Up(p[g])}else{if("datastale"===c)for(let p=0;p<t.length;p++)t[p].status=3===t[p].status?4:0;else{Oi("transaction at "+l.toString()+" failed: "+c);for(let p=0;p<t.length;p++)t[p].status=4,t[p].abortReason=c}Zp(n,e)}},o)}(n,bv(e),t)}else QW(e)&&oI(e,t=>{uI(n,t)})}function Zp(n,e){const t=l9(n,e),r=bv(t);return function xEe(n,e,t){if(0===e.length)return;const r=[];let i=[];const o=e.filter(a=>0===a.status).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){const l=e[a],c=es(t,l.path);let p,h=!1;if((0,w.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===l.status)h=!0,p=l.abortReason,i=i.concat(eu(n.serverSyncTree_,l.currentWriteId,!0));else if(0===l.status)if(l.retryCount>=cEe)h=!0,p="maxretry",i=i.concat(eu(n.serverSyncTree_,l.currentWriteId,!0));else{const g=uk(n,l.path,o);l.currentInputSnapshot=g;const _=e[a].update(g.val());if(void 0!==_){wv("transaction failed: Data returned ",_,l.path);let v=Gn(_);"object"==typeof _&&null!=_&&(0,w.r3)(_,".priority")||(v=v.updatePriority(g.getPriority()));const x=l.currentWriteId,M=Cv(n),D=ek(v,g,M);l.currentOutputSnapshotRaw=v,l.currentOutputSnapshotResolved=D,l.currentWriteId=cI(n),o.splice(o.indexOf(x),1),i=i.concat(WN(n.serverSyncTree_,l.path,D,l.currentWriteId,l.applyLocally)),i=i.concat(eu(n.serverSyncTree_,x,!0))}else h=!0,p="nodata",i=i.concat(eu(n.serverSyncTree_,l.currentWriteId,!0))}js(n.eventQueue_,t,i),i=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===p?()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot):()=>e[a].onComplete(new Error(p),!1,null)))}dI(n,n.transactionQueueTree_);for(let a=0;a<r.length;a++)Up(r[a]);uI(n,n.transactionQueueTree_)}(n,c9(n,t),r),r}function l9(n,e){let t,r=n.transactionQueueTree_;for(t=Ct(e);null!==t&&void 0===$d(r);)r=sI(r,t),t=Ct(e=ln(e));return r}function c9(n,e){const t=[];return u9(n,e,t),t.sort((r,i)=>r.order-i.order),t}function u9(n,e,t){const r=$d(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);oI(e,i=>{u9(n,i,t)})}function dI(n,e){const t=$d(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,rk(e,t.length>0?t:void 0)}oI(e,r=>{dI(n,r)})}function dk(n,e){const t=bv(l9(n,e)),r=sI(n.transactionQueueTree_,e);return function eEe(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{hk(n,i)}),hk(n,r),ZW(r,i=>{hk(n,i)}),t}function hk(n,e){const t=$d(e);if(t){const r=[];let i=[],s=-1;for(let o=0;o<t.length;o++)3===t[o].status||(1===t[o].status?((0,w.hu)(s===o-1,"All SENT items should be at beginning of queue."),s=o,t[o].status=3,t[o].abortReason="set"):((0,w.hu)(0===t[o].status,"Unexpected transaction status in abort"),t[o].unwatcher(),i=i.concat(eu(n.serverSyncTree_,t[o].currentWriteId,!0)),t[o].onComplete&&r.push(t[o].onComplete.bind(null,new Error("set"),!1,null))));-1===s?rk(e,void 0):t.length=s+1,js(n.eventQueue_,bv(e),i);for(let o=0;o<r.length;o++)Up(r[o])}}const fk=function(n,e){const t=AEe(n),r=t.namespace;return"firebase.com"===t.domain&&$a(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&$a("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Oi("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new mN(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Wt(t.pathString)}},AEe=function(n){let e="",t="",r="",i="",s="",o=!0,a="https",l=443;if("string"==typeof n){let c=n.indexOf("//");c>=0&&(a=n.substring(0,c-1),n=n.substring(c+2));let h=n.indexOf("/");-1===h&&(h=n.length);let p=n.indexOf("?");-1===p&&(p=n.length),e=n.substring(0,Math.min(h,p)),h<p&&(i=function IEe(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(h,p)));const g=function CEe(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Oi(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,p)));c=e.indexOf(":"),c>=0?(o="https"===a||"wss"===a,l=parseInt(e.substring(c+1),10)):c=e.length;const _=e.slice(0,c);if("localhost"===_.toLowerCase())t="localhost";else if(_.split(".").length<=2)t=_;else{const v=e.indexOf(".");r=e.substring(0,v).toLowerCase(),t=e.substring(v+1),s=r}"ns"in g&&(s=g.ns)}return{host:e,port:l,domain:t,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}},d9="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",TEe=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=d9.charAt(t%64),t=Math.floor(t/64);(0,w.hu)(0===t,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)o+=d9.charAt(e[i]);return(0,w.hu)(20===o.length,"nextPushId: Length should be 20."),o}}();class h9{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,w.Wl)(this.snapshot.exportVal())}}class f9{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class pk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,w.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class p9{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new w.BH;return gEe(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){mo("OnDisconnect.remove",this._path);const e=new w.BH;return o9(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){mo("OnDisconnect.set",this._path),za("OnDisconnect.set",e,this._path,!1);const t=new w.BH;return o9(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){mo("OnDisconnect.setWithPriority",this._path),za("OnDisconnect.setWithPriority",e,this._path,!1),ok("OnDisconnect.setWithPriority",t,!1);const r=new w.BH;return function _Ee(n,e,t,r,i){const s=Gn(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(o,a)=>{"ok"===o&&zp(n.onDisconnect_,e,s),tu(0,i,o,a)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){mo("OnDisconnect.update",this._path),XW("OnDisconnect.update",e,this._path,!1);const t=new w.BH;return function yEe(n,e,t,r){if((0,w.xb)(t))return Kr("onDisconnect().update() called with empty data.  Don't do anything."),void tu(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Qr(t,(o,a)=>{const l=Gn(a);zp(n.onDisconnect_,Vn(e,o),l)}),tu(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Es{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return At(this._path)?null:EN(this._path)}get ref(){return new go(this._repo,this._path)}get _queryIdentifier(){const e=yW(this._queryParams),t=fN(e);return"{}"===t?"default":t}get _queryObject(){return yW(this._queryParams)}isEqual(e){if(!((e=(0,w.m9)(e))instanceof Es))return!1;const t=this._repo===e._repo,r=wN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function yve(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function hI(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function nu(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ga){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Wc)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==kl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===_n){if(null!=e&&!Ev(e)||null!=t&&!Ev(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,w.hu)(n.getIndex()instanceof TN||n.getIndex()===DN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function fI(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class go extends Es{constructor(e,t){super(e,t,new Hx,!1)}get parent(){const e=oW(this._path);return null===e?null:new go(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Gd{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Wt(e),r=zd(this.ref,e);return new Gd(this._node.getChild(t),r,_n)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Gd(i,zd(this.ref,r),_n)))}hasChild(e){const t=new Wt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function m9(n,e){return(n=(0,w.m9)(n))._checkNotDeleted("ref"),void 0!==e?zd(n._root,e):n._root}function g9(n,e){(n=(0,w.m9)(n))._checkNotDeleted("refFromURL");const t=fk(e,n._repo.repoInfo_.nodeAdmin);JW("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&$a("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),m9(n,t.path.toString())}function zd(n,e){return null===Ct((n=(0,w.m9)(n))._path)?oEe("child","path",e,!1):Iv("child","path",e,!1),new go(n._repo,Vn(n._path,e))}function mk(n,e){n=(0,w.m9)(n),mo("set",n._path),za("set",e,n._path,!1);const t=new w.BH;return lk(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function PEe(n,e){XW("update",e,n._path,!1);const t=new w.BH;return function pEe(n,e,t,r){Qp(n,"update",{path:e.toString(),value:t});let i=!0;const s=Cv(n),o={};if(Qr(t,(a,l)=>{i=!1,o[a]=KW(Vn(e,a),Gn(l),n.serverSyncTree_,s)}),i)Kr("update() called with empty data.  Don't do anything."),tu(0,r,"ok",void 0);else{const a=cI(n),l=function Ube(n,e,t,r){!function rbe(n,e,t,r){(0,w.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=VN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=yn.fromObject(t);return Kp(n,new qp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,o,a);lI(n.eventQueue_,l),n.server_.merge(e.toString(),t,(c,h)=>{const p="ok"===c;p||Oi("update at "+e+" failed: "+c);const g=eu(n.serverSyncTree_,a,!p),_=g.length>0?Zp(n,e):e;js(n.eventQueue_,_,g),tu(0,r,c,h)}),Qr(t,c=>{const h=dk(n,Vn(e,c));Zp(n,h)}),js(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function NEe(n){n=(0,w.m9)(n);const e=new pk(()=>{}),t=new Av(e);return function fEe(n,e,t){const r=function zbe(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(c,h)=>{const p=es(c,t);r=r||Xc(h,p)});let i=n.syncPointTree_.get(t);i?r=r||Xc(i,Gt()):(i=new LW,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,o=s?new Zc(r,!0,!1):null;return function Dbe(n){return Kx(n.viewCache_)}(VW(i,e,Qx(n.pendingWriteTree_,e._path),s?o.getNode():lt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=Gn(i).withIndex(e._queryParams.getIndex());let o;if(KN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())o=_v(n.serverSyncTree_,e._path,s);else{const a=yv(n.serverSyncTree_,e);o=$W(n.serverSyncTree_,e._path,s,a)}return js(n.eventQueue_,e._path,o),nI(n.serverSyncTree_,e,t,null,!0),s},i=>(Qp(n,"get for query "+(0,w.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Gd(r,new go(n._repo,n._path),n._queryParams.getIndex()))}class Av{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new h9("value",this,new Gd(e.snapshotNode,new go(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new f9(this,e,t):null}matches(e){return e instanceof Av&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class pI{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new f9(this,e,t):null}createEvent(e,t){(0,w.hu)(null!=e.childName,"Child events should have a childName.");const r=zd(new go(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new h9(e.type,this,new Gd(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof pI&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Tv(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const l=t,c=(h,p)=>{ck(n._repo,n,a),l(h,p)};c.userCallback=t.userCallback,c.context=t.context,t=c}const o=new pk(t,s||void 0),a="value"===e?new Av(o):new pI(e,o);return function vEe(n,e,t){let r;r=".info"===Ct(e._path)?KN(n.infoSyncTree_,e,t):KN(n.serverSyncTree_,e,t),e9(n.eventQueue_,e._path,r)}(n._repo,n,a),()=>ck(n._repo,n,a)}function gk(n,e,t,r){return Tv(n,"value",e,t,r)}function _9(n,e,t,r){return Tv(n,"child_added",e,t,r)}function y9(n,e,t,r){return Tv(n,"child_changed",e,t,r)}function v9(n,e,t,r){return Tv(n,"child_moved",e,t,r)}function b9(n,e,t,r){return Tv(n,"child_removed",e,t,r)}function E9(n,e,t){let r=null;const i=t?new pk(t):null;"value"===e?r=new Av(i):e&&(r=new pI(e,i)),ck(n._repo,n,r)}class Ko{}class w9 extends Ko{constructor(e,t){super(),this._value=e,this._key=t,this.type="endAt"}_apply(e){za("endAt",this._value,e._path,!0);const t=MN(e._queryParams,this._value,this._key);if(fI(t),nu(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class OEe extends Ko{constructor(e,t){super(),this._value=e,this._key=t,this.type="endBefore"}_apply(e){za("endBefore",this._value,e._path,!1);const t=function Gve(n,e,t){let r;return r=MN(n,e,n.index_===Ga||t?t:Wc),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(fI(t),nu(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class x9 extends Ko{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAt"}_apply(e){za("startAt",this._value,e._path,!0);const t=RN(e._queryParams,this._value,this._key);if(fI(t),nu(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class VEe extends Ko{constructor(e,t){super(),this._value=e,this._key=t,this.type="startAfter"}_apply(e){za("startAfter",this._value,e._path,!1);const t=function $ve(n,e,t){let r;return r=RN(n,e,n.index_===Ga||t?t:kl),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(fI(t),nu(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Es(e._repo,e._path,t,e._orderByCalled)}}class UEe extends Ko{constructor(e){super(),this._limit=e,this.type="limitToFirst"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Es(e._repo,e._path,function jve(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class HEe extends Ko{constructor(e){super(),this._limit=e,this.type="limitToLast"}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Es(e._repo,e._path,function Hve(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class GEe extends Ko{constructor(e){super(),this._path=e,this.type="orderByChild"}_apply(e){hI(e,"orderByChild");const t=new Wt(this._path);if(At(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new TN(t),i=$x(e._queryParams,r);return nu(i),new Es(e._repo,e._path,i,!0)}}class qEe extends Ko{constructor(){super(...arguments),this.type="orderByKey"}_apply(e){hI(e,"orderByKey");const t=$x(e._queryParams,Ga);return nu(t),new Es(e._repo,e._path,t,!0)}}class KEe extends Ko{constructor(){super(...arguments),this.type="orderByPriority"}_apply(e){hI(e,"orderByPriority");const t=$x(e._queryParams,_n);return nu(t),new Es(e._repo,e._path,t,!0)}}class ZEe extends Ko{constructor(){super(...arguments),this.type="orderByValue"}_apply(e){hI(e,"orderByValue");const t=$x(e._queryParams,DN);return nu(t),new Es(e._repo,e._path,t,!0)}}class XEe extends Ko{constructor(e,t){super(),this._value=e,this._key=t,this.type="equalTo"}_apply(e){if(za("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new w9(this._value,this._key)._apply(new x9(this._value,this._key)._apply(e))}}function Qo(n,...e){let t=(0,w.m9)(n);for(const r of e)t=r._apply(t);return t}(function Pbe(n){(0,w.hu)(!Jx,"__referenceConstructor has already been defined"),Jx=n})(go),function Lbe(n){(0,w.hu)(!tI,"__referenceConstructor has already been defined"),tI=n}(go);const _k={};function yk(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||$a("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Kr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l,c,o=fk(s,i),a=o.repoInfo;typeof process<"u"&&process.env&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=fk(s,i),a=o.repoInfo):l=!o.repoInfo.secure;const h=i&&l?new sv(sv.OWNER):new Wye(n.name,n.options,e);JW("Invalid Firebase Database URL",o),At(o.path)||$a("Database URL must point to the root of a Firebase Database (not including a child path).");const p=function rwe(n,e,t,r){let i=_k[e.name];i||(i={},_k[e.name]=i);let s=i[n.toURLString()];return s&&$a("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new uEe(n,false,t,r),i[n.toURLString()]=s,s}(a,n,h,new qye(n.name,t));return new swe(p,n)}class swe{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function dEe(n,e,t){if(n.stats_=yN(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new Gx(n.repoInfo_,(r,i,s,o)=>{i9(n,r,i,s,o)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>s9(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,w.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Bd(n.repoInfo_,e,(r,i,s,o)=>{i9(n,r,i,s,o)},r=>{s9(n,r)},r=>{!function hEe(n,e){Qr(e,(t,r)=>{ak(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Zye(n,e){const t=n.toString();return _N[t]||(_N[t]=e()),_N[t]}(n.repoInfo_,()=>new Zve(n.stats_,n.server_)),n.infoData_=new zve,n.infoSyncTree_=new HW({startListening:(r,i,s,o)=>{let a=[];const l=n.infoData_.getNode(r._path);return l.isEmpty()||(a=_v(n.infoSyncTree_,r._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),ak(n,"connected",!1),n.serverSyncTree_=new HW({startListening:(r,i,s,o)=>(n.server_.listen(r,s,i,(a,l)=>{const c=o(a,l);js(n.eventQueue_,r._path,c)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new go(this._repo,Gt())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function nwe(n,e){const t=_k[e];(!t||t[n.key]!==n)&&$a(`Database ${e}(${n.repoInfo_}) has already been deleted.`),a9(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&$a("Cannot call "+e+" on a deleted database.")}}function C9(){K5.IS_TRANSPORT_INITIALIZED&&Oi("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function owe(){C9(),Kc.forceDisallow()}function awe(){C9(),jp.forceDisallow(),Kc.forceAllow()}function uwe(n,e){D5(n,e)}const hwe={".sv":"timestamp"};class mwe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Bd.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Bd.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function dwe(n){uN(ms.SDK_VERSION),(0,ms._registerComponent)(new jo.wA("database",(e,{instanceIdentifier:t})=>yk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ms.registerVersion)(w5,"1.0.3",n),(0,ms.registerVersion)(w5,"1.0.3","esm2017")}();const vwe=new ks.Yd("@firebase/database-compat"),T9=function(n){vwe.warn("FIREBASE WARNING: "+n)};class wwe{constructor(e){this._delegate=e}cancel(e){(0,w.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,w.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,w.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,w.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,w.Dv)("OnDisconnect.set",1,2,arguments.length),(0,w.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,w.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,w.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,w.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,T9("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,w.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class xwe{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,w.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ru{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,w.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,w.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,w.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,w.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,w.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),Iv("DataSnapshot.child","path",e,!1),new ru(this._database,this._delegate.child(e))}hasChild(e){return(0,w.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Iv("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,w.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,w.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,w.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new ru(this._database,t)))}hasChildren(){return(0,w.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,w.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,w.Dv)("DataSnapshot.ref",0,0,arguments.length),new Hs(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ui{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,w.Dv)("Query.on",2,4,arguments.length),(0,w.Wj)("Query.on","callback",t,!1);const o=ui.getCancelAndContextArgs_("Query.on",r,i),a=(c,h)=>{t.call(o.context,new ru(this.database,c),h)};a.userCallback=t,a.context=o.context;const l=null===(s=o.cancel)||void 0===s?void 0:s.bind(o.context);switch(e){case"value":return gk(this._delegate,a,l),t;case"child_added":return _9(this._delegate,a,l),t;case"child_removed":return b9(this._delegate,a,l),t;case"child_changed":return y9(this._delegate,a,l),t;case"child_moved":return v9(this._delegate,a,l),t;default:throw new Error((0,w.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,w.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,w.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,w.Wj)("Query.off","callback",t,!0),(0,w.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,E9(this._delegate,e,i)}else E9(this._delegate,e)}get(){return NEe(this._delegate).then(e=>new ru(this.database,e))}once(e,t,r,i){(0,w.Dv)("Query.once",1,4,arguments.length),(0,w.Wj)("Query.once","callback",t,!0);const s=ui.getCancelAndContextArgs_("Query.once",r,i),o=new w.BH,a=(c,h)=>{const p=new ru(this.database,c);t&&t.call(s.context,p,h),o.resolve(p)};a.userCallback=t,a.context=s.context;const l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(e){case"value":gk(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":_9(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":b9(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":y9(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":v9(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error((0,w.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(e){return(0,w.Dv)("Query.limitToFirst",1,1,arguments.length),new ui(this.database,Qo(this._delegate,function jEe(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new UEe(n)}(e)))}limitToLast(e){return(0,w.Dv)("Query.limitToLast",1,1,arguments.length),new ui(this.database,Qo(this._delegate,function $Ee(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new HEe(n)}(e)))}orderByChild(e){return(0,w.Dv)("Query.orderByChild",1,1,arguments.length),new ui(this.database,Qo(this._delegate,function zEe(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Iv("orderByChild","path",n,!1),new GEe(n)}(e)))}orderByKey(){return(0,w.Dv)("Query.orderByKey",0,0,arguments.length),new ui(this.database,Qo(this._delegate,function WEe(){return new qEe}()))}orderByPriority(){return(0,w.Dv)("Query.orderByPriority",0,0,arguments.length),new ui(this.database,Qo(this._delegate,function QEe(){return new KEe}()))}orderByValue(){return(0,w.Dv)("Query.orderByValue",0,0,arguments.length),new ui(this.database,Qo(this._delegate,function YEe(){return new ZEe}()))}startAt(e=null,t){return(0,w.Dv)("Query.startAt",0,2,arguments.length),new ui(this.database,Qo(this._delegate,function LEe(n=null,e){return xv("startAt","key",e,!0),new x9(n,e)}(e,t)))}startAfter(e=null,t){return(0,w.Dv)("Query.startAfter",0,2,arguments.length),new ui(this.database,Qo(this._delegate,function BEe(n,e){return xv("startAfter","key",e,!0),new VEe(n,e)}(e,t)))}endAt(e=null,t){return(0,w.Dv)("Query.endAt",0,2,arguments.length),new ui(this.database,Qo(this._delegate,function kEe(n,e){return xv("endAt","key",e,!0),new w9(n,e)}(e,t)))}endBefore(e=null,t){return(0,w.Dv)("Query.endBefore",0,2,arguments.length),new ui(this.database,Qo(this._delegate,function FEe(n,e){return xv("endBefore","key",e,!0),new OEe(n,e)}(e,t)))}equalTo(e,t){return(0,w.Dv)("Query.equalTo",1,2,arguments.length),new ui(this.database,Qo(this._delegate,function JEe(n,e){return xv("equalTo","key",e,!0),new XEe(n,e)}(e,t)))}toString(){return(0,w.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,w.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,w.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ui))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,w.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,w.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,w.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Hs(this.database,new go(this._delegate._repo,this._delegate._path))}}class Hs extends ui{constructor(e,t){super(e,new Es(t._repo,t._path,new Hx,!1)),this.database=e,this._delegate=t}getKey(){return(0,w.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,w.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Hs(this.database,zd(this._delegate,e))}getParent(){(0,w.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Hs(this.database,e):null}getRoot(){return(0,w.Dv)("Reference.root",0,0,arguments.length),new Hs(this.database,this._delegate.root)}set(e,t){(0,w.Dv)("Reference.set",1,2,arguments.length),(0,w.Wj)("Reference.set","onComplete",t,!0);const r=mk(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,w.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,T9("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}mo("Reference.update",this._delegate._path),(0,w.Wj)("Reference.update","onComplete",t,!0);const r=PEe(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,w.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,w.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function MEe(n,e,t){if(mo("setWithPriority",n._path),za("setWithPriority",e,n._path,!1),ok("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new w.BH;return lk(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,w.Dv)("Reference.remove",0,1,arguments.length),(0,w.Wj)("Reference.remove","onComplete",e,!0);const t=function SEe(n){return mo("remove",n._path),mk(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,w.Dv)("Reference.transaction",1,3,arguments.length),(0,w.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,w.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,w.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function gwe(n,e,t){var r;if(n=(0,w.m9)(n),mo("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new w.BH,a=gk(n,()=>{});return function EEe(n,e,t,r,i,s){Qp(n,"transaction on "+e);const o={path:e,update:t,onComplete:r,status:null,order:C5(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=uk(n,e,void 0);o.currentInputSnapshot=a;const l=o.update(a.val());if(void 0===l)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{wv("transaction failed: Data returned ",l,o.path),o.status=0;const c=sI(n.transactionQueueTree_,e),h=$d(c)||[];let p;h.push(o),rk(c,h),"object"==typeof l&&null!==l&&(0,w.r3)(l,".priority")?(p=(0,w.DV)(l,".priority"),(0,w.hu)(Ev(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(rI(n.serverSyncTree_,e)||lt.EMPTY_NODE).getPriority().val();const g=Cv(n),_=Gn(l,p),v=ek(_,a,g);o.currentOutputSnapshotRaw=_,o.currentOutputSnapshotResolved=v,o.currentWriteId=cI(n);const E=WN(n.serverSyncTree_,e,v,o.currentWriteId,o.applyLocally);js(n.eventQueue_,e,E),uI(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(l,c,h)=>{let p=null;l?s.reject(l):(p=new Gd(h,new go(n._repo,n._path),_n),s.resolve(new mwe(c,p)))},a,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new xwe(s.committed,new ru(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,w.Dv)("Reference.setPriority",1,2,arguments.length),(0,w.Wj)("Reference.setPriority","onComplete",t,!0);const r=function REe(n,e){n=(0,w.m9)(n),mo("setPriority",n._path),ok("setPriority",e,!1);const t=new w.BH;return lk(n._repo,Vn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,w.Dv)("Reference.push",0,2,arguments.length),(0,w.Wj)("Reference.push","onComplete",t,!0);const r=function DEe(n,e){n=(0,w.m9)(n),mo("push",n._path),za("push",e,n._path,!0);const t=r9(n._repo),r=TEe(t),i=zd(n,r),s=zd(n,r);let o;return o=null!=e?mk(s,e).then(()=>s):Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}(this._delegate,e),i=r.then(o=>new Hs(this.database,o));t&&i.then(()=>t(null),o=>t(o));const s=new Hs(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return mo("Reference.onDisconnect",this._delegate._path),new wwe(new p9(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class Dv{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:owe,forceLongPolling:awe}}useEmulator(e,t,r={}){!function A9(n,e,t,r={}){(n=(0,w.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&$a("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&$a('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new sv(sv.OWNER);else if(r.mockUserToken){const o="string"==typeof r.mockUserToken?r.mockUserToken:(0,w.Sg)(r.mockUserToken,n.app.options.projectId);s=new sv(o)}!function twe(n,e,t,r){n.repoInfo_=new mN(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,w.Dv)("database.ref",0,1,arguments.length),e instanceof Hs){const t=g9(this._delegate,e.toString());return new Hs(this,t)}{const t=m9(this._delegate,e);return new Hs(this,t)}}refFromURL(e){(0,w.Dv)("database.refFromURL",1,1,arguments.length);const r=g9(this._delegate,e);return new Hs(this,r)}goOffline(){return(0,w.Dv)("database.goOffline",0,0,arguments.length),function lwe(n){(n=(0,w.m9)(n))._checkNotDeleted("goOffline"),a9(n._repo)}(this._delegate)}goOnline(){return(0,w.Dv)("database.goOnline",0,0,arguments.length),function cwe(n){(n=(0,w.m9)(n))._checkNotDeleted("goOnline"),function bEe(n){n.persistentConnection_&&n.persistentConnection_.resume(n9)}(n._repo)}(this._delegate)}}Dv.ServerValue={TIMESTAMP:function fwe(){return hwe}(),increment:n=>function pwe(n){return{".sv":{increment:n}}}(n)};var Cwe=Object.freeze({__proto__:null,initStandalone:function Iwe({app:n,url:e,version:t,customAuthImpl:r,customAppCheckImpl:i,namespace:s,nodeAdmin:o=!1}){uN(t);const a=new jo.H0("database-standalone"),l=new jo.zt("auth-internal",a);let c;return l.setComponent(new jo.wA("auth-internal",()=>r,"PRIVATE")),i&&(c=new jo.zt("app-check-internal",a),c.setComponent(new jo.wA("app-check-internal",()=>i,"PRIVATE"))),{instance:new Dv(yk(n,l,c,e,o),n),namespace:s}}});const Awe=Dv.ServerValue;function Sv(n,e,t="on",r=dw){return new dt(i=>{let s=null;return s=n[t](e,(o,a)=>{r.schedule(()=>{i.next({snapshot:o,prevKey:a})}),"once"===t&&r.schedule(()=>i.complete())},o=>{r.schedule(()=>i.error(o))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe(re(i=>{const{snapshot:s,prevKey:o}=i;let a=null;return s.exists()&&(a=s.key),{type:e,payload:s,prevKey:o,key:a}}),$e())}function D9(n){return null==n}function S9(n){return"function"==typeof n.set}function R9(n,e){return S9(e)?e:n.ref(e)}function M9(n,e){if(function Dwe(n){return"string"==typeof n}(n))return e.stringCase();if(S9(n))return e.firebaseCase();if(function Swe(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function P9(n){return(D9(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function N9(n,e,t){return V(...(e=P9(e)).map(i=>Sv(n,i,"on",t)))}function k9(n,e){return function(r,i){return M9(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Nwe(n){return function(t){return t?M9(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function O9(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Fwe(n,e){const{payload:t,prevKey:r,key:i}=e,s=O9(n,i),o=function Owe(n,e){if(D9(e))return 0;{const t=O9(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload?.exists()){let a=null;e.payload.forEach(l=>{const c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,n=[...n,c],!1})}return n;case"child_added":if(s>-1)(n[s-1]?.key||null)!==r&&(n=n.filter(l=>l.payload.key!==t.key)).splice(o,0,e);else{if(null==r)return[e,...n];(n=n.slice()).splice(o,0,e)}return n;case"child_removed":return n.filter(a=>a.payload.key!==t.key);case"child_changed":return n.map(a=>a.payload.key===i?e:a);case"child_moved":if(s>-1){const a=n.splice(s,1)[0];return(n=n.slice()).splice(o,0,a),n}return n;default:return n}}function F9(n,e,t){return function kwe(n,e,t){return Sv(n,"value","once",t).pipe(Dt(r=>{const i=[K(r)];return e.forEach(s=>i.push(Sv(n,s,"on",t))),V(...i).pipe(Rf(Fwe,[]))}),on())}(n,e=P9(e),t)}function L9(n,e){return function(){return Sv(n,"value","on",e)}}!function Twe(n){n.INTERNAL.registerComponent(new jo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new Dv(i,r)},"PUBLIC").setServiceProps({Reference:Hs,Query:ui,Database:Dv,DataSnapshot:ru,enableLogging:uwe,INTERNAL:Cwe,ServerValue:Awe}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","1.0.3")}(Ns.Z);const Bwe=new oe("angularfire2.realtimeDatabaseURL"),Uwe=new oe("angularfire2.database.use-emulator");let jwe=(()=>{class n{constructor(t,r,i,s,o,a,l,c,h,p,g,_,v,E,x){je(this,"schedulers",void 0),je(this,"database",void 0),this.schedulers=a;const M=l,D=M_(t,o,r);c&&dS(D,o,h,g,_,v,p,E),this.database=Bw(`${D.name}.database.${i}`,"AngularFireDatabase",D.name,()=>{const k=o.runOutsideAngular(()=>D.database(i||void 0));return M&&k.useEmulator(...M),k},[M])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>R9(this.database,t));let s=i;return r&&(s=r(i)),function Lwe(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:k9(r,"update"),set:k9(r,"set"),push:i=>r.push(i),remove:Nwe(r),snapshotChanges:i=>F9(n,i,t).pipe(or),stateChanges:i=>N9(n,i,t).pipe(or),auditTrail:i=>function Rwe(n,e,t){return function Pwe(n,e,t){return function Mwe(n,e){return Sv(n,"value","on",e).pipe(re(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function Pye(...n){const e=Ll(n);return be((t,r)=>{const i=n.length,s=new Array(i);let o=n.map(()=>!1),a=!1;for(let l=0;l<i;l++)er(n[l]).subscribe(Fe(r,c=>{s[l]=c,!a&&!o[l]&&(o[l]=!0,(a=o.every(qn))&&(o=null))},Pe));t.subscribe(Fe(r,l=>{if(a){const c=[l,...s];r.next(e?e(...c):c)}}))})}(e),re(([i,s])=>{const o=i.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),function Nye(n){return be((e,t)=>{let r=!1,i=0;e.subscribe(Fe(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),re(i=>i.actions))}(n,N9(n,e).pipe(Rf((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(or),valueChanges:(i,s)=>F9(n,i,t).pipe(re(a=>a.map(l=>s&&s.idField?{...l.payload.val(),[s.idField]:l.key}:l.payload.val())),or)}}(s,this)}object(t){return function Vwe(n,e){return{query:n,snapshotChanges:()=>L9(n,e.schedulers.outsideAngular)().pipe(or),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>L9(n,e.schedulers.outsideAngular)().pipe(or,re(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>R9(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return je(n,"\u0275fac",function(t){return new(t||n)(O(Hf),O($f,8),O(Bwe,8),O(nr),O(Je),O(Vw),O(Uwe,8),O(P_,8),O(sS,8),O(oS,8),O(aS,8),O(lS,8),O(cS,8),O(uS,8),O(Lw,8))}),je(n,"\u0275prov",se({token:n,factory:n.\u0275fac,providedIn:"any"})),n})(),Hwe=(()=>{class n{constructor(){Ns.Z.registerVersion("angularfire",Bf.full,"rtdb-compat")}}return je(n,"\u0275fac",function(t){return new(t||n)}),je(n,"\u0275mod",bt({type:n})),je(n,"\u0275inj",gt({providers:[jwe]})),n})(),$9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[xP]}),n})(),Y9=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[xP]}),n})(),Dxe=(()=>{class n{constructor(t,r){xa(r)&&!t&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(t,r=[]){return{ngModule:n,providers:t.serverLoaded?[{provide:Go,useValue:{...IP,...t}},{provide:CP,useValue:r,multi:!0},{provide:Np,useValue:!0}]:[{provide:Go,useValue:{...IP,...t}},{provide:CP,useValue:r,multi:!0}]}}}return n.\u0275fac=function(t){return new(t||n)(O(Np),O(nr))},n.\u0275mod=bt({type:n}),n.\u0275inj=gt({imports:[e3,$9,Y9,e3,$9,Y9]}),n})(),Sxe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=bt({type:n,bootstrap:[Wpe]}),n.\u0275inj=gt({imports:[dae.initializeApp(O3_firebase),mae,Ghe,Mye,Hwe,z2,Gpe,ite,Hge,une,dne,xie,Dxe]}),n})();Tee().bootstrapModule(Sxe).catch(n=>console.log(n))},106:(vo,xr,st)=>{st.d(xr,{Z:()=>Ir});var I=st(58),ke=st(537),W=st(534),We=st(879);class kt{constructor(Ze,ct){this._delegate=Ze,this.firebase=ct,(0,W._addComponent)(Ze,new ke.wA("app-compat",()=>this,"PUBLIC")),this.container=Ze.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ze){this._delegate.automaticDataCollectionEnabled=Ze}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ze=>{this._delegate.checkDestroyed(),Ze()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,W.deleteApp)(this._delegate)))}_getService(Ze,ct=W._DEFAULT_ENTRY_NAME){var Cr;this._delegate.checkDestroyed();const Ar=this._delegate.container.getProvider(Ze);return!Ar.isInitialized()&&"EXPLICIT"===(null===(Cr=Ar.getComponent())||void 0===Cr?void 0:Cr.instantiationMode)&&Ar.initialize(),Ar.getImmediate({identifier:ct})}_removeServiceInstance(Ze,ct=W._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ze).clearInstance(ct)}_addComponent(Ze){(0,W._addComponent)(this._delegate,Ze)}_addOrOverwriteComponent(Ze){(0,W._addOrOverwriteComponent)(this._delegate,Ze)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Dn=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),he=function wt(){const Vt=function cr(Vt){const Ze={},ct={__esModule:!0,initializeApp:function un(ut,ur={}){const ee=W.initializeApp(ut,ur);if((0,I.r3)(Ze,ee.name))return Ze[ee.name];const vn=new Vt(ee,ct);return Ze[ee.name]=vn,vn},app:Ar,registerVersion:W.registerVersion,setLogLevel:W.setLogLevel,onLog:W.onLog,apps:null,SDK_VERSION:W.SDK_VERSION,INTERNAL:{registerComponent:function Jt(ut){const ur=ut.name,ee=ur.replace("-compat","");if(W._registerComponent(ut)&&"PUBLIC"===ut.type){const vn=(dn=Ar())=>{if("function"!=typeof dn[ee])throw Dn.create("invalid-app-argument",{appName:ur});return dn[ee]()};void 0!==ut.serviceProps&&(0,I.ZB)(vn,ut.serviceProps),ct[ee]=vn,Vt.prototype[ee]=function(...dn){return this._getService.bind(this,ur).apply(this,ut.multipleInstances?dn:[])}}return"PUBLIC"===ut.type?ct[ee]:null},removeApp:function Cr(ut){delete Ze[ut]},useAsService:function hi(ut,ur){return"serverAuth"===ur?null:ur},modularAPIs:W}};function Ar(ut){if(!(0,I.r3)(Ze,ut=ut||W._DEFAULT_ENTRY_NAME))throw Dn.create("no-app",{appName:ut});return Ze[ut]}return ct.default=ct,Object.defineProperty(ct,"apps",{get:function Bt(){return Object.keys(Ze).map(ut=>Ze[ut])}}),Ar.App=Vt,ct}(kt);return Vt.INTERNAL=Object.assign(Object.assign({},Vt.INTERNAL),{createFirebaseNamespace:wt,extendNamespace:function Ze(ct){(0,I.ZB)(Vt,ct)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),Vt}(),fe=new We.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){fe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Vt=self.firebase.SDK_VERSION;Vt&&Vt.indexOf("LITE")>=0&&fe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ir=he;!function Ot(Vt){(0,W.registerVersion)("@firebase/app-compat","0.2.27",Vt)}()},534:(vo,xr,st)=>{st.r(xr),st.d(xr,{FirebaseError:()=>We.ZR,SDK_VERSION:()=>Wa,_DEFAULT_ENTRY_NAME:()=>ws,_addComponent:()=>Xo,_addOrOverwriteComponent:()=>Jo,_apps:()=>pi,_clearComponents:()=>Xr,_components:()=>Ws,_getProvider:()=>ea,_registerComponent:()=>Yr,_removeServiceInstance:()=>En,deleteApp:()=>Eo,getApp:()=>Ll,getApps:()=>Ks,initializeApp:()=>ta,onLog:()=>Vl,registerVersion:()=>Bi,setLogLevel:()=>Kd});var I=st(861),ke=st(537),W=st(879),We=st(58);const kt=(U,P)=>P.some(ae=>U instanceof ae);let cn,Dn;const he=new WeakMap,fe=new WeakMap,Pe=new WeakMap,yt=new WeakMap,Ot=new WeakMap;let Ze={get(U,P,ae){if(U instanceof IDBTransaction){if("done"===P)return fe.get(U);if("objectStoreNames"===P)return U.objectStoreNames||Pe.get(U);if("store"===P)return ae.objectStoreNames[1]?void 0:ae.objectStore(ae.objectStoreNames[0])}return un(U[P])},set:(U,P,ae)=>(U[P]=ae,!0),has:(U,P)=>U instanceof IDBTransaction&&("done"===P||"store"===P)||P in U};function Ar(U){return"function"==typeof U?function Cr(U){return U!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function wt(){return Dn||(Dn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(U)?function(...P){return U.apply(Bt(this),P),un(he.get(this))}:function(...P){return un(U.apply(Bt(this),P))}:function(P,...ae){const Te=U.call(Bt(this),P,...ae);return Pe.set(Te,P.sort?P.sort():[P]),un(Te)}}(U):(U instanceof IDBTransaction&&function Vt(U){if(fe.has(U))return;const P=new Promise((ae,Te)=>{const nt=()=>{U.removeEventListener("complete",It),U.removeEventListener("error",L),U.removeEventListener("abort",L)},It=()=>{ae(),nt()},L=()=>{Te(U.error||new DOMException("AbortError","AbortError")),nt()};U.addEventListener("complete",It),U.addEventListener("error",L),U.addEventListener("abort",L)});fe.set(U,P)}(U),kt(U,function cr(){return cn||(cn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(U,Ze):U)}function un(U){if(U instanceof IDBRequest)return function Ir(U){const P=new Promise((ae,Te)=>{const nt=()=>{U.removeEventListener("success",It),U.removeEventListener("error",L)},It=()=>{ae(un(U.result)),nt()},L=()=>{Te(U.error),nt()};U.addEventListener("success",It),U.addEventListener("error",L)});return P.then(ae=>{ae instanceof IDBCursor&&he.set(ae,U)}).catch(()=>{}),Ot.set(P,U),P}(U);if(yt.has(U))return yt.get(U);const P=Ar(U);return P!==U&&(yt.set(U,P),Ot.set(P,U)),P}const Bt=U=>Ot.get(U),ut=["get","getKey","getAll","getAllKeys","count"],ur=["put","add","delete","clear"],ee=new Map;function vn(U,P){if(!(U instanceof IDBDatabase)||P in U||"string"!=typeof P)return;if(ee.get(P))return ee.get(P);const ae=P.replace(/FromIndex$/,""),Te=P!==ae,nt=ur.includes(ae);if(!(ae in(Te?IDBIndex:IDBObjectStore).prototype)||!nt&&!ut.includes(ae))return;const It=function(){var L=(0,I.Z)(function*(Rn,...Me){const vt=this.transaction(Rn,nt?"readwrite":"readonly");let Bl=vt.store;return Te&&(Bl=Bl.index(Me.shift())),(yield Promise.all([Bl[ae](...Me),nt&&vt.done]))[0]});return function(Me){return L.apply(this,arguments)}}();return ee.set(P,It),It}!function ct(U){Ze=U(Ze)}(U=>({...U,get:(P,ae,Te)=>vn(P,ae)||U.get(P,ae,Te),has:(P,ae)=>!!vn(P,ae)||U.has(P,ae)}));class dn{constructor(P){this.container=P}getPlatformInfoString(){return this.container.getProviders().map(ae=>{if(function qn(U){const P=U.getComponent();return"VERSION"===P?.type}(ae)){const Te=ae.getImmediate();return`${Te.library}/${Te.version}`}return null}).filter(ae=>ae).join(" ")}}const Gs="@firebase/app",dt=new W.Yd("@firebase/app"),ws="[DEFAULT]",ou={[Gs]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pi=new Map,Ws=new Map;function Xo(U,P){try{U.container.addComponent(P)}catch(ae){dt.debug(`Component ${P.name} failed to register with FirebaseApp ${U.name}`,ae)}}function Jo(U,P){U.container.addOrOverwriteComponent(P)}function Yr(U){const P=U.name;if(Ws.has(P))return dt.debug(`There were multiple attempts to register component ${P}.`),!1;Ws.set(P,U);for(const ae of pi.values())Xo(ae,U);return!0}function ea(U,P){const ae=U.container.getProvider("heartbeat").getImmediate({optional:!0});return ae&&ae.triggerHeartbeat(),U.container.getProvider(P)}function En(U,P,ae=ws){ea(U,P).clearInstance(ae)}function Xr(){Ws.clear()}const ts=new We.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vi{constructor(P,ae,Te){this._isDeleted=!1,this._options=Object.assign({},P),this._config=Object.assign({},ae),this._name=ae.name,this._automaticDataCollectionEnabled=ae.automaticDataCollectionEnabled,this._container=Te,this.container.addComponent(new ke.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(P){this.checkDestroyed(),this._automaticDataCollectionEnabled=P}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(P){this._isDeleted=P}checkDestroyed(){if(this.isDeleted)throw ts.create("app-deleted",{appName:this._name})}}const Wa="10.8.0";function ta(U,P={}){let ae=U;"object"!=typeof P&&(P={name:P});const Te=Object.assign({name:ws,automaticDataCollectionEnabled:!1},P),nt=Te.name;if("string"!=typeof nt||!nt)throw ts.create("bad-app-name",{appName:String(nt)});if(ae||(ae=(0,We.aH)()),!ae)throw ts.create("no-options");const It=pi.get(nt);if(It){if((0,We.vZ)(ae,It.options)&&(0,We.vZ)(Te,It.config))return It;throw ts.create("duplicate-app",{appName:nt})}const L=new ke.H0(nt);for(const Me of Ws.values())L.addComponent(Me);const Rn=new Vi(ae,Te,L);return pi.set(nt,Rn),Rn}function Ll(U=ws){const P=pi.get(U);if(!P&&U===ws&&(0,We.aH)())return ta();if(!P)throw ts.create("no-app",{appName:U});return P}function Ks(){return Array.from(pi.values())}function Eo(U){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,I.Z)(function*(U){const P=U.name;pi.has(P)&&(pi.delete(P),yield Promise.all(U.container.getProviders().map(ae=>ae.delete())),U.isDeleted=!0)})).apply(this,arguments)}function Bi(U,P,ae){var Te;let nt=null!==(Te=ou[U])&&void 0!==Te?Te:U;ae&&(nt+=`-${ae}`);const It=nt.match(/\s|\//),L=P.match(/\s|\//);if(It||L){const Rn=[`Unable to register library "${nt}" with version "${P}":`];return It&&Rn.push(`library name "${nt}" contains illegal characters (whitespace or "/")`),It&&L&&Rn.push("and"),L&&Rn.push(`version name "${P}" contains illegal characters (whitespace or "/")`),void dt.warn(Rn.join(" "))}Yr(new ke.wA(`${nt}-version`,()=>({library:nt,version:P}),"VERSION"))}function Vl(U,P){if(null!==U&&"function"!=typeof U)throw ts.create("invalid-log-argument");(0,W.Am)(U,P)}function Kd(U){(0,W.Ub)(U)}const au="firebase-heartbeat-database",lu=1,R="firebase-heartbeat-store";let T=null;function N(){return T||(T=function Jt(U,P,{blocked:ae,upgrade:Te,blocking:nt,terminated:It}={}){const L=indexedDB.open(U,P),Rn=un(L);return Te&&L.addEventListener("upgradeneeded",Me=>{Te(un(L.result),Me.oldVersion,Me.newVersion,un(L.transaction),Me)}),ae&&L.addEventListener("blocked",Me=>ae(Me.oldVersion,Me.newVersion,Me)),Rn.then(Me=>{It&&Me.addEventListener("close",()=>It()),nt&&Me.addEventListener("versionchange",vt=>nt(vt.oldVersion,vt.newVersion,vt))}).catch(()=>{}),Rn}(au,lu,{upgrade:(U,P)=>{if(0===P)try{U.createObjectStore(R)}catch(ae){console.warn(ae)}}}).catch(U=>{throw ts.create("idb-open",{originalErrorMessage:U.message})})),T}function V(){return(V=(0,I.Z)(function*(U){try{const ae=(yield N()).transaction(R),Te=yield ae.objectStore(R).get(ht(U));return yield ae.done,Te}catch(P){if(P instanceof We.ZR)dt.warn(P.message);else{const ae=ts.create("idb-get",{originalErrorMessage:P?.message});dt.warn(ae.message)}}})).apply(this,arguments)}function K(U,P){return $e.apply(this,arguments)}function $e(){return($e=(0,I.Z)(function*(U,P){try{const Te=(yield N()).transaction(R,"readwrite");yield Te.objectStore(R).put(P,ht(U)),yield Te.done}catch(ae){if(ae instanceof We.ZR)dt.warn(ae.message);else{const Te=ts.create("idb-set",{originalErrorMessage:ae?.message});dt.warn(Te.message)}}})).apply(this,arguments)}function ht(U){return`${U.name}!${U.options.appId}`}class dr{constructor(P){this.container=P,this._heartbeatsCache=null;const ae=this.container.getProvider("app").getImmediate();this._storage=new Qt(ae),this._heartbeatsCachePromise=this._storage.read().then(Te=>(this._heartbeatsCache=Te,Te))}triggerHeartbeat(){var P=this;return(0,I.Z)(function*(){var ae,Te;const It=P.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),L=Re();if((null!=(null===(ae=P._heartbeatsCache)||void 0===ae?void 0:ae.heartbeats)||(P._heartbeatsCache=yield P._heartbeatsCachePromise,null!=(null===(Te=P._heartbeatsCache)||void 0===Te?void 0:Te.heartbeats)))&&P._heartbeatsCache.lastSentHeartbeatDate!==L&&!P._heartbeatsCache.heartbeats.some(Rn=>Rn.date===L))return P._heartbeatsCache.heartbeats.push({date:L,agent:It}),P._heartbeatsCache.heartbeats=P._heartbeatsCache.heartbeats.filter(Rn=>{const Me=new Date(Rn.date).valueOf();return Date.now()-Me<=2592e6}),P._storage.overwrite(P._heartbeatsCache)})()}getHeartbeatsHeader(){var P=this;return(0,I.Z)(function*(){var ae;if(null===P._heartbeatsCache&&(yield P._heartbeatsCachePromise),null==(null===(ae=P._heartbeatsCache)||void 0===ae?void 0:ae.heartbeats)||0===P._heartbeatsCache.heartbeats.length)return"";const Te=Re(),{heartbeatsToSend:nt,unsentEntries:It}=function Sr(U,P=1024){const ae=[];let Te=U.slice();for(const nt of U){const It=ae.find(L=>L.agent===nt.agent);if(It){if(It.dates.push(nt.date),Qs(ae)>P){It.dates.pop();break}}else if(ae.push({agent:nt.agent,dates:[nt.date]}),Qs(ae)>P){ae.pop();break}Te=Te.slice(1)}return{heartbeatsToSend:ae,unsentEntries:Te}}(P._heartbeatsCache.heartbeats),L=(0,We.L)(JSON.stringify({version:2,heartbeats:nt}));return P._heartbeatsCache.lastSentHeartbeatDate=Te,It.length>0?(P._heartbeatsCache.heartbeats=It,yield P._storage.overwrite(P._heartbeatsCache)):(P._heartbeatsCache.heartbeats=[],P._storage.overwrite(P._heartbeatsCache)),L})()}}function Re(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(P){this.app=P,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,We.hl)()&&(0,We.eu)().then(()=>!0).catch(()=>!1)})()}read(){var P=this;return(0,I.Z)(function*(){if(yield P._canUseIndexedDBPromise){const Te=yield function j(U){return V.apply(this,arguments)}(P.app);return Te?.heartbeats?Te:{heartbeats:[]}}return{heartbeats:[]}})()}overwrite(P){var ae=this;return(0,I.Z)(function*(){var Te;if(yield ae._canUseIndexedDBPromise){const It=yield ae.read();return K(ae.app,{lastSentHeartbeatDate:null!==(Te=P.lastSentHeartbeatDate)&&void 0!==Te?Te:It.lastSentHeartbeatDate,heartbeats:P.heartbeats})}})()}add(P){var ae=this;return(0,I.Z)(function*(){var Te;if(yield ae._canUseIndexedDBPromise){const It=yield ae.read();return K(ae.app,{lastSentHeartbeatDate:null!==(Te=P.lastSentHeartbeatDate)&&void 0!==Te?Te:It.lastSentHeartbeatDate,heartbeats:[...It.heartbeats,...P.heartbeats]})}})()}}function Qs(U){return(0,We.L)(JSON.stringify({version:2,heartbeats:U})).length}!function Qd(U){Yr(new ke.wA("platform-logger",P=>new dn(P),"PRIVATE")),Yr(new ke.wA("heartbeat",P=>new dr(P),"PRIVATE")),Bi(Gs,"0.9.27",U),Bi(Gs,"0.9.27","esm2017"),Bi("fire-js","")}("")},537:(vo,xr,st)=>{st.d(xr,{H0:()=>cr,wA:()=>W,zt:()=>kt});var I=st(861),ke=st(58);class W{constructor(he,fe,Pe){this.name=he,this.instanceFactory=fe,this.type=Pe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(he){return this.instantiationMode=he,this}setMultipleInstances(he){return this.multipleInstances=he,this}setServiceProps(he){return this.serviceProps=he,this}setInstanceCreatedCallback(he){return this.onInstanceCreated=he,this}}const We="[DEFAULT]";class kt{constructor(he,fe){this.name=he,this.container=fe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(he){const fe=this.normalizeInstanceIdentifier(he);if(!this.instancesDeferred.has(fe)){const Pe=new ke.BH;if(this.instancesDeferred.set(fe,Pe),this.isInitialized(fe)||this.shouldAutoInitialize())try{const yt=this.getOrInitializeService({instanceIdentifier:fe});yt&&Pe.resolve(yt)}catch{}}return this.instancesDeferred.get(fe).promise}getImmediate(he){var fe;const Pe=this.normalizeInstanceIdentifier(he?.identifier),yt=null!==(fe=he?.optional)&&void 0!==fe&&fe;if(!this.isInitialized(Pe)&&!this.shouldAutoInitialize()){if(yt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Pe})}catch(Ot){if(yt)return null;throw Ot}}getComponent(){return this.component}setComponent(he){if(he.name!==this.name)throw Error(`Mismatching Component ${he.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=he,this.shouldAutoInitialize()){if(function Dn(wt){return"EAGER"===wt.instantiationMode}(he))try{this.getOrInitializeService({instanceIdentifier:We})}catch{}for(const[fe,Pe]of this.instancesDeferred.entries()){const yt=this.normalizeInstanceIdentifier(fe);try{const Ot=this.getOrInitializeService({instanceIdentifier:yt});Pe.resolve(Ot)}catch{}}}}clearInstance(he=We){this.instancesDeferred.delete(he),this.instancesOptions.delete(he),this.instances.delete(he)}delete(){var he=this;return(0,I.Z)(function*(){const fe=Array.from(he.instances.values());yield Promise.all([...fe.filter(Pe=>"INTERNAL"in Pe).map(Pe=>Pe.INTERNAL.delete()),...fe.filter(Pe=>"_delete"in Pe).map(Pe=>Pe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(he=We){return this.instances.has(he)}getOptions(he=We){return this.instancesOptions.get(he)||{}}initialize(he={}){const{options:fe={}}=he,Pe=this.normalizeInstanceIdentifier(he.instanceIdentifier);if(this.isInitialized(Pe))throw Error(`${this.name}(${Pe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const yt=this.getOrInitializeService({instanceIdentifier:Pe,options:fe});for(const[Ot,Ir]of this.instancesDeferred.entries())Pe===this.normalizeInstanceIdentifier(Ot)&&Ir.resolve(yt);return yt}onInit(he,fe){var Pe;const yt=this.normalizeInstanceIdentifier(fe),Ot=null!==(Pe=this.onInitCallbacks.get(yt))&&void 0!==Pe?Pe:new Set;Ot.add(he),this.onInitCallbacks.set(yt,Ot);const Ir=this.instances.get(yt);return Ir&&he(Ir,yt),()=>{Ot.delete(he)}}invokeOnInitCallbacks(he,fe){const Pe=this.onInitCallbacks.get(fe);if(Pe)for(const yt of Pe)try{yt(he,fe)}catch{}}getOrInitializeService({instanceIdentifier:he,options:fe={}}){let Pe=this.instances.get(he);if(!Pe&&this.component&&(Pe=this.component.instanceFactory(this.container,{instanceIdentifier:(wt=he,wt===We?void 0:wt),options:fe}),this.instances.set(he,Pe),this.instancesOptions.set(he,fe),this.invokeOnInitCallbacks(Pe,he),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,he,Pe)}catch{}var wt;return Pe||null}normalizeInstanceIdentifier(he=We){return this.component?this.component.multipleInstances?he:We:he}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class cr{constructor(he){this.name=he,this.providers=new Map}addComponent(he){const fe=this.getProvider(he.name);if(fe.isComponentSet())throw new Error(`Component ${he.name} has already been registered with ${this.name}`);fe.setComponent(he)}addOrOverwriteComponent(he){this.getProvider(he.name).isComponentSet()&&this.providers.delete(he.name),this.addComponent(he)}getProvider(he){if(this.providers.has(he))return this.providers.get(he);const fe=new kt(he,this);return this.providers.set(he,fe),fe}getProviders(){return Array.from(this.providers.values())}}},879:(vo,xr,st)=>{st.d(xr,{Am:()=>wt,Ub:()=>cr,Yd:()=>Dn,in:()=>ke});const I=[];var ke=(()=>((ke=ke||{})[ke.DEBUG=0]="DEBUG",ke[ke.VERBOSE=1]="VERBOSE",ke[ke.INFO=2]="INFO",ke[ke.WARN=3]="WARN",ke[ke.ERROR=4]="ERROR",ke[ke.SILENT=5]="SILENT",ke))();const W={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},We=ke.INFO,kt={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},cn=(he,fe,...Pe)=>{if(fe<he.logLevel)return;const yt=(new Date).toISOString(),Ot=kt[fe];if(!Ot)throw new Error(`Attempted to log a message with an invalid logType (value: ${fe})`);console[Ot](`[${yt}]  ${he.name}:`,...Pe)};class Dn{constructor(fe){this.name=fe,this._logLevel=We,this._logHandler=cn,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(fe){if(!(fe in ke))throw new TypeError(`Invalid value "${fe}" assigned to \`logLevel\``);this._logLevel=fe}setLogLevel(fe){this._logLevel="string"==typeof fe?W[fe]:fe}get logHandler(){return this._logHandler}set logHandler(fe){if("function"!=typeof fe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=fe}get userLogHandler(){return this._userLogHandler}set userLogHandler(fe){this._userLogHandler=fe}debug(...fe){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...fe),this._logHandler(this,ke.DEBUG,...fe)}log(...fe){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...fe),this._logHandler(this,ke.VERBOSE,...fe)}info(...fe){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...fe),this._logHandler(this,ke.INFO,...fe)}warn(...fe){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...fe),this._logHandler(this,ke.WARN,...fe)}error(...fe){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...fe),this._logHandler(this,ke.ERROR,...fe)}}function cr(he){I.forEach(fe=>{fe.setLogLevel(he)})}function wt(he,fe){for(const Pe of I){let yt=null;fe&&fe.level&&(yt=W[fe.level]),Pe.userLogHandler=null===he?null:(Ot,Ir,...Vt)=>{const Ze=Vt.map(ct=>{if(null==ct)return null;if("string"==typeof ct)return ct;if("number"==typeof ct||"boolean"==typeof ct)return ct.toString();if(ct instanceof Error)return ct.message;try{return JSON.stringify(ct)}catch{return null}}).filter(ct=>ct).join(" ");Ir>=(yt??Ot.logLevel)&&he({level:ke[Ir].toLowerCase(),message:Ze,args:Vt,type:Ot.name})}}}},999:(vo,xr,st)=>{st.r(xr);var I=st(861),ke=st(106),W=st(58),We=st(534),kt=st(879),cn=st(582),Dn=st(537);const wt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const Ir=function yt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Vt=function Ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ze=new W.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Cr=new kt.Yd("@firebase/auth");function un(f,...u){Cr.logLevel<=kt.in.ERROR&&Cr.error(`Auth (${We.SDK_VERSION}): ${f}`,...u)}function Bt(f,...u){throw ur(f,...u)}function Jt(f,...u){return ur(f,...u)}function hi(f,u,d){const m=Object.assign(Object.assign({},Vt()),{[u]:d});return new W.LL("auth","Firebase",m).create(u,{appName:f.name})}function ut(f,u,d){if(!(u instanceof d))throw d.name!==u.constructor.name&&Bt(f,"argument-error"),hi(f,"argument-error",`Type of ${u.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ur(f,...u){if("string"!=typeof f){const d=u[0],m=[...u.slice(1)];return m[0]&&(m[0].appName=f.name),f._errorFactory.create(d,...m)}return Ze.create(f,...u)}function ee(f,u,...d){if(!f)throw ur(u,...d)}function vn(f){const u="INTERNAL ASSERTION FAILED: "+f;throw un(u),new Error(u)}function dn(f,u){f||vn(u)}function qn(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.href)||""}function Gs(){return"http:"===zs()||"https:"===zs()}function zs(){var f;return typeof self<"u"&&(null===(f=self.location)||void 0===f?void 0:f.protocol)||null}class qs{constructor(u,d){this.shortDelay=u,this.longDelay=d,dn(d>u,"Short delay should be less than long delay!"),this.isMobile=(0,W.uI)()||(0,W.b$)()}get(){return function dt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gs()||(0,W.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function H(f,u){dn(f.emulator,"Emulator should always be set here");const{url:d}=f.emulator;return u?`${d}${u.startsWith("/")?u.slice(1):u}`:d}class q{static initialize(u,d,m){this.fetchImpl=u,d&&(this.headersImpl=d),m&&(this.responseImpl=m)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:typeof globalThis<"u"&&globalThis.fetch?globalThis.fetch:typeof fetch<"u"?fetch:void vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:typeof globalThis<"u"&&globalThis.Headers?globalThis.Headers:typeof Headers<"u"?Headers:void vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:typeof globalThis<"u"&&globalThis.Response?globalThis.Response:typeof Response<"u"?Response:void vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const z={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},J=new qs(3e4,6e4);function Q(f,u){return f.tenantId&&!u.tenantId?Object.assign(Object.assign({},u),{tenantId:f.tenantId}):u}function te(f,u,d,m){return be.apply(this,arguments)}function be(){return(be=(0,I.Z)(function*(f,u,d,m,y={}){return Fe(f,y,(0,I.Z)(function*(){let b={},S={};m&&("GET"===u?S=m:b={body:JSON.stringify(m)});const F=(0,W.xO)(Object.assign({key:f.config.apiKey},S)).slice(1),Y=yield f._getAdditionalHeaders();return Y["Content-Type"]="application/json",f.languageCode&&(Y["X-Firebase-Locale"]=f.languageCode),q.fetch()(bn(f,f.config.apiHost,d,F),Object.assign({method:u,headers:Y,referrerPolicy:"no-referrer"},b))}))})).apply(this,arguments)}function Fe(f,u,d){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,I.Z)(function*(f,u,d){f._canInitEmulator=!1;const m=Object.assign(Object.assign({},z),u);try{const y=new Tr(f),b=yield Promise.race([d(),y.promise]);y.clearNetworkTimeout();const S=yield b.json();if("needConfirmation"in S)throw Jn(f,"account-exists-with-different-credential",S);if(b.ok&&!("errorMessage"in S))return S;{const F=b.ok?S.errorMessage:S.error.message,[Y,ge]=F.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Y)throw Jn(f,"credential-already-in-use",S);if("EMAIL_EXISTS"===Y)throw Jn(f,"email-already-in-use",S);if("USER_DISABLED"===Y)throw Jn(f,"user-disabled",S);const Ce=m[Y]||Y.toLowerCase().replace(/[_\s]+/g,"-");if(ge)throw hi(f,Ce,ge);Bt(f,Ce)}}catch(y){if(y instanceof W.ZR)throw y;Bt(f,"network-request-failed",{message:String(y)})}})).apply(this,arguments)}function re(f,u,d,m){return xt.apply(this,arguments)}function xt(){return(xt=(0,I.Z)(function*(f,u,d,m,y={}){const b=yield te(f,u,d,m,y);return"mfaPendingCredential"in b&&Bt(f,"multi-factor-auth-required",{_serverResponse:b}),b})).apply(this,arguments)}function bn(f,u,d,m){const y=`${u}${d}?${m}`;return f.config.emulator?H(f.config,y):`${f.config.apiScheme}://${y}`}function sn(f){switch(f){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Tr{constructor(u){this.auth=u,this.timer=null,this.promise=new Promise((d,m)=>{this.timer=setTimeout(()=>m(Jt(this.auth,"network-request-failed")),J.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jn(f,u,d){const m={appName:f.name};d.email&&(m.email=d.email),d.phoneNumber&&(m.phoneNumber=d.phoneNumber);const y=Jt(f,u,m);return y.customData._tokenResponse=d,y}function Lr(f){return void 0!==f&&void 0!==f.getResponse}function fi(f){return void 0!==f&&void 0!==f.enterprise}class Li{constructor(u){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===u.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=u.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=u.recaptchaEnforcementState}getProviderEnforcementState(u){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const d of this.recaptchaEnforcementState)if(d.provider&&d.provider===u)return sn(d.enforcementState);return null}isProviderEnabled(u){return"ENFORCE"===this.getProviderEnforcementState(u)||"AUDIT"===this.getProviderEnforcementState(u)}}function bo(){return(bo=(0,I.Z)(function*(f){return(yield te(f,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Yo(f,u){return er.apply(this,arguments)}function er(){return(er=(0,I.Z)(function*(f,u){return te(f,"GET","/v2/recaptchaConfig",Q(f,u))})).apply(this,arguments)}function ws(){return(ws=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:delete",u)})).apply(this,arguments)}function pi(){return(pi=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function Xo(){return(Xo=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:lookup",u)})).apply(this,arguments)}function Jo(f){if(f)try{const u=new Date(Number(f));if(!isNaN(u.getTime()))return u.toUTCString()}catch{}}function En(){return(En=(0,I.Z)(function*(f,u=!1){const d=(0,W.m9)(f),m=yield d.getIdToken(u),y=Dr(m);ee(y&&y.exp&&y.auth_time&&y.iat,d.auth,"internal-error");const b="object"==typeof y.firebase?y.firebase:void 0,S=b?.sign_in_provider;return{claims:y,token:m,authTime:Jo(Xr(y.auth_time)),issuedAtTime:Jo(Xr(y.iat)),expirationTime:Jo(Xr(y.exp)),signInProvider:S||null,signInSecondFactor:b?.sign_in_second_factor||null}})).apply(this,arguments)}function Xr(f){return 1e3*Number(f)}function Dr(f){const[u,d,m]=f.split(".");if(void 0===u||void 0===d||void 0===m)return un("JWT malformed, contained fewer than 3 sections"),null;try{const y=(0,W.tV)(d);return y?JSON.parse(y):(un("Failed to decode base64 JWT payload"),null)}catch(y){return un("Caught error parsing JWT payload as JSON",y?.toString()),null}}function Vi(f,u){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,I.Z)(function*(f,u,d=!1){if(d)return u;try{return yield u}catch(m){throw m instanceof W.ZR&&function ta({code:f}){return"auth/user-disabled"===f||"auth/user-token-expired"===f}(m)&&f.auth.currentUser===f&&(yield f.auth.signOut()),m}})).apply(this,arguments)}class Ll{constructor(u){this.user=u,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(u){var d;if(u){const m=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),m}{this.errorBackoff=3e4;const y=(null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0)-Date.now()-3e5;return Math.max(0,y)}}schedule(u=!1){var d=this;if(!this.isRunning)return;const m=this.getInterval(u);this.timerId=setTimeout((0,I.Z)(function*(){yield d.iteration()}),m)}iteration(){var u=this;return(0,I.Z)(function*(){try{yield u.user.getIdToken(!0)}catch(d){return void("auth/network-request-failed"===d?.code&&u.schedule(!0))}u.schedule()})()}}class Ks{constructor(u,d){this.createdAt=u,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jo(this.lastLoginAt),this.creationTime=Jo(this.createdAt)}_copy(u){this.createdAt=u.createdAt,this.lastLoginAt=u.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Eo(f){return Vr.apply(this,arguments)}function Vr(){return Vr=(0,I.Z)(function*(f){var u;const d=f.auth,m=yield f.getIdToken(),y=yield Vi(f,function Ws(f,u){return Xo.apply(this,arguments)}(d,{idToken:m}));ee(y?.users.length,d,"internal-error");const b=y.users[0];f._notifyReloadListener(b);const S=null!==(u=b.providerUserInfo)&&void 0!==u&&u.length?function au(f){return f.map(u=>{var{providerId:d}=u,m=(0,cn._T)(u,["providerId"]);return{providerId:d,uid:m.rawId||"",displayName:m.displayName||null,email:m.email||null,phoneNumber:m.phoneNumber||null,photoURL:m.photoUrl||null}})}(b.providerUserInfo):[],F=function Kd(f,u){return[...f.filter(m=>!u.some(y=>y.providerId===m.providerId)),...u]}(f.providerData,S),Ce=!!f.isAnonymous&&!(f.email&&b.passwordHash||F?.length),Ae={uid:b.localId,displayName:b.displayName||null,photoURL:b.photoUrl||null,email:b.email||null,emailVerified:b.emailVerified||!1,phoneNumber:b.phoneNumber||null,tenantId:b.tenantId||null,providerData:F,metadata:new Ks(b.createdAt,b.lastLoginAt),isAnonymous:Ce};Object.assign(f,Ae)}),Vr.apply(this,arguments)}function Vl(){return(Vl=(0,I.Z)(function*(f){const u=(0,W.m9)(f);yield Eo(u),yield u.auth._persistUserIfCurrent(u),u.auth._notifyListenersIfCurrent(u)})).apply(this,arguments)}function R(){return(R=(0,I.Z)(function*(f,u){const d=yield Fe(f,{},(0,I.Z)(function*(){const m=(0,W.xO)({grant_type:"refresh_token",refresh_token:u}).slice(1),{tokenApiHost:y,apiKey:b}=f.config,S=bn(f,y,"/v1/token",`key=${b}`),F=yield f._getAdditionalHeaders();return F["Content-Type"]="application/x-www-form-urlencoded",q.fetch()(S,{method:"POST",headers:F,body:m})}));return{accessToken:d.access_token,expiresIn:d.expires_in,refreshToken:d.refresh_token}})).apply(this,arguments)}function N(){return(N=(0,I.Z)(function*(f,u){return te(f,"POST","/v2/accounts:revokeToken",Q(f,u))})).apply(this,arguments)}class j{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(u){ee(u.idToken,"internal-error"),ee(typeof u.idToken<"u","internal-error"),ee(typeof u.refreshToken<"u","internal-error");const d="expiresIn"in u&&typeof u.expiresIn<"u"?Number(u.expiresIn):function ts(f){const u=Dr(f);return ee(u,"internal-error"),ee(typeof u.exp<"u","internal-error"),ee(typeof u.iat<"u","internal-error"),Number(u.exp)-Number(u.iat)}(u.idToken);this.updateTokensAndExpiration(u.idToken,u.refreshToken,d)}getToken(u,d=!1){var m=this;return(0,I.Z)(function*(){return ee(!m.accessToken||m.refreshToken,u,"user-token-expired"),d||!m.accessToken||m.isExpired?m.refreshToken?(yield m.refresh(u,m.refreshToken),m.accessToken):null:m.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(u,d){var m=this;return(0,I.Z)(function*(){const{accessToken:y,refreshToken:b,expiresIn:S}=yield function lu(f,u){return R.apply(this,arguments)}(u,d);m.updateTokensAndExpiration(y,b,Number(S))})()}updateTokensAndExpiration(u,d,m){this.refreshToken=d||null,this.accessToken=u||null,this.expirationTime=Date.now()+1e3*m}static fromJSON(u,d){const{refreshToken:m,accessToken:y,expirationTime:b}=d,S=new j;return m&&(ee("string"==typeof m,"internal-error",{appName:u}),S.refreshToken=m),y&&(ee("string"==typeof y,"internal-error",{appName:u}),S.accessToken=y),b&&(ee("number"==typeof b,"internal-error",{appName:u}),S.expirationTime=b),S}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(u){this.accessToken=u.accessToken,this.refreshToken=u.refreshToken,this.expirationTime=u.expirationTime}_clone(){return Object.assign(new j,this.toJSON())}_performRefresh(){return vn("not implemented")}}function V(f,u){ee("string"==typeof f||typeof f>"u","internal-error",{appName:u})}class K{constructor(u){var{uid:d,auth:m,stsTokenManager:y}=u,b=(0,cn._T)(u,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ll(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=m,this.stsTokenManager=y,this.accessToken=y.accessToken,this.displayName=b.displayName||null,this.email=b.email||null,this.emailVerified=b.emailVerified||!1,this.phoneNumber=b.phoneNumber||null,this.photoURL=b.photoURL||null,this.isAnonymous=b.isAnonymous||!1,this.tenantId=b.tenantId||null,this.providerData=b.providerData?[...b.providerData]:[],this.metadata=new Ks(b.createdAt||void 0,b.lastLoginAt||void 0)}getIdToken(u){var d=this;return(0,I.Z)(function*(){const m=yield Vi(d,d.stsTokenManager.getToken(d.auth,u));return ee(m,d.auth,"internal-error"),d.accessToken!==m&&(d.accessToken=m,yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)),m})()}getIdTokenResult(u){return function ea(f){return En.apply(this,arguments)}(this,u)}reload(){return function Bi(f){return Vl.apply(this,arguments)}(this)}_assign(u){this!==u&&(ee(this.uid===u.uid,this.auth,"internal-error"),this.displayName=u.displayName,this.photoURL=u.photoURL,this.email=u.email,this.emailVerified=u.emailVerified,this.phoneNumber=u.phoneNumber,this.isAnonymous=u.isAnonymous,this.tenantId=u.tenantId,this.providerData=u.providerData.map(d=>Object.assign({},d)),this.metadata._copy(u.metadata),this.stsTokenManager._assign(u.stsTokenManager))}_clone(u){const d=new K(Object.assign(Object.assign({},this),{auth:u,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(u){ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=u,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(u){this.reloadListener?this.reloadListener(u):this.reloadUserInfo=u}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(u,d=!1){var m=this;return(0,I.Z)(function*(){let y=!1;u.idToken&&u.idToken!==m.stsTokenManager.accessToken&&(m.stsTokenManager.updateFromServerResponse(u),y=!0),d&&(yield Eo(m)),yield m.auth._persistUserIfCurrent(m),y&&m.auth._notifyListenersIfCurrent(m)})()}delete(){var u=this;return(0,I.Z)(function*(){const d=yield u.getIdToken();return yield Vi(u,function su(f,u){return ws.apply(this,arguments)}(u.auth,{idToken:d})),u.stsTokenManager.clearRefreshToken(),u.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(u=>Object.assign({},u)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(u,d){var m,y,b,S,F,Y,ge,Ce;const Ae=null!==(m=d.displayName)&&void 0!==m?m:void 0,nn=null!==(y=d.email)&&void 0!==y?y:void 0,bi=null!==(b=d.phoneNumber)&&void 0!==b?b:void 0,Pr=null!==(S=d.photoURL)&&void 0!==S?S:void 0,kb=null!==(F=d.tenantId)&&void 0!==F?F:void 0,ag=null!==(Y=d._redirectEventId)&&void 0!==Y?Y:void 0,Ob=null!==(ge=d.createdAt)&&void 0!==ge?ge:void 0,lg=null!==(Ce=d.lastLoginAt)&&void 0!==Ce?Ce:void 0,{uid:Ru,emailVerified:Fb,isAnonymous:Lb,providerData:cg,stsTokenManager:ug}=d;ee(Ru&&ug,u,"internal-error");const xC=j.fromJSON(this.name,ug);ee("string"==typeof Ru,u,"internal-error"),V(Ae,u.name),V(nn,u.name),ee("boolean"==typeof Fb,u,"internal-error"),ee("boolean"==typeof Lb,u,"internal-error"),V(bi,u.name),V(Pr,u.name),V(kb,u.name),V(ag,u.name),V(Ob,u.name),V(lg,u.name);const dg=new K({uid:Ru,auth:u,email:nn,emailVerified:Fb,displayName:Ae,isAnonymous:Lb,photoURL:Pr,phoneNumber:bi,tenantId:kb,stsTokenManager:xC,createdAt:Ob,lastLoginAt:lg});return cg&&Array.isArray(cg)&&(dg.providerData=cg.map(Ei=>Object.assign({},Ei))),ag&&(dg._redirectEventId=ag),dg}static _fromIdTokenResponse(u,d,m=!1){return(0,I.Z)(function*(){const y=new j;y.updateFromServerResponse(d);const b=new K({uid:d.localId,auth:u,stsTokenManager:y,isAnonymous:m});return yield Eo(b),b})()}}const $e=new Map;function ht(f){dn(f instanceof Function,"Expected a class definition");let u=$e.get(f);return u?(dn(u instanceof f,"Instance stored in cache mismatched with class"),u):(u=new f,$e.set(f,u),u)}const on=(()=>{class f{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(d,m){var y=this;return(0,I.Z)(function*(){y.storage[d]=m})()}_get(d){var m=this;return(0,I.Z)(function*(){const y=m.storage[d];return void 0===y?null:y})()}_remove(d){var m=this;return(0,I.Z)(function*(){delete m.storage[d]})()}_addListener(d,m){}_removeListener(d,m){}}return f.type="NONE",f})();function dr(f,u,d){return`firebase:${f}:${u}:${d}`}class Re{constructor(u,d,m){this.persistence=u,this.auth=d,this.userKey=m;const{config:y,name:b}=this.auth;this.fullUserKey=dr(this.userKey,y.apiKey,b),this.fullPersistenceKey=dr("persistence",y.apiKey,b),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(u){return this.persistence._set(this.fullUserKey,u.toJSON())}getCurrentUser(){var u=this;return(0,I.Z)(function*(){const d=yield u.persistence._get(u.fullUserKey);return d?K._fromJSON(u.auth,d):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(u){var d=this;return(0,I.Z)(function*(){if(d.persistence===u)return;const m=yield d.getCurrentUser();return yield d.removeCurrentUser(),d.persistence=u,m?d.setCurrentUser(m):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(u,d,m="authUser"){return(0,I.Z)(function*(){if(!d.length)return new Re(ht(on),u,m);const y=(yield Promise.all(d.map(function(){var ge=(0,I.Z)(function*(Ce){if(yield Ce._isAvailable())return Ce});return function(Ce){return ge.apply(this,arguments)}}()))).filter(ge=>ge);let b=y[0]||ht(on);const S=dr(m,u.config.apiKey,u.name);let F=null;for(const ge of d)try{const Ce=yield ge._get(S);if(Ce){const Ae=K._fromJSON(u,Ce);ge!==b&&(F=Ae),b=ge;break}}catch{}const Y=y.filter(ge=>ge._shouldAllowMigration);return b._shouldAllowMigration&&Y.length?(b=Y[0],F&&(yield b._set(S,F.toJSON())),yield Promise.all(d.map(function(){var ge=(0,I.Z)(function*(Ce){if(Ce!==b)try{yield Ce._remove(S)}catch{}});return function(Ce){return ge.apply(this,arguments)}}())),new Re(b,u,m)):new Re(b,u,m)})()}}function Sr(f){const u=f.toLowerCase();if(u.includes("opera/")||u.includes("opr/")||u.includes("opios/"))return"Opera";if(U(u))return"IEMobile";if(u.includes("msie")||u.includes("trident/"))return"IE";if(u.includes("edge/"))return"Edge";if(Qt(u))return"Firefox";if(u.includes("silk/"))return"Silk";if(ae(u))return"Blackberry";if(Te(u))return"Webos";if(Qs(u))return"Safari";if((u.includes("chrome/")||Qd(u))&&!u.includes("edge/"))return"Chrome";if(P(u))return"Android";{const m=f.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===m?.length)return m[1]}return"Other"}function Qt(f=(0,W.z$)()){return/firefox\//i.test(f)}function Qs(f=(0,W.z$)()){const u=f.toLowerCase();return u.includes("safari/")&&!u.includes("chrome/")&&!u.includes("crios/")&&!u.includes("android")}function Qd(f=(0,W.z$)()){return/crios\//i.test(f)}function U(f=(0,W.z$)()){return/iemobile/i.test(f)}function P(f=(0,W.z$)()){return/android/i.test(f)}function ae(f=(0,W.z$)()){return/blackberry/i.test(f)}function Te(f=(0,W.z$)()){return/webos/i.test(f)}function nt(f=(0,W.z$)()){return/iphone|ipad|ipod/i.test(f)||/macintosh/i.test(f)&&/mobile/i.test(f)}function Me(f=(0,W.z$)()){return nt(f)||P(f)||Te(f)||ae(f)||/windows phone/i.test(f)||U(f)}function Bl(f,u=[]){let d;switch(f){case"Browser":d=Sr((0,W.z$)());break;case"Worker":d=`${Sr((0,W.z$)())}-${f}`;break;default:d=f}const m=u.length?u.join(","):"FirebaseCore-web";return`${d}/JsCore/${We.SDK_VERSION}/${m}`}class Ek{constructor(u){this.auth=u,this.queue=[]}pushCallback(u,d){const m=b=>new Promise((S,F)=>{try{S(u(b))}catch(Y){F(Y)}});m.onAbort=d,this.queue.push(m);const y=this.queue.length-1;return()=>{this.queue[y]=()=>Promise.resolve()}}runMiddleware(u){var d=this;return(0,I.Z)(function*(){if(d.auth.currentUser===u)return;const m=[];try{for(const y of d.queue)yield y(u),y.onAbort&&m.push(y.onAbort)}catch(y){m.reverse();for(const b of m)try{b()}catch{}throw d.auth._errorFactory.create("login-blocked",{originalMessage:y?.message})}})()}}function Ul(){return(Ul=(0,I.Z)(function*(f,u={}){return te(f,"GET","/v2/passwordPolicy",Q(f,u))})).apply(this,arguments)}class wk{constructor(u){var d,m,y,b;const S=u.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(d=S.minPasswordLength)&&void 0!==d?d:6,S.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=S.maxPasswordLength),void 0!==S.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=S.containsLowercaseCharacter),void 0!==S.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=S.containsUppercaseCharacter),void 0!==S.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=S.containsNumericCharacter),void 0!==S.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=S.containsNonAlphanumericCharacter),this.enforcementState=u.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(y=null===(m=u.allowedNonAlphanumericCharacters)||void 0===m?void 0:m.join(""))&&void 0!==y?y:"",this.forceUpgradeOnSignin=null!==(b=u.forceUpgradeOnSignin)&&void 0!==b&&b,this.schemaVersion=u.schemaVersion}validatePassword(u){var d,m,y,b,S,F;const Y={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(u,Y),this.validatePasswordCharacterOptions(u,Y),Y.isValid&&(Y.isValid=null===(d=Y.meetsMinPasswordLength)||void 0===d||d),Y.isValid&&(Y.isValid=null===(m=Y.meetsMaxPasswordLength)||void 0===m||m),Y.isValid&&(Y.isValid=null===(y=Y.containsLowercaseLetter)||void 0===y||y),Y.isValid&&(Y.isValid=null===(b=Y.containsUppercaseLetter)||void 0===b||b),Y.isValid&&(Y.isValid=null===(S=Y.containsNumericCharacter)||void 0===S||S),Y.isValid&&(Y.isValid=null===(F=Y.containsNonAlphanumericCharacter)||void 0===F||F),Y}validatePasswordLengthOptions(u,d){const m=this.customStrengthOptions.minPasswordLength,y=this.customStrengthOptions.maxPasswordLength;m&&(d.meetsMinPasswordLength=u.length>=m),y&&(d.meetsMaxPasswordLength=u.length<=y)}validatePasswordCharacterOptions(u,d){let m;this.updatePasswordCharacterOptionsStatuses(d,!1,!1,!1,!1);for(let y=0;y<u.length;y++)m=u.charAt(y),this.updatePasswordCharacterOptionsStatuses(d,m>="a"&&m<="z",m>="A"&&m<="Z",m>="0"&&m<="9",this.allowedNonAlphanumericCharacters.includes(m))}updatePasswordCharacterOptionsStatuses(u,d,m,y,b){this.customStrengthOptions.containsLowercaseLetter&&(u.containsLowercaseLetter||(u.containsLowercaseLetter=d)),this.customStrengthOptions.containsUppercaseLetter&&(u.containsUppercaseLetter||(u.containsUppercaseLetter=m)),this.customStrengthOptions.containsNumericCharacter&&(u.containsNumericCharacter||(u.containsNumericCharacter=y)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(u.containsNonAlphanumericCharacter||(u.containsNonAlphanumericCharacter=b))}}class _I{constructor(u,d,m,y){this.app=u,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=m,this.config=y,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wo(this),this.idTokenSubscription=new wo(this),this.beforeStateQueue=new Ek(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ze,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=u.name,this.clientVersion=y.sdkClientVersion}_initializeWithPersistence(u,d){var m=this;return d&&(this._popupRedirectResolver=ht(d)),this._initializationPromise=this.queue((0,I.Z)(function*(){var y,b;if(!m._deleted&&(m.persistenceManager=yield Re.create(m,u),!m._deleted)){if(null!==(y=m._popupRedirectResolver)&&void 0!==y&&y._shouldInitProactively)try{yield m._popupRedirectResolver._initialize(m)}catch{}yield m.initializeCurrentUser(d),m.lastNotifiedUid=(null===(b=m.currentUser)||void 0===b?void 0:b.uid)||null,!m._deleted&&(m._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var u=this;return(0,I.Z)(function*(){if(u._deleted)return;const d=yield u.assertedPersistence.getCurrentUser();if(u.currentUser||d){if(u.currentUser&&d&&u.currentUser.uid===d.uid)return u._currentUser._assign(d),void(yield u.currentUser.getIdToken());yield u._updateCurrentUser(d,!0)}})()}initializeCurrentUser(u){var d=this;return(0,I.Z)(function*(){var m;const y=yield d.assertedPersistence.getCurrentUser();let b=y,S=!1;if(u&&d.config.authDomain){yield d.getOrInitRedirectPersistenceManager();const F=null===(m=d.redirectUser)||void 0===m?void 0:m._redirectEventId,Y=b?._redirectEventId,ge=yield d.tryRedirectSignIn(u);(!F||F===Y)&&ge?.user&&(b=ge.user,S=!0)}if(!b)return d.directlySetCurrentUser(null);if(!b._redirectEventId){if(S)try{yield d.beforeStateQueue.runMiddleware(b)}catch(F){b=y,d._popupRedirectResolver._overrideRedirectResult(d,()=>Promise.reject(F))}return b?d.reloadAndSetCurrentUserOrClear(b):d.directlySetCurrentUser(null)}return ee(d._popupRedirectResolver,d,"argument-error"),yield d.getOrInitRedirectPersistenceManager(),d.redirectUser&&d.redirectUser._redirectEventId===b._redirectEventId?d.directlySetCurrentUser(b):d.reloadAndSetCurrentUserOrClear(b)})()}tryRedirectSignIn(u){var d=this;return(0,I.Z)(function*(){let m=null;try{m=yield d._popupRedirectResolver._completeRedirectFn(d,u,!0)}catch{yield d._setRedirectUser(null)}return m})()}reloadAndSetCurrentUserOrClear(u){var d=this;return(0,I.Z)(function*(){try{yield Eo(u)}catch(m){if("auth/network-request-failed"!==m?.code)return d.directlySetCurrentUser(null)}return d.directlySetCurrentUser(u)})()}useDeviceLanguage(){this.languageCode=function Zo(){if(typeof navigator>"u")return null;const f=navigator;return f.languages&&f.languages[0]||f.language||null}()}_delete(){var u=this;return(0,I.Z)(function*(){u._deleted=!0})()}updateCurrentUser(u){var d=this;return(0,I.Z)(function*(){const m=u?(0,W.m9)(u):null;return m&&ee(m.auth.config.apiKey===d.config.apiKey,d,"invalid-user-token"),d._updateCurrentUser(m&&m._clone(d))})()}_updateCurrentUser(u,d=!1){var m=this;return(0,I.Z)(function*(){if(!m._deleted)return u&&ee(m.tenantId===u.tenantId,m,"tenant-id-mismatch"),d||(yield m.beforeStateQueue.runMiddleware(u)),m.queue((0,I.Z)(function*(){yield m.directlySetCurrentUser(u),m.notifyAuthListeners()}))})()}signOut(){var u=this;return(0,I.Z)(function*(){return yield u.beforeStateQueue.runMiddleware(null),(u.redirectPersistenceManager||u._popupRedirectResolver)&&(yield u._setRedirectUser(null)),u._updateCurrentUser(null,!0)})()}setPersistence(u){var d=this;return this.queue((0,I.Z)(function*(){yield d.assertedPersistence.setPersistence(ht(u))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(u){var d=this;return(0,I.Z)(function*(){d._getPasswordPolicyInternal()||(yield d._updatePasswordPolicy());const m=d._getPasswordPolicyInternal();return m.schemaVersion!==d.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(d._errorFactory.create("unsupported-password-policy-schema-version",{})):m.validatePassword(u)})()}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){var u=this;return(0,I.Z)(function*(){const d=yield function gI(f){return Ul.apply(this,arguments)}(u),m=new wk(d);null===u.tenantId?u._projectPasswordPolicy=m:u._tenantPasswordPolicies[u.tenantId]=m})()}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(u){this._errorFactory=new W.LL("auth","Firebase",u())}onAuthStateChanged(u,d,m){return this.registerStateListener(this.authStateSubscription,u,d,m)}beforeAuthStateChanged(u,d){return this.beforeStateQueue.pushCallback(u,d)}onIdTokenChanged(u,d,m){return this.registerStateListener(this.idTokenSubscription,u,d,m)}authStateReady(){return new Promise((u,d)=>{if(this.currentUser)u();else{const m=this.onAuthStateChanged(()=>{m(),u()},d)}})}revokeAccessToken(u){var d=this;return(0,I.Z)(function*(){if(d.currentUser){const m=yield d.currentUser.getIdToken(),y={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:u,idToken:m};null!=d.tenantId&&(y.tenantId=d.tenantId),yield function T(f,u){return N.apply(this,arguments)}(d,y)}})()}toJSON(){var u;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(u=this._currentUser)||void 0===u?void 0:u.toJSON()}}_setRedirectUser(u,d){var m=this;return(0,I.Z)(function*(){const y=yield m.getOrInitRedirectPersistenceManager(d);return null===u?y.removeCurrentUser():y.setCurrentUser(u)})()}getOrInitRedirectPersistenceManager(u){var d=this;return(0,I.Z)(function*(){if(!d.redirectPersistenceManager){const m=u&&ht(u)||d._popupRedirectResolver;ee(m,d,"argument-error"),d.redirectPersistenceManager=yield Re.create(d,[ht(m._redirectPersistence)],"redirectUser"),d.redirectUser=yield d.redirectPersistenceManager.getCurrentUser()}return d.redirectPersistenceManager})()}_redirectUserForId(u){var d=this;return(0,I.Z)(function*(){var m,y;return d._isInitialized&&(yield d.queue((0,I.Z)(function*(){}))),(null===(m=d._currentUser)||void 0===m?void 0:m._redirectEventId)===u?d._currentUser:(null===(y=d.redirectUser)||void 0===y?void 0:y._redirectEventId)===u?d.redirectUser:null})()}_persistUserIfCurrent(u){var d=this;return(0,I.Z)(function*(){if(u===d.currentUser)return d.queue((0,I.Z)(function*(){return d.directlySetCurrentUser(u)}))})()}_notifyListenersIfCurrent(u){u===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var u,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const m=null!==(d=null===(u=this.currentUser)||void 0===u?void 0:u.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==m&&(this.lastNotifiedUid=m,this.authStateSubscription.next(this.currentUser))}registerStateListener(u,d,m,y){if(this._deleted)return()=>{};const b="function"==typeof d?d:d.next.bind(d);let S=!1;const F=this._isInitialized?Promise.resolve():this._initializationPromise;if(ee(F,this,"internal-error"),F.then(()=>{S||b(this.currentUser)}),"function"==typeof d){const Y=u.addObserver(d,m,y);return()=>{S=!0,Y()}}{const Y=u.addObserver(d);return()=>{S=!0,Y()}}}directlySetCurrentUser(u){var d=this;return(0,I.Z)(function*(){d.currentUser&&d.currentUser!==u&&d._currentUser._stopProactiveRefresh(),u&&d.isProactiveRefreshEnabled&&u._startProactiveRefresh(),d.currentUser=u,u?yield d.assertedPersistence.setCurrentUser(u):yield d.assertedPersistence.removeCurrentUser()})()}queue(u){return this.operations=this.operations.then(u,u),this.operations}get assertedPersistence(){return ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(u){!u||this.frameworks.includes(u)||(this.frameworks.push(u),this.frameworks.sort(),this.clientVersion=Bl(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var u=this;return(0,I.Z)(function*(){var d;const m={"X-Client-Version":u.clientVersion};u.app.options.appId&&(m["X-Firebase-gmpid"]=u.app.options.appId);const y=yield null===(d=u.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getHeartbeatsHeader();y&&(m["X-Firebase-Client"]=y);const b=yield u._getAppCheckToken();return b&&(m["X-Firebase-AppCheck"]=b),m})()}_getAppCheckToken(){var u=this;return(0,I.Z)(function*(){var d;const m=yield null===(d=u.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===d?void 0:d.getToken();return m?.error&&function Ar(f,...u){Cr.logLevel<=kt.in.WARN&&Cr.warn(`Auth (${We.SDK_VERSION}): ${f}`,...u)}(`Error while retrieving App Check token: ${m.error}`),m?.token})()}}function hn(f){return(0,W.m9)(f)}class wo{constructor(u){this.auth=u,this.observer=null,this.addObserver=(0,W.ne)(d=>this.observer=d)}get next(){return ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Zd={loadJS:()=>(0,I.Z)(function*(){throw new Error("Unable to load external scripts")})(),recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mv(f){return Zd.loadJS(f)}function Pv(f){return`__${f}${Math.floor(1e6*Math.random())}`}class Ut{constructor(u){this.type="recaptcha-enterprise",this.auth=hn(u)}verify(u="verify",d=!1){var m=this;return(0,I.Z)(function*(){function b(){return b=(0,I.Z)(function*(F){if(!d){if(null==F.tenantId&&null!=F._agentRecaptchaConfig)return F._agentRecaptchaConfig.siteKey;if(null!=F.tenantId&&void 0!==F._tenantRecaptchaConfigs[F.tenantId])return F._tenantRecaptchaConfigs[F.tenantId].siteKey}return new Promise(function(){var Y=(0,I.Z)(function*(ge,Ce){Yo(F,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Ae=>{if(void 0!==Ae.recaptchaKey){const nn=new Li(Ae);return null==F.tenantId?F._agentRecaptchaConfig=nn:F._tenantRecaptchaConfigs[F.tenantId]=nn,ge(nn.siteKey)}Ce(new Error("recaptcha Enterprise site key undefined"))}).catch(Ae=>{Ce(Ae)})});return function(ge,Ce){return Y.apply(this,arguments)}}())}),b.apply(this,arguments)}function S(F,Y,ge){const Ce=window.grecaptcha;fi(Ce)?Ce.enterprise.ready(()=>{Ce.enterprise.execute(F,{action:u}).then(Ae=>{Y(Ae)}).catch(()=>{Y("NO_RECAPTCHA")})}):ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((F,Y)=>{(function y(F){return b.apply(this,arguments)})(m.auth).then(ge=>{if(!d&&fi(window.grecaptcha))S(ge,F,Y);else{if(typeof window>"u")return void Y(new Error("RecaptchaVerifier is only supported in browser"));let Ce=function yI(){return Zd.recaptchaEnterpriseScript}();0!==Ce.length&&(Ce+=ge),Mv(Ce).then(()=>{S(ge,F,Y)}).catch(Ae=>{Y(Ae)})}}).catch(ge=>{Y(ge)})})})()}}function vI(f,u,d){return Nv.apply(this,arguments)}function Nv(){return(Nv=(0,I.Z)(function*(f,u,d,m=!1){const y=new Ut(f);let b;try{b=yield y.verify(d)}catch{b=yield y.verify(d,!0)}const S=Object.assign({},u);return Object.assign(S,m?{captchaResp:b}:{captchaResponse:b}),Object.assign(S,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(S,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),S})).apply(this,arguments)}function Yd(f,u,d,m){return se.apply(this,arguments)}function se(){return se=(0,I.Z)(function*(f,u,d,m){var y;if(null!==(y=f._getRecaptchaConfig())&&void 0!==y&&y.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const b=yield vI(f,u,d,"getOobCode"===d);return m(f,b)}return m(f,u).catch(function(){var b=(0,I.Z)(function*(S){if("auth/missing-recaptcha-token"===S.code){console.log(`${d} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const F=yield vI(f,u,d,"getOobCode"===d);return m(f,F)}return Promise.reject(S)});return function(S){return b.apply(this,arguments)}}())}),se.apply(this,arguments)}function kv(f){const u=f.indexOf(":");return u<0?"":f.substr(0,u+1)}function cu(f){if(!f)return null;const u=Number(f);return isNaN(u)?null:u}class Ka{constructor(u,d){this.providerId=u,this.signInMethod=d}toJSON(){return vn("not implemented")}_getIdTokenResponse(u){return vn("not implemented")}_linkToIdToken(u,d){return vn("not implemented")}_getReauthenticationResolver(u){return vn("not implemented")}}function Fv(f,u){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:resetPassword",Q(f,u))})).apply(this,arguments)}function Jd(){return(Jd=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function mi(f,u){return eh.apply(this,arguments)}function eh(){return(eh=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:signUp",u)})).apply(this,arguments)}function qt(){return(qt=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:update",Q(f,u))})).apply(this,arguments)}function Sk(f,u){return Lv.apply(this,arguments)}function Lv(){return(Lv=(0,I.Z)(function*(f,u){return re(f,"POST","/v1/accounts:signInWithPassword",Q(f,u))})).apply(this,arguments)}function em(f,u){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:sendOobCode",Q(f,u))})).apply(this,arguments)}function jl(){return(jl=(0,I.Z)(function*(f,u){return em(f,u)})).apply(this,arguments)}function EI(f,u){return nm.apply(this,arguments)}function nm(){return(nm=(0,I.Z)(function*(f,u){return em(f,u)})).apply(this,arguments)}function wI(f,u){return th.apply(this,arguments)}function th(){return(th=(0,I.Z)(function*(f,u){return em(f,u)})).apply(this,arguments)}function rm(){return(rm=(0,I.Z)(function*(f,u){return em(f,u)})).apply(this,arguments)}function im(){return(im=(0,I.Z)(function*(f,u){return re(f,"POST","/v1/accounts:signInWithEmailLink",Q(f,u))})).apply(this,arguments)}function nh(){return(nh=(0,I.Z)(function*(f,u){return re(f,"POST","/v1/accounts:signInWithEmailLink",Q(f,u))})).apply(this,arguments)}class me extends Ka{constructor(u,d,m,y=null){super("password",m),this._email=u,this._password=d,this._tenantId=y}static _fromEmailAndPassword(u,d){return new me(u,d,"password")}static _fromEmailAndCode(u,d,m=null){return new me(u,d,"emailLink",m)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u;if(d?.email&&d?.password){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}_getIdTokenResponse(u){var d=this;return(0,I.Z)(function*(){switch(d.signInMethod){case"password":return Yd(u,{returnSecureToken:!0,email:d._email,password:d._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Sk);case"emailLink":return function na(f,u){return im.apply(this,arguments)}(u,{email:d._email,oobCode:d._password});default:Bt(u,"internal-error")}})()}_linkToIdToken(u,d){var m=this;return(0,I.Z)(function*(){switch(m.signInMethod){case"password":return Yd(u,{idToken:d,returnSecureToken:!0,email:m._email,password:m._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",mi);case"emailLink":return function O(f,u){return nh.apply(this,arguments)}(u,{idToken:d,email:m._email,oobCode:m._password});default:Bt(u,"internal-error")}})()}_getReauthenticationResolver(u){return this._getIdTokenResponse(u)}}function rs(f,u){return uu.apply(this,arguments)}function uu(){return(uu=(0,I.Z)(function*(f,u){return re(f,"POST","/v1/accounts:signInWithIdp",Q(f,u))})).apply(this,arguments)}class Zs extends Ka{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(u){const d=new Zs(u.providerId,u.signInMethod);return u.idToken||u.accessToken?(u.idToken&&(d.idToken=u.idToken),u.accessToken&&(d.accessToken=u.accessToken),u.nonce&&!u.pendingToken&&(d.nonce=u.nonce),u.pendingToken&&(d.pendingToken=u.pendingToken)):u.oauthToken&&u.oauthTokenSecret?(d.accessToken=u.oauthToken,d.secret=u.oauthTokenSecret):Bt("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:y}=d,b=(0,cn._T)(d,["providerId","signInMethod"]);if(!m||!y)return null;const S=new Zs(m,y);return S.idToken=b.idToken||void 0,S.accessToken=b.accessToken||void 0,S.secret=b.secret,S.nonce=b.nonce,S.pendingToken=b.pendingToken||null,S}_getIdTokenResponse(u){return rs(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,rs(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,rs(u,d)}buildRequest(){const u={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)u.pendingToken=this.pendingToken;else{const d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),u.postBody=(0,W.xO)(d)}return u}}function sm(){return(sm=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:sendVerificationCode",Q(f,u))})).apply(this,arguments)}function is(){return(is=(0,I.Z)(function*(f,u){return re(f,"POST","/v1/accounts:signInWithPhoneNumber",Q(f,u))})).apply(this,arguments)}function ss(){return(ss=(0,I.Z)(function*(f,u){const d=yield re(f,"POST","/v1/accounts:signInWithPhoneNumber",Q(f,u));if(d.temporaryProof)throw Jn(f,"account-exists-with-different-credential",d);return d})).apply(this,arguments)}const Ft={USER_NOT_FOUND:"user-not-found"};function hu(){return(hu=(0,I.Z)(function*(f,u){return re(f,"POST","/v1/accounts:signInWithPhoneNumber",Q(f,Object.assign(Object.assign({},u),{operation:"REAUTH"})),Ft)})).apply(this,arguments)}class Io extends Ka{constructor(u){super("phone","phone"),this.params=u}static _fromVerification(u,d){return new Io({verificationId:u,verificationCode:d})}static _fromTokenResponse(u,d){return new Io({phoneNumber:u,temporaryProof:d})}_getIdTokenResponse(u){return function xo(f,u){return is.apply(this,arguments)}(u,this._makeVerificationRequest())}_linkToIdToken(u,d){return function gi(f,u){return ss.apply(this,arguments)}(u,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(u){return function rh(f,u){return hu.apply(this,arguments)}(u,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:u,phoneNumber:d,verificationId:m,verificationCode:y}=this.params;return u&&d?{temporaryProof:u,phoneNumber:d}:{sessionInfo:m,code:y}}toJSON(){const u={providerId:this.providerId};return this.params.phoneNumber&&(u.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(u.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(u.verificationCode=this.params.verificationCode),this.params.verificationId&&(u.verificationId=this.params.verificationId),u}static fromJSON(u){"string"==typeof u&&(u=JSON.parse(u));const{verificationId:d,verificationCode:m,phoneNumber:y,temporaryProof:b}=u;return m||d||y||b?new Io({verificationId:d,verificationCode:m,phoneNumber:y,temporaryProof:b}):null}}class Ao{constructor(u){var d,m,y,b,S,F;const Y=(0,W.zd)((0,W.pd)(u)),ge=null!==(d=Y.apiKey)&&void 0!==d?d:null,Ce=null!==(m=Y.oobCode)&&void 0!==m?m:null,Ae=function Vv(f){switch(f){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(y=Y.mode)&&void 0!==y?y:null);ee(ge&&Ce&&Ae,"argument-error"),this.apiKey=ge,this.operation=Ae,this.code=Ce,this.continueUrl=null!==(b=Y.continueUrl)&&void 0!==b?b:null,this.languageCode=null!==(S=Y.languageCode)&&void 0!==S?S:null,this.tenantId=null!==(F=Y.tenantId)&&void 0!==F?F:null}static parseLink(u){const d=function Co(f){const u=(0,W.zd)((0,W.pd)(f)).link,d=u?(0,W.zd)((0,W.pd)(u)).deep_link_id:null,m=(0,W.zd)((0,W.pd)(f)).deep_link_id;return(m?(0,W.zd)((0,W.pd)(m)).link:null)||m||d||u||f}(u);try{return new Ao(d)}catch{return null}}}let ih=(()=>{class f{constructor(){this.providerId=f.PROVIDER_ID}static credential(d,m){return me._fromEmailAndPassword(d,m)}static credentialWithLink(d,m){const y=Ao.parseLink(m);return ee(y,"argument-error"),me._fromEmailAndCode(d,y.code,y.tenantId)}}return f.PROVIDER_ID="password",f.EMAIL_PASSWORD_SIGN_IN_METHOD="password",f.EMAIL_LINK_SIGN_IN_METHOD="emailLink",f})();class xs{constructor(u){this.providerId=u,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(u){this.defaultLanguageCode=u}setCustomParameters(u){return this.customParameters=u,this}getCustomParameters(){return this.customParameters}}class Za extends xs{constructor(){super(...arguments),this.scopes=[]}addScope(u){return this.scopes.includes(u)||this.scopes.push(u),this}getScopes(){return[...this.scopes]}}class Ya extends Za{static credentialFromJSON(u){const d="string"==typeof u?JSON.parse(u):u;return ee("providerId"in d&&"signInMethod"in d,"argument-error"),Zs._fromParams(d)}credential(u){return this._credential(Object.assign(Object.assign({},u),{nonce:u.rawNonce}))}_credential(u){return ee(u.idToken||u.accessToken,"argument-error"),Zs._fromParams(Object.assign(Object.assign({},u),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(u){return Ya.oauthCredentialFromTaggedObject(u)}static credentialFromError(u){return Ya.oauthCredentialFromTaggedObject(u.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{oauthIdToken:d,oauthAccessToken:m,oauthTokenSecret:y,pendingToken:b,nonce:S,providerId:F}=u;if(!m&&!y&&!d&&!b||!F)return null;try{return new Ya(F)._credential({idToken:d,accessToken:m,nonce:S,pendingToken:b})}catch{return null}}}let $l=(()=>{class f extends Za{constructor(){super("facebook.com")}static credential(d){return Zs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.FACEBOOK_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.FACEBOOK_SIGN_IN_METHOD="facebook.com",f.PROVIDER_ID="facebook.com",f})(),om=(()=>{class f extends Za{constructor(){super("google.com"),this.addScope("profile")}static credential(d,m){return Zs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GOOGLE_SIGN_IN_METHOD,idToken:d,accessToken:m})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:m,oauthAccessToken:y}=d;if(!m&&!y)return null;try{return f.credential(m,y)}catch{return null}}}return f.GOOGLE_SIGN_IN_METHOD="google.com",f.PROVIDER_ID="google.com",f})(),am=(()=>{class f extends Za{constructor(){super("github.com")}static credential(d){return Zs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.GITHUB_SIGN_IN_METHOD,accessToken:d})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d||!("oauthAccessToken"in d)||!d.oauthAccessToken)return null;try{return f.credential(d.oauthAccessToken)}catch{return null}}}return f.GITHUB_SIGN_IN_METHOD="github.com",f.PROVIDER_ID="github.com",f})();class Xa extends Ka{constructor(u,d){super(u,u),this.pendingToken=d}_getIdTokenResponse(u){return rs(u,this.buildRequest())}_linkToIdToken(u,d){const m=this.buildRequest();return m.idToken=d,rs(u,m)}_getReauthenticationResolver(u){const d=this.buildRequest();return d.autoCreate=!1,rs(u,d)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(u){const d="string"==typeof u?JSON.parse(u):u,{providerId:m,signInMethod:y,pendingToken:b}=d;return m&&y&&b&&m===y?new Xa(m,b):null}static _create(u,d){return new Xa(u,d)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class sh extends xs{constructor(u){ee(u.startsWith("saml."),"argument-error"),super(u)}static credentialFromResult(u){return sh.samlCredentialFromTaggedObject(u)}static credentialFromError(u){return sh.samlCredentialFromTaggedObject(u.customData||{})}static credentialFromJSON(u){const d=Xa.fromJSON(u);return ee(d,"argument-error"),d}static samlCredentialFromTaggedObject({_tokenResponse:u}){if(!u)return null;const{pendingToken:d,providerId:m}=u;if(!d||!m)return null;try{return Xa._create(m,d)}catch{return null}}}let os=(()=>{class f extends Za{constructor(){super("twitter.com")}static credential(d,m){return Zs._fromParams({providerId:f.PROVIDER_ID,signInMethod:f.TWITTER_SIGN_IN_METHOD,oauthToken:d,oauthTokenSecret:m})}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthAccessToken:m,oauthTokenSecret:y}=d;if(!m||!y)return null;try{return f.credential(m,y)}catch{return null}}}return f.TWITTER_SIGN_IN_METHOD="twitter.com",f.PROVIDER_ID="twitter.com",f})();function Bv(f,u){return oh.apply(this,arguments)}function oh(){return(oh=(0,I.Z)(function*(f,u){return re(f,"POST","/v1/accounts:signUp",Q(f,u))})).apply(this,arguments)}class as{constructor(u){this.user=u.user,this.providerId=u.providerId,this._tokenResponse=u._tokenResponse,this.operationType=u.operationType}static _fromIdTokenResponse(u,d,m,y=!1){return(0,I.Z)(function*(){const b=yield K._fromIdTokenResponse(u,m,y),S=Uv(m);return new as({user:b,providerId:S,_tokenResponse:m,operationType:d})})()}static _forOperation(u,d,m){return(0,I.Z)(function*(){yield u._updateTokensIfNecessary(m,!0);const y=Uv(m);return new as({user:u,providerId:y,_tokenResponse:m,operationType:d})})()}}function Uv(f){return f.providerId?f.providerId:"phoneNumber"in f?"phone":null}function lm(){return(lm=(0,I.Z)(function*(f){var u;const d=hn(f);if(yield d._initializationPromise,null!==(u=d.currentUser)&&void 0!==u&&u.isAnonymous)return new as({user:d.currentUser,providerId:null,operationType:"signIn"});const m=yield Bv(d,{returnSecureToken:!0}),y=yield as._fromIdTokenResponse(d,"signIn",m,!0);return yield d._updateCurrentUser(y.user),y})).apply(this,arguments)}class fu extends W.ZR{constructor(u,d,m,y){var b;super(d.code,d.message),this.operationType=m,this.user=y,Object.setPrototypeOf(this,fu.prototype),this.customData={appName:u.name,tenantId:null!==(b=u.tenantId)&&void 0!==b?b:void 0,_serverResponse:d.customData._serverResponse,operationType:m}}static _fromErrorAndOperation(u,d,m,y){return new fu(u,d,m,y)}}function jv(f,u,d,m){return("reauthenticate"===u?d._getReauthenticationResolver(f):d._getIdTokenResponse(f)).catch(b=>{throw"auth/multi-factor-auth-required"===b.code?fu._fromErrorAndOperation(f,b,u,m):b})}function Hv(f){return new Set(f.map(({providerId:u})=>u).filter(u=>!!u))}function Mn(){return Mn=(0,I.Z)(function*(f,u){const d=(0,W.m9)(f);yield ah(!0,d,u);const{providerUserInfo:m}=yield function ou(f,u){return pi.apply(this,arguments)}(d.auth,{idToken:yield d.getIdToken(),deleteProvider:[u]}),y=Hv(m||[]);return d.providerData=d.providerData.filter(b=>y.has(b.providerId)),y.has("phone")||(d.phoneNumber=null),yield d.auth._persistUserIfCurrent(d),d}),Mn.apply(this,arguments)}function cm(f,u){return um.apply(this,arguments)}function um(){return(um=(0,I.Z)(function*(f,u,d=!1){const m=yield Vi(f,u._linkToIdToken(f.auth,yield f.getIdToken()),d);return as._forOperation(f,"link",m)})).apply(this,arguments)}function ah(f,u,d){return bt.apply(this,arguments)}function bt(){return(bt=(0,I.Z)(function*(f,u,d){yield Eo(u);const y=!1===f?"provider-already-linked":"no-such-provider";ee(Hv(u.providerData).has(d)===f,u.auth,y)})).apply(this,arguments)}function $v(f,u){return lh.apply(this,arguments)}function lh(){return(lh=(0,I.Z)(function*(f,u,d=!1){const{auth:m}=f,y="reauthenticate";try{const b=yield Vi(f,jv(m,y,u,f),d);ee(b.idToken,m,"internal-error");const S=Dr(b.idToken);ee(S,m,"internal-error");const{sub:F}=S;return ee(f.uid===F,m,"user-mismatch"),as._forOperation(f,y,b)}catch(b){throw"auth/user-not-found"===b?.code&&Bt(m,"user-mismatch"),b}})).apply(this,arguments)}function ne(f,u){return Br.apply(this,arguments)}function Br(){return(Br=(0,I.Z)(function*(f,u,d=!1){const m="signIn",y=yield jv(f,m,u),b=yield as._fromIdTokenResponse(f,m,y);return d||(yield f._updateCurrentUser(b.user)),b})).apply(this,arguments)}function Mt(f,u){return hr.apply(this,arguments)}function hr(){return(hr=(0,I.Z)(function*(f,u){return ne(hn(f),u)})).apply(this,arguments)}function Jr(f,u){return ra.apply(this,arguments)}function ra(){return(ra=(0,I.Z)(function*(f,u){const d=(0,W.m9)(f);return yield ah(!1,d,u.providerId),cm(d,u)})).apply(this,arguments)}function _i(f,u){return ch.apply(this,arguments)}function ch(){return(ch=(0,I.Z)(function*(f,u){return $v((0,W.m9)(f),u)})).apply(this,arguments)}function Gl(){return(Gl=(0,I.Z)(function*(f,u){return re(f,"POST","/v1/accounts:signInWithCustomToken",Q(f,u))})).apply(this,arguments)}function dm(){return dm=(0,I.Z)(function*(f,u){const d=hn(f),m=yield function Gv(f,u){return Gl.apply(this,arguments)}(d,{token:u,returnSecureToken:!0}),y=yield as._fromIdTokenResponse(d,"signIn",m);return yield d._updateCurrentUser(y.user),y}),dm.apply(this,arguments)}class wn{constructor(u,d){this.factorId=u,this.uid=d.mfaEnrollmentId,this.enrollmentTime=new Date(d.enrolledAt).toUTCString(),this.displayName=d.displayName}static _fromServerResponse(u,d){return"phoneInfo"in d?xe._fromServerResponse(u,d):"totpInfo"in d?Ye._fromServerResponse(u,d):Bt(u,"internal-error")}}class xe extends wn{constructor(u){super("phone",u),this.phoneNumber=u.phoneInfo}static _fromServerResponse(u,d){return new xe(d)}}class Ye extends wn{constructor(u){super("totp",u)}static _fromServerResponse(u,d){return new Ye(d)}}function en(f,u,d){var m;ee((null===(m=d.url)||void 0===m?void 0:m.length)>0,f,"invalid-continue-uri"),ee(typeof d.dynamicLinkDomain>"u"||d.dynamicLinkDomain.length>0,f,"invalid-dynamic-link-domain"),u.continueUrl=d.url,u.dynamicLinkDomain=d.dynamicLinkDomain,u.canHandleCodeInApp=d.handleCodeInApp,d.iOS&&(ee(d.iOS.bundleId.length>0,f,"missing-ios-bundle-id"),u.iOSBundleId=d.iOS.bundleId),d.android&&(ee(d.android.packageName.length>0,f,"missing-android-pkg-name"),u.androidInstallApp=d.android.installApp,u.androidMinimumVersionCode=d.android.minimumVersion,u.androidPackageName=d.android.packageName)}function ji(f){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,I.Z)(function*(f){const u=hn(f);u._getPasswordPolicyInternal()&&(yield u._updatePasswordPolicy())})).apply(this,arguments)}function ia(){return(ia=(0,I.Z)(function*(f,u,d){const m=hn(f),y={requestType:"PASSWORD_RESET",email:u,clientType:"CLIENT_TYPE_WEB"};d&&en(m,y,d),yield Yd(m,y,"getOobCode",EI)})).apply(this,arguments)}function sa(){return sa=(0,I.Z)(function*(f,u,d){yield Fv((0,W.m9)(f),{oobCode:u,newPassword:d}).catch(function(){var m=(0,I.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&ji(f),y});return function(y){return m.apply(this,arguments)}}())}),sa.apply(this,arguments)}function Xe(){return Xe=(0,I.Z)(function*(f,u){yield function Dk(f,u){return qt.apply(this,arguments)}((0,W.m9)(f),{oobCode:u})}),Xe.apply(this,arguments)}function zl(f,u){return uh.apply(this,arguments)}function uh(){return(uh=(0,I.Z)(function*(f,u){const d=(0,W.m9)(f),m=yield Fv(d,{oobCode:u}),y=m.requestType;switch(ee(y,d,"internal-error"),y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ee(m.newEmail,d,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ee(m.mfaInfo,d,"internal-error");default:ee(m.email,d,"internal-error")}let b=null;return m.mfaInfo&&(b=wn._fromServerResponse(hn(d),m.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.newEmail:m.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===m.requestType?m.email:m.newEmail)||null,multiFactorInfo:b},operation:y}})).apply(this,arguments)}function Pn(){return(Pn=(0,I.Z)(function*(f,u){const{data:d}=yield zl((0,W.m9)(f),u);return d.email})).apply(this,arguments)}function oa(){return(oa=(0,I.Z)(function*(f,u,d){const m=hn(f),S=yield Yd(m,{returnSecureToken:!0,email:u,password:d,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Bv).catch(Y=>{throw"auth/password-does-not-meet-requirements"===Y.code&&ji(f),Y}),F=yield as._fromIdTokenResponse(m,"signIn",S);return yield m._updateCurrentUser(F.user),F})).apply(this,arguments)}function dh(){return(dh=(0,I.Z)(function*(f,u,d){const m=hn(f),y={requestType:"EMAIL_SIGNIN",email:u,clientType:"CLIENT_TYPE_WEB"};(function b(S,F){ee(F.handleCodeInApp,m,"argument-error"),F&&en(m,S,F)})(y,d),yield Yd(m,y,"getOobCode",wI)})).apply(this,arguments)}function Wl(){return(Wl=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f),y=ih.credentialWithLink(u,d||qn());return ee(y._tenantId===(m.tenantId||null),m,"tenant-id-mismatch"),Mt(m,y)})).apply(this,arguments)}function Et(){return(Et=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:createAuthUri",Q(f,u))})).apply(this,arguments)}function gu(){return gu=(0,I.Z)(function*(f,u){const m={identifier:u,continueUri:Gs()?qn():"http://localhost"},{signinMethods:y}=yield function hh(f,u){return Et.apply(this,arguments)}((0,W.m9)(f),m);return y||[]}),gu.apply(this,arguments)}function ls(){return ls=(0,I.Z)(function*(f,u){const d=(0,W.m9)(f),y={requestType:"VERIFY_EMAIL",idToken:yield f.getIdToken()};u&&en(d.auth,y,u);const{email:b}=yield function tm(f,u){return jl.apply(this,arguments)}(d.auth,y);b!==f.email&&(yield f.reload())}),ls.apply(this,arguments)}function la(){return la=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f),b={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield f.getIdToken(),newEmail:u};d&&en(m.auth,b,d);const{email:S}=yield function Hl(f,u){return rm.apply(this,arguments)}(m.auth,b);S!==f.email&&(yield f.reload())}),la.apply(this,arguments)}function fr(){return(fr=(0,I.Z)(function*(f,u){return te(f,"POST","/v1/accounts:update",u)})).apply(this,arguments)}function ei(){return ei=(0,I.Z)(function*(f,{displayName:u,photoURL:d}){if(void 0===u&&void 0===d)return;const m=(0,W.m9)(f),b={idToken:yield m.getIdToken(),displayName:u,photoUrl:d,returnSecureToken:!0},S=yield Vi(m,function _u(f,u){return fr.apply(this,arguments)}(m.auth,b));m.displayName=S.displayName||null,m.photoURL=S.photoUrl||null;const F=m.providerData.find(({providerId:Y})=>"password"===Y);F&&(F.displayName=m.displayName,F.photoURL=m.photoURL),yield m._updateTokensIfNecessary(S)}),ei.apply(this,arguments)}function ca(f,u,d){return Kl.apply(this,arguments)}function Kl(){return Kl=(0,I.Z)(function*(f,u,d){const{auth:m}=f,b={idToken:yield f.getIdToken(),returnSecureToken:!0};u&&(b.email=u),d&&(b.password=d);const S=yield Vi(f,function Jp(f,u){return Jd.apply(this,arguments)}(m,b));yield f._updateTokensIfNecessary(S,!0)}),Kl.apply(this,arguments)}class ua{constructor(u,d,m={}){this.isNewUser=u,this.providerId=d,this.profile=m}}class qv extends ua{constructor(u,d,m,y){super(u,d,m),this.username=y}}class RI extends ua{constructor(u,d){super(u,"facebook.com",d)}}class Pk extends qv{constructor(u,d){super(u,"github.com",d,"string"==typeof d?.login?d?.login:null)}}class MI extends ua{constructor(u,d){super(u,"google.com",d)}}class PI extends qv{constructor(u,d,m){super(u,"twitter.com",d,m)}}function Nk(f){const{user:u,_tokenResponse:d}=f;return u.isAnonymous&&!d?{providerId:null,isNewUser:!1,profile:null}:function Is(f){var u,d;if(!f)return null;const{providerId:m}=f,y=f.rawUserInfo?JSON.parse(f.rawUserInfo):{},b=f.isNewUser||"identitytoolkit#SignupNewUserResponse"===f.kind;if(!m&&f?.idToken){const S=null===(d=null===(u=Dr(f.idToken))||void 0===u?void 0:u.firebase)||void 0===d?void 0:d.sign_in_provider;if(S)return new ua(b,"anonymous"!==S&&"custom"!==S?S:null)}if(!m)return null;switch(m){case"facebook.com":return new RI(b,y);case"github.com":return new Pk(b,y);case"google.com":return new MI(b,y);case"twitter.com":return new PI(b,y,f.screenName||null);case"custom":case"anonymous":return new ua(b,null);default:return new ua(b,m,y)}}(d)}class Ql{constructor(u,d,m){this.type=u,this.credential=d,this.user=m}static _fromIdtoken(u,d){return new Ql("enroll",u,d)}static _fromMfaPendingCredential(u){return new Ql("signin",u)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(u){var d,m;if(u?.multiFactorSession){if(null!==(d=u.multiFactorSession)&&void 0!==d&&d.pendingCredential)return Ql._fromMfaPendingCredential(u.multiFactorSession.pendingCredential);if(null!==(m=u.multiFactorSession)&&void 0!==m&&m.idToken)return Ql._fromIdtoken(u.multiFactorSession.idToken)}return null}}class Kv{constructor(u,d,m){this.session=u,this.hints=d,this.signInResolver=m}static _fromError(u,d){const m=hn(u),y=d.customData._serverResponse,b=(y.mfaInfo||[]).map(F=>wn._fromServerResponse(m,F));ee(y.mfaPendingCredential,m,"internal-error");const S=Ql._fromMfaPendingCredential(y.mfaPendingCredential);return new Kv(S,b,function(){var F=(0,I.Z)(function*(Y){const ge=yield Y._process(m,S);delete y.mfaInfo,delete y.mfaPendingCredential;const Ce=Object.assign(Object.assign({},y),{idToken:ge.idToken,refreshToken:ge.refreshToken});switch(d.operationType){case"signIn":const Ae=yield as._fromIdTokenResponse(m,d.operationType,Ce);return yield m._updateCurrentUser(Ae.user),Ae;case"reauthenticate":return ee(d.user,m,"internal-error"),as._forOperation(d.user,d.operationType,Ce);default:Bt(m,"internal-error")}});return function(Y){return F.apply(this,arguments)}}())}resolveSignIn(u){var d=this;return(0,I.Z)(function*(){return d.signInResolver(u)})()}}class pm{constructor(u){this.user=u,this.enrolledFactors=[],u._onReload(d=>{d.mfaInfo&&(this.enrolledFactors=d.mfaInfo.map(m=>wn._fromServerResponse(u.auth,m)))})}static _fromUser(u){return new pm(u)}getSession(){var u=this;return(0,I.Z)(function*(){return Ql._fromIdtoken(yield u.user.getIdToken(),u.user)})()}enroll(u,d){var m=this;return(0,I.Z)(function*(){const y=u,b=yield m.getSession(),S=yield Vi(m.user,y._process(m.user.auth,b,d));return yield m.user._updateTokensIfNecessary(S),m.user.reload()})()}unenroll(u){var d=this;return(0,I.Z)(function*(){const m="string"==typeof u?u:u.uid,y=yield d.user.getIdToken();try{const b=yield Vi(d.user,function Zv(f,u){return te(f,"POST","/v2/accounts/mfaEnrollment:withdraw",Q(f,u))}(d.user.auth,{idToken:y,mfaEnrollmentId:m}));d.enrolledFactors=d.enrolledFactors.filter(({uid:S})=>S!==m),yield d.user._updateTokensIfNecessary(b),yield d.user.reload()}catch(b){throw b}})()}}const mm=new WeakMap,gm="__sak";class Yv{constructor(u,d){this.storageRetriever=u,this.type=d}_isAvailable(){try{return this.storage?(this.storage.setItem(gm,"1"),this.storage.removeItem(gm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(u,d){return this.storage.setItem(u,JSON.stringify(d)),Promise.resolve()}_get(u){const d=this.storage.getItem(u);return Promise.resolve(d?JSON.parse(d):null)}_remove(u){return this.storage.removeItem(u),Promise.resolve()}get storage(){return this.storageRetriever()}}const _m=(()=>{class f extends Yv{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(d,m)=>this.onStorageEvent(d,m),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xs(){const f=(0,W.z$)();return Qs(f)||nt(f)}()&&function vt(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Me(),this._shouldAllowMigration=!0}forAllChangedKeys(d){for(const m of Object.keys(this.listeners)){const y=this.storage.getItem(m),b=this.localCache[m];y!==b&&d(m,b,y)}}onStorageEvent(d,m=!1){if(!d.key)return void this.forAllChangedKeys((F,Y,ge)=>{this.notifyListeners(F,ge)});const y=d.key;if(m?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const F=this.storage.getItem(y);if(d.newValue!==F)null!==d.newValue?this.storage.setItem(y,d.newValue):this.storage.removeItem(y);else if(this.localCache[y]===d.newValue&&!m)return}const b=()=>{const F=this.storage.getItem(y);!m&&this.localCache[y]===F||this.notifyListeners(y,F)},S=this.storage.getItem(y);!function Rn(){return(0,W.w1)()&&10===document.documentMode}()||S===d.newValue||d.newValue===d.oldValue?b():setTimeout(b,10)}notifyListeners(d,m){this.localCache[d]=m;const y=this.listeners[d];if(y)for(const b of Array.from(y))b(m&&JSON.parse(m))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((d,m,y)=>{this.onStorageEvent(new StorageEvent("storage",{key:d,oldValue:m,newValue:y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(d,m){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[d]||(this.listeners[d]=new Set,this.localCache[d]=this.storage.getItem(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(d,m){var y=()=>super._set,b=this;return(0,I.Z)(function*(){yield y().call(b,d,m),b.localCache[d]=JSON.stringify(m)})()}_get(d){var m=()=>super._get,y=this;return(0,I.Z)(function*(){const b=yield m().call(y,d);return y.localCache[d]=JSON.stringify(b),b})()}_remove(d){var m=()=>super._remove,y=this;return(0,I.Z)(function*(){yield m().call(y,d),delete y.localCache[d]})()}}return f.type="LOCAL",f})(),Js=(()=>{class f extends Yv{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(d,m){}_removeListener(d,m){}}return f.type="SESSION",f})();let FI=(()=>{class f{constructor(d){this.eventTarget=d,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(d){const m=this.receivers.find(b=>b.isListeningto(d));if(m)return m;const y=new f(d);return this.receivers.push(y),y}isListeningto(d){return this.eventTarget===d}handleEvent(d){var m=this;return(0,I.Z)(function*(){const y=d,{eventId:b,eventType:S,data:F}=y.data,Y=m.handlersMap[S];if(!Y?.size)return;y.ports[0].postMessage({status:"ack",eventId:b,eventType:S});const ge=Array.from(Y).map(function(){var Ae=(0,I.Z)(function*(nn){return nn(y.origin,F)});return function(nn){return Ae.apply(this,arguments)}}()),Ce=yield function gh(f){return Promise.all(f.map(function(){var u=(0,I.Z)(function*(d){try{return{fulfilled:!0,value:yield d}}catch(m){return{fulfilled:!1,reason:m}}});return function(d){return u.apply(this,arguments)}}()))}(ge);y.ports[0].postMessage({status:"done",eventId:b,eventType:S,response:Ce})})()}_subscribe(d,m){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[d]||(this.handlersMap[d]=new Set),this.handlersMap[d].add(m)}_unsubscribe(d,m){this.handlersMap[d]&&m&&this.handlersMap[d].delete(m),(!m||0===this.handlersMap[d].size)&&delete this.handlersMap[d],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return f.receivers=[],f})();function _h(f="",u=10){let d="";for(let m=0;m<u;m++)d+=Math.floor(10*Math.random());return f+d}class Jv{constructor(u){this.target=u,this.handlers=new Set}removeMessageHandler(u){u.messageChannel&&(u.messageChannel.port1.removeEventListener("message",u.onMessage),u.messageChannel.port1.close()),this.handlers.delete(u)}_send(u,d,m=50){var y=this;return(0,I.Z)(function*(){const b=typeof MessageChannel<"u"?new MessageChannel:null;if(!b)throw new Error("connection_unavailable");let S,F;return new Promise((Y,ge)=>{const Ce=_h("",20);b.port1.start();const Ae=setTimeout(()=>{ge(new Error("unsupported_event"))},m);F={messageChannel:b,onMessage(nn){const bi=nn;if(bi.data.eventId===Ce)switch(bi.data.status){case"ack":clearTimeout(Ae),S=setTimeout(()=>{ge(new Error("timeout"))},3e3);break;case"done":clearTimeout(S),Y(bi.data.response);break;default:clearTimeout(Ae),clearTimeout(S),ge(new Error("invalid_response"))}}},y.handlers.add(F),b.port1.addEventListener("message",F.onMessage),y.target.postMessage({eventType:u,eventId:Ce,data:d},[b.port2])}).finally(()=>{F&&y.removeMessageHandler(F)})})()}}function Nn(){return window}function Zl(){return typeof Nn().WorkerGlobalScope<"u"&&"function"==typeof Nn().importScripts}function eb(){return(eb=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ym="firebaseLocalStorageDb",yh="firebaseLocalStorage",Rr="fbase_key";class Yl{constructor(u){this.request=u}toPromise(){return new Promise((u,d)=>{this.request.addEventListener("success",()=>{u(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}}function vh(f,u){return f.transaction([yh],u?"readwrite":"readonly").objectStore(yh)}function bh(){const f=indexedDB.open(ym,1);return new Promise((u,d)=>{f.addEventListener("error",()=>{d(f.error)}),f.addEventListener("upgradeneeded",()=>{const m=f.result;try{m.createObjectStore(yh,{keyPath:Rr})}catch(y){d(y)}}),f.addEventListener("success",(0,I.Z)(function*(){const m=f.result;m.objectStoreNames.contains(yh)?u(m):(m.close(),yield function UI(){const f=indexedDB.deleteDatabase(ym);return new Yl(f).toPromise()}(),u(yield bh()))}))})}function vm(f,u,d){return bm.apply(this,arguments)}function bm(){return(bm=(0,I.Z)(function*(f,u,d){const m=vh(f,!0).put({[Rr]:u,value:d});return new Yl(m).toPromise()})).apply(this,arguments)}function wm(){return(wm=(0,I.Z)(function*(f,u){const d=vh(f,!1).get(u),m=yield new Yl(d).toPromise();return void 0===m?null:m.value})).apply(this,arguments)}function Cs(f,u){const d=vh(f,!0).delete(u);return new Yl(d).toPromise()}const Xl=(()=>{class f{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var d=this;return(0,I.Z)(function*(){return d.db||(d.db=yield bh()),d.db})()}_withRetries(d){var m=this;return(0,I.Z)(function*(){let y=0;for(;;)try{const b=yield m._openDb();return yield d(b)}catch(b){if(y++>3)throw b;m.db&&(m.db.close(),m.db=void 0)}})()}initializeServiceWorkerMessaging(){var d=this;return(0,I.Z)(function*(){return Zl()?d.initializeReceiver():d.initializeSender()})()}initializeReceiver(){var d=this;return(0,I.Z)(function*(){d.receiver=FI._getInstance(function tb(){return Zl()?self:null}()),d.receiver._subscribe("keyChanged",function(){var m=(0,I.Z)(function*(y,b){return{keyProcessed:(yield d._poll()).includes(b.key)}});return function(y,b){return m.apply(this,arguments)}}()),d.receiver._subscribe("ping",function(){var m=(0,I.Z)(function*(y,b){return["keyChanged"]});return function(y,b){return m.apply(this,arguments)}}())})()}initializeSender(){var d=this;return(0,I.Z)(function*(){var m,y;if(d.activeServiceWorker=yield function VI(){return eb.apply(this,arguments)}(),!d.activeServiceWorker)return;d.sender=new Jv(d.activeServiceWorker);const b=yield d.sender._send("ping",{},800);b&&null!==(m=b[0])&&void 0!==m&&m.fulfilled&&null!==(y=b[0])&&void 0!==y&&y.value.includes("keyChanged")&&(d.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(d){var m=this;return(0,I.Z)(function*(){if(m.sender&&m.activeServiceWorker&&function Lk(){var f;return(null===(f=navigator?.serviceWorker)||void 0===f?void 0:f.controller)||null}()===m.activeServiceWorker)try{yield m.sender._send("keyChanged",{key:d},m.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const d=yield bh();return yield vm(d,gm,"1"),yield Cs(d,gm),!0}catch{}return!1})()}_withPendingWrite(d){var m=this;return(0,I.Z)(function*(){m.pendingWrites++;try{yield d()}finally{m.pendingWrites--}})()}_set(d,m){var y=this;return(0,I.Z)(function*(){return y._withPendingWrite((0,I.Z)(function*(){return yield y._withRetries(b=>vm(b,d,m)),y.localCache[d]=m,y.notifyServiceWorker(d)}))})()}_get(d){var m=this;return(0,I.Z)(function*(){const y=yield m._withRetries(b=>function Em(f,u){return wm.apply(this,arguments)}(b,d));return m.localCache[d]=y,y})()}_remove(d){var m=this;return(0,I.Z)(function*(){return m._withPendingWrite((0,I.Z)(function*(){return yield m._withRetries(y=>Cs(y,d)),delete m.localCache[d],m.notifyServiceWorker(d)}))})()}_poll(){var d=this;return(0,I.Z)(function*(){const m=yield d._withRetries(S=>{const F=vh(S,!1).getAll();return new Yl(F).toPromise()});if(!m)return[];if(0!==d.pendingWrites)return[];const y=[],b=new Set;if(0!==m.length)for(const{fbase_key:S,value:F}of m)b.add(S),JSON.stringify(d.localCache[S])!==JSON.stringify(F)&&(d.notifyListeners(S,F),y.push(S));for(const S of Object.keys(d.localCache))d.localCache[S]&&!b.has(S)&&(d.notifyListeners(S,null),y.push(S));return y})()}notifyListeners(d,m){this.localCache[d]=m;const y=this.listeners[d];if(y)for(const b of Array.from(y))b(m)}startPolling(){var d=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return d._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(d,m){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[d]||(this.listeners[d]=new Set,this._get(d)),this.listeners[d].add(m)}_removeListener(d,m){this.listeners[d]&&(this.listeners[d].delete(m),0===this.listeners[d].size&&delete this.listeners[d]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return f.type="LOCAL",f})(),jr=1e12;class HI{constructor(u){this.auth=u,this.counter=jr,this._widgets=new Map}render(u,d){const m=this.counter;return this._widgets.set(m,new $I(u,this.auth.name,d||{})),this.counter++,m}reset(u){var d;const m=u||jr;null===(d=this._widgets.get(m))||void 0===d||d.delete(),this._widgets.delete(m)}getResponse(u){var d;return(null===(d=this._widgets.get(u||jr))||void 0===d?void 0:d.getResponse())||""}execute(u){var d=this;return(0,I.Z)(function*(){var m;return null===(m=d._widgets.get(u||jr))||void 0===m||m.execute(),""})()}}class $I{constructor(u,d,m){this.params=m,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const y="string"==typeof u?document.getElementById(u):u;ee(y,"argument-error",{appName:d}),this.container=y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function GI(f){const u=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<f;m++)u.push(d.charAt(Math.floor(62*Math.random())));return u.join("")}(50);const{callback:u,"expired-callback":d}=this.params;if(u)try{u(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,d)try{d()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const eo=Pv("rcb"),sb=new qs(3e4,6e4);class zI{constructor(){var u;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(u=Nn().grecaptcha)||void 0===u||!u.render)}load(u,d=""){return ee(function ob(f){return f.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(f)}(d),u,"argument-error"),this.shouldResolveImmediately(d)&&Lr(Nn().grecaptcha)?Promise.resolve(Nn().grecaptcha):new Promise((m,y)=>{const b=Nn().setTimeout(()=>{y(Jt(u,"network-request-failed"))},sb.get());Nn()[eo]=()=>{Nn().clearTimeout(b),delete Nn()[eo];const F=Nn().grecaptcha;if(!F||!Lr(F))return void y(Jt(u,"internal-error"));const Y=F.render;F.render=(ge,Ce)=>{const Ae=Y(ge,Ce);return this.counter++,Ae},this.hostLanguage=d,m(F)},Mv(`${function Ik(){return Zd.recaptchaV2Script}()}?${(0,W.xO)({onload:eo,render:"explicit",hl:d})}`).catch(()=>{clearTimeout(b),y(Jt(u,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(u){var d;return!(null===(d=Nn().grecaptcha)||void 0===d||!d.render)&&(u===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ab{load(u){return(0,I.Z)(function*(){return new HI(u)})()}clearedOneInstance(){}}const xm="recaptcha",qI={theme:"light",type:"image"};class qe{constructor(u,d,m=Object.assign({},qI)){this.parameters=m,this.type=xm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(u),this.isInvisible="invisible"===this.parameters.size,ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const y="string"==typeof d?document.getElementById(d):d;ee(y,this.auth,"argument-error"),this.container=y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ab:new zI,this.validateStartingState()}verify(){var u=this;return(0,I.Z)(function*(){u.assertNotDestroyed();const d=yield u.render(),m=u.getAssertedRecaptcha();return m.getResponse(d)||new Promise(b=>{const S=F=>{F&&(u.tokenChangeListeners.delete(S),b(F))};u.tokenChangeListeners.add(S),u.isInvisible&&m.execute(d)})})()}render(){try{this.assertNotDestroyed()}catch(u){return Promise.reject(u)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(u=>{throw this.renderPromise=null,u})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(u=>{this.container.removeChild(u)})}validateStartingState(){ee(!this.parameters.sitekey,this.auth,"argument-error"),ee(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ee(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(u){return d=>{if(this.tokenChangeListeners.forEach(m=>m(d)),"function"==typeof u)u(d);else if("string"==typeof u){const m=Nn()[u];"function"==typeof m&&m(d)}}}assertNotDestroyed(){ee(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var u=this;return(0,I.Z)(function*(){if(yield u.init(),!u.widgetId){let d=u.container;if(!u.isInvisible){const m=document.createElement("div");d.appendChild(m),d=m}u.widgetId=u.getAssertedRecaptcha().render(d,u.parameters)}return u.widgetId})()}init(){var u=this;return(0,I.Z)(function*(){ee(Gs()&&!Zl(),u.auth,"internal-error"),yield function lb(){let f=null;return new Promise(u=>{"complete"!==document.readyState?(f=()=>u(),window.addEventListener("load",f)):u()}).catch(u=>{throw f&&window.removeEventListener("load",f),u})}(),u.recaptcha=yield u._recaptchaLoader.load(u.auth,u.auth.languageCode||void 0);const d=yield function Fl(f){return bo.apply(this,arguments)}(u.auth);ee(d,u.auth,"internal-error"),u.parameters.sitekey=d})()}getAssertedRecaptcha(){return ee(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cb{constructor(u,d){this.verificationId=u,this.onConfirmation=d}confirm(u){const d=Io._fromVerification(this.verificationId,u);return this.onConfirmation(d)}}function Im(){return(Im=(0,I.Z)(function*(f,u,d){const m=hn(f),y=yield xh(m,u,(0,W.m9)(d));return new cb(y,b=>Mt(m,b))})).apply(this,arguments)}function wh(){return(wh=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f);yield ah(!1,m,"phone");const y=yield xh(m.auth,u,(0,W.m9)(d));return new cb(y,b=>Jr(m,b))})).apply(this,arguments)}function Cm(){return(Cm=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f),y=yield xh(m.auth,u,(0,W.m9)(d));return new cb(y,b=>_i(m,b))})).apply(this,arguments)}function xh(f,u,d){return Am.apply(this,arguments)}function Am(){return Am=(0,I.Z)(function*(f,u,d){var m;const y=yield d.verify();try{let b;if(ee("string"==typeof y,f,"argument-error"),ee(d.type===xm,f,"argument-error"),b="string"==typeof u?{phoneNumber:u}:u,"session"in b){const S=b.session;if("phoneNumber"in b)return ee("enroll"===S.type,f,"internal-error"),(yield function tl(f,u){return te(f,"POST","/v2/accounts/mfaEnrollment:start",Q(f,u))}(f,{idToken:S.credential,phoneEnrollmentInfo:{phoneNumber:b.phoneNumber,recaptchaToken:y}})).phoneSessionInfo.sessionInfo;{ee("signin"===S.type,f,"internal-error");const F=(null===(m=b.multiFactorHint)||void 0===m?void 0:m.uid)||b.multiFactorUid;return ee(F,f,"missing-multi-factor-info"),(yield function Eh(f,u){return te(f,"POST","/v2/accounts/mfaSignIn:start",Q(f,u))}(f,{mfaPendingCredential:S.credential,mfaEnrollmentId:F,phoneSignInInfo:{recaptchaToken:y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:S}=yield function xI(f,u){return sm.apply(this,arguments)}(f,{phoneNumber:b.phoneNumber,recaptchaToken:y});return S}}finally{d._reset()}}),Am.apply(this,arguments)}function Tm(){return(Tm=(0,I.Z)(function*(f,u){yield cm((0,W.m9)(f),u)})).apply(this,arguments)}let ie=(()=>{class f{constructor(d){this.providerId=f.PROVIDER_ID,this.auth=hn(d)}verifyPhoneNumber(d,m){return xh(this.auth,d,(0,W.m9)(m))}static credential(d,m){return Io._fromVerification(d,m)}static credentialFromResult(d){return f.credentialFromTaggedObject(d)}static credentialFromError(d){return f.credentialFromTaggedObject(d.customData||{})}static credentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{phoneNumber:m,temporaryProof:y}=d;return m&&y?Io._fromTokenResponse(m,y):null}}return f.PROVIDER_ID="phone",f.PHONE_SIGN_IN_METHOD="phone",f})();function ft(f,u){return u?ht(u):(ee(f._popupRedirectResolver,f,"argument-error"),f._popupRedirectResolver)}class Do extends Ka{constructor(u){super("custom","custom"),this.params=u}_getIdTokenResponse(u){return rs(u,this._buildIdpRequest())}_linkToIdToken(u,d){return rs(u,this._buildIdpRequest(d))}_getReauthenticationResolver(u){return rs(u,this._buildIdpRequest())}_buildIdpRequest(u){const d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return u&&(d.idToken=u),d}}function nl(f){return ne(f.auth,new Do(f),f.bypassAuthState)}function Mr(f){const{auth:u,user:d}=f;return ee(d,u,"internal-error"),$v(d,new Do(f),f.bypassAuthState)}function ub(f){return rl.apply(this,arguments)}function rl(){return(rl=(0,I.Z)(function*(f){const{auth:u,user:d}=f;return ee(d,u,"internal-error"),cm(d,new Do(f),f.bypassAuthState)})).apply(this,arguments)}class As{constructor(u,d,m,y,b=!1){this.auth=u,this.resolver=m,this.user=y,this.bypassAuthState=b,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){var u=this;return new Promise(function(){var d=(0,I.Z)(function*(m,y){u.pendingPromise={resolve:m,reject:y};try{u.eventManager=yield u.resolver._initialize(u.auth),yield u.onExecution(),u.eventManager.registerConsumer(u)}catch(b){u.reject(b)}});return function(m,y){return d.apply(this,arguments)}}())}onAuthEvent(u){var d=this;return(0,I.Z)(function*(){const{urlResponse:m,sessionId:y,postBody:b,tenantId:S,error:F,type:Y}=u;if(F)return void d.reject(F);const ge={auth:d.auth,requestUri:m,sessionId:y,tenantId:S||void 0,postBody:b||void 0,user:d.user,bypassAuthState:d.bypassAuthState};try{d.resolve(yield d.getIdpTask(Y)(ge))}catch(Ce){d.reject(Ce)}})()}onError(u){this.reject(u)}getIdpTask(u){switch(u){case"signInViaPopup":case"signInViaRedirect":return nl;case"linkViaPopup":case"linkViaRedirect":return ub;case"reauthViaPopup":case"reauthViaRedirect":return Mr;default:Bt(this.auth,"internal-error")}}resolve(u){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(u),this.unregisterAndCleanUp()}reject(u){dn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(u),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Dm=new qs(2e3,1e4);function Rm(){return(Rm=(0,I.Z)(function*(f,u,d){const m=hn(f);ut(f,u,xs);const y=ft(m,d);return new Ch(m,"signInViaPopup",u,y).executeNotNull()})).apply(this,arguments)}function Ih(){return(Ih=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f);ut(m.auth,u,xs);const y=ft(m.auth,d);return new Ch(m.auth,"reauthViaPopup",u,y,m).executeNotNull()})).apply(this,arguments)}function Ts(){return(Ts=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f);ut(m.auth,u,xs);const y=ft(m.auth,d);return new Ch(m.auth,"linkViaPopup",u,y,m).executeNotNull()})).apply(this,arguments)}let Ch=(()=>{class f extends As{constructor(d,m,y,b,S){super(d,m,b,S),this.provider=y,this.authWindow=null,this.pollId=null,f.currentPopupAction&&f.currentPopupAction.cancel(),f.currentPopupAction=this}executeNotNull(){var d=this;return(0,I.Z)(function*(){const m=yield d.execute();return ee(m,d.auth,"internal-error"),m})()}onExecution(){var d=this;return(0,I.Z)(function*(){dn(1===d.filter.length,"Popup operations only handle one event");const m=_h();d.authWindow=yield d.resolver._openPopup(d.auth,d.provider,d.filter[0],m),d.authWindow.associatedEvent=m,d.resolver._originValidation(d.auth).catch(y=>{d.reject(y)}),d.resolver._isIframeWebStorageSupported(d.auth,y=>{y||d.reject(Jt(d.auth,"web-storage-unsupported"))}),d.pollUserCancellation()})()}get eventId(){var d;return(null===(d=this.authWindow)||void 0===d?void 0:d.associatedEvent)||null}cancel(){this.reject(Jt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,f.currentPopupAction=null}pollUserCancellation(){const d=()=>{var m,y;this.pollId=null!==(y=null===(m=this.authWindow)||void 0===m?void 0:m.window)&&void 0!==y&&y.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Jt(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(d,Dm.get())};d()}}return f.currentPopupAction=null,f})();const tc="pendingRedirect",Hi=new Map;class ZI extends As{constructor(u,d,m=!1){super(u,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,m),this.eventId=null}execute(){var u=()=>super.execute,d=this;return(0,I.Z)(function*(){let m=Hi.get(d.auth._key());if(!m){try{const b=(yield function db(f,u){return Mm.apply(this,arguments)}(d.resolver,d.auth))?yield u().call(d):null;m=()=>Promise.resolve(b)}catch(y){m=()=>Promise.reject(y)}Hi.set(d.auth._key(),m)}return d.bypassAuthState||Hi.set(d.auth._key(),()=>Promise.resolve(null)),m()})()}onAuthEvent(u){var d=()=>super.onAuthEvent,m=this;return(0,I.Z)(function*(){if("signInViaRedirect"===u.type)return d().call(m,u);if("unknown"!==u.type){if(u.eventId){const y=yield m.auth._redirectUserForId(u.eventId);if(y)return m.user=y,d().call(m,u);m.resolve(null)}}else m.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function Mm(){return(Mm=(0,I.Z)(function*(f,u){const d=hb(u),m=Th(f);if(!(yield m._isAvailable()))return!1;const y="true"===(yield m._get(d));return yield m._remove(d),y})).apply(this,arguments)}function Pm(f,u){return yu.apply(this,arguments)}function yu(){return(yu=(0,I.Z)(function*(f,u){return Th(f)._set(hb(u),"true")})).apply(this,arguments)}function Ah(f,u){Hi.set(f._key(),u)}function Th(f){return ht(f._redirectPersistence)}function hb(f){return dr(tc,f.config.apiKey,f.name)}function fb(f,u,d){return function km(f,u,d){return Dh.apply(this,arguments)}(f,u,d)}function Dh(){return(Dh=(0,I.Z)(function*(f,u,d){const m=hn(f);ut(f,u,xs),yield m._initializationPromise;const y=ft(m,d);return yield Pm(y,m),y._openRedirect(m,u,"signInViaRedirect")})).apply(this,arguments)}function pb(f,u,d){return function mb(f,u,d){return Sh.apply(this,arguments)}(f,u,d)}function Sh(){return(Sh=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f);ut(m.auth,u,xs),yield m.auth._initializationPromise;const y=ft(m.auth,d);yield Pm(y,m.auth);const b=yield gb(m);return y._openRedirect(m.auth,u,"reauthViaRedirect",b)})).apply(this,arguments)}function Om(f,u,d){return function YI(f,u,d){return Fm.apply(this,arguments)}(f,u,d)}function Fm(){return(Fm=(0,I.Z)(function*(f,u,d){const m=(0,W.m9)(f);ut(m.auth,u,xs),yield m.auth._initializationPromise;const y=ft(m.auth,d);yield ah(!1,m,u.providerId),yield Pm(y,m.auth);const b=yield gb(m);return y._openRedirect(m.auth,u,"linkViaRedirect",b)})).apply(this,arguments)}function So(){return(So=(0,I.Z)(function*(f,u){return yield hn(f)._initializationPromise,tn(f,u,!1)})).apply(this,arguments)}function tn(f,u){return Lm.apply(this,arguments)}function Lm(){return(Lm=(0,I.Z)(function*(f,u,d=!1){const m=hn(f),y=ft(m,u),S=yield new ZI(m,y,d).execute();return S&&!d&&(delete S.user._redirectEventId,yield m._persistUserIfCurrent(S.user),yield m._setRedirectUser(null,u)),S})).apply(this,arguments)}function gb(f){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,I.Z)(function*(f){const u=_h(`${f.uid}:::`);return f._redirectEventId=u,yield f.auth._setRedirectUser(f),yield f.auth._persistUserIfCurrent(f),u})).apply(this,arguments)}class Bm{constructor(u){this.auth=u,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(u){this.consumers.add(u),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,u)&&(this.sendToConsumer(this.queuedRedirectEvent,u),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(u){this.consumers.delete(u)}onEvent(u){if(this.hasEventBeenHandled(u))return!1;let d=!1;return this.consumers.forEach(m=>{this.isEventForConsumer(u,m)&&(d=!0,this.sendToConsumer(u,m),this.saveEventToCache(u))}),this.hasHandledPotentialRedirect||!function da(f){switch(f.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return vu(f);default:return!1}}(u)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=u,d=!0)),d}sendToConsumer(u,d){var m;if(u.error&&!vu(u)){const y=(null===(m=u.error.code)||void 0===m?void 0:m.split("auth/")[1])||"internal-error";d.onError(Jt(this.auth,y))}else d.onAuthEvent(u)}isEventForConsumer(u,d){const m=null===d.eventId||!!u.eventId&&u.eventId===d.eventId;return d.filter.includes(u.type)&&m}hasEventBeenHandled(u){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Um(u))}saveEventToCache(u){this.cachedEventUids.add(Um(u)),this.lastProcessedEventTime=Date.now()}}function Um(f){return[f.type,f.eventId,f.sessionId,f.tenantId].filter(u=>u).join("-")}function vu({type:f,error:u}){return"unknown"===f&&"auth/no-auth-event"===u?.code}function _b(f){return nc.apply(this,arguments)}function nc(){return(nc=(0,I.Z)(function*(f,u={}){return te(f,"GET","/v1/projects",u)})).apply(this,arguments)}const Rh=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mh=/^https?/;function Ph(){return(Ph=(0,I.Z)(function*(f){if(f.config.emulator)return;const{authorizedDomains:u}=yield _b(f);for(const d of u)try{if(yb(d))return}catch{}Bt(f,"unauthorized-domain")})).apply(this,arguments)}function yb(f){const u=qn(),{protocol:d,hostname:m}=new URL(u);if(f.startsWith("chrome-extension://")){const S=new URL(f);return""===S.hostname&&""===m?"chrome-extension:"===d&&f.replace("chrome-extension://","")===u.replace("chrome-extension://",""):"chrome-extension:"===d&&S.hostname===m}if(!Mh.test(d))return!1;if(Rh.test(f))return m===f;const y=f.replace(/\./g,"\\.");return new RegExp("^(.+\\."+y+"|"+y+")$","i").test(m)}const JI=new qs(3e4,6e4);function il(){const f=Nn().___jsl;if(f?.H)for(const u of Object.keys(f.H))if(f.H[u].r=f.H[u].r||[],f.H[u].L=f.H[u].L||[],f.H[u].r=[...f.H[u].L],f.CP)for(let d=0;d<f.CP.length;d++)f.CP[d]=null}let Nh=null;const Hm=new qs(5e3,15e3),Uk="__/auth/iframe",eC="emulator/auth/iframe",tC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Hk(f){const u=f.config;ee(u.authDomain,f,"auth-domain-config-required");const d=u.emulator?H(u,eC):`https://${f.config.authDomain}/${Uk}`,m={apiKey:u.apiKey,appName:f.name,v:We.SDK_VERSION},y=jk.get(f.config.apiHost);y&&(m.eid=y);const b=f._getFrameworks();return b.length&&(m.fw=b.join(",")),`${d}?${(0,W.xO)(m).slice(1)}`}function rc(){return rc=(0,I.Z)(function*(f){const u=yield function Bk(f){return Nh=Nh||function bu(f){return new Promise((u,d)=>{var m,y,b;function S(){il(),gapi.load("gapi.iframes",{callback:()=>{u(gapi.iframes.getContext())},ontimeout:()=>{il(),d(Jt(f,"network-request-failed"))},timeout:JI.get()})}if(null!==(y=null===(m=Nn().gapi)||void 0===m?void 0:m.iframes)&&void 0!==y&&y.Iframe)u(gapi.iframes.getContext());else{if(null===(b=Nn().gapi)||void 0===b||!b.load){const F=Pv("iframefcb");return Nn()[F]=()=>{gapi.load?S():d(Jt(f,"network-request-failed"))},Mv(`${function Ck(){return Zd.gapiScript}()}?onload=${F}`).catch(Y=>d(Y))}S()}}).catch(u=>{throw Nh=null,u})}(f),Nh}(f),d=Nn().gapi;return ee(d,f,"internal-error"),u.open({where:document.body,url:Hk(f),messageHandlersFilter:d.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tC,dontclear:!0},m=>new Promise(function(){var y=(0,I.Z)(function*(b,S){yield m.restyle({setHideOnLeave:!1});const F=Jt(f,"network-request-failed"),Y=Nn().setTimeout(()=>{S(F)},Hm.get());function ge(){Nn().clearTimeout(Y),b(m)}m.ping(ge).then(ge,()=>{S(F)})});return function(b,S){return y.apply(this,arguments)}}()))}),rc.apply(this,arguments)}const nC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Gm{constructor(u){this.window=u,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const to="__/auth/handler",iC="emulator/auth/handler",Fh=encodeURIComponent("fac");function Eu(f,u,d,m,y,b){return Lh.apply(this,arguments)}function Lh(){return(Lh=(0,I.Z)(function*(f,u,d,m,y,b){ee(f.config.authDomain,f,"auth-domain-config-required"),ee(f.config.apiKey,f,"invalid-api-key");const S={apiKey:f.config.apiKey,appName:f.name,authType:d,redirectUrl:m,v:We.SDK_VERSION,eventId:y};if(u instanceof xs){u.setDefaultLanguage(f.languageCode),S.providerId=u.providerId||"",(0,W.xb)(u.getCustomParameters())||(S.customParameters=JSON.stringify(u.getCustomParameters()));for(const[Ce,Ae]of Object.entries(b||{}))S[Ce]=Ae}if(u instanceof Za){const Ce=u.getScopes().filter(Ae=>""!==Ae);Ce.length>0&&(S.scopes=Ce.join(","))}f.tenantId&&(S.tid=f.tenantId);const F=S;for(const Ce of Object.keys(F))void 0===F[Ce]&&delete F[Ce];const Y=yield f._getAppCheckToken(),ge=Y?`#${Fh}=${encodeURIComponent(Y)}`:"";return`${function zm({config:f}){return f.emulator?H(f,iC):`https://${f.authDomain}/${to}`}(f)}?${(0,W.xO)(F).slice(1)}${ge}`})).apply(this,arguments)}const wu="webStorageSupport",qm=class sC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Js,this._completeRedirectFn=tn,this._overrideRedirectResult=Ah}_openPopup(u,d,m,y){var b=this;return(0,I.Z)(function*(){var S;dn(null===(S=b.eventManagers[u._key()])||void 0===S?void 0:S.manager,"_initialize() not called before _openPopup()");const F=yield Eu(u,d,m,qn(),y);return function bb(f,u,d,m=500,y=600){const b=Math.max((window.screen.availHeight-y)/2,0).toString(),S=Math.max((window.screen.availWidth-m)/2,0).toString();let F="";const Y=Object.assign(Object.assign({},nC),{width:m.toString(),height:y.toString(),top:b,left:S}),ge=(0,W.z$)().toLowerCase();d&&(F=Qd(ge)?"_blank":d),Qt(ge)&&(u=u||"http://localhost",Y.scrollbars="yes");const Ce=Object.entries(Y).reduce((nn,[bi,Pr])=>`${nn}${bi}=${Pr},`,"");if(function L(f=(0,W.z$)()){var u;return nt(f)&&!(null===(u=window.navigator)||void 0===u||!u.standalone)}(ge)&&"_self"!==F)return function rC(f,u){const d=document.createElement("a");d.href=f,d.target=u;const m=document.createEvent("MouseEvent");m.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),d.dispatchEvent(m)}(u||"",F),new Gm(null);const Ae=window.open(u||"",F,Ce);ee(Ae,f,"popup-blocked");try{Ae.focus()}catch{}return new Gm(Ae)}(u,F,_h())})()}_openRedirect(u,d,m,y){var b=this;return(0,I.Z)(function*(){return yield b._originValidation(u),function LI(f){Nn().location.href=f}(yield Eu(u,d,m,qn(),y)),new Promise(()=>{})})()}_initialize(u){const d=u._key();if(this.eventManagers[d]){const{manager:y,promise:b}=this.eventManagers[d];return y?Promise.resolve(y):(dn(b,"If manager is not set, promise should be"),b)}const m=this.initAndGetManager(u);return this.eventManagers[d]={promise:m},m.catch(()=>{delete this.eventManagers[d]}),m}initAndGetManager(u){var d=this;return(0,I.Z)(function*(){const m=yield function vb(f){return rc.apply(this,arguments)}(u),y=new Bm(u);return m.register("authEvent",b=>(ee(b?.authEvent,u,"invalid-auth-event"),{status:y.onEvent(b.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),d.eventManagers[u._key()]={manager:y},d.iframes[u._key()]=m,y})()}_isIframeWebStorageSupported(u,d){this.iframes[u._key()].send(wu,{type:wu},y=>{var b;const S=null===(b=y?.[0])||void 0===b?void 0:b[wu];void 0!==S&&d(!!S),Bt(u,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function jm(f){return Ph.apply(this,arguments)}(u)),this.originValidationPromises[d]}get _shouldInitProactively(){return Me()||Qs()||nt()}};class Eb{constructor(u){this.factorId=u}_process(u,d,m){switch(d.type){case"enroll":return this._finalizeEnroll(u,d.credential,m);case"signin":return this._finalizeSignIn(u,d.credential);default:return vn("unexpected MultiFactorSessionType")}}}class Vh extends Eb{constructor(u){super("phone"),this.credential=u}static _fromCredential(u){return new Vh(u)}_finalizeEnroll(u,d,m){return function Qv(f,u){return te(f,"POST","/v2/accounts/mfaEnrollment:finalize",Q(f,u))}(u,{idToken:d,displayName:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(u,d){return function vi(f,u){return te(f,"POST","/v2/accounts/mfaSignIn:finalize",Q(f,u))}(u,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let wb=(()=>{class f{constructor(){}static assertion(d){return Vh._fromCredential(d)}}return f.FACTOR_ID="phone",f})();var Wm="@firebase/auth";class sc{constructor(u){this.auth=u,this.internalListeners=new Map}getUid(){var u;return this.assertAuthConfigured(),(null===(u=this.auth.currentUser)||void 0===u?void 0:u.uid)||null}getToken(u){var d=this;return(0,I.Z)(function*(){return d.assertAuthConfigured(),yield d.auth._initializationPromise,d.auth.currentUser?{accessToken:yield d.auth.currentUser.getIdToken(u)}:null})()}addAuthTokenListener(u){if(this.assertAuthConfigured(),this.internalListeners.has(u))return;const d=this.auth.onIdTokenChanged(m=>{u(m?.stsTokenManager.accessToken||null)});this.internalListeners.set(u,d),this.updateProactiveRefresh()}removeAuthTokenListener(u){this.assertAuthConfigured();const d=this.internalListeners.get(u);d&&(this.internalListeners.delete(u),d(),this.updateProactiveRefresh())}assertAuthConfigured(){ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function cs(){return window}(0,W.Pz)("authIdTokenMaxAge"),function xk(f){Zd=f}({loadJS:f=>new Promise((u,d)=>{const m=document.createElement("script");m.setAttribute("src",f),m.onload=u,m.onerror=y=>{const b=Jt("internal-error");b.customData=y,d(b)},m.type="text/javascript",m.charset="UTF-8",function oc(){var f,u;return null!==(u=null===(f=document.getElementsByTagName("head"))||void 0===f?void 0:f[0])&&void 0!==u?u:document}().appendChild(m)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),function Ve(f){(0,We._registerComponent)(new Dn.wA("auth",(u,{options:d})=>{const m=u.getProvider("app").getImmediate(),y=u.getProvider("heartbeat"),b=u.getProvider("app-check-internal"),{apiKey:S,authDomain:F}=m.options;ee(S&&!S.includes(":"),"invalid-api-key",{appName:m.name});const Y={apiKey:S,authDomain:F,clientPlatform:f,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bl(f)},ge=new _I(m,y,b,Y);return function bI(f,u){const d=u?.persistence||[],m=(Array.isArray(d)?d:[d]).map(ht);u?.errorMap&&f._updateErrorMap(u.errorMap),f._initializeWithPersistence(m,u?.popupRedirectResolver)}(ge,d),ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((u,d,m)=>{u.getProvider("auth-internal").initialize()})),(0,We._registerComponent)(new Dn.wA("auth-internal",u=>{const d=hn(u.getProvider("auth").getImmediate());return new sc(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,We.registerVersion)(Wm,"1.6.0",function oC(f){switch(f){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(f)),(0,We.registerVersion)(Wm,"1.6.0","esm2017")}("Browser");function fa(){return fa=(0,I.Z)(function*(f,u,d){var m;const{BuildInfo:y}=cs();dn(u.sessionId,"AuthEvent did not contain a session ID");const b=yield function Qk(f){return Cb.apply(this,arguments)}(u.sessionId),S={};return nt()?S.ibi=y.packageName:P()?S.apn=y.packageName:Bt(f,"operation-not-supported-in-this-environment"),y.displayName&&(S.appDisplayName=y.displayName),S.sessionId=b,Eu(f,d,u.type,void 0,null!==(m=u.eventId)&&void 0!==m?m:void 0,S)}),fa.apply(this,arguments)}function Xm(){return(Xm=(0,I.Z)(function*(f){const{BuildInfo:u}=cs(),d={};nt()?d.iosBundleId=u.packageName:P()?d.androidPackageName=u.packageName:Bt(f,"operation-not-supported-in-this-environment"),yield _b(f,d)})).apply(this,arguments)}function Ib(){return(Ib=(0,I.Z)(function*(f,u,d){const{cordova:m}=cs();let y=()=>{};try{yield new Promise((b,S)=>{let F=null;function Y(){var Ae;b();const nn=null===(Ae=m.plugins.browsertab)||void 0===Ae?void 0:Ae.close;"function"==typeof nn&&nn(),"function"==typeof d?.close&&d.close()}function ge(){F||(F=window.setTimeout(()=>{S(Jt(f,"redirect-cancelled-by-user"))},2e3))}function Ce(){"visible"===document?.visibilityState&&ge()}u.addPassiveListener(Y),document.addEventListener("resume",ge,!1),P()&&document.addEventListener("visibilitychange",Ce,!1),y=()=>{u.removePassiveListener(Y),document.removeEventListener("resume",ge,!1),document.removeEventListener("visibilitychange",Ce,!1),F&&window.clearTimeout(F)}})}finally{y()}})).apply(this,arguments)}function Cb(){return(Cb=(0,I.Z)(function*(f){const u=function Cu(f){if(dn(/[0-9a-zA-Z]+/.test(f),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(f);const u=new ArrayBuffer(f.length),d=new Uint8Array(u);for(let m=0;m<f.length;m++)d[m]=f.charCodeAt(m);return d}(f),d=yield crypto.subtle.digest("SHA-256",u);return Array.from(new Uint8Array(d)).map(y=>y.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class Yk extends Bm{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(u=>{this.resolveInialized=u})}addPassiveListener(u){this.passiveListeners.add(u)}removePassiveListener(u){this.passiveListeners.delete(u)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(u){return this.resolveInialized(),this.passiveListeners.forEach(d=>d(u)),super.onEvent(u)}initialized(){var u=this;return(0,I.Z)(function*(){yield u.initPromise})()}}function ac(f){return Jm.apply(this,arguments)}function Jm(){return(Jm=(0,I.Z)(function*(f){const u=yield Uh()._get(lc(f));return u&&(yield Uh()._remove(lc(f))),u})).apply(this,arguments)}function Au(){const f=[];for(let d=0;d<20;d++){const m=Math.floor(62*Math.random());f.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(m))}return f.join("")}function Uh(){return ht(_m)}function lc(f){return dr("authEvent",f.config.apiKey,f.name)}function eg(f){if(!f?.includes("?"))return{};const[u,...d]=f.split("?");return(0,W.zd)(d.join("?"))}const $i=class Xk{constructor(){this._redirectPersistence=Js,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=tn,this._overrideRedirectResult=Ah}_initialize(u){var d=this;return(0,I.Z)(function*(){const m=u._key();let y=d.eventManagers.get(m);return y||(y=new Yk(u),d.eventManagers.set(m,y),d.attachCallbackListeners(u,y)),y})()}_openPopup(u){Bt(u,"operation-not-supported-in-this-environment")}_openRedirect(u,d,m,y){var b=this;return(0,I.Z)(function*(){!function Kk(f){var u,d,m,y,b,S,F,Y,ge,Ce;const Ae=cs();ee("function"==typeof(null===(u=Ae?.universalLinks)||void 0===u?void 0:u.subscribe),f,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ee(typeof(null===(d=Ae?.BuildInfo)||void 0===d?void 0:d.packageName)<"u",f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ee("function"==typeof(null===(b=null===(y=null===(m=Ae?.cordova)||void 0===m?void 0:m.plugins)||void 0===y?void 0:y.browsertab)||void 0===b?void 0:b.openUrl),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Y=null===(F=null===(S=Ae?.cordova)||void 0===S?void 0:S.plugins)||void 0===F?void 0:F.browsertab)||void 0===Y?void 0:Y.isAvailable),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ee("function"==typeof(null===(Ce=null===(ge=Ae?.cordova)||void 0===ge?void 0:ge.InAppBrowser)||void 0===Ce?void 0:Ce.open),f,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(u);const S=yield b._initialize(u);yield S.initialized(),S.resetRedirect(),function Nm(){Hi.clear()}(),yield b._originValidation(u);const F=function tr(f,u,d=null){return{type:u,eventId:d,urlResponse:null,sessionId:Au(),postBody:null,tenantId:f.tenantId,error:Jt(f,"no-auth-event")}}(u,m,y);yield function lC(f,u){return Uh()._set(lc(f),u)}(u,F);const Y=yield function Ym(f,u,d){return fa.apply(this,arguments)}(u,F,d),ge=yield function qk(f){const{cordova:u}=cs();return new Promise(d=>{u.plugins.browsertab.isAvailable(m=>{let y=null;m?u.plugins.browsertab.openUrl(f):y=u.InAppBrowser.open(f,function It(f=(0,W.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(f)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(f)}()?"_blank":"_system","location=yes"),d(y)})})}(Y);return function Wk(f,u,d){return Ib.apply(this,arguments)}(u,S,ge)})()}_isIframeWebStorageSupported(u,d){throw new Error("Method not implemented.")}_originValidation(u){const d=u._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=function zk(f){return Xm.apply(this,arguments)}(u)),this.originValidationPromises[d]}attachCallbackListeners(u,d){const{universalLinks:m,handleOpenURL:y,BuildInfo:b}=cs(),S=setTimeout((0,I.Z)(function*(){yield ac(u),d.onEvent(jh())}),500),F=function(){var Ce=(0,I.Z)(function*(Ae){clearTimeout(S);const nn=yield ac(u);let bi=null;nn&&Ae?.url&&(bi=function us(f,u){var d,m;const y=function cC(f){const u=eg(f),d=u.link?decodeURIComponent(u.link):void 0,m=eg(d).link,y=u.deep_link_id?decodeURIComponent(u.deep_link_id):void 0;return eg(y).link||y||m||d||f}(u);if(y.includes("/__/auth/callback")){const b=eg(y),S=b.firebaseError?function Tu(f){try{return JSON.parse(f)}catch{return null}}(decodeURIComponent(b.firebaseError)):null,F=null===(m=null===(d=S?.code)||void 0===d?void 0:d.split("auth/"))||void 0===m?void 0:m[1],Y=F?Jt(F):null;return Y?{type:f.type,eventId:f.eventId,tenantId:f.tenantId,error:Y,urlResponse:null,sessionId:null,postBody:null}:{type:f.type,eventId:f.eventId,tenantId:f.tenantId,sessionId:f.sessionId,urlResponse:y,postBody:null}}return null}(nn,Ae.url)),d.onEvent(bi||jh())});return function(nn){return Ce.apply(this,arguments)}}();typeof m<"u"&&"function"==typeof m.subscribe&&m.subscribe(null,F);const Y=y,ge=`${b.packageName.toLowerCase()}://`;cs().handleOpenURL=function(){var Ce=(0,I.Z)(function*(Ae){if(Ae.toLowerCase().startsWith(ge)&&F({url:Ae}),"function"==typeof Y)try{Y(Ae)}catch(nn){console.error(nn)}});return function(Ae){return Ce.apply(this,arguments)}}()}};function jh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Jt("no-auth-event")}}function Du(){var f;return(null===(f=self?.location)||void 0===f?void 0:f.protocol)||null}function Tb(f=(0,W.z$)()){return!("file:"!==Du()&&"ionic:"!==Du()&&"capacitor:"!==Du()||!f.toLowerCase().match(/iphone|ipad|ipod|android/))}function Db(){try{const f=self.localStorage,u=_h();if(f)return f.setItem(u,"1"),f.removeItem(u),!function Hh(f=(0,W.z$)()){return function pC(){return(0,W.w1)()&&11===document?.documentMode}()||function tg(f=(0,W.z$)()){return/Edge\/\d+/.test(f)}(f)}()||(0,W.hl)()}catch{return no()&&(0,W.hl)()}return!1}function no(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ng(){return(function hC(){return"http:"===Du()||"https:"===Du()}()||(0,W.ru)()||Tb())&&!function fC(){return(0,W.b$)()||(0,W.UG)()}()&&Db()&&!no()}function uc(){return Tb()&&typeof document<"u"}function $h(){return($h=(0,I.Z)(function*(){return!!uc()&&new Promise(f=>{const u=setTimeout(()=>{f(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(u),f(!0)})})})).apply(this,arguments)}const Hr={LOCAL:"local",NONE:"none",SESSION:"session"},dc=ee,Sb="persistence";function pa(f){return sl.apply(this,arguments)}function sl(){return(sl=(0,I.Z)(function*(f){yield f._initializationPromise;const u=yC(),d=dr(Sb,f.config.apiKey,f.name);u&&u.setItem(d,f._getPersistence())})).apply(this,arguments)}function yC(){var f;try{return(null===(f=function rg(){return typeof window<"u"?window:null}())||void 0===f?void 0:f.sessionStorage)||null}catch{return null}}const Rb=ee;class ma{constructor(){this.browserResolver=ht(qm),this.cordovaResolver=ht($i),this.underlyingResolver=null,this._redirectPersistence=Js,this._completeRedirectFn=tn,this._overrideRedirectResult=Ah}_initialize(u){var d=this;return(0,I.Z)(function*(){return yield d.selectUnderlyingResolver(),d.assertedUnderlyingResolver._initialize(u)})()}_openPopup(u,d,m,y){var b=this;return(0,I.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._openPopup(u,d,m,y)})()}_openRedirect(u,d,m,y){var b=this;return(0,I.Z)(function*(){return yield b.selectUnderlyingResolver(),b.assertedUnderlyingResolver._openRedirect(u,d,m,y)})()}_isIframeWebStorageSupported(u,d){this.assertedUnderlyingResolver._isIframeWebStorageSupported(u,d)}_originValidation(u){return this.assertedUnderlyingResolver._originValidation(u)}get _shouldInitProactively(){return uc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Rb(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var u=this;return(0,I.Z)(function*(){if(u.underlyingResolver)return;const d=yield function mC(){return $h.apply(this,arguments)}();u.underlyingResolver=d?u.cordovaResolver:u.browserResolver})()}}function vC(f){return f.unwrap()}function EC(f){return Su(f)}function Su(f){const{_tokenResponse:u}=f instanceof W.ZR?f.customData:f;if(!u)return null;if(!(f instanceof W.ZR)&&"temporaryProof"in u&&"phoneNumber"in u)return ie.credentialFromResult(f);const d=u.providerId;if(!d||d===wt.PASSWORD)return null;let m;switch(d){case wt.GOOGLE:m=om;break;case wt.FACEBOOK:m=$l;break;case wt.GITHUB:m=am;break;case wt.TWITTER:m=os;break;default:const{oauthIdToken:y,oauthAccessToken:b,oauthTokenSecret:S,pendingToken:F,nonce:Y}=u;return b||S||y||F?F?d.startsWith("saml.")?Xa._create(d,F):Zs._fromParams({providerId:d,signInMethod:d,pendingToken:F,idToken:y,accessToken:b}):new Ya(d).credential({idToken:y,accessToken:b,rawNonce:Y}):null}return f instanceof W.ZR?m.credentialFromError(f):m.credentialFromResult(f)}function ri(f,u){return u.catch(d=>{throw d instanceof W.ZR&&function wC(f,u){var d;const m=null===(d=u.customData)||void 0===d?void 0:d._tokenResponse;if("auth/multi-factor-auth-required"===u?.code)u.resolver=new e1(f,function Fk(f,u){var d;const m=(0,W.m9)(f),y=u;return ee(u.customData.operationType,m,"argument-error"),ee(null===(d=y.customData._serverResponse)||void 0===d?void 0:d.mfaPendingCredential,m,"argument-error"),Kv._fromError(m,y)}(f,u));else if(m){const y=Su(u),b=u;y&&(b.credential=y,b.tenantId=m.tenantId||void 0,b.email=m.email||void 0,b.phoneNumber=m.phoneNumber||void 0)}}(f,d),d}).then(d=>{const y=d.user;return{operationType:d.operationType,credential:EC(d),additionalUserInfo:Nk(d),user:ro.getOrCreate(y)}})}function ig(f,u){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,I.Z)(function*(f,u){const d=yield u;return{verificationId:d.verificationId,confirm:m=>ri(f,d.confirm(m))}})).apply(this,arguments)}class e1{constructor(u,d){this.resolver=d,this.auth=function bC(f){return f.wrapped()}(u)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(u){return ri(vC(this.auth),this.resolver.resolveSignIn(u))}}class ro{constructor(u){this._delegate=u,this.multiFactor=function kI(f){const u=(0,W.m9)(f);return mm.has(u)||mm.set(u,pm._fromUser(u)),mm.get(u)}(u)}static getOrCreate(u){return ro.USER_MAP.has(u)||ro.USER_MAP.set(u,new ro(u)),ro.USER_MAP.get(u)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(u){return this._delegate.getIdTokenResult(u)}getIdToken(u){return this._delegate.getIdToken(u)}linkAndRetrieveDataWithCredential(u){return this.linkWithCredential(u)}linkWithCredential(u){var d=this;return(0,I.Z)(function*(){return ri(d.auth,Jr(d._delegate,u))})()}linkWithPhoneNumber(u,d){var m=this;return(0,I.Z)(function*(){return ig(m.auth,function KI(f,u,d){return wh.apply(this,arguments)}(m._delegate,u,d))})()}linkWithPopup(u){var d=this;return(0,I.Z)(function*(){return ri(d.auth,function ti(f,u,d){return Ts.apply(this,arguments)}(d._delegate,u,ma))})()}linkWithRedirect(u){var d=this;return(0,I.Z)(function*(){return yield pa(hn(d.auth)),Om(d._delegate,u,ma)})()}reauthenticateAndRetrieveDataWithCredential(u){return this.reauthenticateWithCredential(u)}reauthenticateWithCredential(u){var d=this;return(0,I.Z)(function*(){return ri(d.auth,_i(d._delegate,u))})()}reauthenticateWithPhoneNumber(u,d){return ig(this.auth,function ec(f,u,d){return Cm.apply(this,arguments)}(this._delegate,u,d))}reauthenticateWithPopup(u){return ri(this.auth,function Vk(f,u,d){return Ih.apply(this,arguments)}(this._delegate,u,ma))}reauthenticateWithRedirect(u){var d=this;return(0,I.Z)(function*(){return yield pa(hn(d.auth)),pb(d._delegate,u,ma)})()}sendEmailVerification(u){return function zv(f,u){return ls.apply(this,arguments)}(this._delegate,u)}unlink(u){var d=this;return(0,I.Z)(function*(){return yield function DI(f,u){return Mn.apply(this,arguments)}(d._delegate,u),d})()}updateEmail(u){return function yi(f,u){return ca((0,W.m9)(f),u,null)}(this._delegate,u)}updatePassword(u){return function hm(f,u){return ca((0,W.m9)(f),null,u)}(this._delegate,u)}updatePhoneNumber(u){return function QI(f,u){return Tm.apply(this,arguments)}(this._delegate,u)}updateProfile(u){return function Mk(f,u){return ei.apply(this,arguments)}(this._delegate,u)}verifyBeforeUpdateEmail(u,d){return function fh(f,u,d){return la.apply(this,arguments)}(this._delegate,u,d)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}ro.USER_MAP=new WeakMap;const zh=ee;let Mb=(()=>{class f{constructor(d,m){if(this.app=d,m.isInitialized())return this._delegate=m.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:y}=d.options;zh(y,"invalid-api-key",{appName:d.name}),zh(y,"invalid-api-key",{appName:d.name});const b=typeof window<"u"?ma:void 0;this._delegate=m.initialize({options:{persistence:sg(y,d.name),popupRedirectResolver:b}}),this._delegate._updateErrorMap(Ir),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?ro.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(d){this._delegate.languageCode=d}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(d){this._delegate.tenantId=d}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(d,m){!function Yp(f,u,d){const m=hn(f);ee(m._canInitEmulator,m,"emulator-config-failed"),ee(/^https?:\/\//.test(u),m,"invalid-emulator-scheme");const y=!!d?.disableWarnings,b=kv(u),{host:S,port:F}=function Ov(f){const u=kv(f),d=/(\/\/)?([^?#/]+)/.exec(f.substr(u.length));if(!d)return{host:"",port:null};const m=d[2].split("@").pop()||"",y=/^(\[[^\]]+\])(:|$)/.exec(m);if(y){const b=y[1];return{host:b,port:cu(m.substr(b.length+1))}}{const[b,S]=m.split(":");return{host:b,port:cu(S)}}}(u);m.config.emulator={url:`${b}//${S}${null===F?"":`:${F}`}/`},m.settings.appVerificationDisabledForTesting=!0,m.emulatorConfig=Object.freeze({host:S,port:F,protocol:b.replace(":",""),options:Object.freeze({disableWarnings:y})}),y||function Xp(){function f(){const u=document.createElement("p"),d=u.style;u.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",u.classList.add("firebase-emulator-warning"),document.body.appendChild(u)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",f):f())}()}(this._delegate,d,m)}applyActionCode(d){return function el(f,u){return Xe.apply(this,arguments)}(this._delegate,d)}checkActionCode(d){return zl(this._delegate,d)}confirmPasswordReset(d,m){return function Wn(f,u,d){return sa.apply(this,arguments)}(this._delegate,d,m)}createUserWithEmailAndPassword(d,m){var y=this;return(0,I.Z)(function*(){return ri(y._delegate,function pu(f,u,d){return oa.apply(this,arguments)}(y._delegate,d,m))})()}fetchProvidersForEmail(d){return this.fetchSignInMethodsForEmail(d)}fetchSignInMethodsForEmail(d){return function Rk(f,u){return gu.apply(this,arguments)}(this._delegate,d)}isSignInWithEmailLink(d){return function aa(f,u){const d=Ao.parseLink(u);return"EMAIL_SIGNIN"===d?.operation}(0,d)}getRedirectResult(){var d=this;return(0,I.Z)(function*(){zh(ng(),d._delegate,"operation-not-supported-in-this-environment");const m=yield function ni(f,u){return So.apply(this,arguments)}(d._delegate,ma);return m?ri(d._delegate,Promise.resolve(m)):{credential:null,user:null}})()}addFrameworkForLogging(d){!function cc(f,u){hn(f)._logFramework(u)}(this._delegate,d)}onAuthStateChanged(d,m,y){const{next:b,error:S,complete:F}=Pb(d,m,y);return this._delegate.onAuthStateChanged(b,S,F)}onIdTokenChanged(d,m,y){const{next:b,error:S,complete:F}=Pb(d,m,y);return this._delegate.onIdTokenChanged(b,S,F)}sendSignInLinkToEmail(d,m){return function mu(f,u,d){return dh.apply(this,arguments)}(this._delegate,d,m)}sendPasswordResetEmail(d,m){return function Ur(f,u,d){return ia.apply(this,arguments)}(this._delegate,d,m||void 0)}setPersistence(d){var m=this;return(0,I.Z)(function*(){let y;switch(function gC(f,u){dc(Object.values(Hr).includes(u),f,"invalid-persistence-type"),(0,W.b$)()?dc(u!==Hr.SESSION,f,"unsupported-persistence-type"):(0,W.UG)()?dc(u===Hr.NONE,f,"unsupported-persistence-type"):no()?dc(u===Hr.NONE||u===Hr.LOCAL&&(0,W.hl)(),f,"unsupported-persistence-type"):dc(u===Hr.NONE||Db(),f,"unsupported-persistence-type")}(m._delegate,d),d){case Hr.SESSION:y=Js;break;case Hr.LOCAL:y=(yield ht(Xl)._isAvailable())?Xl:_m;break;case Hr.NONE:y=on;break;default:return Bt("argument-error",{appName:m._delegate.name})}return m._delegate.setPersistence(y)})()}signInAndRetrieveDataWithCredential(d){return this.signInWithCredential(d)}signInAnonymously(){return ri(this._delegate,function TI(f){return lm.apply(this,arguments)}(this._delegate))}signInWithCredential(d){return ri(this._delegate,Mt(this._delegate,d))}signInWithCustomToken(d){return ri(this._delegate,function SI(f,u){return dm.apply(this,arguments)}(this._delegate,d))}signInWithEmailAndPassword(d,m){return ri(this._delegate,function Ys(f,u,d){return Mt((0,W.m9)(f),ih.credential(u,d)).catch(function(){var m=(0,I.Z)(function*(y){throw"auth/password-does-not-meet-requirements"===y.code&&ji(f),y});return function(y){return m.apply(this,arguments)}}())}(this._delegate,d,m))}signInWithEmailLink(d,m){return ri(this._delegate,function To(f,u,d){return Wl.apply(this,arguments)}(this._delegate,d,m))}signInWithPhoneNumber(d,m){return ig(this._delegate,function WI(f,u,d){return Im.apply(this,arguments)}(this._delegate,d,m))}signInWithPopup(d){var m=this;return(0,I.Z)(function*(){return zh(ng(),m._delegate,"operation-not-supported-in-this-environment"),ri(m._delegate,function Sm(f,u,d){return Rm.apply(this,arguments)}(m._delegate,d,ma))})()}signInWithRedirect(d){var m=this;return(0,I.Z)(function*(){return zh(ng(),m._delegate,"operation-not-supported-in-this-environment"),yield pa(m._delegate),fb(m._delegate,d,ma)})()}updateCurrentUser(d){return this._delegate.updateCurrentUser(d)}verifyPasswordResetCode(d){return function ql(f,u){return Pn.apply(this,arguments)}(this._delegate,d)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return f.Persistence=Hr,f})();function Pb(f,u,d){let m=f;"function"!=typeof f&&({next:m,error:u,complete:d}=f);const y=m;return{next:S=>y(S&&ro.getOrCreate(S)),error:u,complete:d}}function sg(f,u){const d=function _C(f,u){const d=yC();if(!d)return[];const m=dr(Sb,f,u);switch(d.getItem(m)){case Hr.NONE:return[on];case Hr.LOCAL:return[Xl,Js];case Hr.SESSION:return[Js];default:return[]}}(f,u);if(typeof self<"u"&&!d.includes(Xl)&&d.push(Xl),typeof window<"u")for(const m of[_m,Js])d.includes(m)||d.push(m);return d.includes(on)||d.push(on),d}class Nb{constructor(){this.providerId="phone",this._delegate=new ie(vC(ke.Z.auth()))}static credential(u,d){return ie.credential(u,d)}verifyPhoneNumber(u,d){return this._delegate.verifyPhoneNumber(u,d)}unwrap(){return this._delegate}}Nb.PHONE_SIGN_IN_METHOD=ie.PHONE_SIGN_IN_METHOD,Nb.PROVIDER_ID=ie.PROVIDER_ID;const t1=ee;class og{constructor(u,d,m=ke.Z.app()){var y;t1(null===(y=m.options)||void 0===y?void 0:y.apiKey,"invalid-api-key",{appName:m.name}),this._delegate=new qe(m.auth(),u,d),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function r1(f){f.INTERNAL.registerComponent(new Dn.wA("auth-compat",u=>{const d=u.getProvider("app-compat").getImmediate(),m=u.getProvider("auth");return new Mb(d,m)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:ih,FacebookAuthProvider:$l,GithubAuthProvider:am,GoogleAuthProvider:om,OAuthProvider:Ya,SAMLAuthProvider:sh,PhoneAuthProvider:Nb,PhoneMultiFactorGenerator:wb,RecaptchaVerifier:og,TwitterAuthProvider:os,Auth:Mb,AuthCredential:Ka,Error:W.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),f.registerVersion("@firebase/auth-compat","0.5.2")}(ke.Z)},861:(vo,xr,st)=>{function I(W,We,kt,cn,Dn,cr,wt){try{var he=W[cr](wt),fe=he.value}catch(Pe){return void kt(Pe)}he.done?We(fe):Promise.resolve(fe).then(cn,Dn)}function ke(W){return function(){var We=this,kt=arguments;return new Promise(function(cn,Dn){var cr=W.apply(We,kt);function wt(fe){I(cr,cn,Dn,wt,he,"next",fe)}function he(fe){I(cr,cn,Dn,wt,he,"throw",fe)}wt(void 0)})}}st.d(xr,{Z:()=>ke})},582:(vo,xr,st)=>{function We(H,q){var z={};for(var J in H)Object.prototype.hasOwnProperty.call(H,J)&&q.indexOf(J)<0&&(z[J]=H[J]);if(null!=H&&"function"==typeof Object.getOwnPropertySymbols){var Q=0;for(J=Object.getOwnPropertySymbols(H);Q<J.length;Q++)q.indexOf(J[Q])<0&&Object.prototype.propertyIsEnumerable.call(H,J[Q])&&(z[J[Q]]=H[J[Q]])}return z}function Pe(H,q,z,J){return new(z||(z=Promise))(function(te,be){function Fe(xt){try{re(J.next(xt))}catch(bn){be(bn)}}function Sn(xt){try{re(J.throw(xt))}catch(bn){be(bn)}}function re(xt){xt.done?te(xt.value):function Q(te){return te instanceof z?te:new z(function(be){be(te)})}(xt.value).then(Fe,Sn)}re((J=J.apply(H,q||[])).next())})}function un(H){return this instanceof un?(this.v=H,this):new un(H)}function Bt(H,q,z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Q,J=z.apply(H,q||[]),te=[];return Q={},be("next"),be("throw"),be("return"),Q[Symbol.asyncIterator]=function(){return this},Q;function be(sn){J[sn]&&(Q[sn]=function(Tr){return new Promise(function(Jn,Lr){te.push([sn,Tr,Jn,Lr])>1||Fe(sn,Tr)})})}function Fe(sn,Tr){try{!function Sn(sn){sn.value instanceof un?Promise.resolve(sn.value.v).then(re,xt):bn(te[0][2],sn)}(J[sn](Tr))}catch(Jn){bn(te[0][3],Jn)}}function re(sn){Fe("next",sn)}function xt(sn){Fe("throw",sn)}function bn(sn,Tr){sn(Tr),te.shift(),te.length&&Fe(te[0][0],te[0][1])}}function hi(H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var z,q=H[Symbol.asyncIterator];return q?q.call(H):(H=function Vt(H){var q="function"==typeof Symbol&&Symbol.iterator,z=q&&H[q],J=0;if(z)return z.call(H);if(H&&"number"==typeof H.length)return{next:function(){return H&&J>=H.length&&(H=void 0),{value:H&&H[J++],done:!H}}};throw new TypeError(q?"Object is not iterable.":"Symbol.iterator is not defined.")}(H),z={},J("next"),J("throw"),J("return"),z[Symbol.asyncIterator]=function(){return this},z);function J(te){z[te]=H[te]&&function(be){return new Promise(function(Fe,Sn){!function Q(te,be,Fe,Sn){Promise.resolve(Sn).then(function(re){te({value:re,done:Fe})},be)}(Fe,Sn,(be=H[te](be)).done,be.value)})}}}st.d(xr,{FC:()=>Bt,KL:()=>hi,_T:()=>We,mG:()=>Pe,qq:()=>un}),"function"==typeof SuppressedError&&SuppressedError}},vo=>{vo(vo.s=653)}]);